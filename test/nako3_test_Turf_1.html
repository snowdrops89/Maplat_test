<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Maplat なでしこプラグインのテスト</title>

  <!-- Maplatを使うために必要なCSS -->
  <link rel="stylesheet" href="https://unpkg.com/@maplat/ui@0.9.0/dist/assets/maplat.css">
</head>
<body>
<!-- なでしこのプログラム -->
<script type="なでしこ">
#-----------------------------------------------------------------------
＃----- 設定 --------------------
カウンタは空オブジェクト。
座標取得中＝オフ。取得座標＝空配列。Aは空。
直線＝[[140.76033681119014,41.79635583006893],[140.75360256611546,41.79599719142311]]
道程＝[[140.76033681119014,41.79635583006893],[140.758478619304,41.79556157762579],[140.75721413722778,41.79432302386439],[140.75619270341997,41.79496643842464],[140.75497595771563,41.79462275418183],[140.75484194014732,41.79560505340086],[140.75360256611546,41.79599719142311]]
観光マーカー＝[[140.7567252299387,41.79693537609609],[140.7558194475979,41.79698382783212],[140.75395646590007,41.79463859482169],[140.7567252299387,41.79693537609609]]

＃＃--- HTML作成 -----
DOM親要素にMaplatHTML&「<div id="ボタン"></div>」をHTML設定。

＃＃--- ボタン作成 -----
「#ボタン」にDOM親要素設定。
「距離:」のラベル作成。
「直線距離」のボタン作成し、直線距離ボタンに代入。
「道程距離」のボタン作成し、道程距離ボタンに代入。
「面積:」のラベル作成。
「面積」のボタン作成し、面積ボタンに代入。
「中心:」のラベル作成。
「中心点」のボタン作成し、中心点ボタンに代入。
「重心(centroid)」のボタン作成し、重心点ボタンに代入。
「重心(centerOfMass)」のボタン作成し、重心２ボタンに代入。
「　　　」のラベル作成。
「描画クリア」のボタン作成し、クリアボタンに代入。

#---CSS設定 -----
「#mainview」に{
　"position": "absolute",
　"top": "0%",
　"bottom": "5%",
　"左": "0%",
　"右": "0%"
}をDOMスタイル一括設定。

「#ボタン」に{
　"position": "absolute",
　"top": "95%",
　"bottom": "0%",
　"左": "0%",
　"右": "0%"
}をDOMスタイル一括設定。

「#ボタン span」に{
　"マージン": "0 0 0 10px"
}をDOMスタイル一括設定。

「#ボタン button」に{
　"マージン": "1px 2px"
}をDOMスタイル一括設定。

＃＃--- マーカー設定 -----
マーカー青＝「pois/img/blue_marker.png」
マーカー赤＝「pois/img/red_marker.png」

＃----- メイン -------------------
＃＃--- UIボタンの追加 ------
Maplatマーカー非表示ボタンはオン。
Maplat地図境界表示ボタンはオン。
Maplat共有ボタンはオン。

＃＃--- Maplat作成 ------
「nako3_test」のMaplat作成した時には、
　2.5で古地図ズーム。

＃＃＃--- イベント ------
　＃距離
　直線距離ボタンをクリックした時には
　　Maplat線色は青色。Maplat線太さは5。
　　直線で線引く。
　　0.1秒後には、
　　　lengthとは変数＝直線の道程取得。//Turf.length
　　　distanceとは変数＝直線[0]から直線[1]までの距離取得。//Turf.distance
　　　「道程取得(Turf.length)　：{length}m{改行}距離取得(Turf.distance)：{distance}m」を言う。
　　ここまで。
　ここまで。

　道程距離ボタンをクリックした時には
　　Maplat線色は赤色。Maplat線太さは5。
　　道程で線引く。
　　0.1秒後には、
　　　lengthとは変数＝道程の道程取得。//Turf.length
　　　distanceとは変数＝0。
　　　((道程の要素数)-1)回
　　　　distance＝distance＋(道程[回数-1]から道程[回数]までの距離取得)。//Turf.distance
　　　ここまで。
　　　「道程取得(Turf.length)　：{length}m{改行}距離取得(Turf.distance)：{distance}m」を言う。
　　ここまで。
　ここまで。

　＃面積
　面積ボタンをクリックした時には、
　　Maplat線色は黒色。Maplat塗色は「rgba(0,0,0,.3)」。Maplat線太さは3。
　　Aは道程を配列複製。
　　Aに道程[0]を配列追加。
　　道程の面塗る。
　　0.1秒後には
　　　(Aの面積取得)&「㎡」を言う。
　　ここまで。
　ここまで。

　＃中心
　中心点ボタンをクリックした時には、
　　「史跡」のレイヤー隠す。
　　Maplat線色は水色。Maplat線太さは10。
　　観光マーカーの要素数回
　　　観光マーカー[回数-1]に点打つ。
　　ここまで。
　　観光マーカーの中心点に点打つ。
　ここまで。

　重心点ボタンをクリックした時には、
　　「史跡」のレイヤー隠す。
　　Maplat線色は「#009900」。Maplat塗り色は「rgba(100,255,100,.3)」。Maplat線太さは2。
　　観光マーカーの面塗る。
　　Maplat線太さは10。
　　観光マーカーの重心点に点打つ
　ここまで。


　重心２ボタンをクリックした時には、
　　「史跡」のレイヤー隠す。
　　Maplat線色は「#999900」。Maplat塗り色は「rgba(255,255,100,.3)」。Maplat線太さは2。
　　観光マーカーの面塗る。
　　Maplat線太さは10。
　　『(function(lnglats){
      var polygon = turf.helpers.polygon(lnglats);
      var centerOfMass = turf.centerOfMass(polygon);
      return centerOfMass.geometry.coordinates})』をcenterOfMassに代入。
　　重心２＝centerOfMassを[[観光マーカー]]でJS関数実行。
　　重心２に点打つ。
　ここまで。

　＃他
　クリアボタンをクリックした時には、
　　線消す。「史跡」のレイヤー表示。
　ここまで。

ここまで。
＃＃--- Maplatここまで -----

#-----------------------------------------------------------------------
</script>
<!-- Maplatを使うために必要なスクリプト -->
<!--<script src="https://unpkg.com/@maplat/ui@0.9.0/dist/assets/maplat.js"></script> -->
<script src="assets/maplat.js"></script>
<!-- なでしこを使うために必要なスクリプト -->
<script type="text/javascript" src="https://nadesi.com/v3/cdn.php?v=3.2.1&f=release/wnako3.js&run"></script>
<!-- なでしこでMaplatを使うために必要なプラグイン -->
<script type="text/javascript" src="https://snowdrops89.github.io/nako3_plugin_Maplat/Plugin_Maplat.js"></script>
<script type="text/javascript" src="https://snowdrops89.github.io/nako3_plugin_Maplat/Plugin_Turf.js"></script>
<!-- Turf.jsを使うために必要なスクリプト -->
<script src='https://unpkg.com/@turf/turf@6.3.0/turf.min.js'></script>
</body>
</html>