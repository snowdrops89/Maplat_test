/*! For license information please see maplat.js.LICENSE.txt */
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=279)}([function(t,e,n){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=0;function o(t){return t.ol_uid||(t.ol_uid=String(++i))}var a="6.1.1"},function(t,e,n){"use strict";e.a={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",WHEEL:"wheel"}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a}));var r=n(3);function i(t,e,n,r,i){if(r&&r!==t&&(n=n.bind(r)),i){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function o(t,e,n,r){return i(t,e,n,r,!0)}function a(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Object(r.b)(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a}));var r="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,i=arguments.length;r<i;++r){var o=arguments[r];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n};function i(t){for(var e in t)delete t[e]}var o="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e};function a(t){var e;for(e in t)return!1;return!e}},function(t,e,n){"use strict";n.r(e),n.d(e,"earthRadius",(function(){return r})),n.d(e,"factors",(function(){return i})),n.d(e,"unitsFactors",(function(){return o})),n.d(e,"areaFactors",(function(){return a})),n.d(e,"feature",(function(){return s})),n.d(e,"geometry",(function(){return u})),n.d(e,"point",(function(){return c})),n.d(e,"points",(function(){return l})),n.d(e,"polygon",(function(){return h})),n.d(e,"polygons",(function(){return p})),n.d(e,"lineString",(function(){return f})),n.d(e,"lineStrings",(function(){return d})),n.d(e,"featureCollection",(function(){return g})),n.d(e,"multiLineString",(function(){return v})),n.d(e,"multiPoint",(function(){return y})),n.d(e,"multiPolygon",(function(){return m})),n.d(e,"geometryCollection",(function(){return _})),n.d(e,"round",(function(){return b})),n.d(e,"radiansToLength",(function(){return x})),n.d(e,"lengthToRadians",(function(){return w})),n.d(e,"lengthToDegrees",(function(){return E})),n.d(e,"bearingToAzimuth",(function(){return S})),n.d(e,"radiansToDegrees",(function(){return C})),n.d(e,"degreesToRadians",(function(){return T})),n.d(e,"convertLength",(function(){return I})),n.d(e,"convertArea",(function(){return O})),n.d(e,"isNumber",(function(){return M})),n.d(e,"isObject",(function(){return P})),n.d(e,"validateBBox",(function(){return L})),n.d(e,"validateId",(function(){return R}));var r=6371008.8,i={centimeters:100*r,centimetres:100*r,degrees:r/111325,feet:3.28084*r,inches:39.37*r,kilometers:r/1e3,kilometres:r/1e3,meters:r,metres:r,miles:r/1609.344,millimeters:1e3*r,millimetres:1e3*r,nauticalmiles:r/1852,radians:1,yards:r/1.0936},o={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/r,yards:1/1.0936},a={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function s(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function u(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return c(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return h(e).geometry;case"MultiPoint":return y(e).geometry;case"MultiLineString":return v(e).geometry;case"MultiPolygon":return m(e).geometry;default:throw new Error(t+" is invalid")}}function c(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!M(t[0])||!M(t[1]))throw new Error("coordinates must contain numbers");return s({type:"Point",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),g(t.map((function(t){return c(t,e)})),n)}function h(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),g(t.map((function(t){return h(t,e)})),n)}function f(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,n)}function d(t,e,n){return void 0===n&&(n={}),g(t.map((function(t){return f(t,e)})),n)}function g(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function v(t,e,n){return void 0===n&&(n={}),s({type:"MultiLineString",coordinates:t},e,n)}function y(t,e,n){return void 0===n&&(n={}),s({type:"MultiPoint",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),s({type:"MultiPolygon",coordinates:t},e,n)}function _(t,e,n){return void 0===n&&(n={}),s({type:"GeometryCollection",geometries:t},e,n)}function b(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function x(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t*n}function w(t,e){void 0===e&&(e="kilometers");var n=i[e];if(!n)throw new Error(e+" units is invalid");return t/n}function E(t,e){return C(w(t,e))}function S(t){var e=t%360;return e<0&&(e+=360),e}function C(t){return 180*(t%(2*Math.PI))/Math.PI}function T(t){return t%360*Math.PI/180}function I(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return x(w(t,e),n)}function O(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=a[e];if(!r)throw new Error("invalid original units");var i=a[n];if(!i)throw new Error("invalid final units");return t/r*i}function M(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function P(t){return!!t&&t.constructor===Object}function L(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!M(t))throw new Error("bbox must only contain numbers")}))}function R(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},function(t,e,n){"use strict";function r(t,e,n){for(var r,o,a=n||i,s=0,u=t.length,c=!1;s<u;)(o=+a(t[r=s+(u-s>>1)],e))<0?s=r+1:(u=r,c=!o);return c?s:~s}function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){var r=t.length;if(t[0]<=e)return 0;if(e<=t[r-1])return r-1;var i=void 0;if(n>0){for(i=1;i<r;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<r;++i)if(t[i]<=e)return i}else for(i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function a(t,e,n){for(;e<n;){var r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function s(t,e){for(var n=Array.isArray(e)?e:[e],r=n.length,i=0;i<r;i++)t[t.length]=n[i]}function u(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function c(t,e,n){var r=e||i;return t.every((function(e,i){if(0===i)return!0;var o=r(t[i-1],e);return!(o>0||n&&0===o)}))}n.d(e,"a",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return c}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c}));function r(t,e,n){if(!c(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&l(r),i&&h(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!u(t[0])||!u(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++){if(0===i&&0===a&&!u(o[0][0])||!u(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!u(t[0][1])||!u(t[0][1]))throw new Error("coordinates must contain numbers");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){if(!c(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&l(n),r&&h(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function u(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function c(t){return!!t&&t.constructor===Object}function l(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!u(t))throw new Error("bbox must only contain numbers")}))}function h(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},function(t,e,n){var r=n(12),i=n(63).f,o=n(31),a=n(37),s=n(115),u=n(137),c=n(122);t.exports=function(t,e){var n,l,h,p,f,d=t.target,g=t.global,v=t.stat;if(n=g?r:v?r[d]||s(d,{}):(r[d]||{}).prototype)for(l in e){if(p=e[l],h=t.noTargetGet?(f=i(n,l))&&f.value:n[l],!c(g?l:d+(v?".":"#")+l,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;u(p,h)}(t.sham||h&&h.sham)&&o(p,"sham",!0),a(n,l,p,t)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s}));var r=n(5);function i(){return!0}function o(){return!1}function a(){}function s(t){var e,n,i,o=!1;return function(){var a=Array.prototype.slice.call(arguments);return o&&this===i&&Object(r.b)(a,n)||(o=!0,i=this,n=a,e=t.apply(this,arguments)),e}}},function(t,e,n){"use strict";function r(t,e){var n=document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function i(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function o(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function a(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function s(t,e){for(var n=t.childNodes,r=0;;++r){var i=n[r],o=e[r];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--r):t.appendChild(o))}}n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return s}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return f}));var r,i=n(0),o=n(53),a=n(109),s=n(18),u=n(3),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.key=n,i.oldValue=r,i}return c(e,t),e}(s.a),h=function(t){function e(e){var n=t.call(this)||this;return Object(i.c)(n),n.values_={},void 0!==e&&n.setProperties(e),n}return c(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Object(u.a)({},this.values_)},e.prototype.notify=function(t,e){var n;n=f(t),this.dispatchEvent(new l(n,t,e)),n=o.a.PROPERTYCHANGE,this.dispatchEvent(new l(n,t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var r=this.values_[t];this.values_[t]=e,r!==e&&this.notify(t,r)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(a.a),p={};function f(t){return p.hasOwnProperty(t)?p[t]:p[t]="change:"+t}e.a=h},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n(112))},function(t,e,n){var r=n(12),i=n(113),o=n(24),a=n(94),s=n(117),u=n(136),c=i("wks"),l=r.Symbol,h=u?l:l&&l.withoutSetter||a;t.exports=function(t){return o(c,t)||(s&&o(l,t)?c[t]=l[t]:c[t]=h("Symbol."+t)),c[t]}},function(t,e,n){var r=n(111),i=n(37),o=n(201);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(t,e,n){"use strict";var r,i=n(172),o=n(23),a=n(12),s=n(20),u=n(24),c=n(78),l=n(31),h=n(37),p=n(28).f,f=n(86),d=n(87),g=n(13),v=n(94),y=a.Int8Array,m=y&&y.prototype,_=a.Uint8ClampedArray,b=_&&_.prototype,x=y&&f(y),w=m&&f(m),E=Object.prototype,S=E.isPrototypeOf,C=g("toStringTag"),T=v("TYPED_ARRAY_TAG"),I=i&&!!d&&"Opera"!==c(a.opera),O=!1,M={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P={BigInt64Array:8,BigUint64Array:8},L=function(t){if(!s(t))return!1;var e=c(t);return u(M,e)||u(P,e)};for(r in M)a[r]||(I=!1);if((!I||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},I))for(r in M)a[r]&&d(a[r],x);if((!I||!w||w===E)&&(w=x.prototype,I))for(r in M)a[r]&&d(a[r].prototype,w);if(I&&f(b)!==w&&d(b,w),o&&!u(w,C))for(r in O=!0,p(w,C,{get:function(){return s(this)?this[T]:void 0}}),M)a[r]&&l(a[r],T,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:O&&T,aTypedArray:function(t){if(L(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(d){if(S.call(x,t))return t}else for(var e in M)if(u(M,r)){var n=a[e];if(n&&(t===n||S.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(o){if(n)for(var r in M){var i=a[r];i&&u(i.prototype,t)&&delete i.prototype[t]}w[t]&&!n||h(w,t,n?e:I&&m[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(o){if(d){if(n)for(r in M)(i=a[r])&&u(i,t)&&delete i[t];if(x[t]&&!n)return;try{return h(x,t,n?e:I&&y[t]||e)}catch(t){}}for(r in M)!(i=a[r])||i[t]&&!n||h(i,t,e)}},isView:function(t){if(!s(t))return!1;var e=c(t);return"DataView"===e||u(M,e)||u(P,e)},isTypedArray:L,TypedArray:x,TypedArrayPrototype:w}},function(t,e,n){var r=n(43),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(20);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){"use strict";var r=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();e.a=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u}));var r=n(6);function i(t,e,n){if(null!==t)for(var r,o,a,s,u,c,l,h,p=0,f=0,d=t.type,g="FeatureCollection"===d,v="Feature"===d,y=g?t.features.length:1,m=0;m<y;m++){u=(h=!!(l=g?t.features[m].geometry:v?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var _=0;_<u;_++){var b=0,x=0;if(null!==(s=h?l.geometries[_]:l)){c=s.coordinates;var w=s.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":e(c,f,m,b,x),f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++)e(c[r],f,m,b,x),f++,"MultiPoint"===w&&b++;"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-p;o++)e(c[r][o],f,m,b,x),f++;"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for("MultiPolygon"===w&&(x=0),o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-p;a++)e(c[r][o][a],f,m,b,x),f++;x++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)i(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function a(t,e){var n,r,i,o,a,s,u,c,l,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(s=f?t.features[n].geometry:d?t.geometry:t,c=f?t.features[n].properties:d?t.properties:{},l=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,c,l,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,c,l,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,c,l,h);p++}}function s(t,e,n){var r=n;return a(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function u(t,e){a(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return void e(Object(r.a)(t,i,{bbox:o,id:a}),n,0)}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}t.coordinates.forEach((function(t,o){var a={type:s,coordinates:t};e(Object(r.a)(a,i),n,o)}))}))}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var r=n(37),i=n(17),o=n(11),a=n(128),s="toString",u=RegExp.prototype,c=u.toString,l=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),h=c.name!=s;(l||h)&&r(RegExp.prototype,s,(function(){var t=i(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in u)?a.call(t):n)}),{unsafe:!0})},function(t,e,n){"use strict";var r=n(7),i=n(104);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(t,e,n){var r=n(11);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";var r=n(7),i=n(11),o=n(100),a=n(20),s=n(29),u=n(16),c=n(101),l=n(126),h=n(84),p=n(13),f=n(99),d=p("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",y=f>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),m=h("concat"),_=function(t){if(!a(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!y||!m},{concat:function(t){var e,n,r,i,o,a=s(this),h=l(a,0),p=0;for(e=-1,r=arguments.length;e<r;e++)if(_(o=-1===e?a:arguments[e])){if(p+(i=u(o.length))>g)throw TypeError(v);for(n=0;n<i;n++,p++)n in o&&c(h,p,o[n])}else{if(p>=g)throw TypeError(v);c(h,p++,o)}return h.length=p,h}})},function(t,e,n){"use strict";var r=n(48),i=n(102),o=n(82),a=n(47),s=n(148),u="Array Iterator",c=a.set,l=a.getterFor(u);t.exports=s(Array,"Array",(function(t,e){c(this,{type:u,target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){"use strict";var r,i=n(52),o=n(8),a=n(18),s=n(3),u=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_={},n.dispatching_={},n.listeners_={},n}return u(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_[t];n||(n=[],this.listeners_[t]=n),-1===n.indexOf(e)&&n.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new a.a(t):t,n=e.type;e.target||(e.target=this.eventTarget_||this);var r,i=this.listeners_[n];if(i){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var s=0,u=i.length;s<u;++s)if(!1===i[s].call(this,e)||e.propagationStopped){r=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var c=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];c--;)this.removeEventListener(n,o.c);delete this.dispatching_[n]}return r}},e.prototype.disposeInternal=function(){Object(s.b)(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var r=n.indexOf(e);-1!==r&&(t in this.pendingRemovals_?(n[r]=o.c,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t]))}},e}(i.a);e.a=c},function(t,e,n){var r=n(23),i=n(135),o=n(17),a=n(77),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(38);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(7),i=n(32).map,o=n(84),a=n(49),s=o("map"),u=a("map");r({target:"Array",proto:!0,forced:!s||!u},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(23),i=n(28),o=n(61);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(70),i=n(79),o=n(29),a=n(16),s=n(126),u=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,h=6==t,p=7==t,f=5==t||h;return function(d,g,v,y){for(var m,_,b=o(d),x=i(b),w=r(g,v,3),E=a(x.length),S=0,C=y||s,T=e?C(d,E):n||p?C(d,0):void 0;E>S;S++)if((f||S in x)&&(_=w(m=x[S],S,b),t))if(e)T[S]=_;else if(_)switch(t){case 3:return!0;case 5:return m;case 6:return S;case 2:u.call(T,m)}else switch(t){case 4:return!1;case 7:u.call(T,m)}return h?-1:c||l?l:T}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},function(t,e,n){"use strict";var r=n(7),i=n(127).left,o=n(85),a=n(49),s=n(99),u=n(98),c=o("reduce"),l=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!c||!l||!u&&s>79&&s<83},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(7),i=n(11),o=n(29),a=n(86),s=n(151);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(t){return a(o(t))}})},function(t,e,n){var r=n(7),i=n(59),o=n(65),a=n(17),s=n(20),u=n(73),c=n(210),l=n(11),h=i("Reflect","construct"),p=l((function(){function t(){}return!(h((function(){}),[],t)instanceof t)})),f=!l((function(){h((function(){}))})),d=p||f;r({target:"Reflect",stat:!0,forced:d,sham:d},{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!p)return h(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var i=n.prototype,l=u(s(i)?i:Object.prototype),d=Function.apply.call(t,l,e);return s(d)?d:l}})},function(t,e,n){"use strict";var r=n(129).charAt,i=n(47),o=n(148),a="String Iterator",s=i.set,u=i.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(12),i=n(31),o=n(24),a=n(115),s=n(118),u=n(47),c=u.get,l=u.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var u,c=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||i(n,"name",e),(u=l(n)).source||(u.source=h.join("string"==typeof e?e:""))),t!==r?(c?!f&&t[e]&&(p=!0):delete t[e],p?t[e]=n:i(t,e,n)):p?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){"use strict";var r=n(7),i=n(80).indexOf,o=n(85),a=n(49),s=[].indexOf,u=!!s&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!c||!l},{indexOf:function(t){return u?s.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(12),i=n(153),o=n(26),a=n(31),s=n(13),u=s("iterator"),c=s("toStringTag"),l=o.values;for(var h in i){var p=r[h],f=p&&p.prototype;if(f){if(f[u]!==l)try{a(f,u,l)}catch(t){f[u]=l}if(f[c]||a(f,c,h),i[h])for(var d in o)if(f[d]!==o[d])try{a(f,d,o[d])}catch(t){f[d]=o[d]}}}},function(t,e,n){!function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?kt:t.color}function s(t){return null===t?null:t.parent}function u(t,e){null!==t&&(t.color=e)}function c(t){return null===t?null:t.left}function l(t){return null===t?null:t.right}function h(){this.root_=null,this.size_=0}function p(){}function f(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function d(){}function g(t){this.message=t||""}function v(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=function(){};y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var m=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=function(){},b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var x=function(){},w=function(){},E=function(){},S=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},C={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};S.prototype.setOrdinate=function(t,e){switch(t){case S.X:this.x=e;break;case S.Y:this.y=e;break;case S.Z:this.z=e;break;default:throw new m("Invalid ordinate index: "+t)}},S.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,n)&&!!y.equalsWithTolerance(this.y,e.y,n)}},S.prototype.getOrdinate=function(t){switch(t){case S.X:return this.x;case S.Y:return this.y;case S.Z:return this.z}throw new m("Invalid ordinate index: "+t)},S.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},S.prototype.equals=function(t){return t instanceof S&&this.equals2D(t)},S.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},S.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},S.prototype.clone=function(){},S.prototype.copy=function(){return new S(this)},S.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},S.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},S.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},S.prototype.hashCode=function(){var t=17;return 37*(t=37*t+S.hashCode(this.x))+S.hashCode(this.y)},S.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},S.prototype.interfaces_=function(){return[x,w,e]},S.prototype.getClass=function(){return S},S.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},C.DimensionalComparator.get=function(){return T},C.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},C.NULL_ORDINATE.get=function(){return _.NaN},C.X.get=function(){return 0},C.Y.get=function(){return 1},C.Z.get=function(){return 2},Object.defineProperties(S,C);var T=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};T.prototype.compare=function(t,e){var n=t,r=e,i=T.compare(n.x,r.x);if(0!==i)return i;var o=T.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:T.compare(n.z,r.z)},T.prototype.interfaces_=function(){return[E]},T.prototype.getClass=function(){return T},T.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var I=function(){};I.prototype.create=function(){},I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I};var O=function(){},M={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.toLocationSymbol=function(t){switch(t){case O.EXTERIOR:return"e";case O.BOUNDARY:return"b";case O.INTERIOR:return"i";case O.NONE:return"-"}throw new m("Unknown location value: "+t)},M.INTERIOR.get=function(){return 0},M.BOUNDARY.get=function(){return 1},M.EXTERIOR.get=function(){return 2},M.NONE.get=function(){return-1},Object.defineProperties(O,M);var P=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},L=function(){},R={LOG_10:{configurable:!0}};L.prototype.interfaces_=function(){return[]},L.prototype.getClass=function(){return L},L.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/L.LOG_10},L.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},L.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},L.wrap=function(t,e){return t<0?e- -t%e:t%e},L.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return r>a&&(a=r),i>a&&(a=i),o>a&&(a=o),a}},L.average=function(t,e){return(t+e)/2},R.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(L,R);var A=function(t){this.str=t};A.prototype.append=function(t){this.str+=t},A.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},A.prototype.toString=function(t){return this.str};var k=function(t){this.value=t};k.prototype.intValue=function(){return this.value},k.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},k.isNaN=function(t){return Number.isNaN(t)};var N=function(){};N.isWhitespace=function(t){return t<=32&&t>=0||127===t},N.toUpperCase=function(t){return t.toUpperCase()};var D=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length)if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else"string"==typeof arguments[0]&&t.call(this,t.parse(arguments[0]));else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},F={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};D.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},D.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=D.magnitude(n._hi),i=D.TEN.pow(r);(n=n.divide(i)).gt(D.TEN)?(n=n.divide(D.TEN),r+=1):n.lt(D.ONE)&&(n=n.multiply(D.TEN),r-=1);for(var o=r+1,a=new A,s=D.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,h=0;c>9?(l=!0,h="9"):h="0"+c,a.append(h),n=n.subtract(D.valueOf(c)).multiply(D.TEN),l&&n.selfAdd(D.TEN);var p=!0,f=D.magnitude(n._hi);if(f<0&&Math.abs(f)>=s-u&&(p=!1),!p)break}return e[0]=r,a.toString()},D.prototype.sqr=function(){return this.multiply(this)},D.prototype.doubleValue=function(){return this._hi+this._lo},D.prototype.subtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},D.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},D.prototype.isZero=function(){return 0===this._hi&&0===this._lo},D.prototype.selfSubtract=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},D.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},D.prototype.min=function(t){return this.le(t)?this:t},D.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,h=null;return u=this._hi/n,h=(i=(c=D.SPLIT*u)-(i=c-u))*(a=(h=D.SPLIT*n)-(a=h-n))-(l=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,h=u+(c=(this._hi-l-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+c,this}},D.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},D.prototype.divide=function(){if(arguments[0]instanceof D){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;return n=(o=this._hi/t._hi)-(e=(a=D.SPLIT*o)-(e=a-o)),u=e*(r=(u=D.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i,a=(this._hi-s-u+this._lo-o*t._lo)/t._hi,new D(u=o+a,o-u+a)}if("number"==typeof arguments[0]){var c=arguments[0];return _.isNaN(c)?D.createNaN():D.copy(this).selfDivide(c,0)}},D.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},D.prototype.pow=function(t){if(0===t)return D.valueOf(1);var e=new D(this),n=D.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},D.prototype.ceil=function(){if(this.isNaN())return D.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new D(t,e)},D.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},D.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},D.prototype.setValue=function(){if(arguments[0]instanceof D){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},D.prototype.max=function(t){return this.ge(t)?this:t},D.prototype.sqrt=function(){if(this.isZero())return D.valueOf(0);if(this.isNegative())return D.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=D.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},D.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,h=null,p=null,f=null,d=null,g=null,v=null;f=this._hi+u,h=this._lo+c,d=f-(g=f-this._hi),p=h-(v=h-this._lo);var y=(l=f+(g=(d=u-g+(this._hi-d))+h))+(g=(p=c-v+(this._lo-p))+(g+(f-l))),m=g+(l-y);return this._hi=y,this._lo=m,this}},D.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof D){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=D.SPLIT*this._hi)-this._hi,c=D.SPLIT*n,i=u-i,o=this._hi-i,a=c-n;var l=(u=this._hi*n)+(c=i*(a=c-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=c+(i=u-l);return this._hi=l,this._lo=h,this}},D.prototype.selfSqr=function(){return this.selfMultiply(this)},D.prototype.floor=function(){if(this.isNaN())return D.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new D(t,e)},D.prototype.negate=function(){return this.isNaN()?this:new D(-this._hi,-this._lo)},D.prototype.clone=function(){},D.prototype.multiply=function(){if(arguments[0]instanceof D){var t=arguments[0];return t.isNaN()?D.createNaN():D.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?D.createNaN():D.copy(this).selfMultiply(e,0)}},D.prototype.isNaN=function(){return _.isNaN(this._hi)},D.prototype.intValue=function(){return Math.trunc(this._hi)},D.prototype.toString=function(){var t=D.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},D.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+D.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+D.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},D.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,a=null,s=null;e=(i=1/this._hi)-(t=(o=D.SPLIT*i)-(t=o-i)),n=(s=D.SPLIT*this._hi)-this._hi;var u=i+(o=(1-(a=i*this._hi)-(s=t*(n=s-n)-a+t*(r=this._hi-n)+e*n+e*r)-i*this._lo)/this._hi);return new D(u,i-u+o)},D.prototype.toSciNotation=function(){if(this.isZero())return D.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=D.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},D.prototype.abs=function(){return this.isNaN()?D.NaN:this.isNegative()?this.negate():new D(this)},D.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},D.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},D.prototype.add=function(){if(arguments[0]instanceof D){var t=arguments[0];return D.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return D.copy(this).selfAdd(e)}},D.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof D){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},D.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},D.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},D.prototype.trunc=function(){return this.isNaN()?D.NaN:this.isPositive()?this.floor():this.ceil()},D.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},D.prototype.interfaces_=function(){return[e,x,w]},D.prototype.getClass=function(){return D},D.sqr=function(t){return D.valueOf(t).selfMultiply(t)},D.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return D.parse(t)}if("number"==typeof arguments[0])return new D(arguments[0])},D.sqrt=function(t){return D.valueOf(t).sqrt()},D.parse=function(t){for(var e=0,n=t.length;N.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new D,a=0,s=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,N.isDigit(c)){var l=c-"0";o.selfMultiply(D.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{u=k.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var p=o,f=a-s-u;if(0===f)p=o;else if(f>0){var d=D.TEN.pow(f);p=o.divide(d)}else if(f<0){var g=D.TEN.pow(-f);p=o.multiply(g)}return r?p.negate():p},D.createNaN=function(){return new D(_.NaN,_.NaN)},D.copy=function(t){return new D(t)},D.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},D.stringOfChar=function(t,e){for(var n=new A,r=0;r<e;r++)n.append(t);return n.toString()},F.PI.get=function(){return new D(3.141592653589793,12246467991473532e-32)},F.TWO_PI.get=function(){return new D(6.283185307179586,24492935982947064e-32)},F.PI_2.get=function(){return new D(1.5707963267948966,6123233995736766e-32)},F.E.get=function(){return new D(2.718281828459045,14456468917292502e-32)},F.NaN.get=function(){return new D(_.NaN,_.NaN)},F.EPS.get=function(){return 123259516440783e-46},F.SPLIT.get=function(){return 134217729},F.MAX_PRINT_DIGITS.get=function(){return 32},F.TEN.get=function(){return D.valueOf(10)},F.ONE.get=function(){return D.valueOf(1)},F.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},F.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(D,F);var j=function(){},z={DP_SAFE_EPSILON:{configurable:!0}};j.prototype.interfaces_=function(){return[]},j.prototype.getClass=function(){return j},j.orientationIndex=function(t,e,n){var r=j.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=D.valueOf(e.x).selfAdd(-t.x),o=D.valueOf(e.y).selfAdd(-t.y),a=D.valueOf(n.x).selfAdd(-e.x),s=D.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},j.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},j.intersection=function(t,e,n,r){var i=D.valueOf(r.y).selfSubtract(n.y).selfMultiply(D.valueOf(e.x).selfSubtract(t.x)),o=D.valueOf(r.x).selfSubtract(n.x).selfMultiply(D.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=D.valueOf(r.x).selfSubtract(n.x).selfMultiply(D.valueOf(t.y).selfSubtract(n.y)),u=D.valueOf(r.y).selfSubtract(n.y).selfMultiply(D.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=D.valueOf(t.x).selfAdd(D.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=D.valueOf(e.x).selfSubtract(t.x).selfMultiply(D.valueOf(t.y).selfSubtract(n.y)),p=D.valueOf(e.y).selfSubtract(t.y).selfMultiply(D.valueOf(t.x).selfSubtract(n.x)),f=h.subtract(p).selfDivide(a).doubleValue(),d=D.valueOf(n.y).selfAdd(D.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new S(l,d)},j.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return j.signum(a);r=i+o}else{if(!(i<0))return j.signum(a);if(o>=0)return j.signum(a);r=-i-o}var s=j.DP_SAFE_EPSILON*r;return a>=s||-a>=s?j.signum(a):2},j.signum=function(t){return t>0?1:t<0?-1:0},z.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(j,z);var B=function(){},G={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};G.X.get=function(){return 0},G.Y.get=function(){return 1},G.Z.get=function(){return 2},G.M.get=function(){return 3},B.prototype.setOrdinate=function(t,e,n){},B.prototype.size=function(){},B.prototype.getOrdinate=function(t,e){},B.prototype.getCoordinate=function(){},B.prototype.getCoordinateCopy=function(t){},B.prototype.getDimension=function(){},B.prototype.getX=function(t){},B.prototype.clone=function(){},B.prototype.expandEnvelope=function(t){},B.prototype.copy=function(){},B.prototype.getY=function(t){},B.prototype.toCoordinateArray=function(){},B.prototype.interfaces_=function(){return[w]},B.prototype.getClass=function(){return B},Object.defineProperties(B,G);var X=function(){},U=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(X),q=function(){};q.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},q.getProperty=function(t){return{"line.separator":"\n"}[t]};var Y=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof S&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],d=arguments[3],g=h.y-p.y,v=p.x-h.x,y=h.x*p.y-p.x*h.y,m=f.y-d.y,_=d.x-f.x,b=f.x*d.y-d.x*f.y;this.x=v*b-_*y,this.y=m*y-g*b,this.w=g*_-m*v}};Y.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new U;return t},Y.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new U;return t},Y.prototype.getCoordinate=function(){var t=new S;return t.x=this.getX(),t.y=this.getY(),t},Y.prototype.interfaces_=function(){return[]},Y.prototype.getClass=function(){return Y},Y.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-s*o,h=(o*c-u*a)/l,p=(s*a-i*c)/l;if(_.isNaN(h)||_.isInfinite(h)||_.isNaN(p)||_.isInfinite(p))throw new U;return new S(h,p)};var V=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof S){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},H={serialVersionUID:{configurable:!0}};V.prototype.getArea=function(){return this.getWidth()*this.getHeight()},V.prototype.equals=function(t){if(!(t instanceof V))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},V.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new V;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new V(e,r,n,i)},V.prototype.isNull=function(){return this._maxx<this._minx},V.prototype.getMaxX=function(){return this._maxx},V.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof V){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},V.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof S){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},V.prototype.getMinY=function(){return this._miny},V.prototype.getMinX=function(){return this._minx},V.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof V){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},V.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},V.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},V.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},V.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},V.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},V.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},V.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},V.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},V.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},V.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof V){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof S){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},V.prototype.centre=function(){return this.isNull()?null:new S((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},V.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof V){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},V.prototype.getMaxY=function(){return this._maxy},V.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},V.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+S.hashCode(this._minx))+S.hashCode(this._maxx))+S.hashCode(this._miny))+S.hashCode(this._maxy)},V.prototype.interfaces_=function(){return[x,e]},V.prototype.getClass=function(){return V},V.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u||l<s||(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),c>u||l<s))}},H.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(V,H);var W={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},K=function(t){this.geometryFactory=t||new ye};K.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=W.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=W.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],Z[n]&&(e=Z[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},K.prototype.write=function(t){return this.extractGeometry(t)},K.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!$[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+$[e].apply(this,[t])+")"};var $={coordinate:function(t){return t.x+" "+t.y},point:function(t){return $.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push($.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+$.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+$.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+$.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},Z={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(W.spaces);return this.geometryFactory.createPoint(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(Z.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(W.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(W.spaces),r.push(new S(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(W.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(Z.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(W.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(W.trimParens,"$1"),n=Z.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(W.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(W.trimParens,"$1"),r.push(Z.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},J=function(t){this.parser=new K(t)};J.prototype.write=function(t){return this.parser.write(t)},J.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var Q=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),tt=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Q),et=function(){};et.prototype.interfaces_=function(){return[]},et.prototype.getClass=function(){return et},et.shouldNeverReachHere=function(){if(0===arguments.length)et.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new tt("Should never reach here"+(null!==t?": "+t:""))}},et.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],et.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new tt:new tt(e)},et.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],et.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new tt("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var nt=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new S,this._intPt[1]=new S,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new A;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return J.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+J.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return et.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return et.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new V(this._inputLines[0][0],this._inputLines[0][1]),n=new V(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,V.intersects(n,r,e)&&0===st.orientationIndex(n,r,e)&&0===st.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Y.intersection(t,n,r,i)}catch(a){if(!(a instanceof U))throw a;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new S(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=j.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);q.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&q.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new S(t),o=new S(e),a=new S(n),s=new S(r),u=new S;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=V.intersects(e,n,r),a=V.intersects(e,n,i),s=V.intersects(r,i,e),u=V.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=((o>c?o:c)+(s<h?s:h))/2,d=((a>l?a:l)+(u<p?u:p))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!V.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=st.orientationIndex(e,n,r),a=st.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=st.orientationIndex(r,i,e),u=st.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new S(r):0===a?this._intPt[0]=new S(i):0===s?this._intPt[0]=new S(e):0===u&&(this._intPt[0]=new S(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=st.distancePointLine(t,n,r),a=st.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=st.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=st.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(nt),ot=function(){};ot.prototype.interfaces_=function(){return[]},ot.prototype.getClass=function(){return ot},ot.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ot.signOfDet2x2(r,i,o,a)},ot.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var at=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=ot.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==O.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?O.BOUNDARY:this._crossingCount%2==1?O.INTERIOR:O.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof S&&P(arguments[1],B)){for(var t=arguments[1],e=new at(arguments[0]),n=new S,r=new S,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof S&&arguments[1]instanceof Array){for(var o=arguments[1],a=new at(arguments[0]),s=1;s<o.length;s++){var u=o[s],c=o[s-1];if(a.countSegment(u,c),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var st=function(){},ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,n){return j.orientationIndex(t,e,n)},st.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(P(arguments[0],B)){var a=arguments[0],s=a.size();if(s<3)return 0;var u=new S,c=new S,l=new S;a.getCoordinate(0,c),a.getCoordinate(1,l);var h=c.x;l.x-=h;for(var p=0,f=1;f<s-1;f++)u.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(f+1,l),l.x-=h,p+=c.x*(u.y-l.y);return p/2}},st.distanceLineLine=function(t,e,n,r){if(t.equals(e))return st.distancePointLine(t,n,r);if(n.equals(r))return st.distancePointLine(r,t,e);var i=!1;if(V.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?L.min(st.distancePointLine(t,n,r),st.distancePointLine(e,n,r),st.distancePointLine(n,t,e),st.distancePointLine(r,t,e)):0},st.isPointInRing=function(t,e){return st.locatePointInRing(t,e)!==O.EXTERIOR},st.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new S;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,c=s-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=s,o=u}return n},st.isCCW=function(t){var e=t.length-1;if(e<3)throw new m("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],c=t[s];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=st.computeOrientation(u,n,c);return 0===l?u.x>c.x:l>0},st.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},st.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},st.computeOrientation=function(t,e,n){return st.orientationIndex(t,e,n)},st.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new m("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=st.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},st.isOnLine=function(t,e){for(var n=new it,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return st.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return st.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return st.COLLINEAR},Object.defineProperties(st,ut);var ct=function(){};ct.prototype.filter=function(t){},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct};var lt=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},ht={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};lt.prototype.isGeometryCollection=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION},lt.prototype.getFactory=function(){return this._factory},lt.prototype.getGeometryN=function(t){return this},lt.prototype.getArea=function(){return 0},lt.prototype.isRectangle=function(){return!1},lt.prototype.equals=function(){if(arguments[0]instanceof lt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof lt))return!1;var n=e;return this.equalsExact(n)}},lt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},lt.prototype.geometryChanged=function(){this.apply(lt.geometryChangedFilter)},lt.prototype.geometryChangedAction=function(){this._envelope=null},lt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},lt.prototype.getLength=function(){return 0},lt.prototype.getNumGeometries=function(){return 1},lt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},lt.prototype.getUserData=function(){return this._userData},lt.prototype.getSRID=function(){return this._SRID},lt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},lt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION)throw new m("This method does not support GeometryCollection arguments")},lt.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},lt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},lt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},lt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new V(this._envelope)},lt.prototype.setSRID=function(t){this._SRID=t},lt.prototype.setUserData=function(t){this._userData=t},lt.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},lt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},lt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===lt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===lt.SORTINDEX_MULTIPOINT||this.getSortIndex()===lt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===lt.SORTINDEX_MULTIPOLYGON},lt.prototype.interfaces_=function(){return[w,x,e]},lt.prototype.getClass=function(){return lt},lt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},lt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},ht.serialVersionUID.get=function(){return 0x799ea46522854c00},ht.SORTINDEX_POINT.get=function(){return 0},ht.SORTINDEX_MULTIPOINT.get=function(){return 1},ht.SORTINDEX_LINESTRING.get=function(){return 2},ht.SORTINDEX_LINEARRING.get=function(){return 3},ht.SORTINDEX_MULTILINESTRING.get=function(){return 4},ht.SORTINDEX_POLYGON.get=function(){return 5},ht.SORTINDEX_MULTIPOLYGON.get=function(){return 6},ht.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},ht.geometryChangedFilter.get=function(){return pt},Object.defineProperties(lt,ht);var pt=function(){};pt.interfaces_=function(){return[ct]},pt.filter=function(t){t.geometryChangedAction()};var ft=function(){};ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var dt=function(){},gt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};dt.prototype.isInBoundary=function(t){},dt.prototype.interfaces_=function(){return[]},dt.prototype.getClass=function(){return dt},gt.Mod2BoundaryNodeRule.get=function(){return vt},gt.EndPointBoundaryNodeRule.get=function(){return yt},gt.MultiValentEndPointBoundaryNodeRule.get=function(){return mt},gt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},gt.MOD2_BOUNDARY_RULE.get=function(){return new vt},gt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},gt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new mt},gt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},gt.OGC_SFS_BOUNDARY_RULE.get=function(){return dt.MOD2_BOUNDARY_RULE},Object.defineProperties(dt,gt);var vt=function(){};vt.prototype.isInBoundary=function(t){return t%2==1},vt.prototype.interfaces_=function(){return[dt]},vt.prototype.getClass=function(){return vt};var yt=function(){};yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[dt]},yt.prototype.getClass=function(){return yt};var mt=function(){};mt.prototype.isInBoundary=function(t){return t>1},mt.prototype.interfaces_=function(){return[dt]},mt.prototype.getClass=function(){return mt};var _t=function(){};_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[dt]},_t.prototype.getClass=function(){return _t};var bt=function(){};bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";var xt=function(){};xt.prototype.hasNext=function(){},xt.prototype.next=function(){},xt.prototype.remove=function(){};var wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(r.prototype=new Error).name="NoSuchElementException";var Et=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new St(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(wt),St=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(xt),Ct=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[1],n=!1,r=arguments[0].iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var n=arguments[0],r=arguments[1];return this.add(n,r,!0),!0}if(arguments[0]instanceof S&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(i))return null;t.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];return this.add(o,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],u=arguments[1];if(arguments[2])for(var c=0;c<s.length;c++)this.add(s[c],u);else for(var l=s.length-1;l>=0;l--)this.add(s[l],u);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof S){var h=arguments[0],p=arguments[1];if(!arguments[2]){var f=this.size();if(f>0){if(h>0&&this.get(h-1).equals2D(p))return null;if(h<f&&this.get(h).equals2D(p))return null}}t.prototype.add.call(this,h,p)}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],v=arguments[2],y=arguments[3],m=1;v>y&&(m=-1);for(var _=v;_!==y;_+=m)this.add(d[_],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new S(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Et),Tt=function(){},It={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};It.ForwardComparator.get=function(){return Ot},It.BidirectionalComparator.get=function(){return Mt},It.coordArrayType.get=function(){return new Array(0).fill(null)},Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Tt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Tt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Tt.indexOf(r,e)<0)return r}return null},Tt.scroll=function(t,e){var n=Tt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);q.arraycopy(t,n,r,0,t.length-n),q.arraycopy(t,0,r,t.length-n,n),q.arraycopy(r,0,t,0,t.length)},Tt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Tt.intersection=function(t,e){for(var n=new Ct,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Tt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Tt.removeRepeatedPoints=function(t){return Tt.hasRepeatedPoints(t)?new Ct(t,!1).toCoordinateArray():t},Tt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Tt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Tt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new S(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new S(r[i+u])},Tt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Tt.envelope=function(t){for(var e=new V,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Tt.toCoordinateArray=function(t){return t.toArray(Tt.coordArrayType)},Tt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Tt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Tt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Tt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Tt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Tt.extract=function(t,e,n){e=L.clamp(e,0,t.length);var r=(n=L.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Tt,It);var Ot=function(){};Ot.prototype.compare=function(t,e){return Tt.compare(t,e)},Ot.prototype.interfaces_=function(){return[E]},Ot.prototype.getClass=function(){return Ot};var Mt=function(){};Mt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Tt.compare(n,r);return Tt.isEqualReversed(n,r)?0:i},Mt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Tt.increasingDirection(n),o=Tt.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},Mt.prototype.interfaces_=function(){return[E]},Mt.prototype.getClass=function(){return Mt};var Pt=function(){};Pt.prototype.get=function(){},Pt.prototype.put=function(){},Pt.prototype.size=function(){},Pt.prototype.values=function(){},Pt.prototype.entrySet=function(){};var Lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pt);(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Rt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new At(this)},e}(o),At=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new i},e}(xt),kt=0;(h.prototype=new Lt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},h.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:kt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:kt,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},h.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(s(t)===c(s(s(t)))){var e=l(s(s(t)));1===a(e)?(u(s(t),kt),u(e,kt),u(s(s(t)),1),t=s(s(t))):(t===l(s(t))&&(t=s(t),this.rotateLeft(t)),u(s(t),kt),u(s(s(t)),1),this.rotateRight(s(s(t))))}else{var n=c(s(s(t)));1===a(n)?(u(s(t),kt),u(n,kt),u(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateRight(t)),u(s(t),kt),u(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=kt},h.prototype.values=function(){var t=new Et,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=h.successor(e));)t.add(e.value);return t},h.prototype.entrySet=function(){var t=new Rt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=h.successor(e));)t.add(e);return t},h.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},h.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},h.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},h.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},h.prototype.size=function(){return this.size_};var Nt=function(){};Nt.prototype.interfaces_=function(){return[]},Nt.prototype.getClass=function(){return Nt},p.prototype=new o,(f.prototype=new p).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new i},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Dt(this)};var Dt=function(t){this.treeSet_=t,this.position_=0};Dt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},Dt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Dt.prototype.remove=function(){throw new i};var Ft=function(){};Ft.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Ft.asList=function(t){for(var e=new Et,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var jt=function(){},zt={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};zt.P.get=function(){return 0},zt.L.get=function(){return 1},zt.A.get=function(){return 2},zt.FALSE.get=function(){return-1},zt.TRUE.get=function(){return-2},zt.DONTCARE.get=function(){return-3},zt.SYM_FALSE.get=function(){return"F"},zt.SYM_TRUE.get=function(){return"T"},zt.SYM_DONTCARE.get=function(){return"*"},zt.SYM_P.get=function(){return"0"},zt.SYM_L.get=function(){return"1"},zt.SYM_A.get=function(){return"2"},jt.prototype.interfaces_=function(){return[]},jt.prototype.getClass=function(){return jt},jt.toDimensionSymbol=function(t){switch(t){case jt.FALSE:return jt.SYM_FALSE;case jt.TRUE:return jt.SYM_TRUE;case jt.DONTCARE:return jt.SYM_DONTCARE;case jt.P:return jt.SYM_P;case jt.L:return jt.SYM_L;case jt.A:return jt.SYM_A}throw new m("Unknown dimension value: "+t)},jt.toDimensionValue=function(t){switch(N.toUpperCase(t)){case jt.SYM_FALSE:return jt.FALSE;case jt.SYM_TRUE:return jt.TRUE;case jt.SYM_DONTCARE:return jt.DONTCARE;case jt.SYM_P:return jt.P;case jt.SYM_L:return jt.L;case jt.SYM_A:return jt.A}throw new m("Unknown dimension symbol: "+t)},Object.defineProperties(jt,zt);var Bt=function(){};Bt.prototype.filter=function(t){},Bt.prototype.interfaces_=function(){return[]},Bt.prototype.getClass=function(){return Bt};var Gt=function(){};Gt.prototype.filter=function(t,e){},Gt.prototype.isDone=function(){},Gt.prototype.isGeometryChanged=function(){},Gt.prototype.interfaces_=function(){return[]},Gt.prototype.getClass=function(){return Gt};var Xt=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new m("geometries must not contain null elements")}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new V,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._geometries.length!==r._geometries.length)return!1;for(var i=0;i<this._geometries.length;i++)if(!this._geometries[i].equalsExact(r._geometries[i],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Ft.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=jt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(Ft.asList(this._geometries)),n=new f(Ft.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var u=this.getGeometryN(s),c=i.getGeometryN(s),l=u.compareToSameClass(c,r);if(0!==l)return l;s++}return s<o?1:s<a?-1:0}},e.prototype.apply=function(){if(P(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(P(arguments[0],Gt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(P(arguments[0],Bt)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(P(arguments[0],ct)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),et.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(lt),Ut=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Xt),qt=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=dt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};qt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},qt.prototype.getBoundary=function(){return this._geom instanceof Kt?this.boundaryLineString(this._geom):this._geom instanceof Ut?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},qt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},qt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},qt.prototype.computeBoundaryCoordinates=function(t){var e=new Et;this._endpointMap=new h;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Tt.toCoordinateArray(e)},qt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Yt,this._endpointMap.put(t,e)),e.count++},qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},qt.getBoundary=function(){return 1===arguments.length?new qt(arguments[0]).getBoundary():2===arguments.length?new qt(arguments[0],arguments[1]).getBoundary():void 0};var Yt=function(){this.count=null};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt};var Vt=function(){},Ht={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt},Vt.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Vt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new function(){}(new function(){}(Vt.getStackTrace(r))),s=0;s<i;s++)try{o+=a.readLine()+Vt.NEWLINE}catch(t){if(!(t instanceof d))throw t;et.shouldNeverReachHere()}return o}},Vt.split=function(t,e){for(var n=e.length,r=new Et,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},Vt.toString=function(){if(1===arguments.length){var t=arguments[0];return Vt.SIMPLE_ORDINATE_FORMAT.format(t)}},Vt.spaces=function(t){return Vt.chars(" ",t)},Ht.NEWLINE.get=function(){return q.getProperty("line.separator")},Ht.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Vt,Ht);var Wt=function(){};Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Wt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,B.X)===t.getOrdinate(e-1,B.X)&&t.getOrdinate(0,B.Y)===t.getOrdinate(e-1,B.Y)},Wt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||_.isNaN(a)&&_.isNaN(s)))return!1}return!0},Wt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(Wt.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)Wt.copy(e,i-1,r,o,1);return r},Wt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)Wt.swap(t,r,e-r)},Wt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},Wt.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)Wt.copyCoord(t,e+o,n,r+o)},Wt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new A;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Vt.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},Wt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?Wt.createClosedRing(t,e,4):e.getOrdinate(0,B.X)===e.getOrdinate(n-1,B.X)&&e.getOrdinate(0,B.Y)===e.getOrdinate(n-1,B.Y)?e:Wt.createClosedRing(t,e,n+1)},Wt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();Wt.copy(e,0,r,0,i);for(var o=i;o<n;o++)Wt.copy(e,0,r,o,1);return r};var Kt=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new V:this._points.expandEnvelope(new V)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e;if(this._points.size()!==r._points.size())return!1;for(var i=0;i<this._points.size();i++)if(!this.equal(this._points.getCoordinate(i),r._points.getCoordinate(i),n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Wt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?jt.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return st.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(P(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(P(arguments[0],Gt)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Bt)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new qt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Nt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(lt),$t=function(){};$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var Zt=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new V;var t=new V;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(P(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(P(arguments[0],Gt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(P(arguments[0],Bt)||P(arguments[0],ct))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),et.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(lt),Jt=function(){};Jt.prototype.interfaces_=function(){return[]},Jt.prototype.getClass=function(){return Jt};var Qt=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new m("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new m("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(st.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(st.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o==(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!this.isEquivalentClass(e))return!1;var r=e,i=this._shell,o=r._shell;if(!i.equalsExact(o,n))return!1;if(this._holes.length!==r._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(r._holes[a],n))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);Ft.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);q.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Tt.minCoordinate(e.getCoordinates());Tt.scroll(r,i),q.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],st.isCCW(e.getCoordinates())===n&&Tt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var u=this.getNumInteriorRing(),c=i.getNumInteriorRing(),l=0;l<u&&l<c;){var h=this.getInteriorRingN(l),p=i.getInteriorRingN(l),f=h.compareToSameClass(p,r);if(0!==f)return f;l++}return l<u?1:l<c?-1:0}},e.prototype.apply=function(t){if(P(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(P(t,Gt)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(P(t,Bt))t.filter(this);else if(P(t,ct)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(lt),te=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Xt),ee=function(t){function e(e,n){e instanceof S&&n instanceof ye&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return jt.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Wt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new m("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new m("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(Kt),ne=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return lt.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Et,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Jt]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Xt),re=function(t){this._factory=t||null,this._isUserDataCopied=!1},ie={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Xt?this.editGeometryCollection(t,e):t instanceof Qt?this.editPolygon(t,e):t instanceof Zt||t instanceof Kt?e.edit(t,this._factory):(et.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Et,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===te?this._factory.createMultiPoint(r.toArray([])):n.getClass()===Ut?this._factory.createMultiLineString(r.toArray([])):n.getClass()===ne?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},re.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Et,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},ie.NoOpGeometryOperation.get=function(){return oe},ie.CoordinateOperation.get=function(){return ae},ie.CoordinateSequenceOperation.get=function(){return se},Object.defineProperties(re,ie);var oe=function(){};oe.prototype.edit=function(t,e){return t},oe.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},oe.prototype.getClass=function(){return oe};var ae=function(){};ae.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof ee?e.createLinearRing(n):t instanceof Kt?e.createLineString(n):t instanceof Zt?n.length>0?e.createPoint(n[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var se=function(){};se.prototype.edit=function(t,e){return t instanceof ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Kt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Zt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ue=function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new S}else if(P(arguments[0],B)){var n=arguments[0];if(null===n)return this._coordinates=new Array(0).fill(null),null;this._dimension=n.getDimension(),this._coordinates=new Array(n.size()).fill(null);for(var r=0;r<this._coordinates.length;r++)this._coordinates[r]=n.getCoordinateCopy(r)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var i=arguments[0],o=arguments[1];this._coordinates=i,this._dimension=o,null===i&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],s=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=s;for(var u=0;u<a;u++)this._coordinates[u]=new S}},ce={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,n){switch(e){case B.X:this._coordinates[t].x=n;break;case B.Y:this._coordinates[t].y=n;break;case B.Z:this._coordinates[t].z=n;break;default:throw new m("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case B.X:return this._coordinates[t].x;case B.Y:return this._coordinates[t].y;case B.Z:return this._coordinates[t].z}return _.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new S(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new A(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[B,e]},ue.prototype.getClass=function(){return ue},ce.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,ce);var le=function(){},he={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};le.prototype.readResolve=function(){return le.instance()},le.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new ue(arguments[0]);if(P(arguments[0],B))return new ue(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),e<2?new ue(t):new ue(t,e)}},le.prototype.interfaces_=function(){return[I,e]},le.prototype.getClass=function(){return le},le.instance=function(){return le.instanceObject},he.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},he.instanceObject.get=function(){return new le},Object.defineProperties(le,he);var pe=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Et,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Rt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Pt),fe=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ge){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},de={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new k(n).compareTo(new k(r))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof S){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,x]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},de.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},de.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,de);var ge=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},ve={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ge.prototype.readResolve=function(){return ge.nameToTypeMap.get(this._name)},ge.prototype.toString=function(){return this._name},ge.prototype.interfaces_=function(){return[e]},ge.prototype.getClass=function(){return ge},ve.serialVersionUID.get=function(){return-552860263173159e4},ve.nameToTypeMap.get=function(){return new pe},Object.defineProperties(ge,ve),fe.Type=ge,fe.FIXED=new ge("FIXED"),fe.FLOATING=new ge("FLOATING"),fe.FLOATING_SINGLE=new ge("FLOATING SINGLE");var ye=function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?P(arguments[0],I)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},me={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new S(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new S(t.getMinX(),t.getMinY()),new S(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new S(t.getMinX(),t.getMinY()),new S(t.getMinX(),t.getMaxY()),new S(t.getMaxX(),t.getMaxY()),new S(t.getMaxX(),t.getMinY()),new S(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new Kt(this.getCoordinateSequenceFactory().create(t),this):P(t,B)?new Kt(t,this):void 0:new Kt(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){return 0===arguments.length?new Ut(null,this):1===arguments.length?new Ut(arguments[0],this):void 0},ye.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ye.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof Qt)return this.createMultiPolygon(ye.toPolygonArray(t));if(s instanceof Kt)return this.createMultiLineString(ye.toLineStringArray(t));if(s instanceof Zt)return this.createMultiPoint(ye.toPointArray(t));et.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof S){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(P(arguments[0],B))return new Zt(arguments[0],this)}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new Qt(null,null,this);if(1===arguments.length){if(P(arguments[0],B)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length)return new Qt(arguments[0],arguments[1],this)},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){return 0===arguments.length?new Xt(null,this):1===arguments.length?new Xt(arguments[0],this):void 0},ye.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],B))return new ee(arguments[0],this)}},ye.prototype.createMultiPolygon=function(){return 0===arguments.length?new ne(null,this):1===arguments.length?new ne(arguments[0],this):void 0},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new te(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new te(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(P(arguments[0],B)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());Wt.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return le.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},me.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,me);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=function(t){this.geometryFactory=t||new ye};be.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!xe[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(n)?xe[n].apply(this,[e.coordinates]):"GeometryCollection"===n?xe[n].apply(this,[e.geometries]):xe[n].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!we[e])throw new Error("Geometry is not supported");return we[e].apply(this,[t])};var xe={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!xe[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=xe.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new S(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new S(t[0],t[1]),new S(t[2],t[1]),new S(t[2],t[3]),new S(t[0],t[3]),new S(t[0],t[1])])},Point:function(t){var e=new S(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=xe.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(xe.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=xe.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=xe.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(xe.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},we={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:we.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(we.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=we.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=we.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=we.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(we[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Ee=function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)};Ee.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},Ee.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Se=function(){this.parser=new be(this.geometryFactory)};Se.prototype.write=function(t){return this.parser.write(t)};var Ce=function(){},Te={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce},Ce.opposite=function(t){return t===Ce.LEFT?Ce.RIGHT:t===Ce.RIGHT?Ce.LEFT:t},Te.ON.get=function(){return 0},Te.LEFT.get=function(){return 1},Te.RIGHT.get=function(){return 2},Object.defineProperties(Ce,Te),(g.prototype=new Error).name="EmptyStackException",(v.prototype=new wt).add=function(t){return this.array_.push(t),!0},v.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},v.prototype.push=function(t){return this.array_.push(t),t},v.prototype.pop=function(t){if(0===this.array_.length)throw new g;return this.array_.pop()},v.prototype.peek=function(){if(0===this.array_.length)throw new g;return this.array_[this.array_.length-1]},v.prototype.empty=function(){return 0===this.array_.length},v.prototype.isEmpty=function(){return this.empty()},v.prototype.search=function(t){return this.array_.indexOf(t)},v.prototype.size=function(){return this.array_.length},v.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Ie=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Ie.prototype.getCoordinate=function(){return this._minCoord},Ie.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ie.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();et.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=st.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===st.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===st.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ie.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Ce.LEFT;return n[e].y<n[e+1].y&&(r=Ce.RIGHT),r},Ie.prototype.getEdge=function(){return this._orientedDe},Ie.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ie.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ie.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}et.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Ce.LEFT&&(this._orientedDe=this._minDe.getSym())},Ie.prototype.interfaces_=function(){return[]},Ie.prototype.getClass=function(){return Ie};var Oe=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new S(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(Q),Me=function(){this.array_=[]};Me.prototype.addLast=function(t){this.array_.push(t)},Me.prototype.removeFirst=function(){return this.array_.shift()},Me.prototype.isEmpty=function(){return 0===this.array_.length};var Pe=function(){this._finder=null,this._dirEdgeList=new Et,this._nodes=new Et,this._rightMostCoord=null,this._env=null,this._finder=new Ie};Pe.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Pe.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Pe.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Oe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},Pe.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Ce.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Pe.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Pe.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Ce.RIGHT)>=1&&e.getDepth(Ce.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Pe.prototype.computeDepths=function(t){var e=new Rt,n=new Me,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},Pe.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Pe.prototype.getEnvelope=function(){if(null===this._env){for(var t=new V,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},Pe.prototype.addReachable=function(t){var e=new v;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},Pe.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Ce.LEFT,t.getDepth(Ce.RIGHT)),e.setDepth(Ce.RIGHT,t.getDepth(Ce.LEFT))},Pe.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},Pe.prototype.getNodes=function(){return this._nodes},Pe.prototype.getDirectedEdges=function(){return this._dirEdgeList},Pe.prototype.interfaces_=function(){return[x]},Pe.prototype.getClass=function(){return Pe};var Le=function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[Ce.ON]=n}else if(arguments[0]instanceof t){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)this.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.init(3),this.location[Ce.ON]=o,this.location[Ce.LEFT]=a,this.location[Ce.RIGHT]=s}};Le.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Le.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==O.NONE)return!1;return!0},Le.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===O.NONE&&(this.location[e]=t)},Le.prototype.isLine=function(){return 1===this.location.length},Le.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ce.ON]=this.location[Ce.ON],e[Ce.LEFT]=O.NONE,e[Ce.RIGHT]=O.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===O.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},Le.prototype.getLocations=function(){return this.location},Le.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Ce.LEFT];this.location[Ce.LEFT]=this.location[Ce.RIGHT],this.location[Ce.RIGHT]=t},Le.prototype.toString=function(){var t=new A;return this.location.length>1&&t.append(O.toLocationSymbol(this.location[Ce.LEFT])),t.append(O.toLocationSymbol(this.location[Ce.ON])),this.location.length>1&&t.append(O.toLocationSymbol(this.location[Ce.RIGHT])),t.toString()},Le.prototype.setLocations=function(t,e,n){this.location[Ce.ON]=t,this.location[Ce.LEFT]=e,this.location[Ce.RIGHT]=n},Le.prototype.get=function(t){return t<this.location.length?this.location[t]:O.NONE},Le.prototype.isArea=function(){return this.location.length>1},Le.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===O.NONE)return!0;return!1},Le.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ce.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},Le.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(O.NONE)},Le.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Le.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Le.prototype.interfaces_=function(){return[]},Le.prototype.getClass=function(){return Le};var Re=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Le(e),this.elt[1]=new Le(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Le(n.elt[0]),this.elt[1]=new Le(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new Le(O.NONE),this.elt[1]=new Le(O.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new Le(o,a,s),this.elt[1]=new Le(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],h=arguments[3];this.elt[0]=new Le(O.NONE,O.NONE,O.NONE),this.elt[1]=new Le(O.NONE,O.NONE,O.NONE),this.elt[u].setLocations(c,l,h)}};Re.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Re.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Re.prototype.isNull=function(t){return this.elt[t].isNull()},Re.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Re.prototype.isLine=function(t){return this.elt[t].isLine()},Re.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Le(t.elt[e]):this.elt[e].merge(t.elt[e])},Re.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Re.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ce.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Re.prototype.toString=function(){var t=new A;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Re.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Re.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Re.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ce.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Re.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Re.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Re.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Le(this.elt[t].location[0]))},Re.prototype.interfaces_=function(){return[]},Re.prototype.getClass=function(){return Re},Re.toLineLabel=function(t){for(var e=new Re(O.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Ae=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Et,this._pts=new Et,this._label=new Re(O.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Et,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Ae.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=st.isCCW(this._ring.getCoordinates())},Ae.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Ae.prototype.computePoints=function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new Oe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Oe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();et.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},Ae.prototype.getLinearRing=function(){return this._ring},Ae.prototype.getCoordinate=function(t){return this._pts.get(t)},Ae.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},Ae.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},Ae.prototype.isHole=function(){return this._isHole},Ae.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},Ae.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!st.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},Ae.prototype.addHole=function(t){this._holes.add(t)},Ae.prototype.isShell=function(){return null===this._shell},Ae.prototype.getLabel=function(){return this._label},Ae.prototype.getEdges=function(){return this._edges},Ae.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Ae.prototype.getShell=function(){return this._shell},Ae.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Ce.RIGHT);if(n===O.NONE)return null;if(this._label.getLocation(e)===O.NONE)return this._label.setLocation(e,n),null}},Ae.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Ae.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},Ae.prototype.interfaces_=function(){return[]},Ae.prototype.getClass=function(){return Ae};var ke=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ae),Ne=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Et,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new ke(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ae),De=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};De.prototype.setVisited=function(t){this._isVisited=t},De.prototype.setInResult=function(t){this._isInResult=t},De.prototype.isCovered=function(){return this._isCovered},De.prototype.isCoveredSet=function(){return this._isCoveredSet},De.prototype.setLabel=function(t){this._label=t},De.prototype.getLabel=function(){return this._label},De.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},De.prototype.updateIM=function(t){et.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},De.prototype.isInResult=function(){return this._isInResult},De.prototype.isVisited=function(){return this._isVisited},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Fe=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Re(0,O.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=O.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==O.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Re(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Re)for(var n=arguments[0],r=0;r<2;r++){var i=this.computeMergedLocation(n,r);this._label.getLocation(r)===O.NONE&&this._label.setLocation(r,i)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=O.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case O.BOUNDARY:n=O.INTERIOR;break;case O.INTERIOR:default:n=O.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),je=function(){this.nodeMap=new h,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};je.prototype.find=function(t){return this.nodeMap.get(t)},je.prototype.addNode=function(){if(arguments[0]instanceof S){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Fe){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},je.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},je.prototype.iterator=function(){return this.nodeMap.values().iterator()},je.prototype.values=function(){return this.nodeMap.values()},je.prototype.getBoundaryNodes=function(t){for(var e=new Et,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===O.BOUNDARY&&e.add(r)}return e},je.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},je.prototype.interfaces_=function(){return[]},je.prototype.getClass=function(){return je};var ze=function(){},Be={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};ze.prototype.interfaces_=function(){return[]},ze.prototype.getClass=function(){return ze},ze.isNorthern=function(t){return t===ze.NE||t===ze.NW},ze.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},ze.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},ze.isInHalfPlane=function(t,e){return e===ze.SE?t===ze.SE||t===ze.SW:t===e||t===e+1},ze.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?ze.NE:ze.SE:e>=0?ze.NW:ze.SW}if(arguments[0]instanceof S&&arguments[1]instanceof S){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new m("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?ze.NE:ze.SE:r.y>=n.y?ze.NW:ze.SW}},Be.NE.get=function(){return 0},Be.NW.get=function(){return 1},Be.SW.get=function(){return 2},Be.SE.get=function(){return 3},Object.defineProperties(ze,Be);var Ge=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._edge=e,this.init(n,r),this._label=null}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this._edge=i,this.init(o,a),this._label=s}};Ge.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:st.computeOrientation(t._p0,t._p1,this._p1)},Ge.prototype.getDy=function(){return this._dy},Ge.prototype.getCoordinate=function(){return this._p0},Ge.prototype.setNode=function(t){this._node=t},Ge.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ge.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ge.prototype.getDirectedCoordinate=function(){return this._p1},Ge.prototype.getDx=function(){return this._dx},Ge.prototype.getLabel=function(){return this._label},Ge.prototype.getEdge=function(){return this._edge},Ge.prototype.getQuadrant=function(){return this._quadrant},Ge.prototype.getNode=function(){return this._node},Ge.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ge.prototype.computeLabel=function(t){},Ge.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=ze.quadrant(this._dx,this._dy),et.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ge.prototype.interfaces_=function(){return[x]},Ge.prototype.getClass=function(){return Ge};var Xe=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Re(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Oe("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Ce.LEFT)===O.INTERIOR&&this._label.getLocation(e,Ce.RIGHT)===O.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Ce.LEFT]+"/"+this._depth[Ce.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,O.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,O.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Ce.LEFT&&(r=-1);var i=Ce.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===O.EXTERIOR&&e===O.INTERIOR?1:t===O.INTERIOR&&e===O.EXTERIOR?-1:0},e}(Ge),Ue=function(){};Ue.prototype.createNode=function(t){return new Fe(t,null)},Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue};var qe=function(){if(this._edges=new Et,this._nodes=null,this._edgeEndList=new Et,0===arguments.length)this._nodes=new je(new Ue);else if(1===arguments.length){var t=arguments[0];this._nodes=new je(t)}};qe.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},qe.prototype.find=function(t){return this._nodes.find(t)},qe.prototype.addNode=function(){if(arguments[0]instanceof Fe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof S){var e=arguments[0];return this._nodes.addNode(e)}},qe.prototype.getNodeIterator=function(){return this._nodes.iterator()},qe.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},qe.prototype.debugPrintln=function(t){q.out.println(t)},qe.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===O.BOUNDARY},qe.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},qe.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&st.computeOrientation(t,e,r)===st.COLLINEAR&&ze.quadrant(t,e)===ze.quadrant(n,r)},qe.prototype.getEdgeEnds=function(){return this._edgeEndList},qe.prototype.debugPrint=function(t){q.out.print(t)},qe.prototype.getEdgeIterator=function(){return this._edges.iterator()},qe.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},qe.prototype.insertEdge=function(t){this._edges.add(t)},qe.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},qe.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Xe(n,!0),i=new Xe(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},qe.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},qe.prototype.getNodes=function(){return this._nodes.values()},qe.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},qe.prototype.interfaces_=function(){return[]},qe.prototype.getClass=function(){return qe},qe.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var Ye=function(){this._geometryFactory=null,this._shellList=new Et;var t=arguments[0];this._geometryFactory=t};Ye.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},Ye.prototype.computePolygons=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},Ye.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Oe("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},Ye.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Et,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},Ye.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},Ye.prototype.buildMaximalEdgeRings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new Ne(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},Ye.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},Ye.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},Ye.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;l.contains(r)&&st.isPointInRing(i,c.getCoordinates())&&(h=!0),h&&(null===o||a.contains(l))&&(o=u)}return o},Ye.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return et.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},Ye.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];qe.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Et,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Ve=function(){};Ve.prototype.getBounds=function(){},Ve.prototype.interfaces_=function(){return[]},Ve.prototype.getClass=function(){return Ve};var He=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};He.prototype.getItem=function(){return this._item},He.prototype.getBounds=function(){return this._bounds},He.prototype.interfaces_=function(){return[Ve,e]},He.prototype.getClass=function(){return He};var We=function(){this._size=null,this._items=null,this._size=0,this._items=new Et,this._items.add(null)};We.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},We.prototype.size=function(){return this._size},We.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},We.prototype.clear=function(){this._size=0,this._items.clear()},We.prototype.isEmpty=function(){return 0===this._size},We.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We};var Ke=function(){};Ke.prototype.visitItem=function(t){},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var $e=function(){};$e.prototype.insert=function(t,e){},$e.prototype.remove=function(t,e){},$e.prototype.query=function(){},$e.prototype.interfaces_=function(){return[]},$e.prototype.getClass=function(){return $e};var Ze=function(){if(this._childBoundables=new Et,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Je={serialVersionUID:{configurable:!0}};Ze.prototype.getLevel=function(){return this._level},Ze.prototype.size=function(){return this._childBoundables.size()},Ze.prototype.getChildBoundables=function(){return this._childBoundables},Ze.prototype.addChildBoundable=function(t){et.isTrue(null===this._bounds),this._childBoundables.add(t)},Ze.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Ze.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Ze.prototype.interfaces_=function(){return[Ve,e]},Ze.prototype.getClass=function(){return Ze},Je.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Ze,Je);var Qe=function(){};Qe.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Qe.min=function(t){return Qe.sort(t),t.get(0)},Qe.sort=function(t,e){var n=t.toArray();e?Ft.sort(n,e):Ft.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Qe.singletonList=function(t){var e=new Et;return e.add(t),e};var tn=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};tn.prototype.expandToQueue=function(t,e){var n=tn.isComposite(this._boundable1),r=tn.isComposite(this._boundable2);if(n&&r)return tn.area(this._boundable1)>tn.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new m("neither boundable is composite")},tn.prototype.isLeaves=function(){return!(tn.isComposite(this._boundable1)||tn.isComposite(this._boundable2))},tn.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},tn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new tn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},tn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},tn.prototype.getDistance=function(){return this._distance},tn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},tn.prototype.interfaces_=function(){return[x]},tn.prototype.getClass=function(){return tn},tn.area=function(t){return t.getBounds().getArea()},tn.isComposite=function(t){return t instanceof Ze};var en=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Et,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];et.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},nn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};en.prototype.getNodeCapacity=function(){return this._nodeCapacity},en.prototype.lastNode=function(t){return t.get(t.size()-1)},en.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ze?t+=this.size(n):n instanceof He&&(t+=1)}return t}},en.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof He&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},en.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Et:t}if(1===arguments.length){for(var e=arguments[0],n=new Et,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Ze){var o=this.itemsTree(i);null!==o&&n.add(o)}else i instanceof He?n.add(i.getItem()):et.shouldNeverReachHere()}return n.size()<=0?null:n}},en.prototype.insert=function(t,e){et.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new He(t,e))},en.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(et.isTrue(n>-2),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Ze?this.boundablesAtLevel(n,a,i):(et.isTrue(a instanceof He),-1===n&&i.add(a))}return null}},en.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Et;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(P(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var u=a.get(s);this.getIntersectsOp().intersects(u.getBounds(),i)&&(u instanceof Ze?this.query(i,u,o):u instanceof He?o.visitItem(u.getItem()):et.shouldNeverReachHere())}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze)for(var c=arguments[0],l=arguments[2],h=arguments[1].getChildBoundables(),p=0;p<h.size();p++){var f=h.get(p);this.getIntersectsOp().intersects(f.getBounds(),c)&&(f instanceof Ze?this.query(c,f,l):f instanceof He?l.add(f.getItem()):et.shouldNeverReachHere())}},en.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},en.prototype.getRoot=function(){return this.build(),this._root},en.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var u=s.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ze&&(o=this.remove(n,u,i))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},en.prototype.createHigherLevels=function(t,e){et.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},en.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ze){var r=this.depth(n);r>t&&(t=r)}}return t+1}},en.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var n=new Et;n.add(this.createNode(e));var r=new Et(t);Qe.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},en.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},en.prototype.interfaces_=function(){return[e]},en.prototype.getClass=function(){return en},en.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},nn.IntersectsOp.get=function(){return rn},nn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},nn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(en,nn);var rn=function(){},on=function(){};on.prototype.distance=function(t,e){},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on};var an=function(t){function n(e){e=e||n.DEFAULT_NODE_CAPACITY,t.call(this,e)}t&&(n.__proto__=t),(n.prototype=Object.create(t&&t.prototype)).constructor=n;var r={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return n.prototype.createParentBoundablesFromVerticalSlices=function(t,e){et.isTrue(t.length>0);for(var n=new Et,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},n.prototype.createNode=function(t){return new sn(t)},n.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},n.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},n.prototype.getIntersectsOp=function(){return n.intersectsOp},n.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Et;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},n.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(P(arguments[2],Ke)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(P(arguments[2],wt)&&arguments[0]instanceof Object&&arguments[1]instanceof Ze){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},n.prototype.getComparator=function(){return n.yComparator},n.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},n.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},n.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},n.prototype.createParentBoundables=function(t,e){et.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Et(t);Qe.sort(i,n.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,e)},n.prototype.nearestNeighbour=function(){if(1===arguments.length){if(P(arguments[0],on)){var t=arguments[0],e=new tn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof tn){var r=arguments[0];return this.nearestNeighbour(r,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof n&&P(arguments[1],on)){var i=arguments[0],o=arguments[1],a=new tn(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof tn&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=null,l=new We;for(l.add(s);!l.isEmpty()&&u>0;){var h=l.poll(),p=h.getDistance();if(p>=u)break;h.isLeaves()?(u=p,c=h):h.expandToQueue(l,u)}return[c.getBoundable(0).getItem(),c.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[2],d=new He(arguments[0],arguments[1]),g=new tn(this.getRoot(),d,f);return this.nearestNeighbour(g)[0]}},n.prototype.interfaces_=function(){return[$e,e]},n.prototype.getClass=function(){return n},n.centreX=function(t){return n.avg(t.getMinX(),t.getMaxX())},n.avg=function(t,e){return(t+e)/2},n.centreY=function(t){return n.avg(t.getMinY(),t.getMaxY())},r.STRtreeNode.get=function(){return sn},r.serialVersionUID.get=function(){return 0x39920f7d5f261e0},r.xComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreX(e.getBounds()),n.centreX(r.getBounds()))}}},r.yComparator.get=function(){return{interfaces_:function(){return[E]},compare:function(e,r){return t.compareDoubles(n.centreY(e.getBounds()),n.centreY(r.getBounds()))}}},r.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},r.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(n,r),n}(en),sn=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new V(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ze),un=function(){};un.prototype.interfaces_=function(){return[]},un.prototype.getClass=function(){return un},un.relativeSign=function(t,e){return t<e?-1:t>e?1:0},un.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=un.relativeSign(e.x,n.x),i=un.relativeSign(e.y,n.y);switch(t){case 0:return un.compareValue(r,i);case 1:return un.compareValue(i,r);case 2:return un.compareValue(i,-r);case 3:return un.compareValue(-r,i);case 4:return un.compareValue(-r,-i);case 5:return un.compareValue(-i,-r);case 6:return un.compareValue(-i,r);case 7:return un.compareValue(r,-i)}return et.shouldNeverReachHere("invalid octant value"),0},un.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var cn=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new S(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};cn.prototype.getCoordinate=function(){return this.coord},cn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},cn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:un.compare(this._segmentOctant,this.coord,e.coord)},cn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},cn.prototype.isInterior=function(){return this._isInterior},cn.prototype.interfaces_=function(){return[x]},cn.prototype.getClass=function(){return cn};var ln=function(){this._nodeMap=new h,this._edge=null;var t=arguments[0];this._edge=t};ln.prototype.getSplitCoordinates=function(){var t=new Ct;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},ln.prototype.addCollapsedNodes=function(){var t=new Et;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},ln.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},ln.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new k(e+1))}},ln.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new S(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new S(e.coord))},ln.prototype.iterator=function(){return this._nodeMap.values().iterator()},ln.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},ln.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},ln.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new k(e[0])),r=i}},ln.prototype.getEdge=function(){return this._edge},ln.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ln.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new S(e.coord)),new dn(o,this._edge.getData())},ln.prototype.add=function(t,e){var n=new cn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(et.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},ln.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new Q("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new Q("bad split edge end point at "+i)},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln};var hn=function(){};hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new m("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof S&&arguments[1]instanceof S){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new m("Cannot compute the octant for two identical points "+i);return hn.octant(a,s)}};var pn=function(){};pn.prototype.getCoordinates=function(){},pn.prototype.size=function(){},pn.prototype.getCoordinate=function(t){},pn.prototype.isClosed=function(){},pn.prototype.setData=function(t){},pn.prototype.getData=function(){},pn.prototype.interfaces_=function(){return[]},pn.prototype.getClass=function(){return pn};var fn=function(){};fn.prototype.addIntersection=function(t,e){},fn.prototype.interfaces_=function(){return[pn]},fn.prototype.getClass=function(){return fn};var dn=function(){this._nodeList=new ln(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};dn.prototype.getCoordinates=function(){return this._pts},dn.prototype.size=function(){return this._pts.length},dn.prototype.getCoordinate=function(t){return this._pts[t]},dn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},dn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},dn.prototype.setData=function(t){this._data=t},dn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:hn.octant(t,e)},dn.prototype.getData=function(){return this._data},dn.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],r=arguments[3],i=new S(arguments[0].getIntersection(r));this.addIntersection(i,n)}},dn.prototype.toString=function(){return J.toLineString(new ue(this._pts))},dn.prototype.getNodeList=function(){return this._nodeList},dn.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},dn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},dn.prototype.interfaces_=function(){return[fn]},dn.prototype.getClass=function(){return dn},dn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Et;return dn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gn=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new S,this.p1=new S;else if(1===arguments.length){var t=arguments[0];this.p0=new S(t.p0),this.p1=new S(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new S(e,n),this.p1=new S(r,i)}},vn={serialVersionUID:{configurable:!0}};gn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gn.prototype.orientationIndex=function(){if(arguments[0]instanceof gn){var t=arguments[0],e=st.orientationIndex(this.p0,this.p1,t.p0),n=st.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof S){var r=arguments[0];return st.orientationIndex(this.p0,this.p1,r)}},gn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gn.prototype.isVertical=function(){return this.p0.x===this.p1.x},gn.prototype.equals=function(t){if(!(t instanceof gn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gn.prototype.intersection=function(t){var e=new it;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gn.prototype.project=function(){if(arguments[0]instanceof S){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new S(t);var e=this.projectionFactor(t),n=new S;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof gn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new gn(a,s)}},gn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gn.prototype.distancePerpendicular=function(t){return st.distancePointLinePerpendicular(t,this.p0,this.p1)},gn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gn.prototype.midPoint=function(){return gn.midPoint(this.p0,this.p1)},gn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},gn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=_.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},gn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gn.prototype.getLength=function(){return this.p0.distance(this.p1)},gn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},gn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gn.prototype.lineIntersection=function(t){try{return Y.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof U))throw t}return null},gn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new S(n-u,r+s)},gn.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},gn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},gn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gn.prototype.distance=function(){if(arguments[0]instanceof gn){var t=arguments[0];return st.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof S){var e=arguments[0];return st.distancePointLine(e,this.p0,this.p1)}},gn.prototype.pointAlong=function(t){var e=new S;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gn.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=_.doubleToLongBits(this.p1.x);return n^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},gn.prototype.interfaces_=function(){return[x,e]},gn.prototype.getClass=function(){return gn},gn.midPoint=function(t,e){return new S((t.x+e.x)/2,(t.y+e.y)/2)},vn.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gn,vn);var yn=function(){this.tempEnv1=new V,this.tempEnv2=new V,this._overlapSeg1=new gn,this._overlapSeg2=new gn};yn.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var mn=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};mn.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},mn.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},mn.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},mn.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},mn.prototype.setId=function(t){this._id=t},mn.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},mn.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new V(t,e)}return this._env},mn.prototype.getEndIndex=function(){return this._end},mn.prototype.getStartIndex=function(){return this._start},mn.prototype.getContext=function(){return this._context},mn.prototype.getId=function(){return this._id},mn.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<l&&(r<h&&this.computeOverlapsInternal(t,l,n,r,h,o),h<i&&this.computeOverlapsInternal(t,l,n,h,i,o)),l<e&&(r<h&&this.computeOverlapsInternal(l,e,n,r,h,o),h<i&&this.computeOverlapsInternal(l,e,n,h,i,o))},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn};var _n=function(){};_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new k(e));do{var r=_n.findChainEnd(t,e);n.add(new k(r)),e=r}while(e<t.length-1);return _n.toIntArray(n)},_n.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ze.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||ze.quadrant(t[i-1],t[i])===r);)i++;return i-1},_n.getChains=function(){if(1===arguments.length){var t=arguments[0];return _n.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Et,i=_n.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new mn(e,i[o],i[o+1],n);r.add(a)}return r}},_n.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var bn=function(){};bn.prototype.computeNodes=function(t){},bn.prototype.getNodedSubstrings=function(){},bn.prototype.interfaces_=function(){return[]},bn.prototype.getClass=function(){return bn};var xn=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};xn.prototype.setSegmentIntersector=function(t){this._segInt=t},xn.prototype.interfaces_=function(){return[bn]},xn.prototype.getClass=function(){return xn};var wn=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Et,this._index=new an,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=_n.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new En(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return En},Object.defineProperties(e,n),e}(xn),En=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[1],n=arguments[2],r=arguments[3],i=arguments[0].getContext(),o=n.getContext();this._si.processIntersections(i,e,o,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yn),Sn=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Cn={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Sn.prototype.getEndCapStyle=function(){return this._endCapStyle},Sn.prototype.isSingleSided=function(){return this._isSingleSided},Sn.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Sn.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Sn.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Sn.JOIN_ROUND&&(this._quadrantSegments=Sn.DEFAULT_QUADRANT_SEGMENTS)},Sn.prototype.getJoinStyle=function(){return this._joinStyle},Sn.prototype.setJoinStyle=function(t){this._joinStyle=t},Sn.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Sn.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Sn.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Sn.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Sn.prototype.getMitreLimit=function(){return this._mitreLimit},Sn.prototype.setMitreLimit=function(t){this._mitreLimit=t},Sn.prototype.setSingleSided=function(t){this._isSingleSided=t},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn},Sn.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Cn.CAP_ROUND.get=function(){return 1},Cn.CAP_FLAT.get=function(){return 2},Cn.CAP_SQUARE.get=function(){return 3},Cn.JOIN_ROUND.get=function(){return 1},Cn.JOIN_MITRE.get=function(){return 2},Cn.JOIN_BEVEL.get=function(){return 3},Cn.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Cn.DEFAULT_MITRE_LIMIT.get=function(){return 5},Cn.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Sn,Cn);var Tn=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=st.COUNTERCLOCKWISE,this._inputLine=t||null},In={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Tn.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Tn.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=Tn.DELETE,i=!0,r=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},Tn.prototype.isShallowConcavity=function(t,e,n,r){return st.computeOrientation(t,e,n)===this._angleOrientation&&st.distancePointLine(e,t,n)<r},Tn.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Tn.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Tn.prototype.isConcave=function(t,e,n){return st.computeOrientation(t,e,n)===this._angleOrientation},Tn.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=st.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Tn.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Tn.DELETE;)e++;return e},Tn.prototype.isShallow=function(t,e,n,r){return st.distancePointLine(e,t,n)<r},Tn.prototype.collapseLine=function(){for(var t=new Ct,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Tn.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Tn.simplify=function(t,e){return new Tn(t).simplify(e)},In.INIT.get=function(){return 0},In.DELETE.get=function(){return 1},In.KEEP.get=function(){return 1},In.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Tn,In);var On=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Et},Mn={COORDINATE_ARRAY_TYPE:{configurable:!0}};On.prototype.getCoordinates=function(){return this._ptList.toArray(On.COORDINATE_ARRAY_TYPE)},On.prototype.setPrecisionModel=function(t){this._precisionModel=t},On.prototype.addPt=function(t){var e=new S(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},On.prototype.revere=function(){},On.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},On.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},On.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},On.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new S(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},On.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On},Mn.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(On,Mn);var Pn=function(){},Ln={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.toDegrees=function(t){return 180*t/Math.PI},Pn.normalize=function(t){for(;t>Math.PI;)t-=Pn.PI_TIMES_2;for(;t<=-Math.PI;)t+=Pn.PI_TIMES_2;return t},Pn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Pn.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Pn.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Pn.interiorAngle=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Math.abs(i-r)},Pn.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Pn.PI_TIMES_2;t>=Pn.PI_TIMES_2&&(t=0)}else{for(;t>=Pn.PI_TIMES_2;)t-=Pn.PI_TIMES_2;t<0&&(t=0)}return t},Pn.angleBetween=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n);return Pn.diff(r,i)},Pn.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Pn.toRadians=function(t){return t*Math.PI/180},Pn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Pn.COUNTERCLOCKWISE:n<0?Pn.CLOCKWISE:Pn.NONE},Pn.angleBetweenOriented=function(t,e,n){var r=Pn.angle(e,t),i=Pn.angle(e,n)-r;return i<=-Math.PI?i+Pn.PI_TIMES_2:i>Math.PI?i-Pn.PI_TIMES_2:i},Ln.PI_TIMES_2.get=function(){return 2*Math.PI},Ln.PI_OVER_2.get=function(){return Math.PI/2},Ln.PI_OVER_4.get=function(){return Math.PI/4},Ln.COUNTERCLOCKWISE.get=function(){return st.COUNTERCLOCKWISE},Ln.CLOCKWISE.get=function(){return st.CLOCKWISE},Ln.NONE.get=function(){return st.COLLINEAR},Object.defineProperties(Pn,Ln);var Rn=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gn,this._seg1=new gn,this._offset0=new gn,this._offset1=new gn,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new it,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Sn.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},An={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Rn.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=st.computeOrientation(this._s0,this._s1,this._s2),r=n===st.CLOCKWISE&&this._side===Ce.LEFT||n===st.COUNTERCLOCKWISE&&this._side===Ce.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},Rn.prototype.addLineEndCap=function(t,e){var n=new gn(t,e),r=new gn;this.computeOffsetSegment(n,Ce.LEFT,this._distance,r);var i=new gn;this.computeOffsetSegment(n,Ce.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,st.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Sn.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Sn.CAP_SQUARE:var u=new S;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new S(r.p1.x+u.x,r.p1.y+u.y),l=new S(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},Rn.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Rn.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Y.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof U))throw t;o=new S(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},Rn.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===st.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},Rn.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Rn.prototype.createSquare=function(t){this._segList.addPt(new S(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new S(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new S(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Rn.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Rn.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Rn.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Rn.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},Rn.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Pn.angle(i,this._seg0.p0),a=Pn.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Pn.normalize(o+a),u=Pn.normalize(s+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(a)),h=i.x+c*Math.cos(u),p=i.y+c*Math.sin(u),f=new S(h,p),d=new gn(i,f),g=d.pointAlongOffset(1,l),v=d.pointAlongOffset(1,-l);this._side===Ce.LEFT?(this._segList.addPt(g),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(g))},Rn.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Ce.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},Rn.prototype.addFilletArc=function(t,e,n,r,i){var o=r===st.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new S;c<a;){var h=e+o*c;l.x=t.x+i*Math.cos(h),l.y=t.y+i*Math.sin(h),this._segList.addPt(l),c+=u}},Rn.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Rn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new S((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new S((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Rn.prototype.createCircle=function(t){var e=new S(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Rn.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Rn.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new On,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Rn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Rn.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Sn.JOIN_BEVEL||this._bufParams.getJoinStyle()===Sn.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,st.CLOCKWISE,this._distance))},Rn.prototype.closeRing=function(){this._segList.closeRing()},Rn.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Rn.prototype.interfaces_=function(){return[]},Rn.prototype.getClass=function(){return Rn},An.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},An.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},An.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},An.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Rn,An);var kn=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};kn.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Tt.reverse(o),o},kn.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Tn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ce.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Tn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ce.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},kn.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Ce.RIGHT&&(r=-r);var i=Tn.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},kn.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Tn.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Ce.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Tn.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Ce.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},kn.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Sn.CAP_ROUND:e.createCircle(t);break;case Sn.CAP_SQUARE:e.createSquare(t)}},kn.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},kn.prototype.getBufferParameters=function(){return this._bufParams},kn.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},kn.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return kn.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},kn.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Tn.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Ce.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Tn.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Ce.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},kn.prototype.getSegGen=function(t){return new Rn(this._precisionModel,this._bufParams,t)},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},kn.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new S(t[n]);return e};var Nn=function(){this._subgraphs=null,this._seg=new gn,this._cga=new st;var t=arguments[0];this._subgraphs=t},Dn={DepthSegment:{configurable:!0}};Nn.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Et,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(P(arguments[2],wt)&&arguments[0]instanceof S&&arguments[1]instanceof Xe){for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getEdge().getCoordinates(),c=0;c<u.length-1;c++)if(this._seg.p0=u[c],this._seg.p1=u[c+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||st.computeOrientation(this._seg.p0,this._seg.p1,o)===st.RIGHT)){var l=a.getDepth(Ce.LEFT);this._seg.p0.equals(u[c])||(l=a.getDepth(Ce.RIGHT));var h=new Fn(this._seg,l);s.add(h)}}else if(P(arguments[2],wt)&&arguments[0]instanceof S&&P(arguments[1],wt))for(var p=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var g=d.next();g.isForward()&&this.findStabbedSegments(p,g,f)}},Nn.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Qe.min(e)._leftDepth},Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Dn.DepthSegment.get=function(){return Fn},Object.defineProperties(Nn,Dn);var Fn=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gn(t),this._leftDepth=e};Fn.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},Fn.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},Fn.prototype.toString=function(){return this._upwardSeg.toString()},Fn.prototype.interfaces_=function(){return[x]},Fn.prototype.getClass=function(){return Fn};var jn=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};jn.prototype.area=function(){return jn.area(this.p0,this.p1,this.p2)},jn.prototype.signedArea=function(){return jn.signedArea(this.p0,this.p1,this.p2)},jn.prototype.interpolateZ=function(t){if(null===t)throw new m("Supplied point is null.");return jn.interpolateZ(t,this.p0,this.p1,this.p2)},jn.prototype.longestSideLength=function(){return jn.longestSideLength(this.p0,this.p1,this.p2)},jn.prototype.isAcute=function(){return jn.isAcute(this.p0,this.p1,this.p2)},jn.prototype.circumcentre=function(){return jn.circumcentre(this.p0,this.p1,this.p2)},jn.prototype.area3D=function(){return jn.area3D(this.p0,this.p1,this.p2)},jn.prototype.centroid=function(){return jn.centroid(this.p0,this.p1,this.p2)},jn.prototype.inCentre=function(){return jn.inCentre(this.p0,this.p1,this.p2)},jn.prototype.interfaces_=function(){return[]},jn.prototype.getClass=function(){return jn},jn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},jn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},jn.det=function(t,e,n,r){return t*r-e*n},jn.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,c=r.y-o,l=a*c-s*u,h=t.x-i,p=t.y-o,f=(c*h-s*p)/l,d=(-u*h+a*p)/l;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},jn.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},jn.isAcute=function(t,e,n){return!!Pn.isAcute(t,e,n)&&!!Pn.isAcute(e,n,t)&&!!Pn.isAcute(n,t,e)},jn.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,c=2*jn.det(o,a,s,u),l=jn.det(a,o*o+a*a,u,s*s+u*u),h=jn.det(o,o*o+a*a,s,s*s+u*u);return new S(r-l/c,i+h/c)},jn.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Y(t.x+n/2,t.y+r/2,1),o=new Y(t.x-r+n/2,t.y+n+r/2,1);return new Y(i,o)},jn.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new S(t.x+i*o,t.y+i*a)},jn.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,c=i*u-o*s,l=o*a-r*u,h=r*s-i*a,p=c*c+l*l+h*h;return Math.sqrt(p)/2},jn.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new S(r,i)},jn.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new S(s,u)};var zn=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};zn.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,O.EXTERIOR,O.INTERIOR)},zn.prototype.addPolygon=function(t){var e=this._distance,n=Ce.LEFT;this._distance<0&&(e=-this._distance,n=Ce.RIGHT);var r=t.getExteriorRing(),i=Tt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,O.EXTERIOR,O.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Tt.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Ce.opposite(n),O.INTERIOR,O.EXTERIOR)}},zn.prototype.isTriangleErodedCompletely=function(t,e){var n=new jn(t[0],t[1],t[2]),r=n.inCentre();return st.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},zn.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Tt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,O.EXTERIOR,O.INTERIOR)},zn.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new dn(t,new Re(0,O.BOUNDARY,e,n));this._curveList.add(r)},zn.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},zn.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=ee.MINIMUM_VALID_SIZE&&st.isCCW(t)&&(o=i,a=r,n=Ce.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},zn.prototype.add=function(t){if(t.isEmpty())return null;t instanceof Qt?this.addPolygon(t):t instanceof Kt?this.addLineString(t):t instanceof Zt?this.addPoint(t):(t instanceof te||t instanceof Ut||t instanceof ne||t instanceof Xt)&&this.addCollection(t)},zn.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},zn.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},zn.prototype.interfaces_=function(){return[]},zn.prototype.getClass=function(){return zn};var Bn=function(){};Bn.prototype.locate=function(t){},Bn.prototype.interfaces_=function(){return[]},Bn.prototype.getClass=function(){return Bn};var Gn=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Gn.prototype.next=function(){if(this._atStart)return this._atStart=!1,Gn.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof Xt?(this._subcollectionIterator=new Gn(t),this._subcollectionIterator.next()):t},Gn.prototype.remove=function(){throw new Error(this.getClass().getName())},Gn.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Gn.prototype.interfaces_=function(){return[xt]},Gn.prototype.getClass=function(){return Gn},Gn.isAtomic=function(t){return!(t instanceof Xt)};var Xn=function(){this._geom=null;var t=arguments[0];this._geom=t};Xn.prototype.locate=function(t){return Xn.locate(t,this._geom)},Xn.prototype.interfaces_=function(){return[Bn]},Xn.prototype.getClass=function(){return Xn},Xn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&st.isPointInRing(t,e.getCoordinates())},Xn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Xn.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Xn.isPointInRing(t,i))return!1}return!0},Xn.containsPoint=function(t,e){if(e instanceof Qt)return Xn.containsPointInPolygon(t,e);if(e instanceof Xt)for(var n=new Gn(e);n.hasNext();){var r=n.next();if(r!==e&&Xn.containsPoint(t,r))return!0}return!1},Xn.locate=function(t,e){return e.isEmpty()?O.EXTERIOR:Xn.containsPoint(t,e)?O.INTERIOR:O.EXTERIOR};var Un=function(){this._edgeMap=new h,this._edgeList=null,this._ptInAreaLocation=[O.NONE,O.NONE]};Un.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Un.prototype.propagateSideLabels=function(t){for(var e=O.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Ce.LEFT)!==O.NONE&&(e=r.getLocation(t,Ce.LEFT))}if(e===O.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Ce.ON)===O.NONE&&s.setLocation(t,Ce.ON,i),s.isArea(t)){var u=s.getLocation(t,Ce.LEFT),c=s.getLocation(t,Ce.RIGHT);if(c!==O.NONE){if(c!==i)throw new Oe("side location conflict",a.getCoordinate());u===O.NONE&&et.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else et.isTrue(s.getLocation(t,Ce.LEFT)===O.NONE,"found single null side"),s.setLocation(t,Ce.RIGHT,i),s.setLocation(t,Ce.LEFT,i)}}},Un.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Un.prototype.print=function(t){q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Un.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Un.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Ce.LEFT);et.isTrue(r!==O.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();et.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Ce.LEFT),u=a.getLocation(t,Ce.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},Un.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Un.prototype.iterator=function(){return this.getEdges().iterator()},Un.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Et(this._edgeMap.values())),this._edgeList},Un.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===O.NONE&&(this._ptInAreaLocation[t]=Xn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Un.prototype.toString=function(){var t=new A;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Un.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Un.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===O.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=O.NONE;if(e[u])c=O.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},Un.prototype.getDegree=function(){return this._edgeMap.size()},Un.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un};var qn=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new Oe("no outgoing dirEdge found",this.getCoordinate());et.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return ze.isNorthern(i)&&ze.isNorthern(o)?n:ze.isNorthern(i)||ze.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(et.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Et;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Ce.LEFT),r=t.getDepth(Ce.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new Oe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var u=this._edgeList.get(s);u.setEdgeDepths(Ce.RIGHT,a),a=u.getDepth(Ce.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;i>=0;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(et.isTrue(null!==e,"found null for first outgoing dirEdge"),et.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=O.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=O.INTERIOR;break}if(r.isInResult()){t=O.EXTERIOR;break}}}if(t===O.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===O.INTERIOR):(a.isInResult()&&(i=O.EXTERIOR),s.isInResult()&&(i=O.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Re(O.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==O.INTERIOR&&o!==O.BOUNDARY||this._label.setLocation(i,O.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Un),Yn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Fe(t,new qn)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ue),Vn=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};Vn.prototype.compareTo=function(t){var e=t;return Vn.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Vn.prototype.interfaces_=function(){return[x]},Vn.prototype.getClass=function(){return Vn},Vn.orientation=function(t){return 1===Tt.increasingDirection(t)},Vn.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var h=(u+=i)===a,p=(c+=o)===s;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Hn=function(){this._edges=new Et,this._ocaMap=new h};Hn.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Hn.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Hn.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Hn.prototype.iterator=function(){return this._edges.iterator()},Hn.prototype.getEdges=function(){return this._edges},Hn.prototype.get=function(t){return this._edges.get(t)},Hn.prototype.findEqualEdge=function(t){var e=new Vn(t.getCoordinates());return this._ocaMap.get(e)},Hn.prototype.add=function(t){this._edges.add(t);var e=new Vn(t.getCoordinates());this._ocaMap.put(e,t)},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn};var Wn=function(){};Wn.prototype.processIntersections=function(t,e,n,r){},Wn.prototype.isDone=function(){},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};var Kn=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};Kn.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(Kn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},Kn.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Kn.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Kn.prototype.getLineIntersector=function(){return this._li},Kn.prototype.hasProperIntersection=function(){return this._hasProper},Kn.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Kn.prototype.hasIntersection=function(){return this._hasIntersection},Kn.prototype.isDone=function(){return!1},Kn.prototype.hasInteriorIntersection=function(){return this._hasInterior},Kn.prototype.interfaces_=function(){return[Wn]},Kn.prototype.getClass=function(){return Kn},Kn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var $n=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new S(t),this.segmentIndex=e,this.dist=n};$n.prototype.getSegmentIndex=function(){return this.segmentIndex},$n.prototype.getCoordinate=function(){return this.coord},$n.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},$n.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},$n.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},$n.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},$n.prototype.getDistance=function(){return this.dist},$n.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},$n.prototype.interfaces_=function(){return[x]},$n.prototype.getClass=function(){return $n};var Zn=function(){this._nodeMap=new h,this.edge=null;var t=arguments[0];this.edge=t};Zn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Zn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Zn.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Zn.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Zn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new S(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new nr(o,new Re(this.edge._label))},Zn.prototype.add=function(t,e,n){var r=new $n(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Zn.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn};var Jn=function(){};Jn.prototype.getChainStartIndices=function(t){var e=0,n=new Et;n.add(new k(e));do{var r=this.findChainEnd(t,e);n.add(new k(r)),e=r}while(e<t.length-1);return Jn.toIntArray(n)},Jn.prototype.findChainEnd=function(t,e){for(var n=ze.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&ze.quadrant(t[r-1],t[r])===n;)r++;return r-1},Jn.prototype.interfaces_=function(){return[]},Jn.prototype.getClass=function(){return Jn},Jn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Qn=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new V,this.env2=new V;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Jn;this.startIndex=e.getChainStartIndices(this.pts)};Qn.prototype.getCoordinates=function(){return this.pts},Qn.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Qn.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Qn.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],h=this.pts[o],p=a.pts[s],f=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,c),g<u&&this.computeIntersectsForChain(i,d,a,g,u,c)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,c),g<u&&this.computeIntersectsForChain(d,o,a,g,u,c))}},Qn.prototype.getStartIndexes=function(){return this.startIndex},Qn.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};var tr=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},er={NULL_VALUE:{configurable:!0}};tr.prototype.getDepth=function(t,e){return this._depth[t][e]},tr.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},tr.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tr.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===tr.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===tr.NULL_VALUE}},tr.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},tr.prototype.getDelta=function(t){return this._depth[t][Ce.RIGHT]-this._depth[t][Ce.LEFT]},tr.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?O.EXTERIOR:O.INTERIOR},tr.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tr.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==O.EXTERIOR&&r!==O.INTERIOR||(this.isNull(e,n)?this._depth[e][n]=tr.depthAtLocation(r):this._depth[e][n]+=tr.depthAtLocation(r))}else if(3===arguments.length){var i=arguments[0],o=arguments[1];arguments[2]===O.INTERIOR&&this._depth[i][o]++}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.depthAtLocation=function(t){return t===O.EXTERIOR?0:t===O.INTERIOR?1:tr.NULL_VALUE},er.NULL_VALUE.get=function(){return-1},Object.defineProperties(tr,er);var nr=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Zn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tr,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Re.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Qn(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new V;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new S(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new A;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Ce.ON),e.getLocation(1,Ce.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Ce.LEFT),e.getLocation(1,Ce.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Ce.RIGHT),e.getLocation(1,Ce.RIGHT),2))},e}(De),rr=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Hn,this._bufParams=t||null};rr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rr.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip(),n.merge(r);var i=rr.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rr.depthDelta(t.getLabel()))},rr.prototype.buildSubgraphs=function(t,e){for(var n=new Et,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new Nn(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},rr.prototype.createSubgraphs=function(t){for(var e=new Et,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new Pe;i.create(r),e.add(i)}}return Qe.sort(e,Qe.reverseOrder()),e},rr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new wn,n=new it;return n.setPrecisionModel(t),e.setSegmentIntersector(new Kn(n)),e},rr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new kn(n,this._bufParams),i=new zn(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new qe(new Yn),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new Ye(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},rr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new nr(i.getCoordinates(),new Re(a));this.insertUniqueEdge(s)}}},rr.prototype.setNoder=function(t){this._workingNoder=t},rr.prototype.interfaces_=function(){return[]},rr.prototype.getClass=function(){return rr},rr.depthDelta=function(t){var e=t.getLocation(0,Ce.LEFT),n=t.getLocation(0,Ce.RIGHT);return e===O.INTERIOR&&n===O.EXTERIOR?1:e===O.EXTERIOR&&n===O.INTERIOR?-1:0},rr.convertSegStrings=function(t){for(var e=new ye,n=new Et;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var ir=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};ir.prototype.rescale=function(){if(P(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&q.out.println(n)}},ir.prototype.scale=function(){if(P(arguments[0],bt)){for(var t=arguments[0],e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new dn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new S(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Tt.removeRepeatedPoints(o)}},ir.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},ir.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},ir.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},ir.prototype.interfaces_=function(){return[bn]},ir.prototype.getClass=function(){return ir};var or=function(){this._li=new it,this._segStrings=null;var t=arguments[0];this._segStrings=t},ar={fact:{configurable:!0}};or.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new Q("found endpt/interior pt intersection at index "+o+" :pt "+n)},or.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),u=0;u<a.length-1;u++)for(var c=0;c<s.length-1;c++)this.checkInteriorIntersections(i,u,o,c);else if(4===arguments.length){var l=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3];if(l===p&&h===f)return null;var d=l.getCoordinates()[h],g=l.getCoordinates()[h+1],v=p.getCoordinates()[f],y=p.getCoordinates()[f+1];if(this._li.computeIntersection(d,g,v,y),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,g)||this.hasInteriorIntersection(this._li,v,y)))throw new Q("found non-noded intersection at "+d+"-"+g+" and "+v+"-"+y)}},or.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},or.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},or.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},or.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new Q("found non-noded collapse at "+or.fact.createLineString([t,e,n]))},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},ar.fact.get=function(){return new ye},Object.defineProperties(or,ar);var sr=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m("Scale factor must be non-zero");1!==e&&(this._pt=new S(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new S,this._p1Scaled=new S),this.initCorners(this._pt)},ur={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};sr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return et.isTrue(!(a&&s),"Found bad envelope test"),s},sr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new S(this._maxx,this._maxy),this._corner[1]=new S(this._minx,this._maxy),this._corner[2]=new S(this._minx,this._miny),this._corner[3]=new S(this._maxx,this._miny)},sr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},sr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},sr.prototype.getCoordinate=function(){return this._originalPt},sr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},sr.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=sr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new V(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},sr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},sr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},sr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},ur.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(sr,ur);var cr=function(){this.tempEnv1=new V,this.selectedSegment=new gn};cr.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr};var lr=function(){this._index=null;var t=arguments[0];this._index=t},hr={HotPixelSnapAction:{configurable:!0}};lr.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new pr(e,n,r);return this._index.query(i,{interfaces_:function(){return[Ke]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},lr.prototype.interfaces_=function(){return[]},lr.prototype.getClass=function(){return lr},hr.HotPixelSnapAction.get=function(){return pr},Object.defineProperties(lr,hr);var pr=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[1],n=arguments[0].getContext();if(null!==this._parentEdge&&n===this._parentEdge&&e===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,e)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(cr),fr=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Et};fr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},fr.prototype.isDone=function(){return!1},fr.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fr.prototype.interfaces_=function(){return[Wn]},fr.prototype.getClass=function(){return fr};var dr=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new it,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};dr.prototype.checkCorrectness=function(t){var e=dn.getNodedSubstrings(t),n=new or(e);try{n.checkValid()}catch(t){if(!(t instanceof X))throw t;t.printStackTrace()}},dr.prototype.getNodedSubstrings=function(){return dn.getNodedSubstrings(this._nodedSegStrings)},dr.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},dr.prototype.findInteriorIntersections=function(t,e){var n=new fr(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},dr.prototype.computeVertexSnaps=function(){if(P(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof dn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new sr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},dr.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new wn,this._pointSnapper=new lr(this._noder.getIndex()),this.snapRound(t,this._li)},dr.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new sr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},dr.prototype.interfaces_=function(){return[bn]},dr.prototype.getClass=function(){return dr};var gr=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Sn,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},vr={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};gr.prototype.bufferFixedPrecision=function(t){var e=new ir(new dr(new fe(1)),t.getScale()),n=new rr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},gr.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=gr.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Oe))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=gr.precisionScaleFactor(this._argGeom,this._distance,n),i=new fe(r);this.bufferFixedPrecision(i)}},gr.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},gr.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},gr.prototype.bufferOriginalPrecision=function(){try{var t=new rr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof Q))throw t;this._saveException=t}},gr.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},gr.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},gr.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new gr(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new gr(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof Sn&&arguments[0]instanceof lt&&"number"==typeof arguments[1]){var i=arguments[1];return new gr(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],u=new gr(arguments[0]);return u.setQuadrantSegments(a),u.setEndCapStyle(s),u.getResultGeometry(o)}},gr.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=L.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},vr.CAP_ROUND.get=function(){return Sn.CAP_ROUND},vr.CAP_BUTT.get=function(){return Sn.CAP_FLAT},vr.CAP_FLAT.get=function(){return Sn.CAP_FLAT},vr.CAP_SQUARE.get=function(){return Sn.CAP_SQUARE},vr.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(gr,vr);var yr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};yr.prototype.getCoordinates=function(){return this._pt},yr.prototype.getCoordinate=function(t){return this._pt[t]},yr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},yr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},yr.prototype.getDistance=function(){return this._distance},yr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var mr=function(){};mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.computeDistance=function(){if(arguments[2]instanceof yr&&arguments[0]instanceof Kt&&arguments[1]instanceof S)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new gn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof yr&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var a=arguments[0],s=arguments[1],u=arguments[2];mr.computeDistance(a.getExteriorRing(),s,u);for(var c=0;c<a.getNumInteriorRing();c++)mr.computeDistance(a.getInteriorRingN(c),s,u)}else if(arguments[2]instanceof yr&&arguments[0]instanceof lt&&arguments[1]instanceof S){var l=arguments[0],h=arguments[1],p=arguments[2];if(l instanceof Kt)mr.computeDistance(l,h,p);else if(l instanceof Qt)mr.computeDistance(l,h,p);else if(l instanceof Xt)for(var f=l,d=0;d<f.getNumGeometries();d++){var g=f.getGeometryN(d);mr.computeDistance(g,h,p)}else p.setMinimum(l.getCoordinate(),h)}else if(arguments[2]instanceof yr&&arguments[0]instanceof gn&&arguments[1]instanceof S){var v=arguments[1],y=arguments[2],m=arguments[0].closestPoint(v);y.setMinimum(m,v)}};var _r=function(t){this._maxPtDist=new yr,this._inputGeom=t||null},br={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_r.prototype.computeMaxMidpointDistance=function(t){var e=new wr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.computeMaxVertexDistance=function(t){var e=new xr(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_r.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_r.prototype.getDistancePoints=function(){return this._maxPtDist},_r.prototype.interfaces_=function(){return[]},_r.prototype.getClass=function(){return _r},br.MaxPointDistanceFilter.get=function(){return xr},br.MaxMidpointDistanceFilter.get=function(){return wr},Object.defineProperties(_r,br);var xr=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};xr.prototype.filter=function(t){this._minPtDist.initialize(),mr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},xr.prototype.getMaxPointDistance=function(){return this._maxPtDist},xr.prototype.interfaces_=function(){return[ft]},xr.prototype.getClass=function(){return xr};var wr=function(t){this._maxPtDist=new yr,this._minPtDist=new yr,this._geom=t||null};wr.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new S((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),mr.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},wr.prototype.isDone=function(){return!1},wr.prototype.isGeometryChanged=function(){return!1},wr.prototype.getMaxPointDistance=function(){return this._maxPtDist},wr.prototype.interfaces_=function(){return[Gt]},wr.prototype.getClass=function(){return wr};var Er=function(t){this._comps=t||null};Er.prototype.filter=function(t){t instanceof Qt&&this._comps.add(t)},Er.prototype.interfaces_=function(){return[Bt]},Er.prototype.getClass=function(){return Er},Er.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Er.getPolygons(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Qt?n.add(e):e instanceof Xt&&e.apply(new Er(n)),n}};var Sr=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Sr.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Kt&&this._lines.add(t)},Sr.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Sr.prototype.interfaces_=function(){return[ct]},Sr.prototype.getClass=function(){return Sr},Sr.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Sr.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Sr.getLines(e,n))}},Sr.getLines=function(){if(1===arguments.length){var t=arguments[0];return Sr.getLines(t,!1)}if(2===arguments.length){if(P(arguments[0],bt)&&P(arguments[1],bt)){for(var e=arguments[1],n=arguments[0].iterator();n.hasNext();){var r=n.next();Sr.getLines(r,e)}return e}if(arguments[0]instanceof lt&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=new Et;return i.apply(new Sr(a,o)),a}if(arguments[0]instanceof lt&&P(arguments[1],bt)){var s=arguments[0],u=arguments[1];return s instanceof Kt?u.add(s):s.apply(new Sr(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&P(arguments[0],bt)&&P(arguments[1],bt)){for(var c=arguments[1],l=arguments[2],h=arguments[0].iterator();h.hasNext();){var p=h.next();Sr.getLines(p,c,l)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof lt&&P(arguments[1],bt)){var f=arguments[1],d=arguments[2];return arguments[0].apply(new Sr(f,d)),f}}};var Cr=function(){if(this._boundaryRule=dt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new m("Rule must be non-null");this._boundaryRule=t}};Cr.prototype.locateInternal=function(){if(arguments[0]instanceof S&&arguments[1]instanceof Qt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return O.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===O.EXTERIOR)return O.EXTERIOR;if(r===O.BOUNDARY)return O.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===O.INTERIOR)return O.EXTERIOR;if(a===O.BOUNDARY)return O.BOUNDARY}return O.INTERIOR}if(arguments[0]instanceof S&&arguments[1]instanceof Kt){var s=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(s))return O.EXTERIOR;var c=u.getCoordinates();return u.isClosed()||!s.equals(c[0])&&!s.equals(c[c.length-1])?st.isOnLine(s,c)?O.INTERIOR:O.EXTERIOR:O.BOUNDARY}if(arguments[0]instanceof S&&arguments[1]instanceof Zt){var l=arguments[0];return arguments[1].getCoordinate().equals2D(l)?O.INTERIOR:O.EXTERIOR}},Cr.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?st.locatePointInRing(t,e.getCoordinates()):O.EXTERIOR},Cr.prototype.intersects=function(t,e){return this.locate(t,e)!==O.EXTERIOR},Cr.prototype.updateLocationInfo=function(t){t===O.INTERIOR&&(this._isIn=!0),t===O.BOUNDARY&&this._numBoundaries++},Cr.prototype.computeLocation=function(t,e){if(e instanceof Zt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Kt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Qt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ut)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof ne)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Xt)for(var u=new Gn(e);u.hasNext();){var c=u.next();c!==e&&this.computeLocation(t,c)}},Cr.prototype.locate=function(t,e){return e.isEmpty()?O.EXTERIOR:e instanceof Kt||e instanceof Qt?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?O.BOUNDARY:this._numBoundaries>0||this._isIn?O.INTERIOR:O.EXTERIOR)},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};var Tr=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length)t.call(this,arguments[0],t.INSIDE_AREA,arguments[1]);else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];this._component=e,this._segIndex=n,this._pt=r}},Ir={INSIDE_AREA:{configurable:!0}};Tr.prototype.isInsideArea=function(){return this._segIndex===Tr.INSIDE_AREA},Tr.prototype.getCoordinate=function(){return this._pt},Tr.prototype.getGeometryComponent=function(){return this._component},Tr.prototype.getSegmentIndex=function(){return this._segIndex},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr},Ir.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Tr,Ir);var Or=function(t){this._pts=t||null};Or.prototype.filter=function(t){t instanceof Zt&&this._pts.add(t)},Or.prototype.interfaces_=function(){return[Bt]},Or.prototype.getClass=function(){return Or},Or.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Zt?Qe.singletonList(t):Or.getPoints(t,new Et)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Zt?n.add(e):e instanceof Xt&&e.apply(new Or(n)),n}};var Mr=function(){this._locations=null;var t=arguments[0];this._locations=t};Mr.prototype.filter=function(t){(t instanceof Zt||t instanceof Kt||t instanceof Qt)&&this._locations.add(new Tr(t,0,t.getCoordinate()))},Mr.prototype.interfaces_=function(){return[Bt]},Mr.prototype.getClass=function(){return Mr},Mr.getLocations=function(t){var e=new Et;return t.apply(new Mr(e)),e};var Pr=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Cr,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Pr.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=Er.getPolygons(this._geom[e]);if(i.size()>0){var o=Mr.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&P(arguments[0],wt)&&P(arguments[1],wt)){for(var a=arguments[0],s=arguments[1],u=arguments[2],c=0;c<a.size();c++)for(var l=a.get(c),h=0;h<s.size();h++)if(this.computeContainmentDistance(l,s.get(h),u),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tr&&arguments[1]instanceof Qt){var p=arguments[0],f=arguments[1],d=arguments[2],g=p.getCoordinate();if(O.EXTERIOR!==this._ptLocator.locate(g,f))return this._minDistance=0,d[0]=p,d[1]=new Tr(f,g),null}},Pr.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Sr.getLines(this._geom[0]),n=Sr.getLines(this._geom[1]),r=Or.getPoints(this._geom[0]),i=Or.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Pr.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Pr.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Pr.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Pr.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof Zt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a=st.distancePointLine(i,r[o],r[o+1]);if(a<this._minDistance){this._minDistance=a;var s=new gn(r[o],r[o+1]).closestPoint(i);n[0]=new Tr(t,o,s),n[1]=new Tr(e,0,i)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Kt&&arguments[1]instanceof Kt){var u=arguments[0],c=arguments[1],l=arguments[2];if(u.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this._minDistance)return null;for(var h=u.getCoordinates(),p=c.getCoordinates(),f=0;f<h.length-1;f++)for(var d=0;d<p.length-1;d++){var g=st.distanceLineLine(h[f],h[f+1],p[d],p[d+1]);if(g<this._minDistance){this._minDistance=g;var v=new gn(h[f],h[f+1]),y=new gn(p[d],p[d+1]),m=v.closestPoints(y);l[0]=new Tr(u,f,m[0]),l[1]=new Tr(c,d,m[1])}if(this._minDistance<=this._terminateDistance)return null}}},Pr.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new Tr(i,0,i.getCoordinate()),n[1]=new Tr(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new m("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Pr.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},Pr.prototype.interfaces_=function(){return[]},Pr.prototype.getClass=function(){return Pr},Pr.distance=function(t,e){return new Pr(t,e).distance()},Pr.isWithinDistance=function(t,e,n){return new Pr(t,e,n).distance()<=n},Pr.nearestPoints=function(t,e){return new Pr(t,e).nearestPoints()};var Lr=function(){this._pt=[new S,new S],this._distance=_.NaN,this._isNull=!0};Lr.prototype.getCoordinates=function(){return this._pt},Lr.prototype.getCoordinate=function(t){return this._pt[t]},Lr.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Lr.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Lr.prototype.toString=function(){return J.toLineString(this._pt[0],this._pt[1])},Lr.prototype.getDistance=function(){return this._distance},Lr.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr};var Rr=function(){};Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr},Rr.computeDistance=function(){if(arguments[2]instanceof Lr&&arguments[0]instanceof Kt&&arguments[1]instanceof S)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new gn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Lr&&arguments[0]instanceof Qt&&arguments[1]instanceof S){var s=arguments[0],u=arguments[1],c=arguments[2];Rr.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Rr.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Lr&&arguments[0]instanceof lt&&arguments[1]instanceof S){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof Kt)Rr.computeDistance(h,p,f);else if(h instanceof Qt)Rr.computeDistance(h,p,f);else if(h instanceof Xt)for(var d=h,g=0;g<d.getNumGeometries();g++){var v=d.getGeometryN(g);Rr.computeDistance(v,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof Lr&&arguments[0]instanceof gn&&arguments[1]instanceof S){var y=arguments[1],m=arguments[2],_=arguments[0].closestPoint(y);m.setMinimum(_,y)}};var Ar=function(){this._g0=null,this._g1=null,this._ptDist=new Lr,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},kr={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Ar.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Ar.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new m("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Ar.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Ar.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Ar.prototype.computeOrientedDistance=function(t,e,n){var r=new Nr(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Dr(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Ar.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar},Ar.distance=function(){if(2===arguments.length)return new Ar(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Ar(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},kr.MaxPointDistanceFilter.get=function(){return Nr},kr.MaxDensifiedByFractionDistanceFilter.get=function(){return Dr},Object.defineProperties(Ar,kr);var Nr=function(){this._maxPtDist=new Lr,this._minPtDist=new Lr,this._euclideanDist=new Rr,this._geom=null;var t=arguments[0];this._geom=t};Nr.prototype.filter=function(t){this._minPtDist.initialize(),Rr.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Nr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Nr.prototype.interfaces_=function(){return[ft]},Nr.prototype.getClass=function(){return Nr};var Dr=function(){this._maxPtDist=new Lr,this._minPtDist=new Lr,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Dr.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,u=n.y+a*o,c=new S(s,u);this._minPtDist.initialize(),Rr.computeDistance(this._geom,c,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Dr.prototype.isDone=function(){return!1},Dr.prototype.isGeometryChanged=function(){return!1},Dr.prototype.getMaxPointDistance=function(){return this._maxPtDist},Dr.prototype.interfaces_=function(){return[Gt]},Dr.prototype.getClass=function(){return Dr};var Fr=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},jr={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Fr.prototype.checkMaximumDistance=function(t,e,n){var r=new Ar(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+J.toLineString(i[0],i[1])+")"}},Fr.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Fr.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Fr.VERBOSE&&q.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Fr.prototype.checkNegativeValid=function(){if(!(this._input instanceof Qt||this._input instanceof ne||this._input instanceof Xt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Fr.prototype.getErrorIndicator=function(){return this._errorIndicator},Fr.prototype.checkMinimumDistance=function(t,e,n){var r=new Pr(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+J.toLineString(i[0],i[1])+" )"}},Fr.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Fr.prototype.getErrorLocation=function(){return this._errorLocation},Fr.prototype.getPolygonLines=function(t){for(var e=new Et,n=new Sr(e),r=Er.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Fr.prototype.getErrorMessage=function(){return this._errMsg},Fr.prototype.interfaces_=function(){return[]},Fr.prototype.getClass=function(){return Fr},jr.VERBOSE.get=function(){return!1},jr.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Fr,jr);var zr=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Br={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};zr.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},zr.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*zr.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new V(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new V(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},zr.prototype.checkDistance=function(){var t=new Fr(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},zr.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},zr.prototype.checkPolygonal=function(){this._result instanceof Qt||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},zr.prototype.getErrorIndicator=function(){return this._errorIndicator},zr.prototype.getErrorLocation=function(){return this._errorLocation},zr.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},zr.prototype.report=function(t){if(!zr.VERBOSE)return null;q.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},zr.prototype.getErrorMessage=function(){return this._errorMsg},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr},zr.isValidMsg=function(t,e,n){var r=new zr(t,e,n);return r.isValid()?null:r.getErrorMessage()},zr.isValid=function(t,e,n){return!!new zr(t,e,n).isValid()},Br.VERBOSE.get=function(){return!1},Br.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(zr,Br);var Gr=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Gr.prototype.getCoordinates=function(){return this._pts},Gr.prototype.size=function(){return this._pts.length},Gr.prototype.getCoordinate=function(t){return this._pts[t]},Gr.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Gr.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:hn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Gr.prototype.setData=function(t){this._data=t},Gr.prototype.getData=function(){return this._data},Gr.prototype.toString=function(){return J.toLineString(new ue(this._pts))},Gr.prototype.interfaces_=function(){return[pn]},Gr.prototype.getClass=function(){return Gr};var Xr=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Et,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Xr.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Xr.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Xr.prototype.getIntersectionSegments=function(){return this._intSegments},Xr.prototype.count=function(){return this._intersectionCount},Xr.prototype.getIntersections=function(){return this._intersections},Xr.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Xr.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Xr.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Xr.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Xr.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Xr.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Xr.prototype.interfaces_=function(){return[Wn]},Xr.prototype.getClass=function(){return Xr},Xr.createAllIntersectionsFinder=function(t){var e=new Xr(t);return e.setFindAllIntersections(!0),e},Xr.createAnyIntersectionFinder=function(t){return new Xr(t)},Xr.createIntersectionCounter=function(t){var e=new Xr(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Ur=function(){this._li=new it,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Ur.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Ur.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ur.prototype.isValid=function(){return this.execute(),this._isValid},Ur.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ur.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Xr(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new wn;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ur.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Oe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ur.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+J.toLineString(t[0],t[1])+" and "+J.toLineString(t[2],t[3])},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.computeIntersections=function(t){var e=new Ur(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var qr=function t(){this._nv=null;var e=arguments[0];this._nv=new Ur(t.toSegmentStrings(e))};qr.prototype.checkValid=function(){this._nv.checkValid()},qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.toSegmentStrings=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Gr(r.getCoordinates(),r))}return e},qr.checkValid=function(t){new qr(t).checkValid()};var Yr=function(t){this._mapOp=t};Yr.prototype.map=function(t){for(var e=new Et,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.map=function(t,e){return new Yr(e).map(t)};var Vr=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Et,this._resultLineList=new Et;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};Vr.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Vr.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Vr.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Vr.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ti.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Vr.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},Vr.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Vr.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Vr.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(et.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ti.isResultOfOp(r,e)&&e===Ti.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Vr.prototype.interfaces_=function(){return[]},Vr.prototype.getClass=function(){return Vr};var Hr=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Et;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Hr.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Hr.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Ti.INTERSECTION)){var r=n.getLabel();Ti.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},Hr.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr};var Wr=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Wr.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Wr.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof ee&&!r.isEmpty()||(n=!1);for(var i=new Et,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Et;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Wr.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Wr.prototype.getInputGeometry=function(){return this._inputGeom},Wr.prototype.transformMultiLineString=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformCoordinates=function(t,e){return this.copy(t)},Wr.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Wr.prototype.transformMultiPoint=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.transformMultiPolygon=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Wr.prototype.copy=function(t){return t.copy()},Wr.prototype.transformGeometryCollection=function(t,e){for(var n=new Et,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(n)):this._factory.buildGeometry(n)},Wr.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Zt)return this.transformPoint(t,null);if(t instanceof te)return this.transformMultiPoint(t,null);if(t instanceof ee)return this.transformLinearRing(t,null);if(t instanceof Kt)return this.transformLineString(t,null);if(t instanceof Ut)return this.transformMultiLineString(t,null);if(t instanceof Qt)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof Xt)return this.transformGeometryCollection(t,null);throw new m("Unknown Geometry subtype: "+t.getClass().getName())},Wr.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Wr.prototype.interfaces_=function(){return[]},Wr.prototype.getClass=function(){return Wr};var Kr=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Kt&&"number"==typeof arguments[1]){var e=arguments[1];t.call(this,arguments[0].getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}};Kr.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new S(o)),0===r&&this._isClosed&&t.set(t.size()-1,new S(o)))}},Kr.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},Kr.prototype.snapTo=function(t){var e=new Ct(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Kr.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new S(i),!1)}},Kr.prototype.findSegmentIndexToSnap=function(t,e){for(var n=_.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},Kr.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},Kr.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var $r=function(t){this._srcGeom=t||null},Zr={SNAP_PRECISION_FACTOR:{configurable:!0}};$r.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Jr(e,n).transform(this._srcGeom)},$r.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Jr(t,n,!0).transform(this._srcGeom),i=r;return e&&P(i,Jt)&&(i=r.buffer(0)),i},$r.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},$r.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},$r.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},$r.prototype.interfaces_=function(){return[]},$r.prototype.getClass=function(){return $r},$r.snap=function(t,e,n){var r=new Array(2).fill(null),i=new $r(t);r[0]=i.snapTo(e,n);var o=new $r(e);return r[1]=o.snapTo(r[0],n),r},$r.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=$r.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===fe.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min($r.computeOverlaySnapTolerance(i),$r.computeOverlaySnapTolerance(o))}},$r.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*$r.SNAP_PRECISION_FACTOR},$r.snapToSelf=function(t,e,n){return new $r(t).snapToSelf(e,n)},Zr.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties($r,Zr);var Jr=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new Kr(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wr),Qr=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Qr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},Qr.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Qr.signExpBits(this._commonBits),this._isFirst=!1,null):Qr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Qr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Qr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Qr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr},Qr.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Qr.signExpBits=function(t){return t>>52},Qr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Qr.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Qr.getBit(t,r)!==Qr.getBit(e,r))return n;n++}return 52};var ti=function(){this._commonCoord=null,this._ccFilter=new ni},ei={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};ti.prototype.addCommonBits=function(t){var e=new ri(this._commonCoord);t.apply(e),t.geometryChanged()},ti.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new S(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new ri(e);return t.apply(n),t.geometryChanged(),t},ti.prototype.getCommonCoordinate=function(){return this._commonCoord},ti.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.CommonCoordinateFilter.get=function(){return ni},ei.Translater.get=function(){return ri},Object.defineProperties(ti,ei);var ni=function(){this._commonBitsX=new Qr,this._commonBitsY=new Qr};ni.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},ni.prototype.getCommonCoordinate=function(){return new S(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},ni.prototype.interfaces_=function(){return[ft]},ni.prototype.getClass=function(){return ni};var ri=function(){this.trans=null;var t=arguments[0];this.trans=t};ri.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},ri.prototype.isDone=function(){return!1},ri.prototype.isGeometryChanged=function(){return!0},ri.prototype.interfaces_=function(){return[Gt]},ri.prototype.getClass=function(){return ri};var ii=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};ii.prototype.selfSnap=function(t){return new $r(t).snapTo(t,this._snapTolerance)},ii.prototype.removeCommonBits=function(t){this._cbr=new ti,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},ii.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},ii.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ti.overlayOp(e[0],e[1],t);return this.prepareResult(n)},ii.prototype.checkValid=function(t){t.isValid()||q.out.println("Snapped geometry is invalid")},ii.prototype.computeSnapTolerance=function(){this._snapTolerance=$r.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},ii.prototype.snap=function(t){var e=this.removeCommonBits(t);return $r.snap(e[0],e[1],this._snapTolerance)},ii.prototype.interfaces_=function(){return[]},ii.prototype.getClass=function(){return ii},ii.overlayOp=function(t,e,n){return new ii(t,e).getResultGeometry(n)},ii.union=function(t,e){return ii.overlayOp(t,e,Ti.UNION)},ii.intersection=function(t,e){return ii.overlayOp(t,e,Ti.INTERSECTION)},ii.symDifference=function(t,e){return ii.overlayOp(t,e,Ti.SYMDIFFERENCE)},ii.difference=function(t,e){return ii.overlayOp(t,e,Ti.DIFFERENCE)};var oi=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};oi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ti.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof Q))throw t;r=t}if(!n)try{e=ii.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof Q?r:t}return e},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi.overlayOp=function(t,e,n){return new oi(t,e).getResultGeometry(n)},oi.union=function(t,e){return oi.overlayOp(t,e,Ti.UNION)},oi.intersection=function(t,e){return oi.overlayOp(t,e,Ti.INTERSECTION)},oi.symDifference=function(t,e){return oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},oi.difference=function(t,e){return oi.overlayOp(t,e,Ti.DIFFERENCE)};var ai=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};ai.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ai.prototype.interfaces_=function(){return[]},ai.prototype.getClass=function(){return ai};var si=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},ui={INSERT:{configurable:!0},DELETE:{configurable:!0}};si.prototype.isDelete=function(){return this._eventType===si.DELETE},si.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},si.prototype.getObject=function(){return this._obj},si.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},si.prototype.getInsertEvent=function(){return this._insertEvent},si.prototype.isInsert=function(){return this._eventType===si.INSERT},si.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},si.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},si.prototype.interfaces_=function(){return[x]},si.prototype.getClass=function(){return si},ui.INSERT.get=function(){return 1},ui.DELETE.get=function(){return 2},Object.defineProperties(si,ui);var ci=function(){};ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci};var li=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};li.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(li.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},li.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},li.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},li.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},li.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},li.prototype.hasProperIntersection=function(){return this._hasProper},li.prototype.hasIntersection=function(){return this._hasIntersection},li.prototype.isDone=function(){return this._isDone},li.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},li.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},li.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var hi=function(t){function e(){t.call(this),this.events=new Et,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof li&&P(arguments[0],wt)&&P(arguments[1],wt)){var r=arguments[0],i=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&P(arguments[0],wt)&&arguments[1]instanceof li){var a=arguments[0],s=arguments[1];arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new ai(n,i),a=new si(e,n.getMinX(i),o);this.events.add(a),this.events.add(new si(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ci),pi=function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY},fi={NodeComparator:{configurable:!0}};pi.prototype.getMin=function(){return this._min},pi.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},pi.prototype.getMax=function(){return this._max},pi.prototype.toString=function(){return J.toLineString(new S(this._min,0),new S(this._max,0))},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},fi.NodeComparator.get=function(){return di},Object.defineProperties(pi,fi);var di=function(){};di.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},di.prototype.interfaces_=function(){return[E]},di.prototype.getClass=function(){return di};var gi=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),vi=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(pi),yi=function(){this._leaves=new Et,this._root=null,this._level=0};yi.prototype.buildTree=function(){Qe.sort(this._leaves,new pi.NodeComparator);for(var t=this._leaves,e=null,n=new Et;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},yi.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new gi(t,e,n))},yi.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},yi.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yi.prototype.printNode=function(t){q.out.println(J.toLineString(new S(t._min,this._level),new S(t._max,this._level)))},yi.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yi.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new vi(t.get(n),t.get(n+1));e.add(i)}}},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var mi=function(){this._items=new Et};mi.prototype.visitItem=function(t){this._items.add(t)},mi.prototype.getItems=function(){return this._items},mi.prototype.interfaces_=function(){return[Ke]},mi.prototype.getClass=function(){return mi};var _i=function(){this._index=null;var t=arguments[0];if(!P(t,Jt))throw new m("Argument must be Polygonal");this._index=new wi(t)},bi={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_i.prototype.locate=function(t){var e=new at(t),n=new xi(e);return this._index.query(t.y,t.y,n),e.getLocation()},_i.prototype.interfaces_=function(){return[Bn]},_i.prototype.getClass=function(){return _i},bi.SegmentVisitor.get=function(){return xi},bi.IntervalIndexedGeometry.get=function(){return wi},Object.defineProperties(_i,bi);var xi=function(){this._counter=null;var t=arguments[0];this._counter=t};xi.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xi.prototype.interfaces_=function(){return[Ke]},xi.prototype.getClass=function(){return xi};var wi=function(){this._index=new yi;var t=arguments[0];this.init(t)};wi.prototype.init=function(t){for(var e=Sr.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},wi.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new gn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},wi.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new mi;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi};var Ei=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new pe,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Cr,2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;O.NONE,r.getLocation(t,Ce.ON)===O.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new li(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ee||this._parentGeom instanceof Qt||this._parentGeom instanceof ne,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new li(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Zt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,O.INTERIOR)}else if(arguments[0]instanceof S){var e=arguments[0];this.insertPoint(this._argIndex,e,O.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),O.EXTERIOR,O.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,O.INTERIOR,O.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],O.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],O.BOUNDARY)},e.prototype.addLineString=function(t){var e=Tt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new nr(e,new Re(this._argIndex,O.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),et.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===O.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Tt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;st.isCCW(r)&&(i=n,o=e);var a=new nr(r,new Re(this._argIndex,O.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],O.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Re(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new hi},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof Qt)this.addPolygon(e);else if(e instanceof Kt)this.addLineString(e);else if(e instanceof Zt)this.addPoint(e);else if(e instanceof te)this.addCollection(e);else if(e instanceof Ut)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof Xt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return P(this._parentGeom,Jt)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _i(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?O.BOUNDARY:O.INTERIOR},e}(qe),Si=function(){if(this._li=new it,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Ei(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=dt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,e,r),this._arg[1]=new Ei(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Ei(0,i,a),this._arg[1]=new Ei(1,o,a)}};Si.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Si.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si};var Ci=function(){};Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Ci.map=function(){if(arguments[0]instanceof lt&&P(arguments[1],Ci.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Et,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(P(arguments[0],bt)&&P(arguments[1],Ci.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Et,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Ci.MapOp=function(){};var Ti=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Cr,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Hn,this._resultPolyList=new Et,this._resultLineList=new Et,this._resultPointList=new Et,this._graph=new qe(new Yn),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Re(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Et;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==O.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Et,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Et;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),qr.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Ye(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Vr(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Hr(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Ce.RIGHT),i.getLocation(1,Ce.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(et.isTrue(!r.isNull(i,Ce.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Ce.LEFT,r.getLocation(i,Ce.LEFT)),et.isTrue(!r.isNull(i,Ce.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Ce.RIGHT,r.getLocation(i,Ce.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Si);Ti.overlayOp=function(t,e,n){return new Ti(t,e).getResultGeometry(n)},Ti.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ti.createEmptyResult(Ti.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Yr.map(t,{interfaces_:function(){return[Ci.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.INTERSECTION)},Ti.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.SYMDIFFERENCE)},Ti.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ti.INTERSECTION:o=Math.min(r,i);break;case Ti.UNION:o=Math.max(r,i);break;case Ti.DIFFERENCE:o=r;break;case Ti.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ti.createEmptyResult=function(t,e,n,r){var i=null;switch(Ti.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ti.difference=function(t,e){return t.isEmpty()?Ti.createEmptyResult(Ti.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.DIFFERENCE))},Ti.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ti.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===O.BOUNDARY&&(i=O.INTERIOR),o===O.BOUNDARY&&(o=O.INTERIOR),a){case Ti.INTERSECTION:return i===O.INTERIOR&&o===O.INTERIOR;case Ti.UNION:return i===O.INTERIOR||o===O.INTERIOR;case Ti.DIFFERENCE:return i===O.INTERIOR&&o!==O.INTERIOR;case Ti.SYMDIFFERENCE:return i===O.INTERIOR&&o!==O.INTERIOR||i!==O.INTERIOR&&o===O.INTERIOR}return!1}},Ti.INTERSECTION=1,Ti.UNION=2,Ti.DIFFERENCE=3,Ti.SYMDIFFERENCE=4;var Ii=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Cr,this._seg=new gn;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Ii.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Ii.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?O.BOUNDARY:this._ptLocator.locate(t,this._g)},Ii.prototype.extractLinework=function(t){var e=new Oi;t.apply(e);var n=e.getLinework(),r=ye.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii};var Oi=function(){this._linework=null,this._linework=new Et};Oi.prototype.getLinework=function(){return this._linework},Oi.prototype.filter=function(t){if(t instanceof Qt){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Oi.prototype.interfaces_=function(){return[Bt]},Oi.prototype.getClass=function(){return Oi};var Mi=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Mi.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Mi.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Mi.prototype.getPoints=function(t){for(var e=new Et,n=Sr.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Mi.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var h=new S(c-u,l+s);r.add(h)}if(this._doRight){var p=new S(c+u,l-s);r.add(p)}},Mi.prototype.interfaces_=function(){return[]},Mi.prototype.getClass=function(){return Mi};var Pi=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Et;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Ii(this._geom[0],this._boundaryDistanceTolerance),new Ii(this._geom[1],this._boundaryDistanceTolerance),new Ii(this._geom[2],this._boundaryDistanceTolerance)]},Li={TOLERANCE:{configurable:!0}};Pi.prototype.reportResult=function(t,e,n){q.out.println("Overlay result invalid - A:"+O.toLocationSymbol(e[0])+" B:"+O.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+O.toLocationSymbol(e[2]))},Pi.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Pi.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Pi.hasLocation(this._location,O.BOUNDARY)||this.isValidResult(r,this._location)}},Pi.prototype.addTestPts=function(t){var e=new Mi(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Pi.prototype.isValidResult=function(t,e){var n=Ti.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===O.INTERIOR);return r||this.reportResult(t,e,n),r},Pi.prototype.getInvalidLocation=function(){return this._invalidLocation},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Pi.computeBoundaryDistanceTolerance=function(t,e){return Math.min($r.computeSizeBasedSnapTolerance(t),$r.computeSizeBasedSnapTolerance(e))},Pi.isValid=function(t,e,n,r){return new Pi(t,e,r).isValid(n)},Li.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Pi,Li);var Ri=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};Ri.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},Ri.prototype.combine=function(){for(var t=new Et,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.combine=function(){if(1===arguments.length)return new Ri(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Ri(Ri.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];return new Ri(Ri.createList(n,r,i)).combine()}},Ri.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Ri.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Et;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Et;return a.add(r),a.add(i),a.add(o),a}};var Ai=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Et)},ki={STRTREE_NODE_CAPACITY:{configurable:!0}};Ai.prototype.reduceToGeometries=function(t){for(var e=new Et,n=t.iterator();n.hasNext();){var r=n.next(),i=null;P(r,wt)?i=this.unionTree(r):r instanceof lt&&(i=r),e.add(i)}return e},Ai.prototype.extractByEnvelope=function(t,e,n){for(var r=new Et,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Ai.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return Ri.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Ai.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new an(Ai.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Ai.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Ai.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Ai.getGeometry(e,n),Ai.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Ai.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},Ai.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Ai.prototype.unionActual=function(t,e){return Ai.restrictToPolygons(t.union(e))},Ai.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Ai.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Et,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),Ri.combine(r)},Ai.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Ai.prototype.interfaces_=function(){return[]},Ai.prototype.getClass=function(){return Ai},Ai.restrictToPolygons=function(t){if(P(t,Jt))return t;var e=Er.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},Ai.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Ai.union=function(t){return new Ai(t).union()},ki.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Ai,ki);var Ni=function(){};Ni.prototype.interfaces_=function(){return[]},Ni.prototype.getClass=function(){return Ni},Ni.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ti.createEmptyResult(Ti.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),oi.overlayOp(t,e,Ti.UNION)},t.GeoJSONReader=Ee,t.GeoJSONWriter=Se,t.OverlayOp=Ti,t.UnionOp=Ni,t.BufferOp=gr,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";var r,i,o,a,s=n(7),u=n(60),c=n(12),l=n(59),h=n(203),p=n(37),f=n(123),d=n(64),g=n(97),v=n(20),y=n(65),m=n(81),_=n(118),b=n(204),x=n(125),w=n(71),E=n(141).set,S=n(205),C=n(206),T=n(207),I=n(145),O=n(208),M=n(47),P=n(122),L=n(13),R=n(98),A=n(99),k=L("species"),N="Promise",D=M.get,F=M.set,j=M.getterFor(N),z=h,B=c.TypeError,G=c.document,X=c.process,U=l("fetch"),q=I.f,Y=q,V=!!(G&&G.createEvent&&c.dispatchEvent),H="function"==typeof PromiseRejectionEvent,W="unhandledrejection",K=P(N,(function(){if(!(_(z)!==String(z))){if(66===A)return!0;if(!R&&!H)return!0}if(u&&!z.prototype.finally)return!0;if(A>=51&&/native code/.test(z))return!1;var t=z.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[k]=e,!(t.then((function(){}))instanceof e)})),$=K||!x((function(t){z.all(t).catch((function(){}))})),Z=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},J=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;S((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,p=c.reject,f=c.domain;try{l?(i||(2===t.rejection&&nt(t),t.rejection=1),!0===l?a=r:(f&&f.enter(),a=l(r),f&&(f.exit(),u=!0)),a===c.promise?p(B("Promise-chain cycle")):(s=Z(a))?s.call(a,h,p):h(a)):p(r)}catch(t){f&&!u&&f.exit(),p(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&tt(t)}))}},Q=function(t,e,n){var r,i;V?((r=G.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},!H&&(i=c["on"+t])?i(r):t===W&&T("Unhandled promise rejection",n)},tt=function(t){E.call(c,(function(){var e,n=t.facade,r=t.value;if(et(t)&&(e=O((function(){R?X.emit("unhandledRejection",r,n):Q(W,n,r)})),t.rejection=R||et(t)?2:1,e.error))throw e.value}))},et=function(t){return 1!==t.rejection&&!t.parent},nt=function(t){E.call(c,(function(){var e=t.facade;R?X.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},rt=function(t,e,n){return function(r){t(e,r,n)}},it=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,J(t,!0))},ot=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw B("Promise can't be resolved itself");var r=Z(e);r?S((function(){var n={done:!1};try{r.call(e,rt(ot,n,t),rt(it,n,t))}catch(e){it(n,e,t)}})):(t.value=e,t.state=1,J(t,!1))}catch(e){it({done:!1},e,t)}}};K&&(z=function(t){m(this,z,N),y(t),r.call(this);var e=D(this);try{t(rt(ot,e),rt(it,e))}catch(t){it(e,t)}},(r=function(t){F(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=f(z.prototype,{then:function(t,e){var n=j(this),r=q(w(this,z));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=R?X.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&J(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=D(t);this.promise=t,this.resolve=rt(ot,e),this.reject=rt(it,e)},I.f=q=function(t){return t===z||t===o?new i(t):Y(t)},u||"function"!=typeof h||(a=h.prototype.then,p(h.prototype,"then",(function(t,e){var n=this;return new z((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof U&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return C(z,U.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:K},{Promise:z}),d(z,N,!1,!0),g(N),o=l(N),s({target:N,stat:!0,forced:K},{reject:function(t){var e=q(this);return e.reject.call(void 0,t),e.promise}}),s({target:N,stat:!0,forced:u||K},{resolve:function(t){return C(u&&this===o?z:this,t)}}),s({target:N,stat:!0,forced:$},{all:function(t){var e=this,n=q(e),r=n.resolve,i=n.reject,o=O((function(){var n=y(e.resolve),o=[],a=0,s=1;b(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=q(e),r=n.reject,i=O((function(){var i=y(e.resolve);b(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(7),i=n(29),o=n(103);r({target:"Object",stat:!0,forced:n(11)((function(){o(1)}))},{keys:function(t){return o(i(t))}})},function(t,e,n){"use strict";var r=n(105),i=n(131),o=n(17),a=n(38),s=n(71),u=n(130),c=n(16),l=n(106),h=n(104),p=n(11),f=[].push,d=Math.min,g=4294967295,v=!p((function(){return!RegExp(g,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),o=void 0===n?g:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,o);for(var s,u,c,l=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,v=new RegExp(t.source,p+"g");(s=h.call(v,r))&&!((u=v.lastIndex)>d&&(l.push(r.slice(d,s.index)),s.length>1&&s.index<r.length&&f.apply(l,s.slice(1)),c=s[0].length,d=u,l.length>=o));)v.lastIndex===s.index&&v.lastIndex++;return d===r.length?!c&&v.test("")||l.push(""):l.push(r.slice(d)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var h=o(t),p=String(this),f=s(h,RegExp),y=h.unicode,m=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(v?"y":"g"),_=new f(v?h:"^(?:"+h.source+")",m),b=void 0===i?g:i>>>0;if(0===b)return[];if(0===p.length)return null===l(_,p)?[p]:[];for(var x=0,w=0,E=[];w<p.length;){_.lastIndex=v?w:0;var S,C=l(_,v?p:p.slice(w));if(null===C||(S=d(c(_.lastIndex+(v?0:w)),p.length))===x)w=u(p,w,y);else{if(E.push(p.slice(x,w)),E.length===b)return E;for(var T=1;T<=C.length-1;T++)if(E.push(C[T]),E.length===b)return E;w=x=S}}return E.push(p.slice(x)),E}]}),!v)},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),a=new I(r||[]);return o._invoke=function(t,e,n){var r=l;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?f:h,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=f,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",h="suspendedYield",p="executing",f="completed",d={};function g(){}function v(){}function y(){}var m={};m[o]=function(){return this};var _=Object.getPrototypeOf,b=_&&_(_(O([])));b&&b!==n&&r.call(b,o)&&(m=b);var x=y.prototype=g.prototype=Object.create(m);function w(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){function e(n,i,o,a){var s=c(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){u.value=t,o(u)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}var n;this._invoke=function(t,r){function i(){return new Promise((function(n,i){e(t,r,n,i)}))}return n=n?n.then(i,i):i()}}function S(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function O(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:e,done:!0}}return v.prototype=x.constructor=y,y.constructor=v,y[s]=v.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,i){var o=new E(u(e,n,r,i));return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(x),x[s]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r,i,o,a=n(200),s=n(12),u=n(20),c=n(31),l=n(24),h=n(114),p=n(95),f=n(96),d=s.WeakMap;if(a){var g=h.state||(h.state=new d),v=g.get,y=g.has,m=g.set;r=function(t,e){return e.facade=t,m.call(g,t,e),e},i=function(t){return v.call(g,t)||{}},o=function(t){return y.call(g,t)}}else{var _=p("state");f[_]=!0,r=function(t,e){return e.facade=t,c(t,_,e),e},i=function(t){return l(t,_)?t[_]:{}},o=function(t){return l(t,_)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!u(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(79),i=n(38);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(23),i=n(11),o=n(24),a=Object.defineProperty,s={},u=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var n=[][t],c=!!o(e,"ACCESSORS")&&e.ACCESSORS,l=o(e,0)?e[0]:u,h=o(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(c&&!r)return!0;var t={length:-1};c?a(t,1,{enumerable:!0,get:u}):t[1]=1,n.call(t,l,h)}))}},function(t,e,n){"use strict";var r=n(7),i=n(79),o=n(48),a=n(85),s=[].join,u=i!=Object,c=a("join",",");r({target:"Array",proto:!0,forced:u||!c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(105),i=n(17),o=n(29),a=n(16),s=n(43),u=n(38),c=n(130),l=n(106),h=Math.max,p=Math.min,f=Math.floor,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(t,e,n,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,m=v?"$":"$0";return[function(n,r){var i=u(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!v&&y||"string"==typeof r&&-1===r.indexOf(m)){var o=n(e,t,this,r);if(o.done)return o.value}var u=i(t),f=String(this),d="function"==typeof r;d||(r=String(r));var g=u.global;if(g){var b=u.unicode;u.lastIndex=0}for(var x=[];;){var w=l(u,f);if(null===w)break;if(x.push(w),!g)break;""===String(w[0])&&(u.lastIndex=c(f,a(u.lastIndex),b))}for(var E,S="",C=0,T=0;T<x.length;T++){w=x[T];for(var I=String(w[0]),O=h(p(s(w.index),f.length),0),M=[],P=1;P<w.length;P++)M.push(void 0===(E=w[P])?E:String(E));var L=w.groups;if(d){var R=[I].concat(M,O,f);void 0!==L&&R.push(L);var A=String(r.apply(void 0,R))}else A=_(I,f,O,M,L,r);O>=C&&(S+=f.slice(C,O)+A,C=O+I.length)}return S+f.slice(C)}];function _(t,n,r,i,a,s){var u=r+t.length,c=i.length,l=g;return void 0!==a&&(a=o(a),l=d),e.call(s,l,(function(e,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return e;if(l>c){var h=f(l/10);return 0===h?e:h<=c?void 0===i[h-1]?o.charAt(1):i[h-1]+o.charAt(1):e}s=i[l-1]}return void 0===s?"":s}))}}))},function(t,e,n){"use strict";var r=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();e.a=r},function(t,e,n){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,n){"use strict";(function(t){n(90),n(91),n(92),n(25),n(39),n(26),n(66),n(14),n(22),n(36),n(51),n(45),n(159),n(40);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(){};i.prototype.dispatch=function(){return function(e,i){if("function"==typeof define&&n(108))define([],i);else if("object"===r(t)&&t.exports)t.exports=i();else{var o=i();e.Affix=o.Affix,e.Alert=o.Alert,e.Button=o.Button,e.Carousel=o.Carousel,e.Collapse=o.Collapse,e.Dropdown=o.Dropdown,e.Modal=o.Modal,e.Popover=o.Popover,e.ScrollSpy=o.ScrollSpy,e.Tab=o.Tab,e.Tooltip=o.Tooltip}}(this,(function(){var t=void 0!==o?o:this||window,e=document,n=e.documentElement,i=t.BSN={},a=i.supports=[],s="data-toggle",u="data-dismiss",c="Affix",l="Alert",h="Button",p="Carousel",f="Collapse",d="Dropdown",g="Modal",v="Popover",y="ScrollSpy",m="Tab",_="Tooltip",b="data-backdrop",x="data-keyboard",w="data-target",E="data-title",S="data-original-title",C="data-original-text",T="data-animation",I="data-container",O="data-placement",M="data-delay",P="aria-expanded",L="aria-hidden",R="click",A="hover",k="keydown",N="keyup",D="resize",F="scroll",j="show",z="shown",B="hide",G="hidden",X="slid",U="change",q="querySelectorAll",Y="Transition",V="Webkit",H="tabindex",W="active",K="in",$="collapsing",Z="disabled",J="left",Q="right",tt="top",et="bottom",nt=!("opacity"in n.style),rt="onmouseleave"in e?["mouseenter","mouseleave"]:["mouseover","mouseout"],it=/\b(top|bottom|left|right)+/,ot=0,at="navbar-fixed-top",st="navbar-fixed-bottom",ut=V+Y in n.style||Y.toLowerCase()in n.style,ct=V+Y in n.style?V.toLowerCase()+Y+"End":Y.toLowerCase()+"end",lt=function(t){t.focus?t.focus():t.setActive()},ht=function(t,e){t.classList.add(e)},pt=function(t,e){t.classList.remove(e)},ft=function(t,e){return t.classList.contains(e)},dt=function(t,e){return function(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(t[n]);return e}(t[nt?q:"getElementsByClassName"](nt?"."+e.replace(/\s(?=[a-z])/g,"."):e))},gt=function(t,n){var i=n||e;return"object"===r(t)?t:i.querySelector(t)},vt=function(t,n){var r=n.charAt(0),i=n.substr(1);if("."===r){for(;t&&t!==e;t=t.parentNode)if(null!==gt(n,t.parentNode)&&ft(t,i))return t}else if("#"===r)for(;t&&t!==e;t=t.parentNode)if(t.id===i)return t;return!1},yt=function(t,e,n){t.addEventListener(e,n,!1)},mt=function(t,e,n){t.removeEventListener(e,n,!1)},_t=function(t,e,n){yt(t,e,(function r(i){n(i),mt(t,e,r)}))},bt=function(t,e){ut?_t(t,ct,(function(t){e(t)})):e()},xt=function(t,e,n){var r=new CustomEvent(t+".bs."+e);r.relatedTarget=n,this.dispatchEvent(r)},wt=function(){return{y:t.pageYOffset||n.scrollTop,x:t.pageXOffset||n.scrollLeft}},Et=function(t,r,i,o){var a,s,u,c,l=r.offsetWidth,h=r.offsetHeight,p=n.clientWidth||e.body.clientWidth,f=n.clientHeight||e.body.clientHeight,d=t.getBoundingClientRect(),g=o===e.body?wt():{x:o.offsetLeft+o.scrollLeft,y:o.offsetTop+o.scrollTop},v=d.right-d.left,y=d.bottom-d.top,m=gt('[class*="arrow"]',r),_=d.top+y/2-h/2<0,b=d.left+v/2-l/2<0,x=d.left+l/2+v/2>=p,w=d.top+h/2+y/2>=f,E=d.top-h<0,S=d.left-l<0,C=d.top+h+y>=f,T=d.left+l+v>=p;(i=(i=(i=(i=(i=(i===J||i===Q)&&S&&T?tt:i)===tt&&E?et:i)===et&&C?tt:i)===J&&S?Q:i)===Q&&T?J:i)===J||i===Q?(s=i===J?d.left+g.x-l:d.left+g.x+v,_?(a=d.top+g.y,u=y/2):w?(a=d.top+g.y-h+y,u=h-y/2):a=d.top+g.y-h/2+y/2):i!==tt&&i!==et||(a=i===tt?d.top+g.y-h:d.top+g.y+y,b?(s=0,c=d.left+v/2):x?(s=p-1.01*l,c=l-(p-d.left)+v/2):s=d.left+g.x-l/2+v/2),r.style.top=a+"px",r.style.left=s+"px",u&&(m.style.top=u+"px"),c&&(m.style.left=c+"px"),-1===r.className.indexOf(i)&&(r.className=r.className.replace(it,i))};i.version="2.0.23";var St=function(i,o){o=o||{};var a=(i=gt(i)).getAttribute(w),s=i.getAttribute("data-offset-top"),u=i.getAttribute("data-offset-bottom"),l="affix",h="affixed",p="function",f="affix-bottom";if(this.target=o.target?gt(o.target):gt(a)||null,this.offsetTop=o.offsetTop?o.offsetTop:parseInt(s)||0,this.offsetBottom=o.offsetBottom?o.offsetBottom:parseInt(u)||0,this.target||this.offsetTop||this.offsetBottom){var d,g,v,y,m,_,b=this,x=!1,E=!1,S=function(){v=Math.max(e.body.scrollHeight,e.body.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),y=parseInt(wt().y,0),d=null!==b.target?b.target.getBoundingClientRect().top+y:b.offsetTop?parseInt(r(b.offsetTop)===p?b.offsetTop():b.offsetTop||0):void 0,g=function(){if(b.offsetBottom)return v-i.offsetHeight-parseInt(r(b.offsetBottom)===p?b.offsetBottom():b.offsetBottom||0)}(),m=parseInt(d)-y<0&&y>parseInt(d),_=parseInt(g)-y<0&&y>parseInt(g)},C=function(){x&&ft(i,l)&&(pt(i,l),x=!1)},T=function(){_?(m&&C(),E||ft(i,f)||(xt.call(i,l,l),xt.call(i,f,l),ht(i,f),E=!0,xt.call(i,h,l),xt.call(i,"affixed-bottom",l))):(E&&ft(i,f)&&(pt(i,f),E=!1),m?x||ft(i,l)||(xt.call(i,l,l),xt.call(i,"affix-top",l),ht(i,l),x=!0,xt.call(i,h,l),xt.call(i,"affixed-top",l)):C())};this.update=function(){S(),T()},c in i||(yt(t,F,b.update),!nt&&yt(t,D,b.update)),i.Affix=b,b.update()}};a.push([c,St,'[data-spy="affix"]']);var Ct=function(t){t=gt(t);var e=this,n="alert",r=vt(t,".alert"),i=function(n){r=vt(n.target,".alert"),(t=gt('[data-dismiss="alert"]',r))&&r&&(t===n.target||t.contains(n.target))&&e.close()},o=function(){xt.call(r,"closed",n),mt(t,R,i),r.parentNode.removeChild(r)};this.close=function(){r&&t&&ft(r,K)&&(xt.call(r,"close",n),pt(r,K),r&&(ft(r,"fade")?bt(r,o):o()))},l in t||yt(t,R,i),t.Alert=e};a.push([l,Ct,'[data-dismiss="alert"]']);var Tt=function(t,n){t=gt(t),n=n||null;var r=!1,i="button",o="checked",a="reset",s="LABEL",u="INPUT",c=function(e){var n=e.target.tagName===s?e.target:e.target.parentNode.tagName===s?e.target.parentNode:null;if(n){var a=e.target,c=dt(a.parentNode,"btn"),l=n.getElementsByTagName(u)[0];if(l){if("checkbox"===l.type&&(l.checked?(pt(n,W),l.getAttribute(o),l.removeAttribute(o),l.checked=!1):(ht(n,W),l.getAttribute(o),l.setAttribute(o,o),l.checked=!0),r||(r=!0,xt.call(l,U,i),xt.call(t,U,i))),"radio"===l.type&&!r&&!l.checked){ht(n,W),l.setAttribute(o,o),l.checked=!0,xt.call(l,U,i),xt.call(t,U,i),r=!0;for(var h=0,p=c.length;h<p;h++){var f=c[h],d=f.getElementsByTagName(u)[0];f!==n&&ft(f,W)&&(pt(f,W),d.removeAttribute(o),d.checked=!1,xt.call(d,U,i))}}setTimeout((function(){r=!1}),50)}}};if(ft(t,"btn"))null!==n&&(n!==a?n&&n!==a&&("loading"===n&&(ht(t,Z),t.setAttribute(Z,Z),t.setAttribute(C,t.innerHTML.trim())),t.innerHTML=t.getAttribute("data-"+n+"-text")):t.getAttribute(C)&&((ft(t,Z)||t.getAttribute(Z)===Z)&&(pt(t,Z),t.removeAttribute(Z)),t.innerHTML=t.getAttribute(C)));else{h in t||(yt(t,R,c),gt("[tabindex]",t)&&yt(t,N,(function(t){32===(t.which||t.keyCode)&&t.target===e.activeElement&&c(t)})),yt(t,k,(function(t){32===(t.which||t.keyCode)&&t.preventDefault()})));for(var l=dt(t,"btn"),p=l.length,f=0;f<p;f++)!ft(l[f],W)&&gt("input",l[f]).getAttribute(o)&&ht(l[f],W);t.Button=this}};a.push([h,Tt,'[data-toggle="buttons"]']);var It=function(e,r){r=r||{};var i=(e=gt(e)).getAttribute("data-interval"),o=r.interval,a="false"===i?0:parseInt(i),s=e.getAttribute("data-pause")===A||!1,u="true"===e.getAttribute(x)||!1,c="carousel",l="paused",h="data-slide-to";this.keyboard=!0===r.keyboard||u,this.pause=!(r.pause!==A&&!s)&&A,this.interval="number"==typeof o?o:0===a||!1===a?0:5e3;var f=this,d=e.index=0,g=e.timer=0,v=!1,y=dt(e,"item"),m=y.length,_=this.direction=J,b=dt(e,"carousel-control"),w=b[0],E=b[1],S=gt(".carousel-indicators",e),C=S&&S.getElementsByTagName("LI")||[],T=function(){!1===f.interval||ft(e,l)||(ht(e,l),!v&&clearInterval(g))},I=function(){!1!==f.interval&&ft(e,l)&&(pt(e,l),!v&&clearInterval(g),!v&&f.cycle())},O=function(t){if(t.preventDefault(),!v){var e=t.currentTarget||t.srcElement;e===E?d++:e===w&&d--,f.slideTo(d)}},M=function(t){for(var e=0,n=C.length;e<n;e++)pt(C[e],W);C[t]&&ht(C[t],W)};this.cycle=function(){g=setInterval((function(){var r,i;r=e.getBoundingClientRect(),i=t.innerHeight||n.clientHeight,r.top<=i&&r.bottom>=0&&(d++,f.slideTo(d))}),this.interval)},this.slideTo=function(t){if(!v){var n,r=this.getActiveIndex();r<t||0===r&&t===m-1?_=f.direction=J:(r>t||r===m-1&&0===t)&&(_=f.direction=Q),t<0?t=m-1:t===m&&(t=0),d=t,n=_===J?"next":"prev",xt.call(e,"slide",c,y[t]),v=!0,clearInterval(g),M(t),ut&&ft(e,"slide")?(ht(y[t],n),y[t].offsetWidth,ht(y[t],_),ht(y[r],_),_t(y[r],ct,(function(i){var o=i.target!==y[r]?1e3*i.elapsedTime:0;setTimeout((function(){v=!1,ht(y[t],W),pt(y[r],W),pt(y[t],n),pt(y[t],_),pt(y[r],_),xt.call(e,X,c,y[t]),f.interval&&!ft(e,l)&&f.cycle()}),o+100)}))):(ht(y[t],W),y[t].offsetWidth,pt(y[r],W),setTimeout((function(){v=!1,f.interval&&!ft(e,l)&&f.cycle(),xt.call(e,X,c,y[t])}),100))}},this.getActiveIndex=function(){return y.indexOf(dt(e,"item active")[0])||0},p in e||(f.pause&&f.interval&&(yt(e,rt[0],T),yt(e,rt[1],I),yt(e,"touchstart",T),yt(e,"touchend",I)),E&&yt(E,R,O),w&&yt(w,R,O),S&&yt(S,R,(function(t){if(t.preventDefault(),!v){var e=t.target;if(!e||ft(e,W)||!e.getAttribute(h))return!1;d=parseInt(e.getAttribute(h),10),f.slideTo(d)}})),f.keyboard&&yt(t,k,(function(t){if(!v){switch(t.which){case 39:d++;break;case 37:d--;break;default:return}f.slideTo(d)}}))),f.getActiveIndex()<0&&(y.length&&ht(y[0],W),C.length&&M(0)),f.interval&&f.cycle(),e.Carousel=f};a.push([p,It,'[data-ride="carousel"]']);var Ot=function(t,e){t=gt(t),e=e||{};var n,r,i,o=null,a=null,s=this,u=!1,c=t.getAttribute("data-parent"),l="collapse",h="collapsed",p=function(t,e){xt.call(t,B,l),u=!0,t.style.height=t.scrollHeight+"px",pt(t,l),pt(t,K),ht(t,$),t.offsetWidth,t.style.height="0px",bt(t,(function(){u=!1,t.setAttribute(P,"false"),e.setAttribute(P,"false"),pt(t,$),ht(t,l),t.style.height="",xt.call(t,G,l)}))};this.toggle=function(t){t.preventDefault(),u||(ft(a,K)?s.hide():s.show())},this.hide=function(){p(a,t),ht(t,h)},this.show=function(){if(o){var e=gt(".collapse.in",o),n=e&&(gt('[data-toggle="collapse"][data-target="#'+e.id+'"]',o)||gt('[data-toggle="collapse"][href="#'+e.id+'"]',o)),r=n&&(n.getAttribute(w)||n.href);e&&n&&e!==a&&(p(e,n),r.split("#")[1]!==a.id?ht(n,h):pt(n,h))}!function(t,e){xt.call(t,j,l),u=!0,ht(t,$),pt(t,l),t.style.height=t.scrollHeight+"px",bt(t,(function(){u=!1,t.setAttribute(P,"true"),e.setAttribute(P,"true"),pt(t,$),ht(t,l),ht(t,K),t.style.height="",xt.call(t,z,l)}))}(a,t),pt(t,h)},f in t||yt(t,R,s.toggle),n=t.href&&t.getAttribute("href"),r=t.getAttribute(w),i=n||r&&"#"===r.charAt(0)&&r,a=i&&gt(i),o=gt(e.parent)||c&&vt(t,c),t.Collapse=s};a.push([f,Ot,'[data-toggle="collapse"]']);var Mt=function(t,n){t=gt(t),this.persist=!0===n||"true"===t.getAttribute("data-persist")||!1;var r=this,i=t.parentNode,o="dropdown",a="open",s=null,u=gt(".dropdown-menu",i),c=function(){for(var t=u.children,e=[],n=0;n<t.length;n++)t[n].children.length&&"A"===t[n].children[0].tagName&&e.push(t[n]);return e}(),l=function(t){(t.href&&"#"===t.href.slice(-1)||t.parentNode&&t.parentNode.href&&"#"===t.parentNode.href.slice(-1))&&this.preventDefault()},h=function(){var n=t.open?yt:mt;n(e,R,p),n(e,k,g),n(e,N,v)},p=function(e){var n=e.target,i=n&&(d in n||d in n.parentNode);(n!==u&&!u.contains(n)||!r.persist&&!i)&&(s=n===t||t.contains(n)?t:null,m(),l.call(e,n))},f=function(e){s=t,y(),l.call(e,e.target)},g=function(t){var e=t.which||t.keyCode;38!==e&&40!==e||t.preventDefault()},v=function(n){var i=n.which||n.keyCode,o=e.activeElement,a=c.indexOf(o.parentNode),l=o===t,h=u.contains(o),p=o.parentNode.parentNode===u;(p||l)&&(a=l?0:38===i?a>1?a-1:0:40===i&&a<c.length-1?a+1:a,c[a]&&lt(c[a].children[0])),(c.length&&p||!c.length&&(h||l)||!h)&&t.open&&27===i&&(r.toggle(),s=null)},y=function(){xt.call(i,j,o,s),ht(i,a),u.setAttribute(P,!0),xt.call(i,z,o,s),t.open=!0,mt(t,R,f),setTimeout((function(){lt(u.getElementsByTagName("INPUT")[0]||t),h()}),1)},m=function(){xt.call(i,B,o,s),pt(i,a),u.setAttribute(P,!1),xt.call(i,G,o,s),t.open=!1,h(),lt(t),setTimeout((function(){yt(t,R,f)}),1)};t.open=!1,this.toggle=function(){ft(i,a)&&t.open?m():y()},d in t||(!1 in u&&u.setAttribute(H,"0"),yt(t,R,f)),t.Dropdown=r};a.push([d,Mt,'[data-toggle="dropdown"]']);var Pt=function(i,o){var a=(i=gt(i)).getAttribute(w)||i.getAttribute("href"),s=gt(a),c=ft(i,"modal")?i:s,l="modal",h="static";if(ft(i,"modal")&&(i=null),c){o=o||{},this.keyboard=!1!==o.keyboard&&"false"!==c.getAttribute(x),this.backdrop=o.backdrop!==h&&c.getAttribute(b)!==h||h,this.backdrop=!1!==o.backdrop&&"false"!==c.getAttribute(b)&&this.backdrop,this.content=o.content,this.root=o.root||e.body;var p,f,d,v,y=this,m=null,_=dt(n,at).concat(dt(n,st)),E=function(){var e,n=y.root.currentStyle||t.getComputedStyle(y.root),r=parseInt(n.paddingRight,10);if(p&&(y.root.style.paddingRight=r+d+"px",_.length))for(var i=0;i<_.length;i++)e=(_[i].currentStyle||t.getComputedStyle(_[i])).paddingRight,_[i].style.paddingRight=parseInt(e)+d+"px"},S=function(){var r,i,o;p=y.root.clientWidth<(r=n.getBoundingClientRect(),t.innerWidth||r.right-Math.abs(r.left)),f=c.scrollHeight>n.clientHeight,(o=e.createElement("div")).className="modal-scrollbar-measure",y.root.appendChild(o),i=o.offsetWidth-o.clientWidth,y.root.removeChild(o),d=i},C=function(){c.style.paddingLeft=!p&&f?d+"px":"",c.style.paddingRight=p&&!f?d+"px":""},T=function(){(v=gt(".modal-backdrop"))&&null!==v&&"object"===r(v)&&(ot=0,y.root.removeChild(v),v=null),xt.call(c,G,l)},I=function(){ft(c,K)?yt(e,k,N):mt(e,k,N)},O=function(){ft(c,K)?yt(t,D,y.update):mt(t,D,y.update)},M=function(){ft(c,K)?yt(c,R,F):mt(c,R,F)},P=function(){lt(c),xt.call(c,z,l,m)},A=function(){c.style.display="",i&&lt(i),dt(e,"modal in")[0]||(c.style.paddingLeft="",c.style.paddingRight="",function(){if(y.root.style.paddingRight="",_.length)for(var t=0;t<_.length;t++)_[t].style.paddingRight=""}(),pt(y.root,"modal-open"),v&&ft(v,"fade")?(pt(v,K),bt(v,T)):T(),O(),M(),I())},N=function(t){var e=t.which||t.keyCode;y.keyboard&&27==e&&ft(c,K)&&y.hide()},F=function(t){var e=t.target;ft(c,K)&&(e.parentNode.getAttribute(u)===l||e.getAttribute(u)===l||e===c&&y.backdrop!==h)&&(y.hide(),m=null,t.preventDefault())};this.toggle=function(){ft(c,K)?this.hide():this.show()},this.show=function(){xt.call(c,j,l,m);var t=dt(e,"modal in")[0];t&&t!==c&&t.modalTrigger.Modal.hide(),this.backdrop&&!ot&&function(){ot=1;var t=e.createElement("div");null===(v=gt(".modal-backdrop"))&&(t.setAttribute("class","modal-backdrop fade"),v=t,y.root.appendChild(v))}(),v&&ot&&!ft(v,K)&&(v.offsetWidth,ht(v,K)),c.style.display="block",S(),E(),C(),ht(y.root,"modal-open"),ht(c,K),c.setAttribute(L,!1),O(),M(),I(),ft(c,"fade")?bt(c,P):P()},this.hide=function(){xt.call(c,B,l),v=gt(".modal-backdrop"),pt(c,K),c.setAttribute(L,!0),setTimeout((function(){ft(c,"fade")?bt(c,A):A()}),ut?150:0)},this.setContent=function(t){gt(".modal-content",c).innerHTML=t},this.update=function(){ft(c,K)&&(S(),E(),C())},i&&!(g in i)&&yt(i,R,(function(t){var e=t.target;(e=e.hasAttribute(w)||e.hasAttribute("href")?e:e.parentNode)!==i||ft(c,K)||(c.modalTrigger=i,m=i,y.show(),t.preventDefault())})),y.content&&y.setContent(y.content),i&&(i.Modal=y)}};a.push([g,Pt,'[data-toggle="modal"]']);var Lt=function(n,r){r=r||{};var i=(n=gt(n)).getAttribute("data-trigger"),o=n.getAttribute(T),a=n.getAttribute(O),s=n.getAttribute("data-dismissible"),u=n.getAttribute(M),c=n.getAttribute(I),l="popover",h="class",p="div",f="fade",d="data-content",g='<button type="button" class="close">×</button>',y=gt(r.container),m=gt(c),_=vt(n,".modal"),b=vt(n,"."+at),x=vt(n,"."+st);this.template=r.template?r.template:null,this.trigger=r.trigger?r.trigger:i||A,this.animation=r.animation&&r.animation!==f?r.animation:o||f,this.placement=r.placement?r.placement:a||tt,this.delay=parseInt(r.delay||u)||200,this.dismissible=!(!r.dismissible&&"true"!==s),this.container=y||(m||(b||(x||(_||e.body))));var w=this,S=n.getAttribute(E)||null,C=n.getAttribute(d)||null;if(C||this.template){var P=null,L=0,k=this.placement,N=function(t){null!==P&&t.target===gt(".close",P)&&w.hide()},F=function(r){R!=w.trigger&&"focus"!=w.trigger||!w.dismissible&&r(n,"blur",w.hide),w.dismissible&&r(e,R,N),!nt&&r(t,D,w.hide)},X=function(){F(yt),xt.call(n,z,l)},U=function(){F(mt),w.container.removeChild(P),L=null,P=null,xt.call(n,G,l)};this.toggle=function(){null===P?w.show():w.hide()},this.show=function(){clearTimeout(L),L=setTimeout((function(){null===P&&(k=w.placement,function(){if(S=n.getAttribute(E),C=n.getAttribute(d),P=e.createElement(p),null!==C&&null===w.template){if(P.setAttribute("role","tooltip"),null!==S){var t=e.createElement("h3");t.setAttribute(h,"popover-title"),t.innerHTML=w.dismissible?S+g:S,P.appendChild(t)}var r=e.createElement(p),i=e.createElement(p);r.setAttribute(h,"arrow"),i.setAttribute(h,"popover-content"),P.appendChild(r),P.appendChild(i),i.innerHTML=w.dismissible&&null===S?C+g:C}else{var o=e.createElement(p);o.innerHTML=w.template,P.innerHTML=o.firstChild.innerHTML}w.container.appendChild(P),P.style.display="block",P.setAttribute(h,"popover "+k+" "+w.animation)}(),Et(n,P,k,w.container),!ft(P,K)&&ht(P,K),xt.call(n,j,l),w.animation?bt(P,X):X())}),20)},this.hide=function(){clearTimeout(L),L=setTimeout((function(){P&&null!==P&&ft(P,K)&&(xt.call(n,B,l),pt(P,K),w.animation?bt(P,U):U())}),w.delay)},v in n||(w.trigger===A?(yt(n,rt[0],w.show),w.dismissible||yt(n,rt[1],w.hide)):R!=w.trigger&&"focus"!=w.trigger||yt(n,w.trigger,w.toggle)),n.Popover=w}};a.push([v,Lt,'[data-toggle="popover"]']);var Rt=function(e,n){e=gt(e);var r=gt(e.getAttribute(w)),i=e.getAttribute("data-offset");if((n=n||{}).target||r){for(var o,a=this,s=n.target&&gt(n.target)||r,u=s&&s.getElementsByTagName("A"),c=parseInt(i||n.offset)||10,l=[],h=[],p=e.offsetHeight<e.scrollHeight?e:t,f=p===t,d=0,g=u.length;d<g;d++){var v=u[d].getAttribute("href"),m=v&&"#"===v.charAt(0)&&"#"!==v.slice(-1)&&gt(v);m&&(l.push(u[d]),h.push(m))}var _=function(t){var n=l[t].parentNode,r=h[t],i=vt(n,".dropdown"),a=f&&r.getBoundingClientRect(),s=ft(n,W)||!1,u=(f?a.top+o:r.offsetTop)-c,p=f?a.bottom+o-c:h[t+1]?h[t+1].offsetTop-c:e.scrollHeight,d=o>=u&&p>o;if(!s&&d)"LI"!==n.tagName||ft(n,W)||(ht(n,W),i&&!ft(i,W)&&ht(i,W),xt.call(e,"activate","scrollspy",l[t]));else if(d){if(!d&&!s||s&&d)return}else"LI"===n.tagName&&ft(n,W)&&(pt(n,W),i&&ft(i,W)&&!dt(n.parentNode,W).length&&pt(i,W))};this.refresh=function(){!function(){o=f?wt().y:e.scrollTop;for(var t=0,n=l.length;t<n;t++)_(t)}()},y in e||(yt(p,F,a.refresh),!nt&&yt(t,D,a.refresh)),a.refresh(),e.ScrollSpy=a}};a.push([y,Rt,'[data-spy="scroll"]']);var At=function(t,e){var n=(t=gt(t)).getAttribute("data-height"),r="tab";e=e||{},this.height=!!ut&&(e.height||"true"===n);var i,o,a,u,c,l,h,p=this,f=vt(t,".nav"),d=!1,g=f&&gt(".dropdown",f),v=function(){d.style.height="",pt(d,$),f.isAnimating=!1},y=function(){d?l?v():setTimeout((function(){d.style.height=h+"px",d.offsetWidth,bt(d,v)}),1):f.isAnimating=!1,xt.call(i,z,r,o)},_=function(){d&&(a.style.float=J,u.style.float=J,c=a.scrollHeight),ht(u,W),xt.call(i,j,r,o),pt(a,W),xt.call(o,G,r,i),d&&(h=u.scrollHeight,l=h===c,ht(d,$),d.style.height=c+"px",d.offsetHeight,a.style.float="",u.style.float=""),ft(u,"fade")?setTimeout((function(){ht(u,K),bt(u,y)}),20):y()};if(f){f.isAnimating=!1;var b=function(){var t,e=dt(f,W);return 1!==e.length||ft(e[0],"dropdown")?e.length>1&&(t=e[e.length-1]):t=e[0],t.getElementsByTagName("A")[0]},x=function(){return gt(b().getAttribute("href"))};this.show=function(){u=gt((i=i||t).getAttribute("href")),o=b(),a=x(),f.isAnimating=!0,pt(o.parentNode,W),ht(i.parentNode,W),g&&(ft(t.parentNode.parentNode,"dropdown-menu")?ft(g,W)||ht(g,W):ft(g,W)&&pt(g,W)),xt.call(o,B,r,i),ft(a,"fade")?(pt(a,K),bt(a,_)):_()},m in t||yt(t,R,(function(t){var e=t.target.getAttribute("href");t.preventDefault(),i=t.target.getAttribute(s)===r||e&&"#"===e.charAt(0)?t.target:t.target.parentNode,!f.isAnimating&&!ft(i.parentNode,W)&&p.show()})),p.height&&(d=x().parentNode),t.Tab=p}};a.push([m,At,'[data-toggle="tab"]']);var kt=function(n,r){r=r||{};var i=(n=gt(n)).getAttribute(T),o=n.getAttribute(O),a=n.getAttribute(M),s=n.getAttribute(I),u="tooltip",c="class",l="title",h="fade",p="div",f=gt(r.container),d=gt(s),g=vt(n,".modal"),v=vt(n,"."+at),y=vt(n,"."+st);this.animation=r.animation&&r.animation!==h?r.animation:i||h,this.placement=r.placement?r.placement:o||tt,this.delay=parseInt(r.delay||a)||200,this.container=f||(d||(v||(y||(g||e.body))));var m=this,b=0,x=this.placement,w=null,C=n.getAttribute(l)||n.getAttribute(E)||n.getAttribute(S);if(C&&""!=C){var P=function(){xt.call(n,z,u),!nt&&yt(t,D,m.hide)},L=function(){!nt&&mt(t,D,m.hide),m.container.removeChild(w),w=null,b=null,xt.call(n,G,u)};this.show=function(){clearTimeout(b),b=setTimeout((function(){if(null===w){if(x=m.placement,0==function(){if(!(C=n.getAttribute(l)||n.getAttribute(E)||n.getAttribute(S))||""==C)return!1;(w=e.createElement(p)).setAttribute("role",u);var t=e.createElement(p),r=e.createElement(p);t.setAttribute(c,"tooltip-arrow"),r.setAttribute(c,"tooltip-inner"),w.appendChild(t),w.appendChild(r),r.innerHTML=C,m.container.appendChild(w),w.setAttribute(c,"tooltip "+x+" "+m.animation)}())return;Et(n,w,x,m.container),!ft(w,K)&&ht(w,K),xt.call(n,j,u),m.animation?bt(w,P):P()}}),20)},this.hide=function(){clearTimeout(b),b=setTimeout((function(){w&&ft(w,K)&&(xt.call(n,B,u),pt(w,K),m.animation?bt(w,L):L())}),m.delay)},this.toggle=function(){w?m.hide():m.show()},_ in n||(n.setAttribute(S,C),n.removeAttribute(l),yt(n,rt[0],m.show),yt(n,rt[1],m.hide)),n.Tooltip=m}};a.push([_,kt,'[data-toggle="tooltip"]']);var Nt=function(t,e){for(var n=0,r=e.length;n<r;n++)new t(e[n])},Dt=i.initCallback=function(t){t=t||e;for(var n=0,r=a.length;n<r;n++)Nt(a[n][1],t.querySelectorAll(a[n][2]))};return e.body?Dt():yt(e,"DOMContentLoaded",(function(){Dt()})),{Affix:St,Alert:Ct,Button:Tt,Carousel:It,Collapse:Ot,Dropdown:Mt,Modal:Pt,Popover:Lt,ScrollSpy:Rt,Tab:At,Tooltip:kt}})),this};var o=(new i).dispatch();e.a=o}).call(this,n(107)(t))},function(t,e,n){"use strict";var r=n(7),i=n(32).filter,o=n(84),a=n(49),s=o("filter"),u=a("filter");r({target:"Array",proto:!0,forced:!s||!u},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r=n(105),i=n(17),o=n(16),a=n(38),s=n(130),u=n(106);r("match",1,(function(t,e,n){return[function(e){var n=a(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var a=i(t),c=String(this);if(!a.global)return u(a,c);var l=a.unicode;a.lastIndex=0;for(var h,p=[],f=0;null!==(h=u(a,c));){var d=String(h[0]);p[f]=d,""===d&&(a.lastIndex=s(c,o(a.lastIndex),l)),f++}return 0===f?null:p}]}))},function(t,e,n){var r=n(7),i=n(158);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(t,e,n){"use strict";n.r(e);var r,i=n(8),o=n(75),a=n(10),s=n(9),u=n(2),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(t){function e(e){var n=t.call(this)||this;return n.element=e.element?e.element:null,n.target_=null,n.map_=null,n.listenerKeys=[],n.render=e.render?e.render:i.c,e.target&&n.setTarget(e.target),n}return c(e,t),e.prototype.disposeInternal=function(){Object(s.c)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Object(s.c)(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)Object(u.c)(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==i.c&&this.listenerKeys.push(Object(u.a)(t,o.a.POSTRENDER,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(a.a);e.default=l},function(t,e,n){var r=n(138),i=n(12),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e){t.exports=!1},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(23),i=n(119),o=n(61),a=n(48),s=n(77),u=n(24),c=n(135),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=s(e,!0),c)try{return l(t,e)}catch(t){}if(u(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){var r=n(28).f,i=n(24),o=n(13)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){"use strict";var r=n(7),i=n(20),o=n(100),a=n(69),s=n(16),u=n(48),c=n(101),l=n(13),h=n(84),p=n(49),f=h("slice"),d=p("slice",{ACCESSORS:!0,0:0,1:2}),g=l("species"),v=[].slice,y=Math.max;r({target:"Array",proto:!0,forced:!f||!d},{slice:function(t,e){var n,r,l,h=u(this),p=s(h.length),f=a(t,p),d=a(void 0===e?p:e,p);if(o(h)&&("function"!=typeof(n=h.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[g])&&(n=void 0):n=void 0,n===Array||void 0===n))return v.call(h,f,d);for(r=new(void 0===n?Array:n)(y(d-f,0)),l=0;f<d;f++,l++)f in h&&c(r,l,h[f]);return r.length=l,r}})},function(t,e,n){"use strict";var r=n(7),i=n(69),o=n(43),a=n(16),s=n(29),u=n(126),c=n(101),l=n(84),h=n(49),p=l("splice"),f=h("splice",{ACCESSORS:!0,0:0,1:2}),d=Math.max,g=Math.min,v=9007199254740991,y="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!f},{splice:function(t,e){var n,r,l,h,p,f,m=s(this),_=a(m.length),b=i(t,_),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=_-b):(n=x-2,r=g(d(o(e),0),_-b)),_+n-r>v)throw TypeError(y);for(l=u(m,r),h=0;h<r;h++)(p=b+h)in m&&c(l,h,m[p]);if(l.length=r,n<r){for(h=b;h<_-r;h++)f=h+n,(p=h+r)in m?m[f]=m[p]:delete m[f];for(h=_;h>_-r+n;h--)delete m[h-1]}else if(n>r)for(h=_-r;h>b;h--)f=h+n-1,(p=h+r-1)in m?m[f]=m[p]:delete m[f];for(h=0;h<n;h++)m[h+b]=arguments[h+2];return m.length=_-r+n,l}})},function(t,e,n){var r=n(139),i=n(120).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(43),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){var r=n(65);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(17),i=n(65),o=n(13)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){"use strict";var r=n(7),i=n(146);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(t,e,n){var r,i=n(17),o=n(147),a=n(120),s=n(96),u=n(142),c=n(116),l=n(95),h=l("IE_PROTO"),p=function(){},f=function(t){return"<script>"+t+"</"+"script>"},d=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;d=r?function(t){t.write(f("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=c("iframe")).style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(f("document.F=Object")),t.close(),t.F);for(var n=a.length;n--;)delete d.prototype[a[n]];return d()};s[h]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p.prototype=i(t),n=new p,p.prototype=null,n[h]=t):n=d(),void 0===e?n:o(n,e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"coordEach",(function(){return i})),n.d(e,"coordReduce",(function(){return o})),n.d(e,"propEach",(function(){return a})),n.d(e,"propReduce",(function(){return s})),n.d(e,"featureEach",(function(){return u})),n.d(e,"featureReduce",(function(){return c})),n.d(e,"coordAll",(function(){return l})),n.d(e,"geomEach",(function(){return h})),n.d(e,"geomReduce",(function(){return p})),n.d(e,"flattenEach",(function(){return f})),n.d(e,"flattenReduce",(function(){return d})),n.d(e,"segmentEach",(function(){return g})),n.d(e,"segmentReduce",(function(){return v})),n.d(e,"lineEach",(function(){return y})),n.d(e,"lineReduce",(function(){return m})),n.d(e,"findSegment",(function(){return _})),n.d(e,"findPoint",(function(){return b}));var r=n(4);function i(t,e,n){if(null!==t)for(var r,o,a,s,u,c,l,h,p=0,f=0,d=t.type,g="FeatureCollection"===d,v="Feature"===d,y=g?t.features.length:1,m=0;m<y;m++){u=(h=!!(l=g?t.features[m].geometry:v?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var _=0;_<u;_++){var b=0,x=0;if(null!==(s=h?l.geometries[_]:l)){c=s.coordinates;var w=s.type;switch(p=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,f,m,b,x))return!1;f++,b++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(!1===e(c[r],f,m,b,x))return!1;f++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-p;o++){if(!1===e(c[r][o],f,m,b,x))return!1;f++}"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(x=0,o=0;o<c[r].length;o++){for(a=0;a<c[r][o].length-p;a++){if(!1===e(c[r][o][a],f,m,b,x))return!1;f++}x++}b++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o}function a(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function s(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function u(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function c(t,e,n){var r=n;return u(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function l(t){var e=[];return i(t,(function(t){e.push(t)})),e}function h(t,e){var n,r,i,o,a,s,u,c,l,h,p=0,f="FeatureCollection"===t.type,d="Feature"===t.type,g=f?t.features.length:1;for(n=0;n<g;n++){for(s=f?t.features[n].geometry:d?t.geometry:t,c=f?t.features[n].properties:d?t.properties:{},l=f?t.features[n].bbox:d?t.bbox:void 0,h=f?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,c,l,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],p,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,l,h))return!1;p++}}function p(t,e,n){var r=n;return h(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function f(t,e){h(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Object(r.feature)(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l={type:s,coordinates:t.coordinates[c]};if(!1===e(Object(r.feature)(l,i),n,c))return!1}}))}function d(t,e,n){var r=n;return f(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function g(t,e){f(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,c=0,l=0,h=0;return!1!==i(t,(function(i,s,p,f,d){if(void 0===u||n>c||f>l||d>h)return u=i,c=n,l=f,h=d,void(a=0);var g=Object(r.lineString)([u,i],t.properties);if(!1===e(g,n,o,d,a))return!1;a++,u=i}))&&void 0}}}))}function v(t,e,n){var r=n,i=!1;return g(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r}function y(t,e){if(!t)throw new Error("geojson is required");f(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(Object(r.lineString)(a[s],t.properties),n,i,s))return!1}}}))}function m(t,e,n){var r=n;return y(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r}function _(t,e){if(e=e||{},!Object(r.isObject)(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),Object(r.lineString)([c[s],c[s+1]],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),Object(r.lineString)([c[a][s],c[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s-1),Object(r.lineString)([c[o][s],c[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s-1),Object(r.lineString)([c[o][a][s],c[o][a][s+1]],u,e)}throw new Error("geojson is invalid")}function b(t,e){if(e=e||{},!Object(r.isObject)(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return Object(r.point)(c,u,e);case"MultiPoint":return o<0&&(o=c.length+o),Object(r.point)(c[o],u,e);case"LineString":return s<0&&(s=c.length+s),Object(r.point)(c[s],u,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),Object(r.point)(c[a][s],u,e);case"MultiLineString":return o<0&&(o=c.length+o),s<0&&(s=c[o].length+s),Object(r.point)(c[o][s],u,e);case"MultiPolygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),s<0&&(s=c[o][a].length-s),Object(r.point)(c[o][a][s],u,e)}throw new Error("geojson is invalid")}},function(t,e,n){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=0;function i(t){return t.ol_uid||(t.ol_uid=String(++r))}var o="5.3.3"},function(t,e,n){var r=n(20);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(111),i=n(62),o=n(13)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){var r=n(11),i=n(62),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(48),i=n(16),o=n(69),a=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e){t.exports={}},function(t,e,n){var r=n(78),i=n(82),o=n(13)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(11),i=n(13),o=n(99),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){"use strict";var r=n(11);t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){var r=n(24),i=n(29),o=n(95),a=n(151),s=o("IE_PROTO"),u=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r=n(17),i=n(209);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){var r=n(23),i=n(28).f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,u="name";r&&!(u in o)&&i(o,u,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},function(t,e,n){var r=n(12),i=n(153),o=n(146),a=n(31);for(var s in i){var u=r[s],c=u&&u.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(t){c.forEach=o}}},function(t,e,n){"use strict";var r=n(7),i=n(12),o=n(59),a=n(60),s=n(23),u=n(117),c=n(136),l=n(11),h=n(24),p=n(100),f=n(20),d=n(17),g=n(29),v=n(48),y=n(77),m=n(61),_=n(73),b=n(103),x=n(68),w=n(211),E=n(121),S=n(63),C=n(28),T=n(119),I=n(31),O=n(37),M=n(113),P=n(95),L=n(96),R=n(94),A=n(13),k=n(154),N=n(155),D=n(64),F=n(47),j=n(32).forEach,z=P("hidden"),B="Symbol",G=A("toPrimitive"),X=F.set,U=F.getterFor(B),q=Object.prototype,Y=i.Symbol,V=o("JSON","stringify"),H=S.f,W=C.f,K=w.f,$=T.f,Z=M("symbols"),J=M("op-symbols"),Q=M("string-to-symbol-registry"),tt=M("symbol-to-string-registry"),et=M("wks"),nt=i.QObject,rt=!nt||!nt.prototype||!nt.prototype.findChild,it=s&&l((function(){return 7!=_(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=H(q,e);r&&delete q[e],W(t,e,n),r&&t!==q&&W(q,e,r)}:W,ot=function(t,e){var n=Z[t]=_(Y.prototype);return X(n,{type:B,tag:t,description:e}),s||(n.description=e),n},at=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Y},st=function(t,e,n){t===q&&st(J,e,n),d(t);var r=y(e,!0);return d(n),h(Z,r)?(n.enumerable?(h(t,z)&&t[z][r]&&(t[z][r]=!1),n=_(n,{enumerable:m(0,!1)})):(h(t,z)||W(t,z,m(1,{})),t[z][r]=!0),it(t,r,n)):W(t,r,n)},ut=function(t,e){d(t);var n=v(e),r=b(n).concat(pt(n));return j(r,(function(e){s&&!ct.call(n,e)||st(t,e,n[e])})),t},ct=function(t){var e=y(t,!0),n=$.call(this,e);return!(this===q&&h(Z,e)&&!h(J,e))&&(!(n||!h(this,e)||!h(Z,e)||h(this,z)&&this[z][e])||n)},lt=function(t,e){var n=v(t),r=y(e,!0);if(n!==q||!h(Z,r)||h(J,r)){var i=H(n,r);return!i||!h(Z,r)||h(n,z)&&n[z][r]||(i.enumerable=!0),i}},ht=function(t){var e=K(v(t)),n=[];return j(e,(function(t){h(Z,t)||h(L,t)||n.push(t)})),n},pt=function(t){var e=t===q,n=K(e?J:v(t)),r=[];return j(n,(function(t){!h(Z,t)||e&&!h(q,t)||r.push(Z[t])})),r};(u||(O((Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=R(t),n=function(t){this===q&&n.call(J,t),h(this,z)&&h(this[z],e)&&(this[z][e]=!1),it(this,e,m(1,t))};return s&&rt&&it(q,e,{configurable:!0,set:n}),ot(e,t)}).prototype,"toString",(function(){return U(this).tag})),O(Y,"withoutSetter",(function(t){return ot(R(t),t)})),T.f=ct,C.f=st,S.f=lt,x.f=w.f=ht,E.f=pt,k.f=function(t){return ot(A(t),t)},s&&(W(Y.prototype,"description",{configurable:!0,get:function(){return U(this).description}}),a||O(q,"propertyIsEnumerable",ct,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Y}),j(b(et),(function(t){N(t)})),r({target:B,stat:!0,forced:!u},{for:function(t){var e=String(t);if(h(Q,e))return Q[e];var n=Y(e);return Q[e]=n,tt[n]=e,n},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(h(tt,t))return tt[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(t,e){return void 0===e?_(t):ut(_(t),e)},defineProperty:st,defineProperties:ut,getOwnPropertyDescriptor:lt}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:ht,getOwnPropertySymbols:pt}),r({target:"Object",stat:!0,forced:l((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(g(t))}}),V)&&r({target:"JSON",stat:!0,forced:!u||l((function(){var t=Y();return"[null]"!=V([t])||"{}"!=V({a:t})||"{}"!=V(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(f(e)||void 0!==t)&&!at(t))return p(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!at(e))return e}),i[1]=e,V.apply(null,i)}});Y.prototype[G]||I(Y.prototype,G,Y.prototype.valueOf),D(Y,B),L[z]=!0},function(t,e,n){"use strict";var r=n(7),i=n(23),o=n(12),a=n(24),s=n(20),u=n(28).f,c=n(137),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new l(t):void 0===t?l():l(t);return""===t&&(h[e]=!0),e};c(p,l);var f=p.prototype=l.prototype;f.constructor=p;var d=f.toString,g="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;u(f,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=d.call(t);if(a(h,t))return"";var n=g?e.slice(7,-1):e.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:p})}},function(t,e,n){n(155)("iterator")},function(t,e,n){"use strict";(function(t,r){n(90),n(91),n(92),n(39),n(26),n(50),n(66),n(88),n(14),n(161),n(22),n(21),n(36),n(56),n(222),n(51),n(164),n(45),n(40),n(165);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(){};o.prototype.dispatch=function(){return function(t,e){"object"===("undefined"==typeof exports?"undefined":i(exports))&&void 0!==r?r.exports=e():"function"==typeof define&&n(108)?define(e):t.page=e()}(this,(function(){var e=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},n=v,r=c,o=function(t){return l(c(t))},a=l,s=g,u=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function c(t){for(var e,n=[],r=0,i=0,o="";null!=(e=u.exec(t));){var a=e[0],s=e[1],c=e.index;if(o+=t.slice(i,c),i=c+a.length,s)o+=s[1];else{o&&(n.push(o),o="");var l=e[2],h=e[3],f=e[4],d=e[5],g=e[6],v=e[7],y="+"===g||"*"===g,m="?"===g||"*"===g,_=l||"/",b=f||d||(v?".*":"[^"+_+"]+?");n.push({name:h||r++,prefix:l||"",delimiter:_,optional:m,repeat:y,pattern:p(b)})}}return i<t.length&&(o+=t.substr(i)),o&&n.push(o),n}function l(t){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"===i(t[r])&&(n[r]=new RegExp("^"+t[r].pattern+"$"));return function(r){for(var i="",o=r||{},a=0;a<t.length;a++){var s=t[a];if("string"!=typeof s){var u,c=o[s.name];if(null==c){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to be defined')}if(e(c)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received "'+c+'"');if(0===c.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var l=0;l<c.length;l++){if(u=encodeURIComponent(c[l]),!n[a].test(u))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received "'+u+'"');i+=(0===l?s.prefix:s.delimiter)+u}}else{if(u=encodeURIComponent(c),!n[a].test(u))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+u+'"');i+=s.prefix+u}}else i+=s}return i}}function h(t){return t.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function p(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function f(t,e){return t.keys=e,t}function d(t){return t.sensitive?"":"i"}function g(t,e){for(var n=(e=e||{}).strict,r=!1!==e.end,i="",o=t[t.length-1],a="string"==typeof o&&/\/$/.test(o),s=0;s<t.length;s++){var u=t[s];if("string"==typeof u)i+=h(u);else{var c=h(u.prefix),l=u.pattern;u.repeat&&(l+="(?:"+c+l+")*"),i+=l=u.optional?c?"(?:"+c+"("+l+"))?":"("+l+")?":c+"("+l+")"}}return n||(i=(a?i.slice(0,-2):i)+"(?:\\/(?=$))?"),i+=r?"$":n&&a?"":"(?=\\/|$)",new RegExp("^"+i,d(e))}function v(t,n,r){return e(n=n||[])?r||(r={}):(r=n,n=[]),t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return f(t,e)}(t,n):e(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(v(t[i],e,n).source);return f(new RegExp("(?:"+r.join("|")+")",d(n)),e)}(t,n,r):function(t,e,n){for(var r=c(t),i=g(r,n),o=0;o<r.length;o++)"string"!=typeof r[o]&&e.push(r[o]);return f(i,e)}(t,n,r)}n.parse=r,n.compile=o,n.tokensToFunction=a,n.tokensToRegExp=s;var y=R;R.default=R,R.Context=k,R.Route=N,R.sameOrigin=j;var m,_,b,x="undefined"!=typeof document,w="undefined"!=typeof window,E="undefined"!=typeof history,S=void 0!==t,C=x&&document.ontouchstart?"touchstart":"click",T=w&&!(!window.history.location&&!window.location),I=!0,O=!0,M="",P=!1,L=!1;function R(t,e){if("function"==typeof t)return R("*",t);if("function"==typeof e)for(var n=new N(t),r=1;r<arguments.length;++r)R.callbacks.push(n.middleware(arguments[r]));else"string"==typeof t?R["string"==typeof e?"redirect":"show"](t,e):R.start(t)}function A(t){return"string"!=typeof t?t:O?decodeURIComponent(t.replace(/\+/g," ")):t}function k(t,e){var n=z();"/"===t[0]&&0!==t.indexOf(n)&&(t=n+(L?"#!":"")+t);var r=t.indexOf("?");if(this.canonicalPath=t,this.path=t.replace(n,"")||"/",L&&(this.path=this.path.replace("#!","")||"/"),this.title=x&&b.document.title,this.state=e||{},this.state.path=t,this.querystring=~r?A(t.slice(r+1)):"",this.pathname=A(~r?t.slice(0,r):t),this.params={},this.hash="",!L){if(!~this.path.indexOf("#"))return;var i=this.path.split("#");this.path=this.pathname=i[0],this.hash=A(i[1])||"",this.querystring=this.querystring.split("#")[0]}}function N(t,e){(e=e||{}).strict=e.strict||P,this.path="*"===t?"(.*)":t,this.method="GET",this.regexp=n(this.path,this.keys=[],e)}R.callbacks=[],R.exits=[],R.current="",R.len=0,R.base=function(t){if(0===arguments.length)return M;M=t},R.strict=function(t){if(0===arguments.length)return P;P=t},R.start=function(t){if(t=t||{},!m&&(m=!0,b=t.window||w&&window,!1===t.dispatch&&(I=!1),!1===t.decodeURLComponents&&(O=!1),!1!==t.popstate&&w&&b.addEventListener("popstate",D,!1),!1!==t.click&&x&&b.document.addEventListener(C,F,!1),(L=!!t.hashbang)&&w&&!E&&b.addEventListener("hashchange",D,!1),I)){var e;if(T){var n=b.location;e=L&&~n.hash.indexOf("#!")?n.hash.substr(2)+n.search:L?n.search+n.hash:n.pathname+n.search+n.hash}R.replace(e,null,!0,I)}},R.stop=function(){m&&(R.current="",R.len=0,m=!1,x&&b.document.removeEventListener(C,F,!1),w&&b.removeEventListener("popstate",D,!1),w&&b.removeEventListener("hashchange",D,!1))},R.show=function(t,e,n,r){var i=new k(t,e),o=_;return _=i,R.current=i.path,!1!==n&&R.dispatch(i,o),!1!==i.handled&&!1!==r&&i.pushState(),i},R.back=function(t,e){R.len>0?(E&&b.history.back(),R.len--):t?setTimeout((function(){R.show(t,e)})):setTimeout((function(){R.show(z(),e)}))},R.redirect=function(t,e){"string"==typeof t&&"string"==typeof e&&R(t,(function(t){setTimeout((function(){R.replace(e)}),0)})),"string"==typeof t&&void 0===e&&setTimeout((function(){R.replace(t)}),0)},R.replace=function(t,e,n,r){var i=new k(t,e),o=_;return _=i,R.current=i.path,i.init=n,i.save(),!1!==r&&R.dispatch(i,o),i},R.dispatch=function(t,e){var n=0,r=0;function i(){var e=R.callbacks[n++];if(t.path===R.current)return e?void e(t,i):function(t){if(t.handled)return;var e;e=L?T&&z()+b.location.hash.replace("#!",""):T&&b.location.pathname+b.location.search;if(e===t.canonicalPath)return;R.stop(),t.handled=!1,T&&(b.location.href=t.canonicalPath)}(t);t.handled=!1}e?function t(){var n=R.exits[r++];if(!n)return i();n(e,t)}():i()},R.exit=function(t,e){if("function"==typeof t)return R.exit("*",t);for(var n=new N(t),r=1;r<arguments.length;++r)R.exits.push(n.middleware(arguments[r]))},R.Context=k,k.prototype.pushState=function(){R.len++,E&&b.history.pushState(this.state,this.title,L&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},k.prototype.save=function(){E&&"file:"!==b.location.protocol&&b.history.replaceState(this.state,this.title,L&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},R.Route=N,N.prototype.middleware=function(t){var e=this;return function(n,r){if(e.match(n.path,n.params))return t(n,r);r()}},N.prototype.match=function(t,e){var n=this.keys,r=t.indexOf("?"),i=~r?t.slice(0,r):t,o=this.regexp.exec(decodeURIComponent(i));if(!o)return!1;for(var a=1,s=o.length;a<s;++a){var u=n[a-1],c=A(o[a]);void 0===c&&hasOwnProperty.call(e,u.name)||(e[u.name]=c)}return!0};var D=function(){var t=!1;if(w)return x&&"complete"===document.readyState?t=!0:window.addEventListener("load",(function(){setTimeout((function(){t=!0}),0)})),function(e){if(t)if(e.state){var n=e.state.path;R.replace(n,e.state)}else if(T){var r=b.location;R.show(r.pathname+r.hash,void 0,void 0,!1)}}}();function F(t){if(1===function(t){return null==(t=t||w&&window.event).which?t.button:t.which}(t)&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){var e=t.target,n=t.path||(t.composedPath?t.composedPath():null);if(n)for(var r=0;r<n.length;r++)if(n[r].nodeName&&"A"===n[r].nodeName.toUpperCase()&&n[r].href){e=n[r];break}for(;e&&"A"!==e.nodeName.toUpperCase();)e=e.parentNode;if(e&&"A"===e.nodeName.toUpperCase()){var o="object"===i(e.href)&&"SVGAnimatedString"===e.href.constructor.name;if(!e.hasAttribute("download")&&"external"!==e.getAttribute("rel")){var a=e.getAttribute("href");if((L||!function(t){if(!T)return!1;var e=b.location;return t.pathname===e.pathname&&t.search===e.search}(e)||!e.hash&&"#"!==a)&&!(a&&a.indexOf("mailto:")>-1)&&!(o?e.target.baseVal:e.target)&&(o||j(e.href))){var s=o?e.href.baseVal:e.pathname+e.search+(e.hash||"");s="/"!==s[0]?"/"+s:s,S&&s.match(/^\/[a-zA-Z]:\//)&&(s=s.replace(/^\/[a-zA-Z]:\//,"/"));var u=s,c=z();0===s.indexOf(c)&&(s=s.substr(M.length)),L&&(s=s.replace("#!","")),c&&u===s||(t.preventDefault(),R.show(u))}}}}}function j(t){if(!t||!T)return!1;var e=function(t){if("function"==typeof URL&&T)return new URL(t,location.toString());if(x){var e=document.createElement("a");return e.href=t,e}}(t),n=b.location;return n.protocol===e.protocol&&n.hostname===e.hostname&&n.port===e.port}function z(){if(M)return M;var t=w&&b&&b.location;return w&&L&&t&&"file:"===t.protocol?t.pathname:M}return R.sameOrigin=j,y})),this};var a=(new o).dispatch();e.a=a.page}).call(this,n(221),n(107)(t))},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(113),i=n(94),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(59),i=n(28),o=n(13),a=n(23),s=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(62),i=n(12);t.exports="process"==r(i.process)},function(t,e,n){var r,i,o=n(12),a=n(144),s=o.process,u=s&&s.versions,c=u&&u.v8;c?i=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},function(t,e,n){var r=n(62);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";var r=n(77),i=n(28),o=n(61);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){var r=n(13),i=n(73),o=n(28),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),t.exports=function(t){s[a][t]=!0}},function(t,e,n){var r=n(139),i=n(120);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){"use strict";var r,i,o=n(128),a=n(152),s=RegExp.prototype.exec,u=String.prototype.replace,c=s,l=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(l||p||h)&&(c=function(t){var e,n,r,i,a=this,c=h&&a.sticky,f=o.call(a),d=a.source,g=0,v=t;return c&&(-1===(f=f.replace("y","")).indexOf("g")&&(f+="g"),v=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(d="(?: "+d+")",v=" "+v,g++),n=new RegExp("^(?:"+d+")",f)),p&&(n=new RegExp("^"+d+"$(?!\\s)",f)),l&&(e=a.lastIndex),r=s.call(c?n:a,v),c?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:l&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),p&&r&&r.length>1&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=c},function(t,e,n){"use strict";n(22);var r=n(37),i=n(11),o=n(13),a=n(104),s=n(31),u=o("species"),c=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l="$0"==="a".replace(/./,"$0"),h=o("replace"),p=!!/./[h]&&""===/./[h]("a","$0"),f=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var d=o(t),g=!i((function(){var e={};return e[d]=function(){return 7},7!=""[t](e)})),v=g&&!i((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[u]=function(){return n},n.flags="",n[d]=/./[d]),n.exec=function(){return e=!0,null},n[d](""),!e}));if(!g||!v||"replace"===t&&(!c||!l||p)||"split"===t&&!f){var y=/./[d],m=n(d,""[t],(function(t,e,n,r,i){return e.exec===a?g&&!i?{done:!0,value:y.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),_=m[0],b=m[1];r(String.prototype,t,_),r(RegExp.prototype,d,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}h&&s(RegExp.prototype[d],"sham",!0)}},function(t,e,n){var r=n(62),i=n(104);t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){"use strict";var r,i=n(2),o=n(27),a=n(1),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return s(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(a.a.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),o=0;o<n;++o)r[o]=Object(i.a)(this,t[o],e);return r}return Object(i.a)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),o=0;o<n;++o)r[o]=Object(i.b)(this,t[o],e);return r}return Object(i.b)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},e}(o.a);e.a=u},function(t,e,n){t.exports=function(){"use strict";function t(t,r,i,o,a){!function t(n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);t(n,r,Math.max(i,Math.floor(r-u*l/s+h)),Math.min(o,Math.floor(r+(s-u)*l/s+h)),a)}var p=n[r],f=i,d=o;for(e(n,i,r),a(n[o],p)>0&&e(n,i,o);f<d;){for(e(n,f,d),f++,d--;a(n[f],p)<0;)f++;for(;a(n[d],p)>0;)d--}0===a(n[i],p)?e(n,i,d):e(n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(t,r,i||0,o||t.length-1,a||n)}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,n,r,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<n;o++){var a=t.children[o];s(i,t.leaf?r(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,n,r,i,o){for(var a=[n,r];a.length;)if(!((r=a.pop())-(n=a.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;t(e,s,n,r,o),a.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var e=this.data,n=[];if(!f(t,e))return n;for(var r=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?r(a):a;f(t,s)&&(e.leaf?n.push(a):p(t,s)?this._all(a,n):i.push(a))}e=i.pop()}return n},r.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var n=[];e;){for(var r=0;r<e.children.length;r++){var i=e.children[r],o=e.leaf?this.toBBox(i):i;if(f(t,o)){if(e.leaf||p(t,o))return!0;n.push(i)}}e=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=d([]),this},r.prototype.remove=function(t,e){if(!t)return this;for(var n,r,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf){var l=i(t,a.children,e);if(-1!==l)return a.children.splice(l,1),u.push(a),this._condense(u),this}o||a.leaf||!p(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,e){return t.minX-e.minX},r.prototype.compareMinY=function(t,e){return t.minY-e.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},r.prototype._build=function(t,e,n,r){var i,a=n-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,r-1))),(i=d([])).leaf=!1,i.height=r;var u=Math.ceil(a/s),c=u*Math.ceil(Math.sqrt(s));g(t,e,n,c,this.compareMinX);for(var l=e;l<=n;l+=c){var h=Math.min(l+c-1,n);g(t,l,h,u,this.compareMinY);for(var p=l;p<=h;p+=u){var f=Math.min(p+u-1,h);i.children.push(this._build(t,p,f,r-1))}}return o(i,this.toBBox),i},r.prototype._chooseSubtree=function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],c=l(u),h=(p=t,f=u,(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-c);h<o?(o=h,i=c<i?c:i,a=u):h===o&&c<i&&(i=c,a=u)}e=a||e.children[0]}var p,f;return e},r.prototype._insert=function(t,e,n){var r=n?t:this.toBBox(t),i=[],o=this._chooseSubtree(r,this.data,e,i);for(o.children.push(t),s(o,r);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(r,i,e)},r.prototype._split=function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var a=this._chooseSplitIndex(n,i,r),s=d(n.children.splice(a,n.children.length-a));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,e,n){for(var r,i,o,s,u,c,h,p=1/0,f=1/0,d=e;d<=n-e;d++){var g=a(t,0,d,this.toBBox),v=a(t,d,n,this.toBBox),y=(i=g,o=v,s=void 0,u=void 0,c=void 0,h=void 0,s=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),c=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,c-s)*Math.max(0,h-u)),m=l(g)+l(v);y<p?(p=y,r=d,f=m<f?m:f):y===p&&m<f&&(f=m,r=d)}return r||n-e},r.prototype._chooseSplitAxis=function(t,e,n){var r=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,o=a(t,0,e,i),u=a(t,n-e,n,i),c=h(o)+h(u),l=e;l<n-e;l++){var p=t.children[l];s(o,t.leaf?i(p):p),c+=h(o)}for(var f=n-e-1;f>=e;f--){var d=t.children[f];s(u,t.leaf?i(d):d),c+=h(u)}return c},r.prototype._adjustParentBBoxes=function(t,e,n){for(var r=n;r>=0;r--)s(e[r],t)},r.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},r}()},function(t,e,n){var r={};r[n(13)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(60),i=n(114);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(12),i=n(115),o="__core-js_shared__",a=r[o]||i(o,{});t.exports=a},function(t,e,n){var r=n(12),i=n(31);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(12),i=n(20),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e,n){var r=n(11);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(114),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(11),i=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=u&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=o.data={},u=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(37);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(13),i=n(82),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,n){var r=n(13)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){var r=n(20),i=n(100),o=n(13)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e,n){var r=n(65),i=n(29),o=n(79),a=n(16),s=function(t){return function(e,n,s,u){r(n);var c=i(e),l=o(c),h=a(c.length),p=t?h-1:0,f=t?-1:1;if(s<2)for(;;){if(p in l){u=l[p],p+=f;break}if(p+=f,t?p<0:h<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:h>p;p+=f)p in l&&(u=n(u,l[p],p,c));return u}};t.exports={left:s(!1),right:s(!0)}},function(t,e,n){"use strict";var r=n(17);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(43),i=n(38),o=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){"use strict";var r=n(129).charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r=n(20),i=n(62),o=n(13)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){"use strict";var r=n(29),i=n(69),o=n(16);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},function(t,e,n){(function(t,r){var i=n(177),o=n(278),a=9007199254740991,s="[object Arguments]",u="[object Error]",c="[object Function]",l="[object Object]",h="[object Symbol]",p=/\b__p \+= '';/g,f=/\b(__p \+=) '' \+/g,d=/(__e\(.*?\)|\b__t\)) \+\n'';/g,g=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,v=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,m=/($^)/,_=/['\n\r\u2028\u2029\\]/g,b={};b["[object Float32Array]"]=b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0,b[s]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object Boolean]"]=b["[object DataView]"]=b["[object Date]"]=b[u]=b[c]=b["[object Map]"]=b["[object Number]"]=b[l]=b["[object RegExp]"]=b["[object Set]"]=b["[object String]"]=b["[object WeakMap]"]=!1;var x={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},w="object"==typeof t&&t&&t.Object===Object&&t,E="object"==typeof self&&self&&self.Object===Object&&self,S=w||E||Function("return this")(),C=e&&!e.nodeType&&e,T=C&&"object"==typeof r&&r&&!r.nodeType&&r,I=T&&T.exports===C,O=I&&w.process,M=function(){try{var t=T&&T.require&&T.require("util").types;return t||O&&O.binding&&O.binding("util")}catch(t){}}(),P=M&&M.isTypedArray;function L(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function R(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function A(t){return"\\"+x[t]}function k(t,e){return function(n){return t(e(n))}}var N,D=Function.prototype,F=Object.prototype,j=S["__core-js_shared__"],z=D.toString,B=F.hasOwnProperty,G=(N=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+N:"",X=F.toString,U=z.call(Object),q=RegExp("^"+z.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Y=I?S.Buffer:void 0,V=S.Symbol,H=k(Object.getPrototypeOf,Object),W=F.propertyIsEnumerable,K=V?V.toStringTag:void 0,$=function(){try{var t=function(t){return!(!It(t)||function(t){return!!G&&G in t}(t))&&(Ct(t)?q:v).test(function(t){if(null!=t){try{return z.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))}(e=function(t,e){return null==t?void 0:t[e]}(Object,"defineProperty"))?e:void 0;return t({},"",{}),t}catch(t){}var e}(),Z=Y?Y.isBuffer:void 0,J=k(Object.keys,Object),Q=Math.max,tt=Date.now,et=V?V.prototype:void 0,nt=et?et.toString:void 0;function rt(t,e){var n=xt(t),r=!n&&bt(t),i=!n&&!r&&Et(t),o=!n&&!r&&!i&&Mt(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var c in t)!e&&!B.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pt(c,u))||s.push(c);return s}function it(t,e,n){var r=t[e];B.call(t,e)&&_t(r,n)&&(void 0!==n||e in t)||ot(t,e,n)}function ot(t,e,n){"__proto__"==e&&$?$(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function at(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":K&&K in Object(t)?function(t){var e=B.call(t,K),n=t[K];try{t[K]=void 0;var r=!0}catch(t){}var i=X.call(t);r&&(e?t[K]=n:delete t[K]);return i}(t):function(t){return X.call(t)}(t)}function st(t){return Ot(t)&&at(t)==s}function ut(t){if(!It(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=dt(t),n=[];for(var r in t)("constructor"!=r||!e&&B.call(t,r))&&n.push(r);return n}function ct(t,e){return mt(function(t,e,n){return e=Q(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Q(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),L(t,this,s)}}(t,e,kt),t+"")}function lt(t){if("string"==typeof t)return t;if(xt(t))return R(t,lt)+"";if(function(t){return"symbol"==typeof t||Ot(t)&&at(t)==h}(t))return nt?nt.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function ht(t,e,n,r){return void 0===t||_t(t,F[n])&&!B.call(r,n)?e:t}function pt(t,e){var n=typeof t;return!!(e=null==e?a:e)&&("number"==n||"symbol"!=n&&y.test(t))&&t>-1&&t%1==0&&t<e}function ft(t,e,n){if(!It(n))return!1;var r=typeof e;return!!("number"==r?wt(n)&&pt(e,n.length):"string"==r&&e in n)&&_t(n[e],t)}function dt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||F)}var gt,vt,yt,mt=(gt=$?function(t,e){return $(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:kt,vt=0,yt=0,function(){var t=tt(),e=16-(t-yt);if(yt=t,e>0){if(++vt>=800)return arguments[0]}else vt=0;return gt.apply(void 0,arguments)});function _t(t,e){return t===e||t!=t&&e!=e}var bt=st(function(){return arguments}())?st:function(t){return Ot(t)&&B.call(t,"callee")&&!W.call(t,"callee")},xt=Array.isArray;function wt(t){return null!=t&&Tt(t.length)&&!Ct(t)}var Et=Z||function(){return!1};function St(t){if(!Ot(t))return!1;var e=at(t);return e==u||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!function(t){if(!Ot(t)||at(t)!=l)return!1;var e=H(t);if(null===e)return!0;var n=B.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&z.call(n)==U}(t)}function Ct(t){if(!It(t))return!1;var e=at(t);return e==c||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function It(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ot(t){return null!=t&&"object"==typeof t}var Mt=P?function(t){return function(e){return t(e)}}(P):function(t){return Ot(t)&&Tt(t.length)&&!!b[at(t)]};var Pt,Lt=(Pt=function(t,e,n,r){!function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?ot(n,s,u):it(n,s,u)}}(e,function(t){return wt(t)?rt(t,!0):ut(t)}(e),t,r)},ct((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=Pt.length>3&&"function"==typeof i?(r--,i):void 0,o&&ft(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&Pt(t,a,n,i)}return t})));function Rt(t){return wt(t)?rt(t):function(t){if(!dt(t))return J(t);var e=[];for(var n in Object(t))B.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}var At=ct((function(t,e){try{return L(t,void 0,e)}catch(t){return St(t)?t:new Error(t)}}));function kt(t){return t}r.exports=function(t,e,n){var r,a=o.imports._.templateSettings||o;n&&ft(t,e,n)&&(e=void 0),t=null==(r=t)?"":lt(r),e=Lt({},e,a,ht);var s,u,c,l=Lt({},e.imports,a.imports,ht),h=Rt(l),v=(s=l,R(h,(function(t){return s[t]}))),y=0,b=e.interpolate||m,x="__p += '",w=RegExp((e.escape||m).source+"|"+b.source+"|"+(b===i?g:m).source+"|"+(e.evaluate||m).source+"|$","g"),E=B.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"";t.replace(w,(function(e,n,r,i,o,a){return r||(r=i),x+=t.slice(y,a).replace(_,A),n&&(u=!0,x+="' +\n__e("+n+") +\n'"),o&&(c=!0,x+="';\n"+o+";\n__p += '"),r&&(x+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),y=a+e.length,e})),x+="';\n";var S=B.call(e,"variable")&&e.variable;S||(x="with (obj) {\n"+x+"\n}\n"),x=(c?x.replace(p,""):x).replace(f,"$1").replace(d,"$1;"),x="function("+(S||"obj")+") {\n"+(S?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+x+"return __p\n}";var C=At((function(){return Function(h,E+"return "+x).apply(void 0,v)}));if(C.source=x,St(C))throw C;return C}}).call(this,n(112),n(277)(t))},,function(t,e,n){var r=n(23),i=n(11),o=n(116);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(117);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,n){var r=n(24),i=n(202),o=n(63),a=n(28);t.exports=function(t,e){for(var n=i(e),s=a.f,u=o.f,c=0;c<n.length;c++){var l=n[c];r(t,l)||s(t,l,u(e,l))}}},function(t,e,n){var r=n(12);t.exports=r},function(t,e,n){var r=n(24),i=n(48),o=n(80).indexOf,a=n(96);t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)!r(a,n)&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(17);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},function(t,e,n){var r,i,o,a=n(12),s=n(11),u=n(70),c=n(142),l=n(116),h=n(143),p=n(98),f=a.location,d=a.setImmediate,g=a.clearImmediate,v=a.process,y=a.MessageChannel,m=a.Dispatch,_=0,b={},x="onreadystatechange",w=function(t){if(b.hasOwnProperty(t)){var e=b[t];delete b[t],e()}},E=function(t){return function(){w(t)}},S=function(t){w(t.data)},C=function(t){a.postMessage(t+"",f.protocol+"//"+f.host)};d&&g||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return b[++_]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(_),_},g=function(t){delete b[t]},p?r=function(t){v.nextTick(E(t))}:m&&m.now?r=function(t){m.now(E(t))}:y&&!h?(o=(i=new y).port2,i.port1.onmessage=S,r=u(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&f&&"file:"!==f.protocol&&!s(C)?(r=C,a.addEventListener("message",S,!1)):r=x in l("script")?function(t){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),w(t)}}:function(t){setTimeout(E(t),0)}),t.exports={set:d,clear:g}},function(t,e,n){var r=n(59);t.exports=r("document","documentElement")},function(t,e,n){var r=n(144);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r=n(59);t.exports=r("navigator","userAgent")||""},function(t,e,n){"use strict";var r=n(65),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var r=n(32).forEach,i=n(85),o=n(49),a=i("forEach"),s=o("forEach");t.exports=a&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,n){var r=n(23),i=n(28),o=n(17),a=n(103);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),s=r.length,u=0;s>u;)i.f(t,n=r[u++],e[n]);return t}},function(t,e,n){"use strict";var r=n(7),i=n(149),o=n(86),a=n(87),s=n(64),u=n(31),c=n(37),l=n(13),h=n(60),p=n(82),f=n(150),d=f.IteratorPrototype,g=f.BUGGY_SAFARI_ITERATORS,v=l("iterator"),y="keys",m="values",_="entries",b=function(){return this};t.exports=function(t,e,n,l,f,x,w){i(n,e,l);var E,S,C,T=function(t){if(t===f&&L)return L;if(!g&&t in M)return M[t];switch(t){case y:case m:case _:return function(){return new n(this,t)}}return function(){return new n(this)}},I=e+" Iterator",O=!1,M=t.prototype,P=M[v]||M["@@iterator"]||f&&M[f],L=!g&&P||T(f),R="Array"==e&&M.entries||P;if(R&&(E=o(R.call(new t)),d!==Object.prototype&&E.next&&(h||o(E)===d||(a?a(E,d):"function"!=typeof E[v]&&u(E,v,b)),s(E,I,!0,!0),h&&(p[I]=b))),f==m&&P&&P.name!==m&&(O=!0,L=function(){return P.call(this)}),h&&!w||M[v]===L||u(M,v,L),p[e]=L,f)if(S={values:T(m),keys:x?L:T(y),entries:T(_)},w)for(C in S)(g||O||!(C in M))&&c(M,C,S[C]);else r({target:e,proto:!0,forced:g||O},S);return S}},function(t,e,n){"use strict";var r=n(150).IteratorPrototype,i=n(73),o=n(61),a=n(64),s=n(82),u=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),s[c]=u,t}},function(t,e,n){"use strict";var r,i,o,a=n(86),s=n(31),u=n(24),c=n(13),l=n(60),h=c("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):p=!0),null==r&&(r={}),l||u(r,h)||s(r,h,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(t,e,n){var r=n(11);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){"use strict";var r=n(11);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){var r=n(13);e.f=r},function(t,e,n){var r=n(138),i=n(24),o=n(154),a=n(28).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(131);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(13)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){"use strict";var r=n(23),i=n(11),o=n(103),a=n(121),s=n(119),u=n(29),c=n(79),l=Object.assign,h=Object.defineProperty;t.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||o(l({},e)).join("")!=i}))?function(t,e){for(var n=u(t),i=arguments.length,l=1,h=a.f,p=s.f;i>l;)for(var f,d=c(arguments[l++]),g=h?o(d).concat(h(d)):o(d),v=g.length,y=0;v>y;)f=g[y++],r&&!p.call(d,f)||(n[f]=d[f]);return n}:l},function(t,e,n){"use strict";var r=n(7),i=n(219).trim;r({target:"String",proto:!0,forced:n(220)("trim")},{trim:function(){return i(this)}})},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e,n){var r=n(23),i=n(12),o=n(122),a=n(162),s=n(28).f,u=n(68).f,c=n(131),l=n(128),h=n(152),p=n(37),f=n(11),d=n(47).set,g=n(97),v=n(13)("match"),y=i.RegExp,m=y.prototype,_=/a/g,b=/a/g,x=new y(_)!==_,w=h.UNSUPPORTED_Y;if(r&&o("RegExp",!x||w||f((function(){return b[v]=!1,y(_)!=_||y(b)==b||"/a/i"!=y(_,"i")})))){for(var E=function(t,e){var n,r=this instanceof E,i=c(t),o=void 0===e;if(!r&&i&&t.constructor===E&&o)return t;x?i&&!o&&(t=t.source):t instanceof E&&(o&&(e=l.call(t)),t=t.source),w&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var s=a(x?new y(t,e):y(t,e),r?this:m,E);return w&&n&&d(s,{sticky:n}),s},S=function(t){t in E||s(E,t,{configurable:!0,get:function(){return y[t]},set:function(e){y[t]=e}})},C=u(y),T=0;C.length>T;)S(C[T++]);m.constructor=E,E.prototype=m,p(i,"RegExp",E)}g("RegExp")},function(t,e,n){var r=n(20),i=n(87);t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},function(t,e,n){"use strict";var r=n(43),i=n(38);t.exports="".repeat||function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";var r=n(105),i=n(17),o=n(38),a=n(223),s=n(106);r("search",1,(function(t,e,n){return[function(e){var n=o(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=i(t),u=String(this),c=o.lastIndex;a(c,0)||(o.lastIndex=0);var l=s(o,u);return a(o.lastIndex,c)||(o.lastIndex=c),null===l?-1:l.index}]}))},function(t,e,n){"use strict";n(36);var r,i=n(7),o=n(23),a=n(166),s=n(12),u=n(147),c=n(37),l=n(81),h=n(24),p=n(158),f=n(167),d=n(129).codeAt,g=n(225),v=n(64),y=n(226),m=n(47),_=s.URL,b=y.URLSearchParams,x=y.getState,w=m.set,E=m.getterFor("URL"),S=Math.floor,C=Math.pow,T="Invalid scheme",I="Invalid host",O="Invalid port",M=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,L=/\d/,R=/^(0x|0X)/,A=/^[0-7]+$/,k=/^\d+$/,N=/^[\dA-Fa-f]+$/,D=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,F=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,j=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,z=/[\u0009\u000A\u000D]/g,B=function(t,e){var n,r,i;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return I;if(!(n=X(e.slice(1,-1))))return I;t.host=n}else if($(t)){if(e=g(e),D.test(e))return I;if(null===(n=G(e)))return I;t.host=n}else{if(F.test(e))return I;for(n="",r=f(e),i=0;i<r.length;i++)n+=W(r[i],q);t.host=n}},G=function(t){var e,n,r,i,o,a,s,u=t.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(e=u.length)>4)return t;for(n=[],r=0;r<e;r++){if(""==(i=u[r]))return t;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=R.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?k:8==o?A:N).test(i))return t;a=parseInt(i,o)}n.push(a)}for(r=0;r<e;r++)if(a=n[r],r==e-1){if(a>=C(256,5-e))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*C(256,3-r);return s},X=function(t){var e,n,r,i,o,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,h=0,p=function(){return t.charAt(h)};if(":"==p()){if(":"!=t.charAt(1))return;h+=2,l=++c}for(;p();){if(8==c)return;if(":"!=p()){for(e=n=0;n<4&&N.test(p());)e=16*e+parseInt(p(),16),h++,n++;if("."==p()){if(0==n)return;if(h-=n,c>6)return;for(r=0;p();){if(i=null,r>0){if(!("."==p()&&r<4))return;h++}if(!L.test(p()))return;for(;L.test(p());){if(o=parseInt(p(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}u[c]=256*u[c]+i,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==p()){if(h++,!p())return}else if(p())return;u[c++]=e}else{if(null!==l)return;h++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u},U=function(t){var e,n,r,i;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=S(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,n=1,r=null,i=0,o=0;o<8;o++)0!==t[o]?(i>n&&(e=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(e=r,n=i),e}(t),n=0;n<8;n++)i&&0===t[n]||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},q={},Y=p({},q,{" ":1,'"':1,"<":1,">":1,"`":1}),V=p({},Y,{"#":1,"?":1,"{":1,"}":1}),H=p({},V,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),W=function(t,e){var n=d(t,0);return n>32&&n<127&&!h(e,t)?t:encodeURIComponent(t)},K={ftp:21,file:null,http:80,https:443,ws:80,wss:443},$=function(t){return h(K,t.scheme)},Z=function(t){return""!=t.username||""!=t.password},J=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},Q=function(t,e){var n;return 2==t.length&&M.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},tt=function(t){var e;return t.length>1&&Q(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},et=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&Q(e[0],!0)||e.pop()},nt=function(t){return"."===t||"%2e"===t.toLowerCase()},rt={},it={},ot={},at={},st={},ut={},ct={},lt={},ht={},pt={},ft={},dt={},gt={},vt={},yt={},mt={},_t={},bt={},xt={},wt={},Et={},St=function(t,e,n,i){var o,a,s,u,c,l=n||rt,p=0,d="",g=!1,v=!1,y=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(j,"")),e=e.replace(z,""),o=f(e);p<=o.length;){switch(a=o[p],l){case rt:if(!a||!M.test(a)){if(n)return T;l=ot;continue}d+=a.toLowerCase(),l=it;break;case it:if(a&&(P.test(a)||"+"==a||"-"==a||"."==a))d+=a.toLowerCase();else{if(":"!=a){if(n)return T;d="",l=ot,p=0;continue}if(n&&($(t)!=h(K,d)||"file"==d&&(Z(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=d,n)return void($(t)&&K[t.scheme]==t.port&&(t.port=null));d="","file"==t.scheme?l=vt:$(t)&&i&&i.scheme==t.scheme?l=at:$(t)?l=lt:"/"==o[p+1]?(l=st,p++):(t.cannotBeABaseURL=!0,t.path.push(""),l=xt)}break;case ot:if(!i||i.cannotBeABaseURL&&"#"!=a)return T;if(i.cannotBeABaseURL&&"#"==a){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,l=Et;break}l="file"==i.scheme?vt:ut;continue;case at:if("/"!=a||"/"!=o[p+1]){l=ut;continue}l=ht,p++;break;case st:if("/"==a){l=pt;break}l=bt;continue;case ut:if(t.scheme=i.scheme,a==r)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==a||"\\"==a&&$(t))l=ct;else if("?"==a)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",l=wt;else{if("#"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),l=bt;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=Et}break;case ct:if(!$(t)||"/"!=a&&"\\"!=a){if("/"!=a){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,l=bt;continue}l=pt}else l=ht;break;case lt:if(l=ht,"/"!=a||"/"!=d.charAt(p+1))continue;p++;break;case ht:if("/"!=a&&"\\"!=a){l=pt;continue}break;case pt:if("@"==a){g&&(d="%40"+d),g=!0,s=f(d);for(var m=0;m<s.length;m++){var _=s[m];if(":"!=_||y){var b=W(_,H);y?t.password+=b:t.username+=b}else y=!0}d=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&$(t)){if(g&&""==d)return"Invalid authority";p-=f(d).length+1,d="",l=ft}else d+=a;break;case ft:case dt:if(n&&"file"==t.scheme){l=mt;continue}if(":"!=a||v){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&$(t)){if($(t)&&""==d)return I;if(n&&""==d&&(Z(t)||null!==t.port))return;if(u=B(t,d))return u;if(d="",l=_t,n)return;continue}"["==a?v=!0:"]"==a&&(v=!1),d+=a}else{if(""==d)return I;if(u=B(t,d))return u;if(d="",l=gt,n==dt)return}break;case gt:if(!L.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&$(t)||n){if(""!=d){var x=parseInt(d,10);if(x>65535)return O;t.port=$(t)&&x===K[t.scheme]?null:x,d=""}if(n)return;l=_t;continue}return O}d+=a;break;case vt:if(t.scheme="file","/"==a||"\\"==a)l=yt;else{if(!i||"file"!=i.scheme){l=bt;continue}if(a==r)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==a)t.host=i.host,t.path=i.path.slice(),t.query="",l=wt;else{if("#"!=a){tt(o.slice(p).join(""))||(t.host=i.host,t.path=i.path.slice(),et(t)),l=bt;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=Et}}break;case yt:if("/"==a||"\\"==a){l=mt;break}i&&"file"==i.scheme&&!tt(o.slice(p).join(""))&&(Q(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),l=bt;continue;case mt:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&Q(d))l=bt;else if(""==d){if(t.host="",n)return;l=_t}else{if(u=B(t,d))return u;if("localhost"==t.host&&(t.host=""),n)return;d="",l=_t}continue}d+=a;break;case _t:if($(t)){if(l=bt,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=bt,"/"!=a))continue}else t.fragment="",l=Et;else t.query="",l=wt;break;case bt:if(a==r||"/"==a||"\\"==a&&$(t)||!n&&("?"==a||"#"==a)){if(".."===(c=(c=d).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(et(t),"/"==a||"\\"==a&&$(t)||t.path.push("")):nt(d)?"/"==a||"\\"==a&&$(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&Q(d)&&(t.host&&(t.host=""),d=d.charAt(0)+":"),t.path.push(d)),d="","file"==t.scheme&&(a==r||"?"==a||"#"==a))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==a?(t.query="",l=wt):"#"==a&&(t.fragment="",l=Et)}else d+=W(a,V);break;case xt:"?"==a?(t.query="",l=wt):"#"==a?(t.fragment="",l=Et):a!=r&&(t.path[0]+=W(a,q));break;case wt:n||"#"!=a?a!=r&&("'"==a&&$(t)?t.query+="%27":t.query+="#"==a?"%23":W(a,q)):(t.fragment="",l=Et);break;case Et:a!=r&&(t.fragment+=W(a,Y))}p++}},Ct=function(t){var e,n,r=l(this,Ct,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(t),s=w(r,{type:"URL"});if(void 0!==i)if(i instanceof Ct)e=E(i);else if(n=St(e={},String(i)))throw TypeError(n);if(n=St(s,a,null,e))throw TypeError(n);var u=s.searchParams=new b,c=x(u);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(u)||null},o||(r.href=It.call(r),r.origin=Ot.call(r),r.protocol=Mt.call(r),r.username=Pt.call(r),r.password=Lt.call(r),r.host=Rt.call(r),r.hostname=At.call(r),r.port=kt.call(r),r.pathname=Nt.call(r),r.search=Dt.call(r),r.searchParams=Ft.call(r),r.hash=jt.call(r))},Tt=Ct.prototype,It=function(){var t=E(this),e=t.scheme,n=t.username,r=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,c=e+":";return null!==i?(c+="//",Z(t)&&(c+=n+(r?":"+r:"")+"@"),c+=U(i),null!==o&&(c+=":"+o)):"file"==e&&(c+="//"),c+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},Ot=function(){var t=E(this),e=t.scheme,n=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&$(t)?e+"://"+U(t.host)+(null!==n?":"+n:""):"null"},Mt=function(){return E(this).scheme+":"},Pt=function(){return E(this).username},Lt=function(){return E(this).password},Rt=function(){var t=E(this),e=t.host,n=t.port;return null===e?"":null===n?U(e):U(e)+":"+n},At=function(){var t=E(this).host;return null===t?"":U(t)},kt=function(){var t=E(this).port;return null===t?"":String(t)},Nt=function(){var t=E(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Dt=function(){var t=E(this).query;return t?"?"+t:""},Ft=function(){return E(this).searchParams},jt=function(){var t=E(this).fragment;return t?"#"+t:""},zt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(o&&u(Tt,{href:zt(It,(function(t){var e=E(this),n=String(t),r=St(e,n);if(r)throw TypeError(r);x(e.searchParams).updateSearchParams(e.query)})),origin:zt(Ot),protocol:zt(Mt,(function(t){var e=E(this);St(e,String(t)+":",rt)})),username:zt(Pt,(function(t){var e=E(this),n=f(String(t));if(!J(e)){e.username="";for(var r=0;r<n.length;r++)e.username+=W(n[r],H)}})),password:zt(Lt,(function(t){var e=E(this),n=f(String(t));if(!J(e)){e.password="";for(var r=0;r<n.length;r++)e.password+=W(n[r],H)}})),host:zt(Rt,(function(t){var e=E(this);e.cannotBeABaseURL||St(e,String(t),ft)})),hostname:zt(At,(function(t){var e=E(this);e.cannotBeABaseURL||St(e,String(t),dt)})),port:zt(kt,(function(t){var e=E(this);J(e)||(""==(t=String(t))?e.port=null:St(e,t,gt))})),pathname:zt(Nt,(function(t){var e=E(this);e.cannotBeABaseURL||(e.path=[],St(e,t+"",_t))})),search:zt(Dt,(function(t){var e=E(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",St(e,t,wt)),x(e.searchParams).updateSearchParams(e.query)})),searchParams:zt(Ft),hash:zt(jt,(function(t){var e=E(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",St(e,t,Et)):e.fragment=null}))}),c(Tt,"toJSON",(function(){return It.call(this)}),{enumerable:!0}),c(Tt,"toString",(function(){return It.call(this)}),{enumerable:!0}),_){var Bt=_.createObjectURL,Gt=_.revokeObjectURL;Bt&&c(Ct,"createObjectURL",(function(t){return Bt.apply(_,arguments)})),Gt&&c(Ct,"revokeObjectURL",(function(t){return Gt.apply(_,arguments)}))}v(Ct,"URL"),i({global:!0,forced:!a,sham:!o},{URL:Ct})},function(t,e,n){var r=n(11),i=n(13),o=n(60),a=i("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),o&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(t,e,n){"use strict";var r=n(70),i=n(29),o=n(224),a=n(124),s=n(16),u=n(101),c=n(83);t.exports=function(t){var e,n,l,h,p,f,d=i(t),g="function"==typeof this?this:Array,v=arguments.length,y=v>1?arguments[1]:void 0,m=void 0!==y,_=c(d),b=0;if(m&&(y=r(y,v>2?arguments[2]:void 0,2)),null==_||g==Array&&a(_))for(n=new g(e=s(d.length));e>b;b++)f=m?y(d[b],b):d[b],u(n,b,f);else for(p=(h=_.call(d)).next,n=new g;!(l=p.call(h)).done;b++)f=m?o(h,y,[l.value,b],!0):l.value,u(n,b,f);return n.length=b,n}},function(t,e,n){"use strict";t.exports=i,t.exports.default=i;var r=n(229);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,n,r,i){i||(i=g(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],u(i,t.leaf?r(o):o);return i}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!d(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],d(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):f(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!d(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],d(t,a=e.leaf?n(o):o)){if(e.leaf||f(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,a,s=this.data,u=this.toBBox(t),c=[],l=[];s||c.length;){if(s||(s=c.pop(),r=c[c.length-1],n=l.pop(),a=!0),s.leaf&&-1!==(i=o(t,s.children,e)))return s.children.splice(i,1),c.push(s),this._condense(c),this;a||s.leaf||!f(s,u)?r?(n++,s=r.children[n],a=!1):s=null:(c.push(s),l.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return a(i=g(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=g([])).leaf=!1,i.height=r;var u,c,l,h,p=Math.ceil(o/s),f=p*Math.ceil(Math.sqrt(s));for(v(t,e,n,f,this.compareMinX),u=e;u<=n;u+=f)for(v(t,u,l=Math.min(u+f-1,n),p,this.compareMinY),c=u;c<=l;c+=p)h=Math.min(c+p-1,l),i.children.push(this._build(t,c,h,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,p,f,d;r.push(e),!e.leaf&&r.length-1!==n;){for(l=p=1/0,i=0,o=e.children.length;i<o;i++)u=h(a=e.children[i]),f=t,d=a,(c=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-u)<p?(p=c,l=u<l?u:l,s=a):c===p&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),u(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=g(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,u,c,l,p,f,d,g,v,y,m;for(c=l=1/0,r=e;r<=n-e;r++)i=s(t,0,r,this.toBBox),o=s(t,r,n,this.toBBox),f=i,d=o,g=void 0,v=void 0,y=void 0,m=void 0,g=Math.max(f.minX,d.minX),v=Math.max(f.minY,d.minY),y=Math.min(f.maxX,d.maxX),m=Math.min(f.maxY,d.maxY),a=Math.max(0,y-g)*Math.max(0,m-v),u=h(i)+h(o),a<c?(c=a,p=r,l=u<l?u:l):a===c&&u<l&&(l=u,p=r);return p},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:c,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,c=s(t,0,e,a),l=s(t,n-e,n,a),h=p(c)+p(l);for(i=e;i<n-e;i++)o=t.children[i],u(c,t.leaf?a(o):o),h+=p(c);for(i=n-e-1;i>=e;i--)o=t.children[i],u(l,t.leaf?a(o):o),h+=p(l);return h},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)u(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():a(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,n){"use strict";var r=n(170),i=n(235),o=n(236),a=n(238);function s(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function u(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",u(t.slice(0,e)),",",u(t.slice(e)),")"].join("")}function c(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",u(c(s(t,n))),",",(r=n,1&r?"-":""),t[0][n],")"].join(""));return e;var r}function l(t){for(var e=[],n=[],l=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),h=[],p=0;p<t;++p)0==(1&p)?e.push.apply(e,c(s(l,p))):n.push.apply(n,c(s(l,p))),h.push("m"+p);var f=u(e),d=u(n),g="orientation"+t+"Exact",v=["function ",g,"(",h.join(),"){var p=",f,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",g].join("");return new Function("sum","prod","scale","sub",v)(i,r,o,a)}var h=l(3),p=l(4),f=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),a=i-o;if(i>0){if(o<=0)return a;r=i+o}else{if(!(i<0))return a;if(o>=0)return a;r=-(i+o)}var s=33306690738754716e-32*r;return a>=s||a<=-s?a:h(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],a=n[0]-r[0],s=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],h=e[2]-r[2],f=n[2]-r[2],d=o*c,g=a*u,v=a*s,y=i*c,m=i*u,_=o*s,b=l*(d-g)+h*(v-y)+f*(m-_),x=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(l)+(Math.abs(v)+Math.abs(y))*Math.abs(h)+(Math.abs(m)+Math.abs(_))*Math.abs(f));return b>x||-b>x?b:p(t,e,n,r)}];function d(t){var e=f[t.length];return e||(e=f[t.length]=l(t.length)),e.apply(void 0,t)}!function(){for(;f.length<=5;)f.push(l(f.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var o=Function.apply(void 0,n);for(t.exports=o.apply(void 0,[d].concat(f)),r=0;r<=5;++r)t.exports[r]=f[r]}()},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=t*e,o=r*t,a=o-(o-t),s=t-a,u=r*e,c=u-(u-e),l=e-c,h=s*l-(i-a*c-s*c-a*l);if(n)return n[0]=h,n[1]=i,n;return[h,i]};var r=+(Math.pow(2,27)+1)},function(t,e,n){"use strict";var r=n(12),i=n(23),o=n(172),a=n(31),s=n(123),u=n(11),c=n(81),l=n(43),h=n(16),p=n(173),f=n(242),d=n(86),g=n(87),v=n(68).f,y=n(28).f,m=n(132),_=n(64),b=n(47),x=b.get,w=b.set,E="ArrayBuffer",S="DataView",C="Wrong index",T=r.ArrayBuffer,I=T,O=r.DataView,M=O&&O.prototype,P=Object.prototype,L=r.RangeError,R=f.pack,A=f.unpack,k=function(t){return[255&t]},N=function(t){return[255&t,t>>8&255]},D=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},F=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},j=function(t){return R(t,23,4)},z=function(t){return R(t,52,8)},B=function(t,e){y(t.prototype,e,{get:function(){return x(this)[e]}})},G=function(t,e,n,r){var i=p(n),o=x(t);if(i+e>o.byteLength)throw L(C);var a=x(o.buffer).bytes,s=i+o.byteOffset,u=a.slice(s,s+e);return r?u:u.reverse()},X=function(t,e,n,r,i,o){var a=p(n),s=x(t);if(a+e>s.byteLength)throw L(C);for(var u=x(s.buffer).bytes,c=a+s.byteOffset,l=r(+i),h=0;h<e;h++)u[c+h]=l[o?h:e-h-1]};if(o){if(!u((function(){T(1)}))||!u((function(){new T(-1)}))||u((function(){return new T,new T(1.5),new T(NaN),T.name!=E}))){for(var U,q=(I=function(t){return c(this,I),new T(p(t))}).prototype=T.prototype,Y=v(T),V=0;Y.length>V;)(U=Y[V++])in I||a(I,U,T[U]);q.constructor=I}g&&d(M)!==P&&g(M,P);var H=new O(new I(2)),W=M.setInt8;H.setInt8(0,2147483648),H.setInt8(1,2147483649),!H.getInt8(0)&&H.getInt8(1)||s(M,{setInt8:function(t,e){W.call(this,t,e<<24>>24)},setUint8:function(t,e){W.call(this,t,e<<24>>24)}},{unsafe:!0})}else I=function(t){c(this,I,E);var e=p(t);w(this,{bytes:m.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},O=function(t,e,n){c(this,O,S),c(t,I,S);var r=x(t).byteLength,o=l(e);if(o<0||o>r)throw L("Wrong offset");if(o+(n=void 0===n?r-o:h(n))>r)throw L("Wrong length");w(this,{buffer:t,byteLength:n,byteOffset:o}),i||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},i&&(B(I,"byteLength"),B(O,"buffer"),B(O,"byteLength"),B(O,"byteOffset")),s(O.prototype,{getInt8:function(t){return G(this,1,t)[0]<<24>>24},getUint8:function(t){return G(this,1,t)[0]},getInt16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=G(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return F(G(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return F(G(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return A(G(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return A(G(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){X(this,1,t,k,e)},setUint8:function(t,e){X(this,1,t,k,e)},setInt16:function(t,e){X(this,2,t,N,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){X(this,2,t,N,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){X(this,4,t,D,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){X(this,4,t,D,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){X(this,4,t,j,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){X(this,8,t,z,e,arguments.length>2?arguments[2]:void 0)}});_(I,E),_(O,S),t.exports={ArrayBuffer:I,DataView:O}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,n){var r=n(43),i=n(16);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length or index");return n}},function(t,e,n){"use strict";var r=n(7),i=n(12),o=n(23),a=n(244),s=n(15),u=n(171),c=n(81),l=n(61),h=n(31),p=n(16),f=n(173),d=n(175),g=n(77),v=n(24),y=n(78),m=n(20),_=n(73),b=n(87),x=n(68).f,w=n(246),E=n(32).forEach,S=n(97),C=n(28),T=n(63),I=n(47),O=n(162),M=I.get,P=I.set,L=C.f,R=T.f,A=Math.round,k=i.RangeError,N=u.ArrayBuffer,D=u.DataView,F=s.NATIVE_ARRAY_BUFFER_VIEWS,j=s.TYPED_ARRAY_TAG,z=s.TypedArray,B=s.TypedArrayPrototype,G=s.aTypedArrayConstructor,X=s.isTypedArray,U="BYTES_PER_ELEMENT",q="Wrong length",Y=function(t,e){for(var n=0,r=e.length,i=new(G(t))(r);r>n;)i[n]=e[n++];return i},V=function(t,e){L(t,e,{get:function(){return M(this)[e]}})},H=function(t){var e;return t instanceof N||"ArrayBuffer"==(e=y(t))||"SharedArrayBuffer"==e},W=function(t,e){return X(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},K=function(t,e){return W(t,e=g(e,!0))?l(2,t[e]):R(t,e)},$=function(t,e,n){return!(W(t,e=g(e,!0))&&m(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?L(t,e,n):(t[e]=n.value,t)};o?(F||(T.f=K,C.f=$,V(B,"buffer"),V(B,"byteOffset"),V(B,"byteLength"),V(B,"length")),r({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:K,defineProperty:$}),t.exports=function(t,e,n){var o=t.match(/\d+$/)[0]/8,s=t+(n?"Clamped":"")+"Array",u="get"+t,l="set"+t,g=i[s],v=g,y=v&&v.prototype,C={},T=function(t,e){L(t,e,{get:function(){return function(t,e){var n=M(t);return n.view[u](e*o+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var i=M(t);n&&(r=(r=A(r))<0?0:r>255?255:255&r),i.view[l](e*o+i.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};F?a&&(v=e((function(t,e,n,r){return c(t,v,s),O(m(e)?H(e)?void 0!==r?new g(e,d(n,o),r):void 0!==n?new g(e,d(n,o)):new g(e):X(e)?Y(v,e):w.call(v,e):new g(f(e)),t,v)})),b&&b(v,z),E(x(g),(function(t){t in v||h(v,t,g[t])})),v.prototype=y):(v=e((function(t,e,n,r){c(t,v,s);var i,a,u,l=0,h=0;if(m(e)){if(!H(e))return X(e)?Y(v,e):w.call(v,e);i=e,h=d(n,o);var g=e.byteLength;if(void 0===r){if(g%o)throw k(q);if((a=g-h)<0)throw k(q)}else if((a=p(r)*o)+h>g)throw k(q);u=a/o}else u=f(e),i=new N(a=u*o);for(P(t,{buffer:i,byteOffset:h,byteLength:a,length:u,view:new D(i)});l<u;)T(t,l++)})),b&&b(v,z),y=v.prototype=_(B)),y.constructor!==v&&h(y,"constructor",v),j&&h(y,j,s),C[s]=v,r({global:!0,forced:v!=g,sham:!F},C),U in v||h(v,U,o),U in y||h(y,U,o),S(s)}):t.exports=function(){}},function(t,e,n){var r=n(245);t.exports=function(t,e){var n=r(t);if(n%e)throw RangeError("Wrong offset");return n}},function(t,e,n){"use strict";var r=n(7),i=n(43),o=n(273),a=n(163),s=n(11),u=1..toFixed,c=Math.floor,l=function(t,e,n){return 0===e?n:e%2==1?l(t,e-1,n*t):l(t*t,e/2,n)};r({target:"Number",proto:!0,forced:u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}))},{toFixed:function(t){var e,n,r,s,u=o(this),h=i(t),p=[0,0,0,0,0,0],f="",d="0",g=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*p[n],p[n]=r%1e7,r=c(r/1e7)},v=function(t){for(var e=6,n=0;--e>=0;)n+=p[e],p[e]=c(n/t),n=n%t*1e7},y=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==p[t]){var n=String(p[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(f="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*l(2,69,1))-69)<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,(e=52-e)>0){for(g(0,n),r=h;r>=7;)g(1e7,0),r-=7;for(g(l(10,r,1),0),r=e-1;r>=23;)v(1<<23),r-=23;v(1<<r),g(1,1),v(2),d=y()}else g(0,n),g(1<<-e,0),d=y()+a.call("0",h);return d=h>0?f+((s=d.length)<=h?"0."+a.call("0",h-s)+d:d.slice(0,s-h)+"."+d.slice(s-h)):f+d}})},function(t,e){t.exports=/<%=([\s\S]+?)%>/g},function(t,e,n){var r=n(168),i=n(4),o=n(74),a=n(230).default,s=o.featureEach,u=(o.coordEach,i.polygon,i.featureCollection);function c(t){var e=r(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),r.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),r.prototype.remove.call(this,t,e)},e.clear=function(){return r.prototype.clear.call(this)},e.search=function(t){var e=r.prototype.search.call(this,this.toBBox(t));return u(e)},e.collides=function(t){return r.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=r.prototype.all.call(this);return u(t)},e.toJSON=function(){return r.prototype.toJSON.call(this)},e.fromJSON=function(t){return r.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},function(t,e,n){"use strict";var r=n(168),i=n(234),o=n(239),a=n(240),s=n(169)[3];function u(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var o,s=function(t){for(var e=t[0],n=t[0],r=t[0],o=t[0],s=0;s<t.length;s++){var u=t[s];u[0]<e[0]&&(e=u),u[0]>r[0]&&(r=u),u[1]<n[1]&&(n=u),u[1]>o[1]&&(o=u)}var c=[e,n,r,o],l=c.slice();for(s=0;s<t.length;s++)a(t[s],c)||l.push(t[s]);var h=i(l),p=[];for(s=0;s<h.length;s++)p.push(l[h[s]]);return p}(t),u=r(16,["[0]","[1]","[0]","[1]"]).load(t),l=[],h=0;h<s.length;h++){var p=s[h];u.remove(p),o=g(p,o),l.push(o)}var f=r(16);for(h=0;h<l.length;h++)f.insert(d(l[h]));for(var y=e*e,m=n*n;l.length;){var _=l.shift(),b=_.p,x=_.next.p,w=v(b,x);if(!(w<m)){var E=w/y;(p=c(u,_.prev.p,b,x,_.next.next.p,E,f))&&Math.min(v(p,b),v(p,x))<=E&&(l.push(_),l.push(g(p,_)),u.remove(p),f.remove(_),f.insert(d(_)),f.insert(d(_.next)))}}_=o;var S=[];do{S.push(_.p),_=_.next}while(_!==o);return S.push(_.p),S}function c(t,e,n,r,i,a,s){for(var u=new o(null,l),c=t.data;c;){for(var p=0;p<c.children.length;p++){var d=c.children[p],g=c.leaf?y(d,n,r):h(n,r,d);g>a||u.push({node:d,dist:g})}for(;u.length&&!u.peek().node.children;){var v=u.pop(),m=v.node,_=y(m,e,n),b=y(m,r,i);if(v.dist<_&&v.dist<b&&f(n,m,s)&&f(r,m,s))return m}(c=u.pop())&&(c=c.node)}return null}function l(t,e){return t.dist-e.dist}function h(t,e,n){if(p(t,n)||p(e,n))return 0;var r=m(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=m(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=m(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=m(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function p(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function f(t,e,n){for(var r,i,o,a,u=Math.min(t[0],e[0]),c=Math.min(t[1],e[1]),l=Math.max(t[0],e[0]),h=Math.max(t[1],e[1]),p=n.search({minX:u,minY:c,maxX:l,maxY:h}),f=0;f<p.length;f++)if(r=p[f].p,i=p[f].next.p,o=t,r!==(a=e)&&i!==o&&s(r,i,o)>0!=s(r,i,a)>0&&s(o,a,r)>0!=s(o,a,i)>0)return!1;return!0}function d(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function g(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function v(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function y(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function m(t,e,n,r,i,o,a,s){var u,c,l,h,p=n-t,f=r-e,d=a-i,g=s-o,v=t-i,y=e-o,m=p*p+f*f,_=p*d+f*g,b=d*d+g*g,x=p*v+f*y,w=d*v+g*y,E=m*b-_*_,S=E,C=E;0===E?(c=0,S=1,h=w,C=b):(h=m*w-_*x,(c=_*w-b*x)<0?(c=0,h=w,C=b):c>S&&(c=S,h=w+_,C=b)),h<0?(h=0,-x<0?c=0:-x>m?c=S:(c=-x,S=m)):h>C&&(h=C,-x+_<0?c=0:-x+_>m?c=S:(c=-x+_,S=m));var T=(1-(l=0===h?0:h/C))*i+l*a-((1-(u=0===c?0:c/S))*t+u*n),I=(1-l)*o+l*s-((1-u)*e+u*r);return T*T+I*I}t.exports=u,t.exports.default=u},function(t,e,n){t.exports=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),r="ol-ctx-menu",i={namespace:r,container:r+"-container",separator:r+"-separator",submenu:r+"-submenu",hidden:r+"-hidden",icon:r+"-icon",zoomIn:r+"-zoom-in",zoomOut:r+"-zoom-out",unselectable:"ol-unselectable"},o=i,a="beforeopen",s="open",u="close",c="contextmenu",l={width:150,scrollAt:4,eventType:c,defaultItems:!0},h=[{text:"Zoom In",classname:i.zoomIn+" "+i.icon,callback:function(t,e){var n=e.getView();n.animate({zoom:+n.getZoom()+1,duration:700,center:t.coordinate})}},{text:"Zoom Out",classname:i.zoomOut+" "+i.icon,callback:function(t,e){var n=e.getView();n.animate({zoom:+n.getZoom()-1,duration:700,center:t.coordinate})}}];function p(t,e){if(void 0===e&&(e="Assertion failed"),!t){if("undefined"!=typeof Error)throw new Error(e);throw e}}function f(t){return/^\d+$/.test(t)}function d(t,e){return t.classList?t.classList.contains(e):m(e).test(t.className)}function g(t,e,n){void 0===e&&(e=window.document);var r=Array.prototype.slice,i=[];if(/^(#?[\w-]+|\.[\w-.]+)$/.test(t))switch(t[0]){case"#":i=[v(t.substr(1))];break;case".":i=r.call(e.getElementsByClassName(t.substr(1).replace(/\./g," ")));break;default:i=r.call(e.getElementsByTagName(t))}else i=r.call(e.querySelectorAll(t));return n?i:i[0]}function v(t){return t="#"===t[0]?t.substr(1,t.length):t,document.getElementById(t)}function y(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);return e}function m(t){return new RegExp("(^|\\s+) "+t+" (\\s+|$)")}function _(t,e,n){t.classList?t.classList.add(e):t.className=(t.className+" "+e).trim(),n&&f(n)&&window.setTimeout((function(){return b(t,e)}),n)}function b(t,e,n){t.classList?t.classList.remove(e):t.className=t.className.replace(m(e)," ").trim(),n&&f(n)&&window.setTimeout((function(){return _(t,e)}),n)}var x=function(t){return this.Base=t,this.map=void 0,this.viewport=void 0,this.coordinateClicked=void 0,this.pixelClicked=void 0,this.lineHeight=0,this.items={},this.opened=!1,this.submenu={left:t.options.width-15+"px",lastLeft:""},this.eventHandler=this.handleEvent.bind(this),this.eventMapMoveHandler=this.handleMapMoveEvent.bind(this),this};x.prototype.init=function(t){this.map=t,this.viewport=t.getViewport(),this.setListeners(),this.Base.Html.createMenu(),this.lineHeight=this.getItemsLength()>0?this.Base.container.offsetHeight/this.getItemsLength():this.Base.Html.cloneAndGetLineHeight()},x.prototype.getItemsLength=function(){var t=this,e=0;return Object.keys(this.items).forEach((function(n){t.items[n].submenu||t.items[n].separator||e++})),e},x.prototype.getPixelClicked=function(){return this.pixelClicked},x.prototype.getCoordinateClicked=function(){return this.coordinateClicked},x.prototype.positionContainer=function(t){var e=this,n=this.Base.container,r=this.map.getSize(),i=r[1]-t[1],a=r[0]-t[0],s=n.offsetWidth,u=Math.round(this.lineHeight*this.getItemsLength()),c=g("li."+o.submenu+">div",n,!0);a>=s?(n.style.right="auto",n.style.left=t[0]+5+"px"):(n.style.left="auto",n.style.right="15px"),i>=u?(n.style.bottom="auto",n.style.top=t[1]-10+"px"):(n.style.top="auto",n.style.bottom=0),function t(e,n,r){if(Array.isArray(e))e.forEach((function(e){return t(e,n,r)}));else for(var i=Array.isArray(n)?n:n.split(/\s+/),o=i.length;o--;)d(e,i[o])&&b(e,i[o],r)}(n,o.hidden),c.length&&(this.submenu.lastLeft=a<2*s?"-"+s+"px":this.submenu.left,c.forEach((function(t){var n,r,o,a={w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight},s=(r=(n=t).getBoundingClientRect(),o=document.documentElement,{left:r.left+window.pageXOffset-o.clientLeft,top:r.top+window.pageYOffset-o.clientTop,width:n.offsetWidth,height:n.offsetHeight}),u=s.height,c=i-u;c<0&&(c=u-(a.h-s.top),t.style.top="-"+c+"px"),t.style.left=e.submenu.lastLeft})))},x.prototype.openMenu=function(t,e){this.Base.dispatchEvent({type:s,pixel:t,coordinate:e}),this.opened=!0,this.positionContainer(t)},x.prototype.closeMenu=function(){this.opened=!1,function t(e,n,r){if(Array.isArray(e))e.forEach((function(e){return t(e,n)}));else for(var i=Array.isArray(n)?n:n.split(/\s+/),o=i.length;o--;)d(e,i[o])||_(e,i[o],r)}(this.Base.container,o.hidden),this.Base.dispatchEvent({type:u})},x.prototype.setListeners=function(){this.viewport.addEventListener(this.Base.options.eventType,this.eventHandler,!1),this.map.on("movestart",this.eventMapMoveHandler)},x.prototype.removeListeners=function(){this.viewport.removeEventListener(this.Base.options.eventType,this.eventHandler,!1),this.map.un("movestart",this.eventMapMoveHandler)},x.prototype.handleEvent=function(t){var e=this;this.coordinateClicked=this.map.getEventCoordinate(t),this.pixelClicked=this.map.getEventPixel(t),this.Base.dispatchEvent({type:a,pixel:this.pixelClicked,coordinate:this.coordinateClicked}),this.Base.disabled||(this.Base.options.eventType===c&&(t.stopPropagation(),t.preventDefault()),this.openMenu(this.pixelClicked,this.coordinateClicked),t.target.addEventListener("pointerdown",{handleEvent:function(n){e.opened&&(e.closeMenu(),n.stopPropagation(),t.target.removeEventListener(n.type,this,!1))}},!1))},x.prototype.handleMapMoveEvent=function(t){this.closeMenu()},x.prototype.setItemListener=function(t,e){var n,r=this;t&&"function"==typeof this.items[e].callback&&(n=this.items[e].callback,t.addEventListener("click",(function(t){t.preventDefault();var i={coordinate:r.getCoordinateClicked(),data:r.items[e].data||null};r.closeMenu(),n(i,r.map)}),!1))};var w=function(t){return this.Base=t,this.Base.container=this.container=this.createContainer(!0),this};return w.prototype.createContainer=function(t){var e=document.createElement("div"),n=document.createElement("ul"),r=[o.container,o.unselectable];return t&&r.push(o.hidden),e.className=r.join(" "),e.style.width=parseInt(this.Base.options.width,10)+"px",e.appendChild(n),e},w.prototype.createMenu=function(){var t=[];if("items"in this.Base.options?t=this.Base.options.defaultItems?this.Base.options.items.concat(h):this.Base.options.items:this.Base.options.defaultItems&&(t=h),0===t.length)return!1;t.forEach(this.addMenuEntry,this)},w.prototype.addMenuEntry=function(t){var e,n=this;if(t.items&&Array.isArray(t.items)){t.classname=t.classname||"",e=o.submenu,~t.classname.indexOf(e)||(t.classname=t.classname.length?" "+o.submenu:o.submenu);var r=this.generateHtmlAndPublish(this.container,t),i=this.createContainer();i.style.left=this.Base.Internal.submenu.lastLeft||this.Base.Internal.submenu.left,r.appendChild(i),t.items.forEach((function(t){n.generateHtmlAndPublish(i,t,!0)}))}else this.generateHtmlAndPublish(this.container,t)},w.prototype.generateHtmlAndPublish=function(t,e,n){var r,i,a="_"+Math.random().toString(36).substr(2,9),s=!1;return"string"==typeof e&&"-"===e.trim()?(r=y('<li id="'+a+'" class="'+o.separator+'"><hr></li>'),i=[].slice.call(r.childNodes,0)[0],t.firstChild.appendChild(r),s=!0):(e.classname=e.classname||"",r=y("<span>"+e.text+"</span>"),i=document.createElement("li"),e.icon&&(""===e.classname?e.classname=o.icon:-1===e.classname.indexOf(o.icon)&&(e.classname+=" "+o.icon),i.setAttribute("style","background-image:url("+e.icon+")")),i.id=a,i.className=e.classname,i.appendChild(r),t.firstChild.appendChild(i)),this.Base.Internal.items[a]={id:a,submenu:n||0,separator:s,callback:e.callback,data:e.data||null},this.Base.Internal.setItemListener(i,a),i},w.prototype.removeMenuEntry=function(t){var e=g("#"+t,this.container.firstChild);e&&this.container.firstChild.removeChild(e),delete this.Base.Internal.items[t]},w.prototype.cloneAndGetLineHeight=function(){var t=this.container.cloneNode(),e=y("<span>Foo</span>"),n=y("<span>Foo</span>"),r=document.createElement("li"),i=document.createElement("li");r.appendChild(e),i.appendChild(n),t.appendChild(r),t.appendChild(i),this.container.parentNode.appendChild(t);var o=t.offsetHeight/2;return this.container.parentNode.removeChild(t),o},function(t){function e(e){void 0===e&&(e={}),p("object"==typeof e,"@param `opt_options` should be object type!"),this.options=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var i in e)n[i]=e[i];return n}(l,e),this.disabled=!1,this.Internal=new x(this),this.Html=new w(this),t.call(this,{element:this.container})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){Object.keys(this.Internal.items).forEach(this.Html.removeMenuEntry,this.Html)},e.prototype.close=function(){this.Internal.closeMenu()},e.prototype.enable=function(){this.disabled=!1},e.prototype.disable=function(){this.disabled=!0},e.prototype.getDefaultItems=function(){return h},e.prototype.countItems=function(){return Object.keys(this.Internal.items).length},e.prototype.extend=function(t){p(Array.isArray(t),"@param `arr` should be an Array."),t.forEach(this.push,this)},e.prototype.isOpen=function(){return this.Internal.opened},e.prototype.updatePosition=function(t){p(Array.isArray(t),"@param `pixel` should be an Array."),this.isOpen()&&this.Internal.positionContainer(t)},e.prototype.pop=function(){var t=Object.keys(this.Internal.items);this.Html.removeMenuEntry(t[t.length-1])},e.prototype.push=function(t){p(null!=t,"@param `item` must be informed."),this.Html.addMenuEntry(t)},e.prototype.shift=function(){this.Html.removeMenuEntry(Object.keys(this.Internal.items)[0])},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e?this.Internal.init(e,this):this.Internal.removeListeners()},e}(n.default)}(n(58))},function(t,e,n){"use strict";(function(t){n(90),n(91),n(92),n(39),n(26),n(50),n(67),n(14),n(22),n(21),n(36),n(51),n(45),n(40);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(){};i.prototype.dispatch=function(){var e,i;return e=this,i=function(t){var e={},n="iziToast",i=(document.querySelector("body"),!!/Mobi/.test(navigator.userAgent)),o=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),a="undefined"!=typeof InstallTrigger,s="ontouchstart"in document.documentElement,u=["bottomRight","bottomLeft","bottomCenter","topRight","topLeft","topCenter","center"],c=568,l={};e.children={};var h={id:null,class:"",title:"",titleColor:"",titleSize:"",titleLineHeight:"",message:"",messageColor:"",messageSize:"",messageLineHeight:"",backgroundColor:"",theme:"light",color:"",icon:"",iconText:"",iconColor:"",iconUrl:null,image:"",imageWidth:50,maxWidth:null,zindex:null,layout:1,balloon:!1,close:!0,closeOnEscape:!1,closeOnClick:!1,displayMode:0,position:"bottomRight",target:"",targetFirst:!0,timeout:5e3,rtl:!1,animateInside:!0,drag:!0,pauseOnHover:!0,resetOnHover:!1,progressBar:!0,progressBarColor:"",progressBarEasing:"linear",overlay:!1,overlayClose:!1,overlayColor:"rgba(0, 0, 0, 0.6)",transitionIn:"fadeInUp",transitionOut:"fadeOut",transitionInMobile:"fadeInUp",transitionOutMobile:"fadeOutDown",buttons:{},inputs:{},onOpening:function(){},onOpened:function(){},onClosing:function(){},onClosed:function(){}};if("remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),"function"!=typeof window.CustomEvent){var p=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};p.prototype=window.Event.prototype,window.CustomEvent=p}var f=function(t,e,n){if("[object Object]"===Object.prototype.toString.call(t))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(n,t[r],r,t);else if(t)for(var i=0,o=t.length;i<o;i++)e.call(n,t[i],i,t)},d=function(t,e){var n={};return f(t,(function(e,r){n[r]=t[r]})),f(e,(function(t,r){n[r]=e[r]})),n},g=function(t){var e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.appendChild(n.firstChild);return e},v={move:function(t,e,n,r){var i,s=.3,u=180;0!==r&&(t.classList.add("iziToast-dragged"),t.style.transform="translateX("+r+"px)",r>0?(i=(u-r)/u)<s&&e.hide(d(n,{transitionOut:"fadeOutRight",transitionOutMobile:"fadeOutRight"}),t,"drag"):(i=(u+r)/u)<s&&e.hide(d(n,{transitionOut:"fadeOutLeft",transitionOutMobile:"fadeOutLeft"}),t,"drag"),t.style.opacity=i,i<s&&((o||a)&&(t.style.left=r+"px"),t.parentNode.style.opacity=s,this.stopMoving(t,null)))},startMoving:function(t,e,n,r){r=r||window.event;var i=s?r.touches[0].clientX:r.clientX,o=t.style.transform.replace("px)",""),a=i-(o=o.replace("translateX(",""));n.transitionIn&&t.classList.remove(n.transitionIn),n.transitionInMobile&&t.classList.remove(n.transitionInMobile),t.style.transition="",s?document.ontouchmove=function(r){r.preventDefault();var i=(r=r||window.event).touches[0].clientX-a;v.move(t,e,n,i)}:document.onmousemove=function(r){r.preventDefault();var i=(r=r||window.event).clientX-a;v.move(t,e,n,i)}},stopMoving:function(t,e){s?document.ontouchmove=function(){}:document.onmousemove=function(){},t.style.opacity="",t.style.transform="",t.classList.contains("iziToast-dragged")&&(t.classList.remove("iziToast-dragged"),t.style.transition="transform 0.4s ease, opacity 0.4s ease",setTimeout((function(){t.style.transition=""}),400))}};return e.setSetting=function(t,n,r){e.children[t][n]=r},e.getSetting=function(t,n){return e.children[t][n]},e.destroy=function(){f(document.querySelectorAll(".iziToast-overlay"),(function(t,e){t.remove()})),f(document.querySelectorAll(".iziToast-wrapper"),(function(t,e){t.remove()})),f(document.querySelectorAll(".iziToast"),(function(t,e){t.remove()})),this.children={},document.removeEventListener("iziToast-opened",{},!1),document.removeEventListener("iziToast-opening",{},!1),document.removeEventListener("iziToast-closing",{},!1),document.removeEventListener("iziToast-closed",{},!1),document.removeEventListener("keyup",{},!1),l={}},e.settings=function(t){e.destroy(),l=t,h=d(h,t||{})},f({info:{color:"blue",icon:"ico-info"},success:{color:"green",icon:"ico-success"},warning:{color:"orange",icon:"ico-warning"},error:{color:"red",icon:"ico-error"},question:{color:"yellow",icon:"ico-question"}},(function(t,n){e[n]=function(e){var n=d(l,e||{});n=d(t,n||{}),this.show(n)}})),e.progress=function(t,e,n){var r=this,i=e.getAttribute("data-iziToast-ref"),o=d(this.children[i],t||{}),a=e.querySelector(".iziToast-progressbar div");return{start:function(){void 0===o.time.REMAINING&&(e.classList.remove("iziToast-reseted"),null!==a&&(a.style.transition="width "+o.timeout+"ms "+o.progressBarEasing,a.style.width="0%"),o.time.START=(new Date).getTime(),o.time.END=o.time.START+o.timeout,o.time.TIMER=setTimeout((function(){clearTimeout(o.time.TIMER),e.classList.contains("iziToast-closing")||(r.hide(o,e,"timeout"),"function"==typeof n&&n.apply(r))}),o.timeout),r.setSetting(i,"time",o.time))},pause:function(){if(void 0!==o.time.START&&!e.classList.contains("iziToast-paused")&&!e.classList.contains("iziToast-reseted")){if(e.classList.add("iziToast-paused"),o.time.REMAINING=o.time.END-(new Date).getTime(),clearTimeout(o.time.TIMER),r.setSetting(i,"time",o.time),null!==a){var t=window.getComputedStyle(a).getPropertyValue("width");a.style.transition="none",a.style.width=t}"function"==typeof n&&setTimeout((function(){n.apply(r)}),10)}},resume:function(){void 0!==o.time.REMAINING?(e.classList.remove("iziToast-paused"),null!==a&&(a.style.transition="width "+o.time.REMAINING+"ms "+o.progressBarEasing,a.style.width="0%"),o.time.END=(new Date).getTime()+o.time.REMAINING,o.time.TIMER=setTimeout((function(){clearTimeout(o.time.TIMER),e.classList.contains("iziToast-closing")||(r.hide(o,e,"timeout"),"function"==typeof n&&n.apply(r))}),o.time.REMAINING),r.setSetting(i,"time",o.time)):this.start()},reset:function(){clearTimeout(o.time.TIMER),delete o.time.REMAINING,r.setSetting(i,"time",o.time),e.classList.add("iziToast-reseted"),e.classList.remove("iziToast-paused"),null!==a&&(a.style.transition="none",a.style.width="100%"),"function"==typeof n&&setTimeout((function(){n.apply(r)}),10)}}},e.hide=function(t,e,n){"object"!=r(e)&&(e=document.querySelector(e));var o=this,a=d(this.children[e.getAttribute("data-iziToast-ref")],t||{});a.closedBy=n||null,delete a.time.REMAINING,e.classList.add("iziToast-closing"),function(){var t=document.querySelector(".iziToast-overlay");if(null!==t){var e=t.getAttribute("data-iziToast-ref"),n=(e=e.split(",")).indexOf(String(a.ref));-1!==n&&e.splice(n,1),t.setAttribute("data-iziToast-ref",e.join()),0===e.length&&(t.classList.remove("fadeIn"),t.classList.add("fadeOut"),setTimeout((function(){t.remove()}),700))}}(),a.transitionIn&&e.classList.remove(a.transitionIn),a.transitionInMobile&&e.classList.remove(a.transitionInMobile),i||window.innerWidth<=c?a.transitionOutMobile&&e.classList.add(a.transitionOutMobile):a.transitionOut&&e.classList.add(a.transitionOut);var s=e.parentNode.offsetHeight;e.parentNode.style.height=s+"px",e.style.pointerEvents="none",(!i||window.innerWidth>c)&&(e.parentNode.style.transitionDelay="0.2s");try{var u=new CustomEvent("iziToast-closing",{detail:a,bubbles:!0,cancelable:!0});document.dispatchEvent(u)}catch(t){console.warn(t)}setTimeout((function(){e.parentNode.style.height="0px",e.parentNode.style.overflow="",setTimeout((function(){delete o.children[a.ref],e.parentNode.remove();try{var t=new CustomEvent("iziToast-closed",{detail:a,bubbles:!0,cancelable:!0});document.dispatchEvent(t)}catch(t){console.warn(t)}void 0!==a.onClosed&&a.onClosed.apply(null,[a,e,n])}),1e3)}),200),void 0!==a.onClosing&&a.onClosing.apply(null,[a,e,n])},e.show=function(t){var r,o=this,a=d(l,t||{});if((a=d(h,a)).time={},null===a.id&&(a.id=(r=a.title+a.message+a.color,btoa(encodeURIComponent(r)).replace(/=/g,""))),1===a.displayMode||"once"==a.displayMode)try{if(document.querySelectorAll(".iziToast#"+a.id).length>0)return!1}catch(t){console.warn("[iziToast] Could not find an element with this selector: #"+a.id+". Try to set an valid id.")}if(2===a.displayMode||"replace"==a.displayMode)try{f(document.querySelectorAll(".iziToast#"+a.id),(function(t,e){o.hide(a,t,"replaced")}))}catch(t){console.warn("[iziToast] Could not find an element with this selector: #"+a.id+". Try to set an valid id.")}a.ref=(new Date).getTime()+Math.floor(1e7*Math.random()+1),e.children[a.ref]=a;var p,y={body:document.querySelector("body"),overlay:document.createElement("div"),toast:document.createElement("div"),toastBody:document.createElement("div"),toastTexts:document.createElement("div"),toastCapsule:document.createElement("div"),cover:document.createElement("div"),buttons:document.createElement("div"),inputs:document.createElement("div"),icon:a.iconUrl?document.createElement("img"):document.createElement("i"),wrapper:null};y.toast.setAttribute("data-iziToast-ref",a.ref),y.toast.appendChild(y.toastBody),y.toastCapsule.appendChild(y.toast),function(){if(y.toast.classList.add(n),y.toast.classList.add("iziToast-opening"),y.toastCapsule.classList.add("iziToast-capsule"),y.toastBody.classList.add("iziToast-body"),y.toastTexts.classList.add("iziToast-texts"),i||window.innerWidth<=c?a.transitionInMobile&&y.toast.classList.add(a.transitionInMobile):a.transitionIn&&y.toast.classList.add(a.transitionIn),a.class){var t=a.class.split(" ");f(t,(function(t,e){y.toast.classList.add(t)}))}var e;a.id&&(y.toast.id=a.id),a.rtl&&(y.toast.classList.add("iziToast-rtl"),y.toast.setAttribute("dir","rtl")),a.layout>1&&y.toast.classList.add("iziToast-layout"+a.layout),a.balloon&&y.toast.classList.add("iziToast-balloon"),a.maxWidth&&(isNaN(a.maxWidth)?y.toast.style.maxWidth=a.maxWidth:y.toast.style.maxWidth=a.maxWidth+"px"),""===a.theme&&"light"===a.theme||y.toast.classList.add("iziToast-theme-"+a.theme),a.color&&("#"==(e=a.color).substring(0,1)||"rgb"==e.substring(0,3)||"hsl"==e.substring(0,3)?y.toast.style.background=a.color:y.toast.classList.add("iziToast-color-"+a.color)),a.backgroundColor&&(y.toast.style.background=a.backgroundColor,a.balloon&&(y.toast.style.borderColor=a.backgroundColor))}(),a.image&&(y.cover.classList.add("iziToast-cover"),y.cover.style.width=a.imageWidth+"px",function(t){try{return btoa(atob(t))==t}catch(t){return!1}}(a.image.replace(/ /g,""))?y.cover.style.backgroundImage="url(data:image/png;base64,"+a.image.replace(/ /g,"")+")":y.cover.style.backgroundImage="url("+a.image+")",a.rtl?y.toastBody.style.marginRight=a.imageWidth+10+"px":y.toastBody.style.marginLeft=a.imageWidth+10+"px",y.toast.appendChild(y.cover)),a.close?(y.buttonClose=document.createElement("button"),y.buttonClose.type="button",y.buttonClose.classList.add("iziToast-close"),y.buttonClose.addEventListener("click",(function(t){t.target,o.hide(a,y.toast,"button")})),y.toast.appendChild(y.buttonClose)):a.rtl?y.toast.style.paddingLeft="18px":y.toast.style.paddingRight="18px",a.progressBar&&(y.progressBar=document.createElement("div"),y.progressBarDiv=document.createElement("div"),y.progressBar.classList.add("iziToast-progressbar"),y.progressBarDiv.style.background=a.progressBarColor,y.progressBar.appendChild(y.progressBarDiv),y.toast.appendChild(y.progressBar)),a.timeout&&(a.pauseOnHover&&!a.resetOnHover&&(y.toast.addEventListener("mouseenter",(function(t){o.progress(a,y.toast).pause()})),y.toast.addEventListener("mouseleave",(function(t){o.progress(a,y.toast).resume()}))),a.resetOnHover&&(y.toast.addEventListener("mouseenter",(function(t){o.progress(a,y.toast).reset()})),y.toast.addEventListener("mouseleave",(function(t){o.progress(a,y.toast).start()})))),a.iconUrl?(y.icon.setAttribute("class","iziToast-icon"),y.icon.setAttribute("src",a.iconUrl)):a.icon&&(y.icon.setAttribute("class","iziToast-icon "+a.icon),a.iconText&&y.icon.appendChild(document.createTextNode(a.iconText)),a.iconColor&&(y.icon.style.color=a.iconColor)),(a.icon||a.iconUrl)&&(a.rtl?y.toastBody.style.paddingRight="33px":y.toastBody.style.paddingLeft="33px",y.toastBody.appendChild(y.icon)),a.title.length>0&&(y.strong=document.createElement("strong"),y.strong.classList.add("iziToast-title"),y.strong.appendChild(g(a.title)),y.toastTexts.appendChild(y.strong),a.titleColor&&(y.strong.style.color=a.titleColor),a.titleSize&&(isNaN(a.titleSize)?y.strong.style.fontSize=a.titleSize:y.strong.style.fontSize=a.titleSize+"px"),a.titleLineHeight&&(isNaN(a.titleSize)?y.strong.style.lineHeight=a.titleLineHeight:y.strong.style.lineHeight=a.titleLineHeight+"px")),a.message.length>0&&(y.p=document.createElement("p"),y.p.classList.add("iziToast-message"),y.p.appendChild(g(a.message)),y.toastTexts.appendChild(y.p),a.messageColor&&(y.p.style.color=a.messageColor),a.messageSize&&(isNaN(a.titleSize)?y.p.style.fontSize=a.messageSize:y.p.style.fontSize=a.messageSize+"px"),a.messageLineHeight&&(isNaN(a.titleSize)?y.p.style.lineHeight=a.messageLineHeight:y.p.style.lineHeight=a.messageLineHeight+"px")),a.title.length>0&&a.message.length>0&&(a.rtl?y.strong.style.marginLeft="10px":2===a.layout||a.rtl||(y.strong.style.marginRight="10px")),y.toastBody.appendChild(y.toastTexts),a.inputs.length>0&&(y.inputs.classList.add("iziToast-inputs"),f(a.inputs,(function(t,e){y.inputs.appendChild(g(t[0])),(p=y.inputs.childNodes)[e].classList.add("iziToast-inputs-child"),t[3]&&setTimeout((function(){p[e].focus()}),300),p[e].addEventListener(t[1],(function(e){return(0,t[2])(o,y.toast,this,e)}))})),y.toastBody.appendChild(y.inputs)),a.buttons.length>0&&(y.buttons.classList.add("iziToast-buttons"),f(a.buttons,(function(t,e){y.buttons.appendChild(g(t[0]));var n=y.buttons.childNodes;n[e].classList.add("iziToast-buttons-child"),t[2]&&setTimeout((function(){n[e].focus()}),300),n[e].addEventListener("click",(function(e){return e.preventDefault(),(0,t[1])(o,y.toast,this,e,p)}))}))),y.toastBody.appendChild(y.buttons),a.message.length>0&&(a.inputs.length>0||a.buttons.length>0)&&(y.p.style.marginBottom="0"),(a.inputs.length>0||a.buttons.length>0)&&(a.rtl?y.toastTexts.style.marginLeft="10px":y.toastTexts.style.marginRight="10px",a.inputs.length>0&&a.buttons.length>0&&(a.rtl?y.inputs.style.marginLeft="8px":y.inputs.style.marginRight="8px")),y.toastCapsule.style.visibility="hidden",setTimeout((function(){var t=y.toast.offsetHeight,e=y.toast.currentStyle||window.getComputedStyle(y.toast),n=e.marginTop;n=n.split("px"),n=parseInt(n[0]);var r=e.marginBottom;r=r.split("px"),r=parseInt(r[0]),y.toastCapsule.style.visibility="",y.toastCapsule.style.height=t+r+n+"px",setTimeout((function(){y.toastCapsule.style.height="auto",a.target&&(y.toastCapsule.style.overflow="visible")}),500),a.timeout&&o.progress(a,y.toast).start()}),100),function(){var t=a.position;if(a.target)y.wrapper=document.querySelector(a.target),y.wrapper.classList.add("iziToast-target"),a.targetFirst?y.wrapper.insertBefore(y.toastCapsule,y.wrapper.firstChild):y.wrapper.appendChild(y.toastCapsule);else{if(-1==u.indexOf(a.position))return void console.warn("[iziToast] Incorrect position. It can be › "+u);t=i||window.innerWidth<=c?"bottomLeft"==a.position||"bottomRight"==a.position||"bottomCenter"==a.position?"iziToast-wrapper-bottomCenter":"topLeft"==a.position||"topRight"==a.position||"topCenter"==a.position?"iziToast-wrapper-topCenter":"iziToast-wrapper-center":"iziToast-wrapper-"+t,y.wrapper=document.querySelector(".iziToast-wrapper."+t),y.wrapper||(y.wrapper=document.createElement("div"),y.wrapper.classList.add("iziToast-wrapper"),y.wrapper.classList.add(t),document.body.appendChild(y.wrapper)),"topLeft"==a.position||"topCenter"==a.position||"topRight"==a.position?y.wrapper.insertBefore(y.toastCapsule,y.wrapper.firstChild):y.wrapper.appendChild(y.toastCapsule)}isNaN(a.zindex)?console.warn("[iziToast] Invalid zIndex."):y.wrapper.style.zIndex=a.zindex}(),a.overlay&&(null!==document.querySelector(".iziToast-overlay.fadeIn")?(y.overlay=document.querySelector(".iziToast-overlay"),y.overlay.setAttribute("data-iziToast-ref",y.overlay.getAttribute("data-iziToast-ref")+","+a.ref),isNaN(a.zindex)||null===a.zindex||(y.overlay.style.zIndex=a.zindex-1)):(y.overlay.classList.add("iziToast-overlay"),y.overlay.classList.add("fadeIn"),y.overlay.style.background=a.overlayColor,y.overlay.setAttribute("data-iziToast-ref",a.ref),isNaN(a.zindex)||null===a.zindex||(y.overlay.style.zIndex=a.zindex-1),document.querySelector("body").appendChild(y.overlay)),a.overlayClose?(y.overlay.removeEventListener("click",{}),y.overlay.addEventListener("click",(function(t){o.hide(a,y.toast,"overlay")}))):y.overlay.removeEventListener("click",{})),function(){if(a.animateInside){y.toast.classList.add("iziToast-animateInside");var t=[200,100,300];"bounceInLeft"!=a.transitionIn&&"bounceInRight"!=a.transitionIn||(t=[400,200,400]),a.title.length>0&&setTimeout((function(){y.strong.classList.add("slideIn")}),t[0]),a.message.length>0&&setTimeout((function(){y.p.classList.add("slideIn")}),t[1]),(a.icon||a.iconUrl)&&setTimeout((function(){y.icon.classList.add("revealIn")}),t[2]);var e=150;a.buttons.length>0&&y.buttons&&setTimeout((function(){f(y.buttons.childNodes,(function(t,n){setTimeout((function(){t.classList.add("revealIn")}),e),e+=150}))}),a.inputs.length>0?150:0),a.inputs.length>0&&y.inputs&&(e=150,f(y.inputs.childNodes,(function(t,n){setTimeout((function(){t.classList.add("revealIn")}),e),e+=150})))}}(),a.onOpening.apply(null,[a,y.toast]);try{var m=new CustomEvent("iziToast-opening",{detail:a,bubbles:!0,cancelable:!0});document.dispatchEvent(m)}catch(t){console.warn(t)}setTimeout((function(){y.toast.classList.remove("iziToast-opening"),y.toast.classList.add("iziToast-opened");try{var t=new CustomEvent("iziToast-opened",{detail:a,bubbles:!0,cancelable:!0});document.dispatchEvent(t)}catch(t){console.warn(t)}a.onOpened.apply(null,[a,y.toast])}),1e3),a.drag&&(s?(y.toast.addEventListener("touchstart",(function(t){v.startMoving(this,o,a,t)}),!1),y.toast.addEventListener("touchend",(function(t){v.stopMoving(this,t)}),!1)):(y.toast.addEventListener("mousedown",(function(t){t.preventDefault(),v.startMoving(this,o,a,t)}),!1),y.toast.addEventListener("mouseup",(function(t){t.preventDefault(),v.stopMoving(this,t)}),!1))),a.closeOnEscape&&document.addEventListener("keyup",(function(t){27==(t=t||window.event).keyCode&&o.hide(a,y.toast,"esc")})),a.closeOnClick&&y.toast.addEventListener("click",(function(t){o.hide(a,y.toast,"toast")})),o.toast=y.toast},e},"function"==typeof define&&n(108)?define([],i()):"object"===("undefined"==typeof exports?"undefined":r(exports))?t.exports=i():e.iziToast=i(),this};var o=(new i).dispatch();e.a=o.iziToast}).call(this,n(107)(t))},function(t,e,n){"use strict";(function(t){n(90),n(91),n(92),n(39),n(26),n(50),n(176),n(14),n(22),n(21),n(36),n(51),n(40);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=function(){};i.prototype.dispatch=function(){var e,i,o;return e=this,i="sprintf",o=function(){var t=function(){if(!arguments||arguments.length<1)throw new Error("sprintf: ERROR: not enough arguments");for(var t,e=0,n="",i=arguments[e++];t=/^([^%]*)%(?:(\d+)\$|\((.*?)\))?([#0 +'-]+)?(\*|\d+)?(\.\*|\.\d+)?([%diouxXfFeEcs])((?:.|[\r\n])*)$/.exec(i);){var o,a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],h=t[6],p=t[7],f=t[8];if("%"===p)o="%";else{var d,g=" ",v=!0;c?(c.indexOf("0")>=0&&(g="0"),c.indexOf("-")>=0&&(g=" ",v=!1)):c="";var y=-1;if(l)if("*"===l){if((d=e++)>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");y=arguments[d]}else y=parseInt(l,10);var m=-1;if(h)if(".*"===h){if((d=e++)>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");m=arguments[d]}else m=parseInt(h.substring(1),10);if(d=e++,s){if((d=parseInt(s,10))>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");o=arguments[d]}else if(u){if("object"!==r(arguments[1]))throw new Error("sprintf: ERROR: invalid non-object arguments for named argument");if(void 0===(o=arguments[1][u]))throw new Error("sprintf: ERROR: invalid undefined value for named argument")}else{if(d>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");o=arguments[d]}var _="";switch(p){case"d":case"i":"number"!=typeof o&&(o=0),o=o.toString(10),c.indexOf("#")>=0&&o>=0&&(o="+"+o),c.indexOf(" ")>=0&&o>=0&&(o=" "+o);break;case"b":"number"!=typeof o&&(o=0),o=o.toString(2);break;case"o":"number"!=typeof o&&(o=0),o=o.toString(8);break;case"u":"number"!=typeof o&&(o=0),o=(o=Math.abs(o)).toString(10);break;case"x":"number"!=typeof o&&(o=0),o=o.toString(16).toLowerCase(),c.indexOf("#")>=0&&(_="0x");break;case"X":"number"!=typeof o&&(o=0),o=o.toString(16).toUpperCase(),c.indexOf("#")>=0&&(_="0X");break;case"f":case"F":if("number"!=typeof o&&(o=0),o=0+o,m>-1&&(o.toFixed?o=o.toFixed(m):(o=Math.round(o*Math.pow(10,m))/Math.pow(10,m),o=(o+="0000000000").substr(0,o.indexOf(".")+m+1))),o=""+o,c.indexOf("'")>=0)for(var b=0,x=o.length-1-3;x>=0;x-=3)o=o.substring(0,x)+(0===b?".":",")+o.substring(x),b=(b+1)%2;break;case"e":case"E":if("number"!=typeof o&&(o=0),o=0+o,m>-1){if(!o.toExponential)throw new Error("sprintf: ERROR: toExponential() method not supported");o=o.toExponential(m)}o=""+o,"E"===p&&(o=o.replace(/e\+/,"E+"));break;case"c":"number"!=typeof o&&(o=0),o=String.fromCharCode(o);break;case"s":"string"!=typeof o&&(o=String(o)),m>-1&&(o=o.substr(0,m));break;default:throw new Error('sprintf: ERROR: invalid conversion character "'+p+'"')}var w=y-o.toString().length-_.toString().length;if(w>0){var E=new Array(w+1);v?o=E.join(g)+o:o+=E.join(g)}o=_+o}n=n+a+o,i=f}return n+i};return t.version={text:"1.2.3",major:1,minor:2,micro:3},t},"function"==typeof define&&void 0!==n(108)?define(i,(function(){return o()})):"object"===r(t)&&"object"===r(t.exports)?t.exports=o():e[i]=o(),this};var o=(new i).dispatch();e.a=o.sprintf}).call(this,n(107)(t))},function(t,e,n){"use strict";var r=n(76);Error;function i(t,e,n){return Math.min(Math.max(t,e),n)}n.d(e,"a",(function(){return i}));"cosh"in Math&&Math.cosh},,,,,,,,,,,,,,,,,function(t,e,n){var r=n(12),i=n(118),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i(o))},function(t,e,n){"use strict";var r=n(111),i=n(78);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){var r=n(59),i=n(68),o=n(121),a=n(17);t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(12);t.exports=r.Promise},function(t,e,n){var r=n(17),i=n(124),o=n(16),a=n(70),s=n(83),u=n(140),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var l,h,p,f,d,g,v,y=n&&n.that,m=!(!n||!n.AS_ENTRIES),_=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),x=a(e,y,1+m+b),w=function(t){return l&&u(l),new c(!0,t)},E=function(t){return m?(r(t),b?x(t[0],t[1],w):x(t[0],t[1])):b?x(t,w):x(t)};if(_)l=t;else{if("function"!=typeof(h=s(t)))throw TypeError("Target is not iterable");if(i(h)){for(p=0,f=o(t.length);f>p;p++)if((d=E(t[p]))&&d instanceof c)return d;return new c(!1)}l=h.call(t)}for(g=l.next;!(v=g.call(l)).done;){try{d=E(v.value)}catch(t){throw u(l),t}if("object"==typeof d&&d&&d instanceof c)return d}return new c(!1)}},function(t,e,n){var r,i,o,a,s,u,c,l,h=n(12),p=n(63).f,f=n(141).set,d=n(143),g=n(98),v=h.MutationObserver||h.WebKitMutationObserver,y=h.document,m=h.process,_=h.Promise,b=p(h,"queueMicrotask"),x=b&&b.value;x||(r=function(){var t,e;for(g&&(t=m.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},!d&&!g&&v&&y?(s=!0,u=y.createTextNode(""),new v(r).observe(u,{characterData:!0}),a=function(){u.data=s=!s}):_&&_.resolve?(c=_.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=g?function(){m.nextTick(r)}:function(){f.call(h,r)}),t.exports=x||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},function(t,e,n){var r=n(17),i=n(20),o=n(145);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(12);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){var r=n(20);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){"use strict";var r=n(65),i=n(20),o=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";a[e]=Function("C,a","return new C("+r.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(e,r.length,r):e.apply(t,r)};return i(e.prototype)&&(a.prototype=e.prototype),a}},function(t,e,n){var r=n(48),i=n(68).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(7),i=n(32).find,o=n(102),a=n(49),s="find",u=!0,c=a(s);s in[]&&Array(1).find((function(){u=!1})),r({target:"Array",proto:!0,forced:u||!c},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},function(t,e,n){"use strict";var r=n(7),i=n(80).includes,o=n(102);r({target:"Array",proto:!0,forced:!n(49)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(t,e,n){n(7)({target:"Math",stat:!0},{sign:n(215)})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var r=n(7),i=n(11),o=n(48),a=n(63).f,s=n(23),u=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},function(t,e,n){"use strict";var r=n(7),i=n(156),o=n(38);r({target:"String",proto:!0,forced:!n(157)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){"use strict";var r,i=n(7),o=n(63).f,a=n(16),s=n(156),u=n(38),c=n(157),l=n(60),h="".startsWith,p=Math.min,f=c("startsWith");i({target:"String",proto:!0,forced:!!(l||f||(r=o(String.prototype,"startsWith"),!r||r.writable))&&!f},{startsWith:function(t){var e=String(u(this));s(t);var n=a(p(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return h?h.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){var r=n(38),i="["+n(160)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},function(t,e,n){var r=n(11),i=n(160);t.exports=function(t){return r((function(){return!!i[t]()||"​᠎"!="​᠎"[t]()||i[t].name!==t}))}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!l){var t=s(p);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){n(7)({target:"String",proto:!0},{repeat:n(163)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var r=n(17),i=n(140);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){throw i(t),e}}},function(t,e,n){"use strict";var r=2147483647,i=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",s=Math.floor,u=String.fromCharCode,c=function(t){return t+22+75*(t<26)},l=function(t,e,n){var r=0;for(t=n?s(t/700):t>>1,t+=s(t/e);t>455;r+=36)t=s(t/35);return s(r+36*t/(t+38))},h=function(t){var e,n,i=[],o=(t=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}(t)).length,h=128,p=0,f=72;for(e=0;e<t.length;e++)(n=t[e])<128&&i.push(u(n));var d=i.length,g=d;for(d&&i.push("-");g<o;){var v=r;for(e=0;e<t.length;e++)(n=t[e])>=h&&n<v&&(v=n);var y=g+1;if(v-h>s((r-p)/y))throw RangeError(a);for(p+=(v-h)*y,h=v,e=0;e<t.length;e++){if((n=t[e])<h&&++p>r)throw RangeError(a);if(n==h){for(var m=p,_=36;;_+=36){var b=_<=f?1:_>=f+26?26:_-f;if(m<b)break;var x=m-b,w=36-b;i.push(u(c(b+x%w))),m=s(x/w)}i.push(u(c(m))),f=l(p,y,g==d),p=0,++g}}++p,++h}return i.join("")};t.exports=function(t){var e,n,r=[],a=t.toLowerCase().replace(o,".").split(".");for(e=0;e<a.length;e++)n=a[e],r.push(i.test(n)?"xn--"+h(n):n);return r.join(".")}},function(t,e,n){"use strict";n(26);var r=n(7),i=n(59),o=n(166),a=n(37),s=n(123),u=n(64),c=n(149),l=n(47),h=n(81),p=n(24),f=n(70),d=n(78),g=n(17),v=n(20),y=n(73),m=n(61),_=n(227),b=n(83),x=n(13),w=i("fetch"),E=i("Headers"),S=x("iterator"),C="URLSearchParams",T="URLSearchParamsIterator",I=l.set,O=l.getterFor(C),M=l.getterFor(T),P=/\+/g,L=Array(4),R=function(t){return L[t-1]||(L[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},A=function(t){try{return decodeURIComponent(t)}catch(e){return t}},k=function(t){var e=t.replace(P," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(R(n--),A);return e}},N=/[!'()~]|%20/g,D={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},F=function(t){return D[t]},j=function(t){return encodeURIComponent(t).replace(N,F)},z=function(t,e){if(e)for(var n,r,i=e.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),t.push({key:k(r.shift()),value:k(r.join("="))}))},B=function(t){this.entries.length=0,z(this.entries,t)},G=function(t,e){if(t<e)throw TypeError("Not enough arguments")},X=c((function(t,e){I(this,{type:T,iterator:_(O(t).entries),kind:e})}),"Iterator",(function(){var t=M(this),e=t.kind,n=t.iterator.next(),r=n.value;return n.done||(n.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),n})),U=function(){h(this,U,C);var t,e,n,r,i,o,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,f=[];if(I(l,{type:C,entries:f,updateURL:function(){},updateSearchParams:B}),void 0!==c)if(v(c))if("function"==typeof(t=b(c)))for(n=(e=t.call(c)).next;!(r=n.call(e)).done;){if((a=(o=(i=_(g(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");f.push({key:a.value+"",value:s.value+""})}else for(u in c)p(c,u)&&f.push({key:u,value:c[u]+""});else z(f,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},q=U.prototype;s(q,{append:function(t,e){G(arguments.length,2);var n=O(this);n.entries.push({key:t+"",value:e+""}),n.updateURL()},delete:function(t){G(arguments.length,1);for(var e=O(this),n=e.entries,r=t+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;e.updateURL()},get:function(t){G(arguments.length,1);for(var e=O(this).entries,n=t+"",r=0;r<e.length;r++)if(e[r].key===n)return e[r].value;return null},getAll:function(t){G(arguments.length,1);for(var e=O(this).entries,n=t+"",r=[],i=0;i<e.length;i++)e[i].key===n&&r.push(e[i].value);return r},has:function(t){G(arguments.length,1);for(var e=O(this).entries,n=t+"",r=0;r<e.length;)if(e[r++].key===n)return!0;return!1},set:function(t,e){G(arguments.length,1);for(var n,r=O(this),i=r.entries,o=!1,a=t+"",s=e+"",u=0;u<i.length;u++)(n=i[u]).key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var t,e,n,r=O(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(i[e].key>t.key){i.splice(e,0,t);break}e===n&&i.push(t)}r.updateURL()},forEach:function(t){for(var e,n=O(this).entries,r=f(t,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((e=n[i++]).value,e.key,this)},keys:function(){return new X(this,"keys")},values:function(){return new X(this,"values")},entries:function(){return new X(this,"entries")}},{enumerable:!0}),a(q,S,q.entries),a(q,"toString",(function(){for(var t,e=O(this).entries,n=[],r=0;r<e.length;)t=e[r++],n.push(j(t.key)+"="+j(t.value));return n.join("&")}),{enumerable:!0}),u(U,C),r({global:!0,forced:!o},{URLSearchParams:U}),o||"function"!=typeof w||"function"!=typeof E||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,n,r,i=[t];return arguments.length>1&&(v(e=arguments[1])&&(n=e.body,d(n)===C&&((r=e.headers?new E(e.headers):new E).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=y(e,{body:m(0,String(n)),headers:m(0,r)}))),i.push(e)),w.apply(this,i)}}),t.exports={URLSearchParams:U,getState:O}},function(t,e,n){var r=n(17),i=n(83);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},function(t,e,n){var r=n(7),i=n(132),o=n(102);r({target:"Array",proto:!0},{fill:i}),o("fill")},function(t,e,n){t.exports=function(){"use strict";function t(t,n,i,o,a){e(t,n,i||0,o||t.length-1,a||r)}function e(t,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);e(t,r,Math.max(i,Math.floor(r-u*l/s+h)),Math.min(o,Math.floor(r+(s-u)*l/s+h)),a)}var p=t[r],f=i,d=o;for(n(t,i,r),a(t[o],p)>0&&n(t,i,o);f<d;){for(n(t,f,d),f++,d--;a(t[f],p)<0;)f++;for(;a(t[d],p)>0;)d--}0===a(t[i],p)?n(t,i,d):n(t,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}return t}()},function(t,e,n){"use strict";n.r(e);var r=n(19);e.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return Object(r.a)(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},function(t,e,n){t.exports=function(){"use strict";var t=["bubbles","cancelable","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],e=[!1,!1,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0];function n(n,r){r=r||Object.create(null);var i=document.createEvent("Event");i.initEvent(n,r.bubbles||!1,r.cancelable||!1);for(var o,a=2;a<t.length;a++)i[o=t[a]]=r[o]||e[a];i.buttons=r.buttons||0;var s=0;return s=void 0!==r.pressure&&i.buttons?r.pressure:i.buttons?.5:0,i.x=i.clientX,i.y=i.clientY,i.pointerId=r.pointerId||0,i.width=r.width||1,i.height=r.height||1,i.pressure=s,i.tiltX=r.tiltX||0,i.tiltY=r.tiltY||0,i.twist=r.twist||0,i.tangentialPressure=r.tangentialPressure||0,i.pointerType=r.pointerType||"",i.hwTimestamp=r.hwTimestamp||0,i.isPrimary=r.isPrimary||!1,i.detail=0,i}var r=window.Map&&window.Map.prototype.forEach?Map:i;function i(){this.array=[],this.size=0}i.prototype={set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach((function(n,r){t.call(e,n,r,this)}),this)}};var o=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],a=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],s={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},u="undefined"!=typeof SVGElementInstance,c={pointermap:new r,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(t,e){var n=e,r=n.events;r&&(r.forEach((function(t){n[t]&&(this.eventMap[t]=n[t].bind(n))}),this),this.eventSources[t]=n,this.eventSourceList.push(n))},register:function(t){for(var e,n=this.eventSourceList.length,r=0;r<n&&(e=this.eventSourceList[r]);r++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,r=0;r<n&&(e=this.eventSourceList[r]);r++)e.unregister.call(e,t)},contains:function(t,e){try{return t.contains(e)}catch(t){return!1}},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){t.bubbles=!1,this.fireEvent("pointerenter",t)},leave:function(t){t.bubbles=!1,this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.propagate(t,this.leave,!1)},enterOver:function(t){this.over(t),this.propagate(t,this.enter,!0)},eventHandler:function(t){if(!t._handledByPE){var e=t.type,n=this.eventMap&&this.eventMap[e];n&&n(t),t._handledByPE=!0}},listen:function(t,e){e.forEach((function(e){this.addEvent(t,e)}),this)},unlisten:function(t,e){e.forEach((function(e){this.removeEvent(t,e)}),this)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var r=new n(t,e);return e.preventDefault&&(r.preventDefault=e.preventDefault),r._target=r._target||e.target,r},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},cloneEvent:function(t){for(var e,n=Object.create(null),r=0;r<o.length;r++)n[e=o[r]]=t[e]||a[r],!u||"target"!==e&&"relatedTarget"!==e||n[e]instanceof SVGElementInstance&&(n[e]=n[e].correspondingUseElement);return t.preventDefault&&(n.preventDefault=function(){t.preventDefault()}),n},getTarget:function(t){var e=this.captureInfo[t.pointerId];return e?t._target!==e&&t.type in s?void 0:e:t._target},propagate:function(t,e,n){for(var r=t.target,i=[];null!=r&&r!==document&&!r.contains(t.relatedTarget);)if(i.push(r),!(r=r.parentNode))return;n&&i.reverse(),i.forEach((function(n){t.target=n,e.call(this,t)}),this)},setCapture:function(t,e,r){this.captureInfo[t]&&this.releaseCapture(t,r),this.captureInfo[t]=e,this.implicitRelease=this.releaseCapture.bind(this,t,r),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var i=new n("gotpointercapture",{bubbles:!0});i.pointerId=t,i._target=e,r||this.asyncDispatchEvent(i)},releaseCapture:function(t,e){var r=this.captureInfo[t];if(r){this.captureInfo[t]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var i=new n("lostpointercapture",{bubbles:!0});i.pointerId=t,i._target=r,e||this.asyncDispatchEvent(i)}},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return e.dispatchEvent(t)},asyncDispatchEvent:function(t){requestAnimationFrame(this.dispatchEvent.bind(this,t))}};c.boundHandler=c.eventHandler.bind(c);var l={shadow:function(t){if(t)return t.shadowRoot||t.webkitShadowRoot},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);if(this.canTarget(e))return e},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var n=t.querySelector("shadow");n&&(e=n.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],n=this.shadow(t);n;)e.push(n),n=this.olderShadow(n);return e},searchRoot:function(t,e,n){if(t){var r,i,o=t.elementFromPoint(e,n);for(i=this.targetingShadow(o);i;){if(r=i.elementFromPoint(e,n)){var a=this.targetingShadow(r);return this.searchRoot(a,e,n)||r}i=this.olderShadow(i)}return o}},owner:function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!==Node.DOCUMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){var e=t.clientX,n=t.clientY,r=this.owner(t.target);return r.elementFromPoint(e,n)||(r=document),this.searchRoot(r,e,n)}},h=Array.prototype.forEach.call.bind(Array.prototype.forEach),p=Array.prototype.map.call.bind(Array.prototype.map),f=Array.prototype.slice.call.bind(Array.prototype.slice),d=Array.prototype.filter.call.bind(Array.prototype.filter),g=window.MutationObserver||window.WebKitMutationObserver,v="[touch-action]",y={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};function m(t,e,n,r){this.addCallback=t.bind(r),this.removeCallback=e.bind(r),this.changedCallback=n.bind(r),g&&(this.observer=new g(this.mutationWatcher.bind(this)))}function _(t){return"body /shadow-deep/ "+t}function b(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+"; }"}m.prototype={watchSubtree:function(t){this.observer&&l.canTarget(t)&&this.observer.observe(t,y)},enableOnSubtree:function(t){this.watchSubtree(t),t===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(t)},installNewSubtree:function(t){h(this.findElements(t),this.addElement,this)},findElements:function(t){return t.querySelectorAll?t.querySelectorAll(v):[]},removeElement:function(t){this.removeCallback(t)},addElement:function(t){this.addCallback(t)},elementChanged:function(t,e){this.changedCallback(t,e)},concatLists:function(t,e){return t.concat(f(e))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(t){return t.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(t){var e=p(t,this.findElements,this);return e.push(d(t,this.isElement)),e.reduce(this.concatLists,[])},mutationWatcher:function(t){t.forEach(this.mutationHandler,this)},mutationHandler:function(t){"childList"===t.type?(this.flattenMutationTree(t.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(t.removedNodes).forEach(this.removeElement,this)):"attributes"===t.type&&this.elementChanged(t.target,t.oldValue)}};var x=[{selector:'[touch-action="none"]',value:"none"},{selector:'[touch-action="auto"]',value:"auto"},{selector:'[touch-action~="pan-x"]',value:"pan-x"},{selector:'[touch-action~="pan-y"]',value:"pan-y"},{selector:'[touch-action~="pan-up"]',value:"pan-up"},{selector:'[touch-action~="pan-down"]',value:"pan-down"},{selector:'[touch-action~="pan-left"]',value:"pan-left"},{selector:'[touch-action~="pan-right"]',value:"pan-right"}],w="",E=window.PointerEvent||window.MSPointerEvent,S=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;function C(){if(E){x.forEach((function(t){w+=t.selector+b(t.value)+"\n",S&&(w+=_(t.selector)+b(t.value)+"\n")}));var t=document.createElement("style");t.textContent=w,document.head.appendChild(t)}}var T=c.pointermap,I=25,O=[1,4,2,8,16],M=!1;try{M=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}var P,L={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","webkitmouseforcechanged","mousemove","mouseup","mouseover","mouseout"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,r=t.clientX,i=t.clientY,o=0,a=n.length;o<a&&(e=n[o]);o++){var s=Math.abs(r-e.x),u=Math.abs(i-e.y);if(s<=I&&u<=I)return!0}},prepareEvent:function(t){var e=c.cloneEvent(t),n=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),n()},e.pointerId=this.POINTER_ID,e.isPrimary=!0,e.pointerType=this.POINTER_TYPE,"webkitForce"in t&&(e.pressure=t.webkitForce-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN),e},prepareButtonsForMove:function(t,e){var n=T.get(this.POINTER_ID);0!==e.which&&n?t.buttons=n.buttons:t.buttons=0,e.buttons=t.buttons},mousedown:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=T.get(this.POINTER_ID),n=this.prepareEvent(t);M||(n.buttons=O[n.button],e&&(n.buttons|=e.buttons),t.buttons=n.buttons),T.set(this.POINTER_ID,t),e&&0!==e.buttons?c.move(n):c.down(n)}},webkitmouseforcechanged:function(t){this.mousemove(t)},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);M||this.prepareButtonsForMove(e,t),e.button=-1,T.set(this.POINTER_ID,t),c.move(e)}},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=T.get(this.POINTER_ID),n=this.prepareEvent(t);if(!M){var r=O[n.button];n.buttons=e?e.buttons&~r:0,t.buttons=n.buttons}T.set(this.POINTER_ID,t),n.buttons&=~O[n.button],0===n.buttons?c.up(n):c.move(n)}},mouseover:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);M||this.prepareButtonsForMove(e,t),e.button=-1,T.set(this.POINTER_ID,t),c.enterOver(e)}},mouseout:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=this.prepareEvent(t);M||this.prepareButtonsForMove(e,t),e.button=-1,c.leaveOut(e)}},cancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.deactivateMouse()},deactivateMouse:function(){T.delete(this.POINTER_ID)}},R=c.captureInfo,A=l.findTarget.bind(l),k=l.allShadows.bind(l),N=c.pointermap,D=2500,F="touch-action",j=1,z=2,B=4,G=8,X=j|z|B|G,U={events:["touchstart","touchmove","touchforcechange","touchend","touchcancel"],register:function(t){P.enableOnSubtree(t)},unregister:function(){},elementAdded:function(t){var e=t.getAttribute(F),n=this.touchActionToScrollType(e);"number"==typeof n&&(t._scrollType=n,c.listen(t,this.events),k(t).forEach((function(t){t._scrollType=n,c.listen(t,this.events)}),this))},elementRemoved:function(t){if(N.size>0){var e=this.events;t.addEventListener("touchend",(function(){t._scrollType=void 0,c.unlisten(t,e)}))}else t._scrollType=void 0,c.unlisten(t,this.events);k(t).forEach((function(t){t._scrollType=void 0,c.unlisten(t,this.events)}),this)},elementChanged:function(t,e){var n=t.getAttribute(F),r=this.touchActionToScrollType(n),i=this.touchActionToScrollType(e);"number"==typeof r&&"number"==typeof i?(t._scrollType=r,k(t).forEach((function(t){t._scrollType=r}),this)):"number"==typeof i?this.elementRemoved(t):"number"==typeof r&&this.elementAdded(t)},scrollTypes:{UP:function(t){return t.includes("pan-y")||t.includes("pan-up")?j:0},DOWN:function(t){return t.includes("pan-y")||t.includes("pan-down")?z:0},LEFT:function(t){return t.includes("pan-x")||t.includes("pan-left")?B:0},RIGHT:function(t){return t.includes("pan-x")||t.includes("pan-right")?G:0}},touchActionToScrollType:function(t){if(t){if("auto"===t)return X;if("none"===t)return 0;var e=t.split(" "),n=this.scrollTypes;return n.UP(e)|n.DOWN(e)|n.LEFT(e)|n.RIGHT(e)}},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===N.size||1===N.size&&N.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.scrolling=!1)},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null)},typeToButtons:function(t){var e=0;return"touchstart"!==t&&"touchmove"!==t&&"touchforcechange"!==t||(e=1),e},touchToPointer:function(t){var e=this.currentTouchEvent,n=c.cloneEvent(t),r=n.pointerId=t.identifier+2;if(n.target=R[r]||A(n),n.bubbles=!0,n.cancelable=!0,n.button=0,n.buttons=this.typeToButtons(e.type),n.width=2*(t.radiusX||t.webkitRadiusX||0),n.height=2*(t.radiusY||t.webkitRadiusY||0),n.pressure=void 0!==t.force?t.force:void 0!==t.webkitForce?t.webkitForce:void 0,n.isPrimary=this.isPrimaryTouch(t),t.altitudeAngle){var i=Math.tan(t.altitudeAngle),o=180/Math.PI;n.tiltX=Math.atan(Math.cos(t.azimuthAngle)/i)*o,n.tiltY=Math.atan(Math.sin(t.azimuthAngle)/i)*o}else n.tiltX=0,n.tiltY=0;"stylus"===t.touchType?n.pointerType="pen":n.pointerType=this.POINTER_TYPE,n.altKey=e.altKey,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey;var a=this;return n.preventDefault=function(){a.scrolling=!1,a.firstXY=null,e.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var r,i=0;i<n.length;i++)r=n[i],e.call(this,this.touchToPointer(r))},shouldScroll:function(t){if(this.firstXY){var e,n=t.currentTarget._scrollType;if(0===n)e=!1;else if(n===X)e=!0;else{var r=t.changedTouches[0],i=r.clientY-this.firstXY.Y,o=Math.abs(i),a=r.clientX-this.firstXY.X,s=Math.abs(a),u=n&j,c=n&z,l=n&B,h=n&G;l&&h?e=s>o:l?e=s>o&&a>0:h&&(e=s>o&&a<0),e||(u&&c?e=s<o:u?e=s<o&&i>0:c&&(e=s<o&&i<0))}return this.firstXY=null,e}},findTouch:function(t,e){for(var n,r=0,i=t.length;r<i&&(n=t[r]);r++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(N.size>=e.length){var n=[];N.forEach((function(t,r){if(1!==r&&!this.findTouch(e,r-2)){var i=t.out;n.push(i)}}),this),n.forEach(this.cancelOut,this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||this.processTouches(t,this.overDown)},overDown:function(t){N.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),c.enterOver(t),c.down(t)},touchforcechange:function(t){this.touchmove(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):("touchforcechange"!==t.type&&t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=t,n=N.get(e.pointerId);if(n){var r=n.out,i=n.outTarget;c.move(e),r&&i!==e.target&&(r.relatedTarget=e.target,e.relatedTarget=i,r.target=i,e.target?(c.leaveOut(r),c.enterOver(e)):(e.target=i,e.relatedTarget=null,this.cancelOut(e))),n.out=e,n.outTarget=e.target}},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(c.up(t),c.leaveOut(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){c.cancel(t),c.leaveOut(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){N.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=L.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch(n)){var r={x:n.clientX,y:n.clientY};e.push(r);var i=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,r);setTimeout(i,D)}}};P=new m(U.elementAdded,U.elementRemoved,U.elementChanged,U);var q,Y,V,H=c.pointermap,W=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,K={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){c.listen(t,this.events)},unregister:function(t){c.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var e=t;return W&&((e=c.cloneEvent(t)).pointerType=this.POINTER_TYPES[t.pointerType]),e},cleanup:function(t){H.delete(t)},MSPointerDown:function(t){H.set(t.pointerId,t);var e=this.prepareEvent(t);c.down(e)},MSPointerMove:function(t){var e=this.prepareEvent(t);c.move(e)},MSPointerUp:function(t){var e=this.prepareEvent(t);c.up(e),this.cleanup(t.pointerId)},MSPointerOut:function(t){var e=this.prepareEvent(t);c.leaveOut(e)},MSPointerOver:function(t){var e=this.prepareEvent(t);c.enterOver(e)},MSPointerCancel:function(t){var e=this.prepareEvent(t);c.cancel(e),this.cleanup(t.pointerId)},MSLostPointerCapture:function(t){var e=c.makeEvent("lostpointercapture",t);c.dispatchEvent(e)},MSGotPointerCapture:function(t){var e=c.makeEvent("gotpointercapture",t);c.dispatchEvent(e)}};function $(){if(!window.PointerEvent){if(window.PointerEvent=n,window.navigator.msPointerEnabled){var t=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:t,enumerable:!0}),c.registerSource("ms",K)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),c.registerSource("mouse",L),void 0!==window.ontouchstart&&c.registerSource("touch",U);c.register(document)}}function Z(t){if(!c.pointermap.has(t)){var e=new Error("NotFoundError");throw e.name="NotFoundError",e}}function J(t){for(var e=t.parentNode;e&&e!==t.ownerDocument;)e=e.parentNode;if(!e){var n=new Error("InvalidStateError");throw n.name="InvalidStateError",n}}function Q(t){return 0!==c.pointermap.get(t).buttons}function tt(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:q},releasePointerCapture:{value:Y},hasPointerCapture:{value:V}})}return window.navigator.msPointerEnabled?(q=function(t){Z(t),J(this),Q(t)&&(c.setCapture(t,this,!0),this.msSetPointerCapture(t))},Y=function(t){Z(t),c.releaseCapture(t,!0),this.msReleasePointerCapture(t)}):(q=function(t){Z(t),J(this),Q(t)&&c.setCapture(t,this)},Y=function(t){Z(t),c.releaseCapture(t)}),V=function(t){return!!c.captureInfo[t]},C(),$(),tt(),{dispatcher:c,Installer:m,PointerEvent:n,PointerMap:r,targetFinding:l}}()},function(t,e,n){var r=n(7),i=Math.log,o=Math.LN2;r({target:"Math",stat:!0},{log2:function(t){return i(t)/o}})},function(t,e,n){var r=n(7),i=n(167);r({target:"Array",stat:!0,forced:!n(125)((function(t){Array.from(t)}))},{from:i})},function(t,e,n){"use strict";t.exports=function(t){var e=t.length;if(e<3){for(var n=new Array(e),i=0;i<e;++i)n[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var o=new Array(e);for(i=0;i<e;++i)o[i]=i;o.sort((function(e,n){var r=t[e][0]-t[n][0];return r||t[e][1]-t[n][1]}));var a=[o[0],o[1]],s=[o[0],o[1]];for(i=2;i<e;++i){for(var u=o[i],c=t[u],l=a.length;l>1&&r(t[a[l-2]],t[a[l-1]],c)<=0;)l-=1,a.pop();for(a.push(u),l=s.length;l>1&&r(t[s[l-2]],t[s[l-1]],c)>=0;)l-=1,s.pop();s.push(u)}n=new Array(s.length+a.length-2);for(var h=0,p=(i=0,a.length);i<p;++i)n[h++]=a[i];for(var f=s.length-2;f>0;--f)n[h++]=s[f];return n};var r=n(169)[3]},function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);if(i)return[i,n];return[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,h=t[u],p=l(h),f=e[c],d=l(f);p<d?(o=h,(u+=1)<n&&(h=t[u],p=l(h))):(o=f,(c+=1)<r&&(f=e[c],d=l(f)));u<n&&p<d||c>=r?(i=h,(u+=1)<n&&(h=t[u],p=l(h))):(i=f,(c+=1)<r&&(f=e[c],d=l(f)));var g,v,y=i+o,m=y-i,_=o-m,b=_,x=y;for(;u<n&&c<r;)p<d?(i=h,(u+=1)<n&&(h=t[u],p=l(h))):(i=f,(c+=1)<r&&(f=e[c],d=l(f))),(_=(o=b)-(m=(y=i+o)-i))&&(a[s++]=_),b=x-((g=x+y)-(v=g-x))+(y-v),x=g;for(;u<n;)(_=(o=b)-(m=(y=(i=h)+o)-i))&&(a[s++]=_),b=x-((g=x+y)-(v=g-x))+(y-v),x=g,(u+=1)<n&&(h=t[u]);for(;c<r;)(_=(o=b)-(m=(y=(i=f)+o)-i))&&(a[s++]=_),b=x-((g=x+y)-(v=g-x))+(y-v),x=g,(c+=1)<r&&(f=e[c]);b&&(a[s++]=b);x&&(a[s++]=x);s||(a[s++]=0);return a.length=s,a}},function(t,e,n){"use strict";var r=n(170),i=n(237);t.exports=function(t,e){var n=t.length;if(1===n){var o=r(t[0],e);return o[0]?o:[o[1]]}var a=new Array(2*n),s=[.1,.1],u=[.1,.1],c=0;r(t[0],e,s),s[0]&&(a[c++]=s[0]);for(var l=1;l<n;++l){r(t[l],e,u);var h=s[1];i(h,u[0],s),s[0]&&(a[c++]=s[0]);var p=u[1],f=s[1],d=p+f,g=f-(d-p);s[1]=d,g&&(a[c++]=g)}s[1]&&(a[c++]=s[1]);0===c&&(a[c++]=0);return a.length=c,a}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);if(n)return n[0]=a+o,n[1]=r,n;return[a+o,r]}},function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);if(i)return[i,n];return[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,h=t[u],p=l(h),f=-e[c],d=l(f);p<d?(o=h,(u+=1)<n&&(h=t[u],p=l(h))):(o=f,(c+=1)<r&&(f=-e[c],d=l(f)));u<n&&p<d||c>=r?(i=h,(u+=1)<n&&(h=t[u],p=l(h))):(i=f,(c+=1)<r&&(f=-e[c],d=l(f)));var g,v,y=i+o,m=y-i,_=o-m,b=_,x=y;for(;u<n&&c<r;)p<d?(i=h,(u+=1)<n&&(h=t[u],p=l(h))):(i=f,(c+=1)<r&&(f=-e[c],d=l(f))),(_=(o=b)-(m=(y=i+o)-i))&&(a[s++]=_),b=x-((g=x+y)-(v=g-x))+(y-v),x=g;for(;u<n;)(_=(o=b)-(m=(y=(i=h)+o)-i))&&(a[s++]=_),b=x-((g=x+y)-(v=g-x))+(y-v),x=g,(u+=1)<n&&(h=t[u]);for(;c<r;)(_=(o=b)-(m=(y=(i=f)+o)-i))&&(a[s++]=_),b=x-((g=x+y)-(v=g-x))+(y-v),x=g,(c+=1)<r&&(f=-e[c]);b&&(a[s++]=b);x&&(a[s++]=x);s||(a[s++]=0);return a.length=s,a}},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||i,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function i(t,e){return t<e?-1:t>e?1:0}t.exports=r,t.exports.default=r,r.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}}},function(t,e){t.exports=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],c=e[a][0],l=e[a][1];u>r!=l>r&&n<(c-s)*(r-u)/(l-u)+s&&(i=!i)}return i}},function(t,e,n){"use strict";var r=n(7),i=n(12),o=n(171),a=n(97),s="ArrayBuffer",u=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==u},{ArrayBuffer:u}),a(s)},function(t,e){var n=1/0,r=Math.abs,i=Math.pow,o=Math.floor,a=Math.log,s=Math.LN2;t.exports={pack:function(t,e,u){var c,l,h,p=new Array(u),f=8*u-e-1,d=(1<<f)-1,g=d>>1,v=23===e?i(2,-24)-i(2,-77):0,y=t<0||0===t&&1/t<0?1:0,m=0;for((t=r(t))!=t||t===n?(l=t!=t?1:0,c=d):(c=o(a(t)/s),t*(h=i(2,-c))<1&&(c--,h*=2),(t+=c+g>=1?v/h:v*i(2,1-g))*h>=2&&(c++,h/=2),c+g>=d?(l=0,c=d):c+g>=1?(l=(t*h-1)*i(2,e),c+=g):(l=t*i(2,g-1)*i(2,e),c=0));e>=8;p[m++]=255&l,l/=256,e-=8);for(c=c<<e|l,f+=e;f>0;p[m++]=255&c,c/=256,f-=8);return p[--m]|=128*y,p},unpack:function(t,e){var r,o=t.length,a=8*o-e-1,s=(1<<a)-1,u=s>>1,c=a-7,l=o-1,h=t[l--],p=127&h;for(h>>=7;c>0;p=256*p+t[l],l--,c-=8);for(r=p&(1<<-c)-1,p>>=-c,c+=e;c>0;r=256*r+t[l],l--,c-=8);if(0===p)p=1-u;else{if(p===s)return r?NaN:h?-1/0:n;r+=i(2,e),p-=u}return(h?-1:1)*r*i(2,p-e)}}},function(t,e,n){n(174)("Float64",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){var r=n(12),i=n(11),o=n(125),a=n(15).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,u=r.Int8Array;t.exports=!a||!i((function(){u(1)}))||!i((function(){new u(-1)}))||!o((function(t){new u,new u(null),new u(1.5),new u(t)}),!0)||i((function(){return 1!==new u(new s(2),1,void 0).length}))},function(t,e,n){var r=n(43);t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},function(t,e,n){var r=n(29),i=n(16),o=n(83),a=n(124),s=n(70),u=n(15).aTypedArrayConstructor;t.exports=function(t){var e,n,c,l,h,p,f=r(t),d=arguments.length,g=d>1?arguments[1]:void 0,v=void 0!==g,y=o(f);if(null!=y&&!a(y))for(p=(h=y.call(f)).next,f=[];!(l=p.call(h)).done;)f.push(l.value);for(v&&d>2&&(g=s(g,arguments[2],2)),n=i(f.length),c=new(u(this))(n),e=0;n>e;e++)c[e]=v?g(f[e],e):f[e];return c}},function(t,e,n){n(174)("Uint32",(function(t){return function(e,n,r){return t(this,e,n,r)}}))},function(t,e,n){"use strict";var r=n(15),i=n(249),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(t,e){return i.call(o(this),t,e,arguments.length>2?arguments[2]:void 0)}))},function(t,e,n){"use strict";var r=n(29),i=n(69),o=n(16),a=Math.min;t.exports=[].copyWithin||function(t,e){var n=r(this),s=o(n.length),u=i(t,s),c=i(e,s),l=arguments.length>2?arguments[2]:void 0,h=a((void 0===l?s:i(l,s))-c,s-u),p=1;for(c<u&&u<c+h&&(p=-1,c+=h-1,u+=h-1);h-- >0;)c in n?n[u]=n[c]:delete n[u],u+=p,c+=p;return n}},function(t,e,n){"use strict";var r=n(15),i=n(32).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(15),i=n(132),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(t){return i.apply(o(this),arguments)}))},function(t,e,n){"use strict";var r=n(15),i=n(32).filter,o=n(71),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(t){for(var e=i(a(this),t,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),r=0,u=e.length,c=new(s(n))(u);u>r;)c[r]=e[r++];return c}))},function(t,e,n){"use strict";var r=n(15),i=n(32).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(15),i=n(32).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(15),i=n(32).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(15),i=n(80).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(15),i=n(80).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(12),i=n(15),o=n(26),a=n(13)("iterator"),s=r.Uint8Array,u=o.values,c=o.keys,l=o.entries,h=i.aTypedArray,p=i.exportTypedArrayMethod,f=s&&s.prototype[a],d=!!f&&("values"==f.name||null==f.name),g=function(){return u.call(h(this))};p("entries",(function(){return l.call(h(this))})),p("keys",(function(){return c.call(h(this))})),p("values",g,!d),p(a,g,!d)},function(t,e,n){"use strict";var r=n(15),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].join;o("join",(function(t){return a.apply(i(this),arguments)}))},function(t,e,n){"use strict";var r=n(15),i=n(261),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){return i.apply(o(this),arguments)}))},function(t,e,n){"use strict";var r=n(48),i=n(43),o=n(16),a=n(85),s=n(49),u=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,h=a("lastIndexOf"),p=s("indexOf",{ACCESSORS:!0,1:0}),f=l||!h||!p;t.exports=f?function(t){if(l)return c.apply(this,arguments)||0;var e=r(this),n=o(e.length),a=n-1;for(arguments.length>1&&(a=u(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},function(t,e,n){"use strict";var r=n(15),i=n(32).map,o=n(71),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(o(t,t.constructor)))(e)}))}))},function(t,e,n){"use strict";var r=n(15),i=n(127).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(15),i=n(127).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){return i(o(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(15),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var t,e=this,n=i(e).length,r=a(n/2),o=0;o<r;)t=e[o],e[o++]=e[--n],e[n]=t;return e}))},function(t,e,n){"use strict";var r=n(15),i=n(16),o=n(175),a=n(29),s=n(11),u=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(t){u(this);var e=o(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=a(t),s=i(r.length),c=0;if(s+e>n)throw RangeError("Wrong length");for(;c<s;)this[e+c]=r[c++]}),s((function(){new Int8Array(1).set({})})))},function(t,e,n){"use strict";var r=n(15),i=n(71),o=n(11),a=r.aTypedArray,s=r.aTypedArrayConstructor,u=r.exportTypedArrayMethod,c=[].slice;u("slice",(function(t,e){for(var n=c.call(a(this),t,e),r=i(this,this.constructor),o=0,u=n.length,l=new(s(r))(u);u>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},function(t,e,n){"use strict";var r=n(15),i=n(32).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return i(o(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,n){"use strict";var r=n(15),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(t){return a.call(i(this),t)}))},function(t,e,n){"use strict";var r=n(15),i=n(16),o=n(69),a=n(71),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var n=s(this),r=n.length,u=o(t,r);return new(a(n,n.constructor))(n.buffer,n.byteOffset+u*n.BYTES_PER_ELEMENT,i((void 0===e?r:o(e,r))-u))}))},function(t,e,n){"use strict";var r=n(12),i=n(15),o=n(11),a=r.Int8Array,s=i.aTypedArray,u=i.exportTypedArrayMethod,c=[].toLocaleString,l=[].slice,h=!!a&&o((function(){c.call(new a(1))}));u("toLocaleString",(function(){return c.apply(h?l.call(s(this)):s(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])})))},function(t,e,n){"use strict";var r=n(15).exportTypedArrayMethod,i=n(11),o=n(12).Uint8Array,a=o&&o.prototype||{},s=[].toString,u=[].join;i((function(){s.call({})}))&&(s=function(){return u.call(this)});var c=a.toString!=s;r("toString",s,c)},function(t,e,n){var r=n(62);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},function(t,e,n){"use strict";var r=n(7),i=n(275);r({target:"String",proto:!0,forced:n(276)("sub")},{sub:function(){return i(this,"sub","","")}})},function(t,e,n){var r=n(38),i=/"/g;t.exports=function(t,e,n,o){var a=String(r(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(o).replace(i,"&quot;")+'"'),s+">"+a+"</"+e+">"}},function(t,e,n){var r=n(11);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){(function(e){var r=n(177),i="[object Symbol]",o=/[&<>"']/g,a=RegExp(o.source),s="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,c=s||u||Function("return this")();var l,h=(l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null==l?void 0:l[t]}),p=Object.prototype,f=p.hasOwnProperty,d=p.toString,g=c.Symbol,v=g?g.toStringTag:void 0,y=g?g.prototype:void 0,m=y?y.toString:void 0,_={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:r,variable:"",imports:{_:{escape:function(t){return(t=E(t))&&a.test(t)?t.replace(o,h):t}}}};function b(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":v&&v in Object(t)?function(t){var e=f.call(t,v),n=t[v];try{t[v]=void 0;var r=!0}catch(t){}var i=d.call(t);r&&(e?t[v]=n:delete t[v]);return i}(t):function(t){return d.call(t)}(t)}function x(t){if("string"==typeof t)return t;if(w(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(t,x)+"";if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&b(t)==i}(t))return m?m.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}var w=Array.isArray;function E(t){return null==t?"":x(t)}t.exports=_}).call(this,n(112))},function(t,e,n){"use strict";n.r(e);n(14),n(42),n(25),n(55),n(72),n(39),n(26),n(50),n(30),n(33),n(66),n(67),n(88),n(34),n(44),n(35),n(22),n(21),n(36),n(56),n(51),n(45),n(89),n(40),n(46);function r(t,e){var n=t.split("/"),r=e.split("/");n.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?n.pop():n.push(r[i]));return n.join("/")}n(90),n(91),n(92),n(212),n(213),n(214),n(216),n(217),n(218),n(57),n(159);var i="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,o="undefined"==typeof window?{document:i,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window;var a=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=0;n<e.length;n+=1)this[n]=e[n];return this.length=e.length,this};function s(t,e){var n=[],r=0;if(t&&!e&&t instanceof a)return t;if(t)if("string"==typeof t){var s,u,c=t.trim();if(c.indexOf("<")>=0&&c.indexOf(">")>=0){var l="div";for(0===c.indexOf("<li")&&(l="ul"),0===c.indexOf("<tr")&&(l="tbody"),0!==c.indexOf("<td")&&0!==c.indexOf("<th")||(l="tr"),0===c.indexOf("<tbody")&&(l="table"),0===c.indexOf("<option")&&(l="select"),(u=i.createElement(l)).innerHTML=c,r=0;r<u.childNodes.length;r+=1)n.push(u.childNodes[r])}else for(s=e||"#"!==t[0]||t.match(/[ .<>:~]/)?(e||i).querySelectorAll(t.trim()):[i.getElementById(t.trim().split("#")[1])],r=0;r<s.length;r+=1)s[r]&&n.push(s[r])}else if(t.nodeType||t===o||t===i)n.push(t);else if(t.length>0&&t[0].nodeType)for(r=0;r<t.length;r+=1)n.push(t[r]);return new a(n)}function u(t){for(var e=[],n=0;n<t.length;n+=1)-1===e.indexOf(t[n])&&e.push(t[n]);return e}s.fn=a.prototype,s.Class=a,s.Dom7=a;"resize scroll".split(" ");function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var _={addClass:function(t){if(void 0===t)return this;for(var e=t.split(" "),n=0;n<e.length;n+=1)for(var r=0;r<this.length;r+=1)void 0!==this[r]&&void 0!==this[r].classList&&this[r].classList.add(e[n]);return this},removeClass:function(t){for(var e=t.split(" "),n=0;n<e.length;n+=1)for(var r=0;r<this.length;r+=1)void 0!==this[r]&&void 0!==this[r].classList&&this[r].classList.remove(e[n]);return this},hasClass:function(t){return!!this[0]&&this[0].classList.contains(t)},toggleClass:function(t){for(var e=t.split(" "),n=0;n<e.length;n+=1)for(var r=0;r<this.length;r+=1)void 0!==this[r]&&void 0!==this[r].classList&&this[r].classList.toggle(e[n]);return this},attr:function(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(t,e);else for(var r in t)this[n][r]=t[r],this[n].setAttribute(r,t[r]);return this},removeAttr:function(t){for(var e=0;e<this.length;e+=1)this[e].removeAttribute(t);return this},data:function(t,e){var n;if(void 0!==e){for(var r=0;r<this.length;r+=1)(n=this[r]).dom7ElementDataStorage||(n.dom7ElementDataStorage={}),n.dom7ElementDataStorage[t]=e;return this}if(n=this[0]){if(n.dom7ElementDataStorage&&t in n.dom7ElementDataStorage)return n.dom7ElementDataStorage[t];var i=n.getAttribute("data-".concat(t));return i||void 0}},transform:function(t){for(var e=0;e<this.length;e+=1){var n=this[e].style;n.webkitTransform=t,n.transform=t}return this},transition:function(t){"string"!=typeof t&&(t="".concat(t,"ms"));for(var e=0;e<this.length;e+=1){var n=this[e].style;n.webkitTransitionDuration=t,n.transitionDuration=t}return this},on:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],o=e[2],a=e[3];function u(t){var e=t.target;if(e){var n=t.target.dom7EventData||[];if(n.indexOf(t)<0&&n.unshift(t),s(e).is(i))o.apply(e,n);else for(var r=s(e).parents(),a=0;a<r.length;a+=1)s(r[a]).is(i)&&o.apply(r[a],n)}}function c(t){var e=t&&t.target&&t.target.dom7EventData||[];e.indexOf(t)<0&&e.unshift(t),o.apply(this,e)}"function"==typeof e[1]&&(r=e[0],o=e[1],a=e[2],i=void 0),a||(a=!1);for(var l,h=r.split(" "),p=0;p<this.length;p+=1){var f=this[p];if(i)for(l=0;l<h.length;l+=1){var d=h[l];f.dom7LiveListeners||(f.dom7LiveListeners={}),f.dom7LiveListeners[d]||(f.dom7LiveListeners[d]=[]),f.dom7LiveListeners[d].push({listener:o,proxyListener:u}),f.addEventListener(d,u,a)}else for(l=0;l<h.length;l+=1){var g=h[l];f.dom7Listeners||(f.dom7Listeners={}),f.dom7Listeners[g]||(f.dom7Listeners[g]=[]),f.dom7Listeners[g].push({listener:o,proxyListener:c}),f.addEventListener(g,c,a)}}return this},off:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0],i=e[1],o=e[2],a=e[3];"function"==typeof e[1]&&(r=e[0],o=e[1],a=e[2],i=void 0),a||(a=!1);for(var s=r.split(" "),u=0;u<s.length;u+=1)for(var c=s[u],l=0;l<this.length;l+=1){var h=this[l],p=void 0;if(!i&&h.dom7Listeners?p=h.dom7Listeners[c]:i&&h.dom7LiveListeners&&(p=h.dom7LiveListeners[c]),p&&p.length)for(var f=p.length-1;f>=0;f-=1){var d=p[f];o&&d.listener===o||o&&d.listener&&d.listener.dom7proxy&&d.listener.dom7proxy===o?(h.removeEventListener(c,d.proxyListener,a),p.splice(f,1)):o||(h.removeEventListener(c,d.proxyListener,a),p.splice(f,1))}}return this},trigger:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e[0].split(" "),a=e[1],s=0;s<r.length;s+=1)for(var u=r[s],c=0;c<this.length;c+=1){var l=this[c],h=void 0;try{h=new o.CustomEvent(u,{detail:a,bubbles:!0,cancelable:!0})}catch(t){(h=i.createEvent("Event")).initEvent(u,!0,!0),h.detail=a}l.dom7EventData=e.filter((function(t,e){return e>0})),l.dispatchEvent(h),l.dom7EventData=[],delete l.dom7EventData}return this},transitionEnd:function(t){var e,n=["webkitTransitionEnd","transitionend"],r=this;function i(o){if(o.target===this)for(t.call(this,o),e=0;e<n.length;e+=1)r.off(n[e],i)}if(t)for(e=0;e<n.length;e+=1)r.on(n[e],i);return this},outerWidth:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetWidth+parseFloat(e.getPropertyValue("margin-right"))+parseFloat(e.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(t){if(this.length>0){if(t){var e=this.styles();return this[0].offsetHeight+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(this.length>0){var t=this[0],e=t.getBoundingClientRect(),n=i.body,r=t.clientTop||n.clientTop||0,a=t.clientLeft||n.clientLeft||0,s=t===o?o.scrollY:t.scrollTop,u=t===o?o.scrollX:t.scrollLeft;return{top:e.top+s-r,left:e.left+u-a}}return null},css:function(t,e){var n;if(1===arguments.length){if("string"!=typeof t){for(n=0;n<this.length;n+=1)for(var r in t)this[n].style[r]=t[r];return this}if(this[0])return o.getComputedStyle(this[0],null).getPropertyValue(t)}if(2===arguments.length&&"string"==typeof t){for(n=0;n<this.length;n+=1)this[n].style[t]=e;return this}return this},each:function(t){if(!t)return this;for(var e=0;e<this.length;e+=1)if(!1===t.call(this[e],e,this[e]))return this;return this},html:function(t){if(void 0===t)return this[0]?this[0].innerHTML:void 0;for(var e=0;e<this.length;e+=1)this[e].innerHTML=t;return this},text:function(t){if(void 0===t)return this[0]?this[0].textContent.trim():null;for(var e=0;e<this.length;e+=1)this[e].textContent=t;return this},is:function(t){var e,n,r=this[0];if(!r||void 0===t)return!1;if("string"==typeof t){if(r.matches)return r.matches(t);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(t);if(r.msMatchesSelector)return r.msMatchesSelector(t);for(e=s(t),n=0;n<e.length;n+=1)if(e[n]===r)return!0;return!1}if(t===i)return r===i;if(t===o)return r===o;if(t.nodeType||t instanceof a){for(e=t.nodeType?[t]:t,n=0;n<e.length;n+=1)if(e[n]===r)return!0;return!1}return!1},index:function(){var t,e=this[0];if(e){for(t=0;null!==(e=e.previousSibling);)1===e.nodeType&&(t+=1);return t}},eq:function(t){if(void 0===t)return this;var e,n=this.length;return new a(t>n-1?[]:t<0?(e=n+t)<0?[]:[this[e]]:[this[t]])},append:function(){for(var t,e=0;e<arguments.length;e+=1){t=e<0||arguments.length<=e?void 0:arguments[e];for(var n=0;n<this.length;n+=1)if("string"==typeof t){var r=i.createElement("div");for(r.innerHTML=t;r.firstChild;)this[n].appendChild(r.firstChild)}else if(t instanceof a)for(var o=0;o<t.length;o+=1)this[n].appendChild(t[o]);else this[n].appendChild(t)}return this},prepend:function(t){var e,n;for(e=0;e<this.length;e+=1)if("string"==typeof t){var r=i.createElement("div");for(r.innerHTML=t,n=r.childNodes.length-1;n>=0;n-=1)this[e].insertBefore(r.childNodes[n],this[e].childNodes[0])}else if(t instanceof a)for(n=0;n<t.length;n+=1)this[e].insertBefore(t[n],this[e].childNodes[0]);else this[e].insertBefore(t,this[e].childNodes[0]);return this},next:function(t){return this.length>0?t?this[0].nextElementSibling&&s(this[0].nextElementSibling).is(t)?new a([this[0].nextElementSibling]):new a([]):this[0].nextElementSibling?new a([this[0].nextElementSibling]):new a([]):new a([])},nextAll:function(t){var e=[],n=this[0];if(!n)return new a([]);for(;n.nextElementSibling;){var r=n.nextElementSibling;t?s(r).is(t)&&e.push(r):e.push(r),n=r}return new a(e)},prev:function(t){if(this.length>0){var e=this[0];return t?e.previousElementSibling&&s(e.previousElementSibling).is(t)?new a([e.previousElementSibling]):new a([]):e.previousElementSibling?new a([e.previousElementSibling]):new a([])}return new a([])},prevAll:function(t){var e=[],n=this[0];if(!n)return new a([]);for(;n.previousElementSibling;){var r=n.previousElementSibling;t?s(r).is(t)&&e.push(r):e.push(r),n=r}return new a(e)},parent:function(t){for(var e=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(t?s(this[n].parentNode).is(t)&&e.push(this[n].parentNode):e.push(this[n].parentNode));return s(u(e))},parents:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=this[n].parentNode;r;)t?s(r).is(t)&&e.push(r):e.push(r),r=r.parentNode;return s(u(e))},closest:function(t){var e=this;return void 0===t?new a([]):(e.is(t)||(e=e.parents(t).eq(0)),e)},find:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(t),i=0;i<r.length;i+=1)e.push(r[i]);return new a(e)},children:function(t){for(var e=[],n=0;n<this.length;n+=1)for(var r=this[n].childNodes,i=0;i<r.length;i+=1)t?1===r[i].nodeType&&s(r[i]).is(t)&&e.push(r[i]):1===r[i].nodeType&&e.push(r[i]);return new a(u(e))},filter:function(t){for(var e=[],n=this,r=0;r<n.length;r+=1)t.call(n[r],r,n[r])&&e.push(n[r]);return new a(e)},remove:function(){for(var t=0;t<this.length;t+=1)this[t].parentNode&&this[t].parentNode.removeChild(this[t]);return this},add:function(){for(var t,e,n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];for(t=0;t<i.length;t+=1){var a=s(i[t]);for(e=0;e<a.length;e+=1)n[n.length]=a[e],n.length+=1}return n},styles:function(){return this[0]?o.getComputedStyle(this[0],null):{}}};Object.keys(_).forEach((function(t){s.fn[t]=s.fn[t]||_[t]}));var b={deleteProps:function(t){var e=t;Object.keys(e).forEach((function(t){try{e[t]=null}catch(t){}try{delete e[t]}catch(t){}}))},nextTick:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return setTimeout(t,e)},now:function(){return Date.now()},getTranslate:function(t){var e,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=o.getComputedStyle(t,null);return o.WebKitCSSMatrix?((n=a.transform||a.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(t){return t.replace(",",".")})).join(", ")),r=new o.WebKitCSSMatrix("none"===n?"":n)):e=(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===i&&(n=o.WebKitCSSMatrix?r.m41:16===e.length?parseFloat(e[12]):parseFloat(e[4])),"y"===i&&(n=o.WebKitCSSMatrix?r.m42:16===e.length?parseFloat(e[13]):parseFloat(e[5])),n||0},parseUrlQuery:function(t){var e,n,r,i,a={},s=t||o.location.href;if("string"==typeof s&&s.length)for(i=(n=(s=s.indexOf("?")>-1?s.replace(/\S*\?/,""):"").split("&").filter((function(t){return""!==t}))).length,e=0;e<i;e+=1)r=n[e].replace(/#\S+/g,"").split("="),a[decodeURIComponent(r[0])]=void 0===r[1]?void 0:decodeURIComponent(r[1])||"";return a},isObject:function(t){return"object"===m(t)&&null!==t&&t.constructor&&t.constructor===Object},extend:function(){for(var t=Object(arguments.length<=0?void 0:arguments[0]),e=1;e<arguments.length;e+=1){var n=e<0||arguments.length<=e?void 0:arguments[e];if(null!=n)for(var r=Object.keys(Object(n)),i=0,o=r.length;i<o;i+=1){var a=r[i],s=Object.getOwnPropertyDescriptor(n,a);void 0!==s&&s.enumerable&&(b.isObject(t[a])&&b.isObject(n[a])?b.extend(t[a],n[a]):!b.isObject(t[a])&&b.isObject(n[a])?(t[a]={},b.extend(t[a],n[a])):t[a]=n[a])}}return t}},x={touch:o.Modernizr&&!0===o.Modernizr.touch||!!(o.navigator.maxTouchPoints>0||"ontouchstart"in o||o.DocumentTouch&&i instanceof o.DocumentTouch),pointerEvents:!!o.PointerEvent&&"maxTouchPoints"in o.navigator&&o.navigator.maxTouchPoints>0,observer:"MutationObserver"in o||"WebkitMutationObserver"in o,passiveListener:function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});o.addEventListener("testPassiveListener",null,e)}catch(t){}return t}(),gestures:"ongesturestart"in o},w=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(this,t);var n=this;n.params=e,n.eventsListeners={},n.params&&n.params.on&&Object.keys(n.params.on).forEach((function(t){n.on(t,n.params.on[t])}))}return y(t,[{key:"on",value:function(t,e,n){var r=this;if("function"!=typeof e)return r;var i=n?"unshift":"push";return t.split(" ").forEach((function(t){r.eventsListeners[t]||(r.eventsListeners[t]=[]),r.eventsListeners[t][i](e)})),r}},{key:"once",value:function(t,e,n){var r=this;if("function"!=typeof e)return r;function i(){r.off(t,i),i.f7proxy&&delete i.f7proxy;for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];e.apply(r,o)}return i.f7proxy=e,r.on(t,i,n)}},{key:"off",value:function(t,e){var n=this;return n.eventsListeners?(t.split(" ").forEach((function(t){void 0===e?n.eventsListeners[t]=[]:n.eventsListeners[t]&&n.eventsListeners[t].length&&n.eventsListeners[t].forEach((function(r,i){(r===e||r.f7proxy&&r.f7proxy===e)&&n.eventsListeners[t].splice(i,1)}))})),n):n}},{key:"emit",value:function(){var t,e,n,r=this;if(!r.eventsListeners)return r;for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];"string"==typeof o[0]||Array.isArray(o[0])?(t=o[0],e=o.slice(1,o.length),n=r):(t=o[0].events,e=o[0].data,n=o[0].context||r);var s=Array.isArray(t)?t:t.split(" ");return s.forEach((function(t){if(r.eventsListeners&&r.eventsListeners[t]){var i=[];r.eventsListeners[t].forEach((function(t){i.push(t)})),i.forEach((function(t){t.apply(n,e)}))}})),r}},{key:"useModulesParams",value:function(t){var e=this;e.modules&&Object.keys(e.modules).forEach((function(n){var r=e.modules[n];r.params&&b.extend(t,r.params)}))}},{key:"useModules",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this;e.modules&&Object.keys(e.modules).forEach((function(n){var r=e.modules[n],i=t[n]||{};r.instance&&Object.keys(r.instance).forEach((function(t){var n=r.instance[t];e[t]="function"==typeof n?n.bind(e):n})),r.on&&e.on&&Object.keys(r.on).forEach((function(t){e.on(t,r.on[t])})),r.create&&r.create.bind(e)(i)}))}}],[{key:"installModule",value:function(t){var e=this;e.prototype.modules||(e.prototype.modules={});var n=t.name||"".concat(Object.keys(e.prototype.modules).length,"_").concat(b.now());if(e.prototype.modules[n]=t,t.proto&&Object.keys(t.proto).forEach((function(n){e.prototype[n]=t.proto[n]})),t.static&&Object.keys(t.static).forEach((function(n){e[n]=t.static[n]})),t.install){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t.install.apply(e,i)}return e}},{key:"use",value:function(t){var e=this;if(Array.isArray(t))return t.forEach((function(t){return e.installModule(t)})),e;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.installModule.apply(e,[t].concat(r))}},{key:"components",set:function(t){this.use&&this.use(t)}}]),t}();var E={updateSize:function(){var t,e,n=this,r=n.$el;t=void 0!==n.params.width?n.params.width:r[0].clientWidth,e=void 0!==n.params.height?n.params.height:r[0].clientHeight,0===t&&n.isHorizontal()||0===e&&n.isVertical()||(t=t-parseInt(r.css("padding-left"),10)-parseInt(r.css("padding-right"),10),e=e-parseInt(r.css("padding-top"),10)-parseInt(r.css("padding-bottom"),10),b.extend(n,{width:t,height:e,size:n.isHorizontal()?t:e}))},updateSlides:function(){var t=this,e=t.params,n=t.$wrapperEl,r=t.size,i=t.rtlTranslate,a=t.wrongRTL,s=t.virtual&&e.virtual.enabled,u=s?t.virtual.slides.length:t.slides.length,c=n.children(".".concat(t.params.slideClass)),l=s?t.virtual.slides.length:c.length,h=[],p=[],f=[];function d(t){return!e.cssMode||t!==c.length-1}var g=e.slidesOffsetBefore;"function"==typeof g&&(g=e.slidesOffsetBefore.call(t));var v=e.slidesOffsetAfter;"function"==typeof v&&(v=e.slidesOffsetAfter.call(t));var y=t.snapGrid.length,m=t.snapGrid.length,_=e.spaceBetween,x=-g,w=0,E=0;if(void 0!==r){var S,C;"string"==typeof _&&_.indexOf("%")>=0&&(_=parseFloat(_.replace("%",""))/100*r),t.virtualSize=-_,i?c.css({marginLeft:"",marginTop:""}):c.css({marginRight:"",marginBottom:""}),e.slidesPerColumn>1&&(S=Math.floor(l/e.slidesPerColumn)===l/t.params.slidesPerColumn?l:Math.ceil(l/e.slidesPerColumn)*e.slidesPerColumn,"auto"!==e.slidesPerView&&"row"===e.slidesPerColumnFill&&(S=Math.max(S,e.slidesPerView*e.slidesPerColumn)));for(var T,I=e.slidesPerColumn,O=S/I,M=Math.floor(l/e.slidesPerColumn),P=0;P<l;P+=1){C=0;var L=c.eq(P);if(e.slidesPerColumn>1){var R=void 0,A=void 0,k=void 0;if("row"===e.slidesPerColumnFill&&e.slidesPerGroup>1){var N=Math.floor(P/(e.slidesPerGroup*e.slidesPerColumn)),D=P-e.slidesPerColumn*e.slidesPerGroup*N,F=0===N?e.slidesPerGroup:Math.min(Math.ceil((l-N*I*e.slidesPerGroup)/I),e.slidesPerGroup);R=(A=D-(k=Math.floor(D/F))*F+N*e.slidesPerGroup)+k*S/I,L.css({"-webkit-box-ordinal-group":R,"-moz-box-ordinal-group":R,"-ms-flex-order":R,"-webkit-order":R,order:R})}else"column"===e.slidesPerColumnFill?(k=P-(A=Math.floor(P/I))*I,(A>M||A===M&&k===I-1)&&(k+=1)>=I&&(k=0,A+=1)):A=P-(k=Math.floor(P/O))*O;L.css("margin-".concat(t.isHorizontal()?"top":"left"),0!==k&&e.spaceBetween&&"".concat(e.spaceBetween,"px"))}if("none"!==L.css("display")){if("auto"===e.slidesPerView){var j=o.getComputedStyle(L[0],null),z=L[0].style.transform,B=L[0].style.webkitTransform;if(z&&(L[0].style.transform="none"),B&&(L[0].style.webkitTransform="none"),e.roundLengths)C=t.isHorizontal()?L.outerWidth(!0):L.outerHeight(!0);else if(t.isHorizontal()){var G=parseFloat(j.getPropertyValue("width")),X=parseFloat(j.getPropertyValue("padding-left")),U=parseFloat(j.getPropertyValue("padding-right")),q=parseFloat(j.getPropertyValue("margin-left")),Y=parseFloat(j.getPropertyValue("margin-right")),V=j.getPropertyValue("box-sizing");C=V&&"border-box"===V?G+q+Y:G+X+U+q+Y}else{var H=parseFloat(j.getPropertyValue("height")),W=parseFloat(j.getPropertyValue("padding-top")),K=parseFloat(j.getPropertyValue("padding-bottom")),$=parseFloat(j.getPropertyValue("margin-top")),Z=parseFloat(j.getPropertyValue("margin-bottom")),J=j.getPropertyValue("box-sizing");C=J&&"border-box"===J?H+$+Z:H+W+K+$+Z}z&&(L[0].style.transform=z),B&&(L[0].style.webkitTransform=B),e.roundLengths&&(C=Math.floor(C))}else C=(r-(e.slidesPerView-1)*_)/e.slidesPerView,e.roundLengths&&(C=Math.floor(C)),c[P]&&(t.isHorizontal()?c[P].style.width="".concat(C,"px"):c[P].style.height="".concat(C,"px"));c[P]&&(c[P].swiperSlideSize=C),f.push(C),e.centeredSlides?(x=x+C/2+w/2+_,0===w&&0!==P&&(x=x-r/2-_),0===P&&(x=x-r/2-_),Math.abs(x)<.001&&(x=0),e.roundLengths&&(x=Math.floor(x)),E%e.slidesPerGroup==0&&h.push(x),p.push(x)):(e.roundLengths&&(x=Math.floor(x)),(E-Math.min(t.params.slidesPerGroupSkip,E))%t.params.slidesPerGroup==0&&h.push(x),p.push(x),x=x+C+_),t.virtualSize+=C+_,w=C,E+=1}}if(t.virtualSize=Math.max(t.virtualSize,r)+v,i&&a&&("slide"===e.effect||"coverflow"===e.effect)&&n.css({width:"".concat(t.virtualSize+e.spaceBetween,"px")}),e.setWrapperSize&&(t.isHorizontal()?n.css({width:"".concat(t.virtualSize+e.spaceBetween,"px")}):n.css({height:"".concat(t.virtualSize+e.spaceBetween,"px")})),e.slidesPerColumn>1&&(t.virtualSize=(C+e.spaceBetween)*S,t.virtualSize=Math.ceil(t.virtualSize/e.slidesPerColumn)-e.spaceBetween,t.isHorizontal()?n.css({width:"".concat(t.virtualSize+e.spaceBetween,"px")}):n.css({height:"".concat(t.virtualSize+e.spaceBetween,"px")}),e.centeredSlides)){T=[];for(var Q=0;Q<h.length;Q+=1){var tt=h[Q];e.roundLengths&&(tt=Math.floor(tt)),h[Q]<t.virtualSize+h[0]&&T.push(tt)}h=T}if(!e.centeredSlides){T=[];for(var et=0;et<h.length;et+=1){var nt=h[et];e.roundLengths&&(nt=Math.floor(nt)),h[et]<=t.virtualSize-r&&T.push(nt)}h=T,Math.floor(t.virtualSize-r)-Math.floor(h[h.length-1])>1&&h.push(t.virtualSize-r)}if(0===h.length&&(h=[0]),0!==e.spaceBetween&&(t.isHorizontal()?i?c.filter(d).css({marginLeft:"".concat(_,"px")}):c.filter(d).css({marginRight:"".concat(_,"px")}):c.filter(d).css({marginBottom:"".concat(_,"px")})),e.centeredSlides&&e.centeredSlidesBounds){var rt=0;f.forEach((function(t){rt+=t+(e.spaceBetween?e.spaceBetween:0)}));var it=(rt-=e.spaceBetween)-r;h=h.map((function(t){return t<0?-g:t>it?it+v:t}))}if(e.centerInsufficientSlides){var ot=0;if(f.forEach((function(t){ot+=t+(e.spaceBetween?e.spaceBetween:0)})),(ot-=e.spaceBetween)<r){var at=(r-ot)/2;h.forEach((function(t,e){h[e]=t-at})),p.forEach((function(t,e){p[e]=t+at}))}}b.extend(t,{slides:c,snapGrid:h,slidesGrid:p,slidesSizesGrid:f}),l!==u&&t.emit("slidesLengthChange"),h.length!==y&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),p.length!==m&&t.emit("slidesGridLengthChange"),(e.watchSlidesProgress||e.watchSlidesVisibility)&&t.updateSlidesOffset()}},updateAutoHeight:function(t){var e,n=this,r=[],i=0;if("number"==typeof t?n.setTransition(t):!0===t&&n.setTransition(n.params.speed),"auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)for(e=0;e<Math.ceil(n.params.slidesPerView);e+=1){var o=n.activeIndex+e;if(o>n.slides.length)break;r.push(n.slides.eq(o)[0])}else r.push(n.slides.eq(n.activeIndex)[0]);for(e=0;e<r.length;e+=1)if(void 0!==r[e]){var a=r[e].offsetHeight;i=a>i?a:i}i&&n.$wrapperEl.css("height","".concat(i,"px"))},updateSlidesOffset:function(){for(var t=this.slides,e=0;e<t.length;e+=1)t[e].swiperSlideOffset=this.isHorizontal()?t[e].offsetLeft:t[e].offsetTop},updateSlidesProgress:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this&&this.translate||0,e=this,n=e.params,r=e.slides,i=e.rtlTranslate;if(0!==r.length){void 0===r[0].swiperSlideOffset&&e.updateSlidesOffset();var o=-t;i&&(o=t),r.removeClass(n.slideVisibleClass),e.visibleSlidesIndexes=[],e.visibleSlides=[];for(var a=0;a<r.length;a+=1){var u=r[a],c=(o+(n.centeredSlides?e.minTranslate():0)-u.swiperSlideOffset)/(u.swiperSlideSize+n.spaceBetween);if(n.watchSlidesVisibility){var l=-(o-u.swiperSlideOffset),h=l+e.slidesSizesGrid[a],p=l>=0&&l<e.size-1||h>1&&h<=e.size||l<=0&&h>=e.size;p&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(a),r.eq(a).addClass(n.slideVisibleClass))}u.progress=i?-c:c}e.visibleSlides=s(e.visibleSlides)}},updateProgress:function(t){var e=this;if(void 0===t){var n=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*n||0}var r=e.params,i=e.maxTranslate()-e.minTranslate(),o=e.progress,a=e.isBeginning,s=e.isEnd,u=a,c=s;0===i?(o=0,a=!0,s=!0):(a=(o=(t-e.minTranslate())/i)<=0,s=o>=1),b.extend(e,{progress:o,isBeginning:a,isEnd:s}),(r.watchSlidesProgress||r.watchSlidesVisibility)&&e.updateSlidesProgress(t),a&&!u&&e.emit("reachBeginning toEdge"),s&&!c&&e.emit("reachEnd toEdge"),(u&&!a||c&&!s)&&e.emit("fromEdge"),e.emit("progress",o)},updateSlidesClasses:function(){var t,e=this,n=e.slides,r=e.params,i=e.$wrapperEl,o=e.activeIndex,a=e.realIndex,s=e.virtual&&r.virtual.enabled;n.removeClass("".concat(r.slideActiveClass," ").concat(r.slideNextClass," ").concat(r.slidePrevClass," ").concat(r.slideDuplicateActiveClass," ").concat(r.slideDuplicateNextClass," ").concat(r.slideDuplicatePrevClass)),(t=s?e.$wrapperEl.find(".".concat(r.slideClass,'[data-swiper-slide-index="').concat(o,'"]')):n.eq(o)).addClass(r.slideActiveClass),r.loop&&(t.hasClass(r.slideDuplicateClass)?i.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(a,'"]')).addClass(r.slideDuplicateActiveClass):i.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(a,'"]')).addClass(r.slideDuplicateActiveClass));var u=t.nextAll(".".concat(r.slideClass)).eq(0).addClass(r.slideNextClass);r.loop&&0===u.length&&(u=n.eq(0)).addClass(r.slideNextClass);var c=t.prevAll(".".concat(r.slideClass)).eq(0).addClass(r.slidePrevClass);r.loop&&0===c.length&&(c=n.eq(-1)).addClass(r.slidePrevClass),r.loop&&(u.hasClass(r.slideDuplicateClass)?i.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(u.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicateNextClass):i.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(u.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicateNextClass),c.hasClass(r.slideDuplicateClass)?i.children(".".concat(r.slideClass,":not(.").concat(r.slideDuplicateClass,')[data-swiper-slide-index="').concat(c.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicatePrevClass):i.children(".".concat(r.slideClass,".").concat(r.slideDuplicateClass,'[data-swiper-slide-index="').concat(c.attr("data-swiper-slide-index"),'"]')).addClass(r.slideDuplicatePrevClass))},updateActiveIndex:function(t){var e,n=this,r=n.rtlTranslate?n.translate:-n.translate,i=n.slidesGrid,o=n.snapGrid,a=n.params,s=n.activeIndex,u=n.realIndex,c=n.snapIndex,l=t;if(void 0===l){for(var h=0;h<i.length;h+=1)void 0!==i[h+1]?r>=i[h]&&r<i[h+1]-(i[h+1]-i[h])/2?l=h:r>=i[h]&&r<i[h+1]&&(l=h+1):r>=i[h]&&(l=h);a.normalizeSlideIndex&&(l<0||void 0===l)&&(l=0)}if(o.indexOf(r)>=0)e=o.indexOf(r);else{var p=Math.min(a.slidesPerGroupSkip,l);e=p+Math.floor((l-p)/a.slidesPerGroup)}if(e>=o.length&&(e=o.length-1),l!==s){var f=parseInt(n.slides.eq(l).attr("data-swiper-slide-index")||l,10);b.extend(n,{snapIndex:e,realIndex:f,previousIndex:s,activeIndex:l}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),u!==f&&n.emit("realIndexChange"),(n.initialized||n.runCallbacksOnInit)&&n.emit("slideChange")}else e!==c&&(n.snapIndex=e,n.emit("snapIndexChange"))},updateClickedSlide:function(t){var e=this,n=e.params,r=s(t.target).closest(".".concat(n.slideClass))[0],i=!1;if(r)for(var o=0;o<e.slides.length;o+=1)e.slides[o]===r&&(i=!0);if(!r||!i)return e.clickedSlide=void 0,void(e.clickedIndex=void 0);e.clickedSlide=r,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(s(r).attr("data-swiper-slide-index"),10):e.clickedIndex=s(r).index(),n.slideToClickedSlide&&void 0!==e.clickedIndex&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}};var S={getTranslate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isHorizontal()?"x":"y",e=this,n=e.params,r=e.rtlTranslate,i=e.translate,o=e.$wrapperEl;if(n.virtualTranslate)return r?-i:i;if(n.cssMode)return i;var a=b.getTranslate(o[0],t);return r&&(a=-a),a||0},setTranslate:function(t,e){var n=this,r=n.rtlTranslate,i=n.params,o=n.$wrapperEl,a=n.wrapperEl,s=n.progress,u=0,c=0;n.isHorizontal()?u=r?-t:t:c=t,i.roundLengths&&(u=Math.floor(u),c=Math.floor(c)),i.cssMode?a[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-u:-c:i.virtualTranslate||o.transform("translate3d(".concat(u,"px, ").concat(c,"px, ").concat(0,"px)")),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?u:c;var l=n.maxTranslate()-n.minTranslate();(0===l?0:(t-n.minTranslate())/l)!==s&&n.updateProgress(t),n.emit("setTranslate",n.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,o=this,a=o.params,s=o.wrapperEl;if(o.animating&&a.preventInteractionOnTransition)return!1;var u,c=o.minTranslate(),l=o.maxTranslate();if(u=r&&t>c?c:r&&t<l?l:t,o.updateProgress(u),a.cssMode){var h,p=o.isHorizontal();if(0===e)s[p?"scrollLeft":"scrollTop"]=-u;else if(s.scrollTo)s.scrollTo((d(h={},p?"left":"top",-u),d(h,"behavior","smooth"),h));else s[p?"scrollLeft":"scrollTop"]=-u;return!0}return 0===e?(o.setTransition(0),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",e,i),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(u),n&&(o.emit("beforeTransitionStart",e,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(t){o&&!o.destroyed&&t.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}};var C={setTransition:function(t,e){var n=this;n.params.cssMode||n.$wrapperEl.transition(t),n.emit("setTransition",t,e)},transitionStart:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=this,r=n.activeIndex,i=n.params,o=n.previousIndex;if(!i.cssMode){i.autoHeight&&n.updateAutoHeight();var a=e;if(a||(a=r>o?"next":r<o?"prev":"reset"),n.emit("transitionStart"),t&&r!==o){if("reset"===a)return void n.emit("slideResetTransitionStart");n.emit("slideChangeTransitionStart"),"next"===a?n.emit("slideNextTransitionStart"):n.emit("slidePrevTransitionStart")}}},transitionEnd:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,n=this,r=n.activeIndex,i=n.previousIndex,o=n.params;if(n.animating=!1,!o.cssMode){n.setTransition(0);var a=e;if(a||(a=r>i?"next":r<i?"prev":"reset"),n.emit("transitionEnd"),t&&r!==i){if("reset"===a)return void n.emit("slideResetTransitionEnd");n.emit("slideChangeTransitionEnd"),"next"===a?n.emit("slideNextTransitionEnd"):n.emit("slidePrevTransitionEnd")}}}};var T={slideTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,i=this,o=t;o<0&&(o=0);var a=i.params,s=i.snapGrid,u=i.slidesGrid,c=i.previousIndex,l=i.activeIndex,h=i.rtlTranslate,p=i.wrapperEl;if(i.animating&&a.preventInteractionOnTransition)return!1;var f=Math.min(i.params.slidesPerGroupSkip,o),g=f+Math.floor((o-f)/i.params.slidesPerGroup);g>=s.length&&(g=s.length-1),(l||a.initialSlide||0)===(c||0)&&n&&i.emit("beforeSlideChangeStart");var v,y=-s[g];if(i.updateProgress(y),a.normalizeSlideIndex)for(var m=0;m<u.length;m+=1)-Math.floor(100*y)>=Math.floor(100*u[m])&&(o=m);if(i.initialized&&o!==l){if(!i.allowSlideNext&&y<i.translate&&y<i.minTranslate())return!1;if(!i.allowSlidePrev&&y>i.translate&&y>i.maxTranslate()&&(l||0)!==o)return!1}if(v=o>l?"next":o<l?"prev":"reset",h&&-y===i.translate||!h&&y===i.translate)return i.updateActiveIndex(o),a.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),"slide"!==a.effect&&i.setTranslate(y),"reset"!==v&&(i.transitionStart(n,v),i.transitionEnd(n,v)),!1;if(a.cssMode){var _,b=i.isHorizontal();if(0===e)p[b?"scrollLeft":"scrollTop"]=-y;else if(p.scrollTo)p.scrollTo((d(_={},b?"left":"top",-y),d(_,"behavior","smooth"),_));else p[b?"scrollLeft":"scrollTop"]=-y;return!0}return 0===e?(i.setTransition(0),i.setTranslate(y),i.updateActiveIndex(o),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,r),i.transitionStart(n,v),i.transitionEnd(n,v)):(i.setTransition(e),i.setTranslate(y),i.updateActiveIndex(o),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,r),i.transitionStart(n,v),i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(t){i&&!i.destroyed&&t.target===this&&(i.$wrapperEl[0].removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.$wrapperEl[0].removeEventListener("webkitTransitionEnd",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(n,v))}),i.$wrapperEl[0].addEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.$wrapperEl[0].addEventListener("webkitTransitionEnd",i.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,i=this,o=t;return i.params.loop&&(o+=i.loopedSlides),i.slideTo(o,e,n,r)},slideNext:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this,i=r.params,o=r.animating,a=r.activeIndex<i.slidesPerGroupSkip?1:i.slidesPerGroup;if(i.loop){if(o)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}return r.slideTo(r.activeIndex+a,t,e,n)},slidePrev:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this,i=r.params,o=r.animating,a=r.snapGrid,s=r.slidesGrid,u=r.rtlTranslate;if(i.loop){if(o)return!1;r.loopFix(),r._clientLeft=r.$wrapperEl[0].clientLeft}var c=u?r.translate:-r.translate;function l(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}var h,p=l(c),f=a.map((function(t){return l(t)})),d=(s.map((function(t){return l(t)})),a[f.indexOf(p)],a[f.indexOf(p)-1]);return void 0===d&&i.cssMode&&a.forEach((function(t){!d&&p>=t&&(d=t)})),void 0!==d&&(h=s.indexOf(d))<0&&(h=r.activeIndex-1),r.slideTo(h,t,e,n)},slideReset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this;return r.slideTo(r.activeIndex,t,e,n)},slideToClosest:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=this,o=i.activeIndex,a=Math.min(i.params.slidesPerGroupSkip,o),s=a+Math.floor((o-a)/i.params.slidesPerGroup),u=i.rtlTranslate?i.translate:-i.translate;if(u>=i.snapGrid[s]){var c=i.snapGrid[s],l=i.snapGrid[s+1];u-c>(l-c)*r&&(o+=i.params.slidesPerGroup)}else{var h=i.snapGrid[s-1],p=i.snapGrid[s];u-h<=(p-h)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,t,e,n)},slideToClickedSlide:function(){var t,e=this,n=e.params,r=e.$wrapperEl,i="auto"===n.slidesPerView?e.slidesPerViewDynamic():n.slidesPerView,o=e.clickedIndex;if(n.loop){if(e.animating)return;t=parseInt(s(e.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?o<e.loopedSlides-i/2||o>e.slides.length-e.loopedSlides+i/2?(e.loopFix(),o=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(t,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),b.nextTick((function(){e.slideTo(o)}))):e.slideTo(o):o>e.slides.length-i?(e.loopFix(),o=r.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(t,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),b.nextTick((function(){e.slideTo(o)}))):e.slideTo(o)}else e.slideTo(o)}};var I={loopCreate:function(){var t=this,e=t.params,n=t.$wrapperEl;n.children(".".concat(e.slideClass,".").concat(e.slideDuplicateClass)).remove();var r=n.children(".".concat(e.slideClass));if(e.loopFillGroupWithBlank){var o=e.slidesPerGroup-r.length%e.slidesPerGroup;if(o!==e.slidesPerGroup){for(var a=0;a<o;a+=1){var u=s(i.createElement("div")).addClass("".concat(e.slideClass," ").concat(e.slideBlankClass));n.append(u)}r=n.children(".".concat(e.slideClass))}}"auto"!==e.slidesPerView||e.loopedSlides||(e.loopedSlides=r.length),t.loopedSlides=Math.ceil(parseFloat(e.loopedSlides||e.slidesPerView,10)),t.loopedSlides+=e.loopAdditionalSlides,t.loopedSlides>r.length&&(t.loopedSlides=r.length);var c=[],l=[];r.each((function(e,n){var i=s(n);e<t.loopedSlides&&l.push(n),e<r.length&&e>=r.length-t.loopedSlides&&c.push(n),i.attr("data-swiper-slide-index",e)}));for(var h=0;h<l.length;h+=1)n.append(s(l[h].cloneNode(!0)).addClass(e.slideDuplicateClass));for(var p=c.length-1;p>=0;p-=1)n.prepend(s(c[p].cloneNode(!0)).addClass(e.slideDuplicateClass))},loopFix:function(){var t=this;t.emit("beforeLoopFix");var e,n=t.activeIndex,r=t.slides,i=t.loopedSlides,o=t.allowSlidePrev,a=t.allowSlideNext,s=t.snapGrid,u=t.rtlTranslate;t.allowSlidePrev=!0,t.allowSlideNext=!0;var c=-s[n]-t.getTranslate();if(n<i)e=r.length-3*i+n,e+=i,t.slideTo(e,0,!1,!0)&&0!==c&&t.setTranslate((u?-t.translate:t.translate)-c);else if(n>=r.length-i){e=-r.length+n+i,e+=i,t.slideTo(e,0,!1,!0)&&0!==c&&t.setTranslate((u?-t.translate:t.translate)-c)}t.allowSlidePrev=o,t.allowSlideNext=a,t.emit("loopFix")},loopDestroy:function(){var t=this,e=t.$wrapperEl,n=t.params,r=t.slides;e.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass,",.").concat(n.slideClass,".").concat(n.slideBlankClass)).remove(),r.removeAttr("data-swiper-slide-index")}};var O={setGrabCursor:function(t){var e=this;if(!(x.touch||!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)){var n=e.el;n.style.cursor="move",n.style.cursor=t?"-webkit-grabbing":"-webkit-grab",n.style.cursor=t?"-moz-grabbin":"-moz-grab",n.style.cursor=t?"grabbing":"grab"}},unsetGrabCursor:function(){var t=this;x.touch||t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.el.style.cursor="")}};var M,P,L,R,A,k,N,D,F,j,z,B,G,X,U,q={appendSlide:function(t){var e=this,n=e.$wrapperEl,r=e.params;if(r.loop&&e.loopDestroy(),"object"===m(t)&&"length"in t)for(var i=0;i<t.length;i+=1)t[i]&&n.append(t[i]);else n.append(t);r.loop&&e.loopCreate(),r.observer&&x.observer||e.update()},prependSlide:function(t){var e=this,n=e.params,r=e.$wrapperEl,i=e.activeIndex;n.loop&&e.loopDestroy();var o=i+1;if("object"===m(t)&&"length"in t){for(var a=0;a<t.length;a+=1)t[a]&&r.prepend(t[a]);o=i+t.length}else r.prepend(t);n.loop&&e.loopCreate(),n.observer&&x.observer||e.update(),e.slideTo(o,0,!1)},addSlide:function(t,e){var n=this,r=n.$wrapperEl,i=n.params,o=n.activeIndex;i.loop&&(o-=n.loopedSlides,n.loopDestroy(),n.slides=r.children(".".concat(i.slideClass)));var a=n.slides.length;if(t<=0)n.prependSlide(e);else if(t>=a)n.appendSlide(e);else{for(var s=o>t?o+1:o,u=[],c=a-1;c>=t;c-=1){var l=n.slides.eq(c);l.remove(),u.unshift(l)}if("object"===m(e)&&"length"in e){for(var h=0;h<e.length;h+=1)e[h]&&r.append(e[h]);s=o>t?o+e.length:o}else r.append(e);for(var p=0;p<u.length;p+=1)r.append(u[p]);i.loop&&n.loopCreate(),i.observer&&x.observer||n.update(),i.loop?n.slideTo(s+n.loopedSlides,0,!1):n.slideTo(s,0,!1)}},removeSlide:function(t){var e=this,n=e.params,r=e.$wrapperEl,i=e.activeIndex;n.loop&&(i-=e.loopedSlides,e.loopDestroy(),e.slides=r.children(".".concat(n.slideClass)));var o,a=i;if("object"===m(t)&&"length"in t){for(var s=0;s<t.length;s+=1)o=t[s],e.slides[o]&&e.slides.eq(o).remove(),o<a&&(a-=1);a=Math.max(a,0)}else o=t,e.slides[o]&&e.slides.eq(o).remove(),o<a&&(a-=1),a=Math.max(a,0);n.loop&&e.loopCreate(),n.observer&&x.observer||e.update(),n.loop?e.slideTo(a+e.loopedSlides,0,!1):e.slideTo(a,0,!1)},removeAllSlides:function(){for(var t=[],e=0;e<this.slides.length;e+=1)t.push(e);this.removeSlide(t)}},Y=(M=o.navigator.platform,P=o.navigator.userAgent,L={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!o.cordova&&!o.phonegap),phonegap:!(!o.cordova&&!o.phonegap),electron:!1},R=o.screen.width,A=o.screen.height,k=P.match(/(Android);?[\s\/]+([\d.]+)?/),N=P.match(/(iPad).*OS\s([\d_]+)/),D=P.match(/(iPod)(.*OS\s([\d_]+))?/),F=!N&&P.match(/(iPhone\sOS|iOS)\s([\d_]+)/),j=P.indexOf("MSIE ")>=0||P.indexOf("Trident/")>=0,z=P.indexOf("Edge/")>=0,B=P.indexOf("Gecko/")>=0&&P.indexOf("Firefox/")>=0,G="Win32"===M,X=P.toLowerCase().indexOf("electron")>=0,U="MacIntel"===M,!N&&U&&x.touch&&(1024===R&&1366===A||834===R&&1194===A||834===R&&1112===A||768===R&&1024===A)&&(N=P.match(/(Version)\/([\d.]+)/),U=!1),L.ie=j,L.edge=z,L.firefox=B,k&&!G&&(L.os="android",L.osVersion=k[2],L.android=!0,L.androidChrome=P.toLowerCase().indexOf("chrome")>=0),(N||F||D)&&(L.os="ios",L.ios=!0),F&&!D&&(L.osVersion=F[2].replace(/_/g,"."),L.iphone=!0),N&&(L.osVersion=N[2].replace(/_/g,"."),L.ipad=!0),D&&(L.osVersion=D[3]?D[3].replace(/_/g,"."):null,L.ipod=!0),L.ios&&L.osVersion&&P.indexOf("Version/")>=0&&"10"===L.osVersion.split(".")[0]&&(L.osVersion=P.toLowerCase().split("version/")[1].split(" ")[0]),L.webView=!(!(F||N||D)||!P.match(/.*AppleWebKit(?!.*Safari)/i)&&!o.navigator.standalone)||o.matchMedia&&o.matchMedia("(display-mode: standalone)").matches,L.webview=L.webView,L.standalone=L.webView,L.desktop=!(L.ios||L.android)||X,L.desktop&&(L.electron=X,L.macos=U,L.windows=G,L.macos&&(L.os="macos"),L.windows&&(L.os="windows")),L.pixelRatio=o.devicePixelRatio||1,L);function V(t){var e=this,n=e.touchEventsData,r=e.params,a=e.touches;if(!e.animating||!r.preventInteractionOnTransition){var u=t;u.originalEvent&&(u=u.originalEvent);var c=s(u.target);if(("wrapper"!==r.touchEventsTarget||c.closest(e.wrapperEl).length)&&(n.isTouchEvent="touchstart"===u.type,(n.isTouchEvent||!("which"in u)||3!==u.which)&&!(!n.isTouchEvent&&"button"in u&&u.button>0||n.isTouched&&n.isMoved)))if(r.noSwiping&&c.closest(r.noSwipingSelector?r.noSwipingSelector:".".concat(r.noSwipingClass))[0])e.allowClick=!0;else if(!r.swipeHandler||c.closest(r.swipeHandler)[0]){a.currentX="touchstart"===u.type?u.targetTouches[0].pageX:u.pageX,a.currentY="touchstart"===u.type?u.targetTouches[0].pageY:u.pageY;var l=a.currentX,h=a.currentY,p=r.edgeSwipeDetection||r.iOSEdgeSwipeDetection,f=r.edgeSwipeThreshold||r.iOSEdgeSwipeThreshold;if(!p||!(l<=f||l>=o.screen.width-f)){if(b.extend(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=l,a.startY=h,n.touchStartTime=b.now(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1),"touchstart"!==u.type){var d=!0;c.is(n.formElements)&&(d=!1),i.activeElement&&s(i.activeElement).is(n.formElements)&&i.activeElement!==c[0]&&i.activeElement.blur();var g=d&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||g)&&u.preventDefault()}e.emit("touchStart",u)}}}}function H(t){var e=this,n=e.touchEventsData,r=e.params,o=e.touches,a=e.rtlTranslate,u=t;if(u.originalEvent&&(u=u.originalEvent),n.isTouched){if(!n.isTouchEvent||"mousemove"!==u.type){var c="touchmove"===u.type&&u.targetTouches&&(u.targetTouches[0]||u.changedTouches[0]),l="touchmove"===u.type?c.pageX:u.pageX,h="touchmove"===u.type?c.pageY:u.pageY;if(u.preventedByNestedSwiper)return o.startX=l,void(o.startY=h);if(!e.allowTouchMove)return e.allowClick=!1,void(n.isTouched&&(b.extend(o,{startX:l,startY:h,currentX:l,currentY:h}),n.touchStartTime=b.now()));if(n.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(e.isVertical()){if(h<o.startY&&e.translate<=e.maxTranslate()||h>o.startY&&e.translate>=e.minTranslate())return n.isTouched=!1,void(n.isMoved=!1)}else if(l<o.startX&&e.translate<=e.maxTranslate()||l>o.startX&&e.translate>=e.minTranslate())return;if(n.isTouchEvent&&i.activeElement&&u.target===i.activeElement&&s(u.target).is(n.formElements))return n.isMoved=!0,void(e.allowClick=!1);if(n.allowTouchCallbacks&&e.emit("touchMove",u),!(u.targetTouches&&u.targetTouches.length>1)){o.currentX=l,o.currentY=h;var p=o.currentX-o.startX,f=o.currentY-o.startY;if(!(e.params.threshold&&Math.sqrt(Math.pow(p,2)+Math.pow(f,2))<e.params.threshold)){var d;if(void 0===n.isScrolling)e.isHorizontal()&&o.currentY===o.startY||e.isVertical()&&o.currentX===o.startX?n.isScrolling=!1:p*p+f*f>=25&&(d=180*Math.atan2(Math.abs(f),Math.abs(p))/Math.PI,n.isScrolling=e.isHorizontal()?d>r.touchAngle:90-d>r.touchAngle);if(n.isScrolling&&e.emit("touchMoveOpposite",u),void 0===n.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(n.startMoving=!0)),n.isScrolling)n.isTouched=!1;else if(n.startMoving){e.allowClick=!1,r.cssMode||u.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&u.stopPropagation(),n.isMoved||(r.loop&&e.loopFix(),n.startTranslate=e.getTranslate(),e.setTransition(0),e.animating&&e.$wrapperEl.trigger("webkitTransitionEnd transitionend"),n.allowMomentumBounce=!1,!r.grabCursor||!0!==e.allowSlideNext&&!0!==e.allowSlidePrev||e.setGrabCursor(!0),e.emit("sliderFirstMove",u)),e.emit("sliderMove",u),n.isMoved=!0;var g=e.isHorizontal()?p:f;o.diff=g,g*=r.touchRatio,a&&(g=-g),e.swipeDirection=g>0?"prev":"next",n.currentTranslate=g+n.startTranslate;var v=!0,y=r.resistanceRatio;if(r.touchReleaseOnEdges&&(y=0),g>0&&n.currentTranslate>e.minTranslate()?(v=!1,r.resistance&&(n.currentTranslate=e.minTranslate()-1+Math.pow(-e.minTranslate()+n.startTranslate+g,y))):g<0&&n.currentTranslate<e.maxTranslate()&&(v=!1,r.resistance&&(n.currentTranslate=e.maxTranslate()+1-Math.pow(e.maxTranslate()-n.startTranslate-g,y))),v&&(u.preventedByNestedSwiper=!0),!e.allowSlideNext&&"next"===e.swipeDirection&&n.currentTranslate<n.startTranslate&&(n.currentTranslate=n.startTranslate),!e.allowSlidePrev&&"prev"===e.swipeDirection&&n.currentTranslate>n.startTranslate&&(n.currentTranslate=n.startTranslate),r.threshold>0){if(!(Math.abs(g)>r.threshold||n.allowThresholdMove))return void(n.currentTranslate=n.startTranslate);if(!n.allowThresholdMove)return n.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,n.currentTranslate=n.startTranslate,void(o.diff=e.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}r.followFinger&&!r.cssMode&&((r.freeMode||r.watchSlidesProgress||r.watchSlidesVisibility)&&(e.updateActiveIndex(),e.updateSlidesClasses()),r.freeMode&&(0===n.velocities.length&&n.velocities.push({position:o[e.isHorizontal()?"startX":"startY"],time:n.touchStartTime}),n.velocities.push({position:o[e.isHorizontal()?"currentX":"currentY"],time:b.now()})),e.updateProgress(n.currentTranslate),e.setTranslate(n.currentTranslate))}}}}}else n.startMoving&&n.isScrolling&&e.emit("touchMoveOpposite",u)}function W(t){var e=this,n=e.touchEventsData,r=e.params,i=e.touches,o=e.rtlTranslate,a=e.$wrapperEl,s=e.slidesGrid,u=e.snapGrid,c=t;if(c.originalEvent&&(c=c.originalEvent),n.allowTouchCallbacks&&e.emit("touchEnd",c),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&r.grabCursor&&e.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);r.grabCursor&&n.isMoved&&n.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);var l,h=b.now(),p=h-n.touchStartTime;if(e.allowClick&&(e.updateClickedSlide(c),e.emit("tap click",c),p<300&&h-n.lastClickTime<300&&e.emit("doubleTap doubleClick",c)),n.lastClickTime=b.now(),b.nextTick((function(){e.destroyed||(e.allowClick=!0)})),!n.isTouched||!n.isMoved||!e.swipeDirection||0===i.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,l=r.followFinger?o?e.translate:-e.translate:-n.currentTranslate,!r.cssMode)if(r.freeMode){if(l<-e.minTranslate())return void e.slideTo(e.activeIndex);if(l>-e.maxTranslate())return void(e.slides.length<u.length?e.slideTo(u.length-1):e.slideTo(e.slides.length-1));if(r.freeModeMomentum){if(n.velocities.length>1){var f=n.velocities.pop(),d=n.velocities.pop(),g=f.position-d.position,v=f.time-d.time;e.velocity=g/v,e.velocity/=2,Math.abs(e.velocity)<r.freeModeMinimumVelocity&&(e.velocity=0),(v>150||b.now()-f.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=r.freeModeMomentumVelocityRatio,n.velocities.length=0;var y=1e3*r.freeModeMomentumRatio,m=e.velocity*y,_=e.translate+m;o&&(_=-_);var x,w,E=!1,S=20*Math.abs(e.velocity)*r.freeModeMomentumBounceRatio;if(_<e.maxTranslate())r.freeModeMomentumBounce?(_+e.maxTranslate()<-S&&(_=e.maxTranslate()-S),x=e.maxTranslate(),E=!0,n.allowMomentumBounce=!0):_=e.maxTranslate(),r.loop&&r.centeredSlides&&(w=!0);else if(_>e.minTranslate())r.freeModeMomentumBounce?(_-e.minTranslate()>S&&(_=e.minTranslate()+S),x=e.minTranslate(),E=!0,n.allowMomentumBounce=!0):_=e.minTranslate(),r.loop&&r.centeredSlides&&(w=!0);else if(r.freeModeSticky){for(var C,T=0;T<u.length;T+=1)if(u[T]>-_){C=T;break}_=-(_=Math.abs(u[C]-_)<Math.abs(u[C-1]-_)||"next"===e.swipeDirection?u[C]:u[C-1])}if(w&&e.once("transitionEnd",(function(){e.loopFix()})),0!==e.velocity){if(y=o?Math.abs((-_-e.translate)/e.velocity):Math.abs((_-e.translate)/e.velocity),r.freeModeSticky){var I=Math.abs((o?-_:_)-e.translate),O=e.slidesSizesGrid[e.activeIndex];y=I<O?r.speed:I<2*O?1.5*r.speed:2.5*r.speed}}else if(r.freeModeSticky)return void e.slideToClosest();r.freeModeMomentumBounce&&E?(e.updateProgress(x),e.setTransition(y),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating=!0,a.transitionEnd((function(){e&&!e.destroyed&&n.allowMomentumBounce&&(e.emit("momentumBounce"),e.setTransition(r.speed),e.setTranslate(x),a.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()})))}))):e.velocity?(e.updateProgress(_),e.setTransition(y),e.setTranslate(_),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,a.transitionEnd((function(){e&&!e.destroyed&&e.transitionEnd()})))):e.updateProgress(_),e.updateActiveIndex(),e.updateSlidesClasses()}else if(r.freeModeSticky)return void e.slideToClosest();(!r.freeModeMomentum||p>=r.longSwipesMs)&&(e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}else{for(var M=0,P=e.slidesSizesGrid[0],L=0;L<s.length;L+=L<r.slidesPerGroupSkip?1:r.slidesPerGroup){var R=L<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==s[L+R]?l>=s[L]&&l<s[L+R]&&(M=L,P=s[L+R]-s[L]):l>=s[L]&&(M=L,P=s[s.length-1]-s[s.length-2])}var A=(l-s[M])/P,k=M<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(p>r.longSwipesMs){if(!r.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(A>=r.longSwipesRatio?e.slideTo(M+k):e.slideTo(M)),"prev"===e.swipeDirection&&(A>1-r.longSwipesRatio?e.slideTo(M+k):e.slideTo(M))}else{if(!r.shortSwipes)return void e.slideTo(e.activeIndex);e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(M+k):e.slideTo(M):("next"===e.swipeDirection&&e.slideTo(M+k),"prev"===e.swipeDirection&&e.slideTo(M))}}}function K(){var t=this,e=t.params,n=t.el;if(!n||0!==n.offsetWidth){e.breakpoints&&t.setBreakpoint();var r=t.allowSlideNext,i=t.allowSlidePrev,o=t.snapGrid;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses(),("auto"===e.slidesPerView||e.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.run(),t.allowSlidePrev=i,t.allowSlideNext=r,t.params.watchOverflow&&o!==t.snapGrid&&t.checkOverflow()}}function $(t){var e=this;e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation()))}function Z(){var t=this,e=t.wrapperEl;t.previousTranslate=t.translate,t.translate=t.isHorizontal()?-e.scrollLeft:-e.scrollTop,-0===t.translate&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();var n=t.maxTranslate()-t.minTranslate();(0===n?0:(t.translate-t.minTranslate())/n)!==t.progress&&t.updateProgress(t.translate),t.emit("setTranslate",t.translate,!1)}var J=!1;function Q(){}var tt={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},et={update:E,translate:S,transition:C,slide:T,loop:I,grabCursor:O,manipulation:q,events:{attachEvents:function(){var t=this,e=t.params,n=t.touchEvents,r=t.el,o=t.wrapperEl;t.onTouchStart=V.bind(t),t.onTouchMove=H.bind(t),t.onTouchEnd=W.bind(t),e.cssMode&&(t.onScroll=Z.bind(t)),t.onClick=$.bind(t);var a=!!e.nested;if(!x.touch&&x.pointerEvents)r.addEventListener(n.start,t.onTouchStart,!1),i.addEventListener(n.move,t.onTouchMove,a),i.addEventListener(n.end,t.onTouchEnd,!1);else{if(x.touch){var s=!("touchstart"!==n.start||!x.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};r.addEventListener(n.start,t.onTouchStart,s),r.addEventListener(n.move,t.onTouchMove,x.passiveListener?{passive:!1,capture:a}:a),r.addEventListener(n.end,t.onTouchEnd,s),n.cancel&&r.addEventListener(n.cancel,t.onTouchEnd,s),J||(i.addEventListener("touchstart",Q),J=!0)}(e.simulateTouch&&!Y.ios&&!Y.android||e.simulateTouch&&!x.touch&&Y.ios)&&(r.addEventListener("mousedown",t.onTouchStart,!1),i.addEventListener("mousemove",t.onTouchMove,a),i.addEventListener("mouseup",t.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&r.addEventListener("click",t.onClick,!0),e.cssMode&&o.addEventListener("scroll",t.onScroll),e.updateOnWindowResize?t.on(Y.ios||Y.android?"resize orientationchange observerUpdate":"resize observerUpdate",K,!0):t.on("observerUpdate",K,!0)},detachEvents:function(){var t=this,e=t.params,n=t.touchEvents,r=t.el,o=t.wrapperEl,a=!!e.nested;if(!x.touch&&x.pointerEvents)r.removeEventListener(n.start,t.onTouchStart,!1),i.removeEventListener(n.move,t.onTouchMove,a),i.removeEventListener(n.end,t.onTouchEnd,!1);else{if(x.touch){var s=!("onTouchStart"!==n.start||!x.passiveListener||!e.passiveListeners)&&{passive:!0,capture:!1};r.removeEventListener(n.start,t.onTouchStart,s),r.removeEventListener(n.move,t.onTouchMove,a),r.removeEventListener(n.end,t.onTouchEnd,s),n.cancel&&r.removeEventListener(n.cancel,t.onTouchEnd,s)}(e.simulateTouch&&!Y.ios&&!Y.android||e.simulateTouch&&!x.touch&&Y.ios)&&(r.removeEventListener("mousedown",t.onTouchStart,!1),i.removeEventListener("mousemove",t.onTouchMove,a),i.removeEventListener("mouseup",t.onTouchEnd,!1))}(e.preventClicks||e.preventClicksPropagation)&&r.removeEventListener("click",t.onClick,!0),e.cssMode&&o.removeEventListener("scroll",t.onScroll),t.off(Y.ios||Y.android?"resize orientationchange observerUpdate":"resize observerUpdate",K)}},breakpoints:{setBreakpoint:function(){var t=this,e=t.activeIndex,n=t.initialized,r=t.loopedSlides,i=void 0===r?0:r,o=t.params,a=t.$el,s=o.breakpoints;if(s&&(!s||0!==Object.keys(s).length)){var u=t.getBreakpoint(s);if(u&&t.currentBreakpoint!==u){var c=u in s?s[u]:void 0;c&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(t){var e=c[t];void 0!==e&&(c[t]="slidesPerView"!==t||"AUTO"!==e&&"auto"!==e?"slidesPerView"===t?parseFloat(e):parseInt(e,10):"auto")}));var l=c||t.originalParams,h=o.slidesPerColumn>1,p=l.slidesPerColumn>1;h&&!p?a.removeClass("".concat(o.containerModifierClass,"multirow ").concat(o.containerModifierClass,"multirow-column")):!h&&p&&(a.addClass("".concat(o.containerModifierClass,"multirow")),"column"===l.slidesPerColumnFill&&a.addClass("".concat(o.containerModifierClass,"multirow-column")));var f=l.direction&&l.direction!==o.direction,d=o.loop&&(l.slidesPerView!==o.slidesPerView||f);f&&n&&t.changeDirection(),b.extend(t.params,l),b.extend(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),t.currentBreakpoint=u,d&&n&&(t.loopDestroy(),t.loopCreate(),t.updateSlides(),t.slideTo(e-i+t.loopedSlides,0,!1)),t.emit("breakpoint",l)}}},getBreakpoint:function(t){if(t){var e=!1,n=Object.keys(t).map((function(t){if("string"==typeof t&&t.startsWith("@")){var e=parseFloat(t.substr(1));return{value:o.innerHeight*e,point:t}}return{value:t,point:t}}));n.sort((function(t,e){return parseInt(t.value,10)-parseInt(e.value,10)}));for(var r=0;r<n.length;r+=1){var i=n[r],a=i.point;i.value<=o.innerWidth&&(e=a)}return e||"max"}}},checkOverflow:{checkOverflow:function(){var t=this,e=t.params,n=t.isLocked,r=t.slides.length>0&&e.slidesOffsetBefore+e.spaceBetween*(t.slides.length-1)+t.slides[0].offsetWidth*t.slides.length;e.slidesOffsetBefore&&e.slidesOffsetAfter&&r?t.isLocked=r<=t.size:t.isLocked=1===t.snapGrid.length,t.allowSlideNext=!t.isLocked,t.allowSlidePrev=!t.isLocked,n!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock"),n&&n!==t.isLocked&&(t.isEnd=!1,t.navigation.update())}},classes:{addClasses:function(){var t=this,e=t.classNames,n=t.params,r=t.rtl,i=t.$el,o=[];o.push("initialized"),o.push(n.direction),n.freeMode&&o.push("free-mode"),n.autoHeight&&o.push("autoheight"),r&&o.push("rtl"),n.slidesPerColumn>1&&(o.push("multirow"),"column"===n.slidesPerColumnFill&&o.push("multirow-column")),Y.android&&o.push("android"),Y.ios&&o.push("ios"),n.cssMode&&o.push("css-mode"),o.forEach((function(t){e.push(n.containerModifierClass+t)})),i.addClass(e.join(" "))},removeClasses:function(){var t=this.$el,e=this.classNames;t.removeClass(e.join(" "))}},images:{loadImage:function(t,e,n,r,i,a){var s;function u(){a&&a()}t.complete&&i?u():e?((s=new o.Image).onload=u,s.onerror=u,r&&(s.sizes=r),n&&(s.srcset=n),e&&(s.src=e)):u()},preloadImages:function(){var t=this;function e(){null!=t&&t&&!t.destroyed&&(void 0!==t.imagesLoaded&&(t.imagesLoaded+=1),t.imagesLoaded===t.imagesToLoad.length&&(t.params.updateOnImagesReady&&t.update(),t.emit("imagesReady")))}t.imagesToLoad=t.$el.find("img");for(var n=0;n<t.imagesToLoad.length;n+=1){var r=t.imagesToLoad[n];t.loadImage(r,r.currentSrc||r.getAttribute("src"),r.srcset||r.getAttribute("srcset"),r.sizes||r.getAttribute("sizes"),!0,e)}}}},nt={},rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(n,t);var e=l(n);function n(){var t,r,i;g(this,n);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];1===a.length&&a[0].constructor&&a[0].constructor===Object?i=a[0]:(r=a[0],i=a[1]),i||(i={}),i=b.extend({},i),r&&!i.el&&(i.el=r),t=e.call(this,i),Object.keys(et).forEach((function(t){Object.keys(et[t]).forEach((function(e){n.prototype[e]||(n.prototype[e]=et[t][e])}))}));var c=p(t);void 0===c.modules&&(c.modules={}),Object.keys(c.modules).forEach((function(t){var e=c.modules[t];if(e.params){var n=Object.keys(e.params)[0],r=e.params[n];if("object"!==m(r)||null===r)return;if(!(n in i)||!("enabled"in r))return;!0===i[n]&&(i[n]={enabled:!0}),"object"!==m(i[n])||"enabled"in i[n]||(i[n].enabled=!0),i[n]||(i[n]={enabled:!1})}}));var l=b.extend({},tt);c.useModulesParams(l),c.params=b.extend({},l,nt,i),c.originalParams=b.extend({},c.params),c.passedParams=b.extend({},i),c.$=s;var f,d,v,y=s(c.params.el);if(!(r=y[0]))return h(t,void 0);if(y.length>1){var _=[];return y.each((function(t,e){var r=b.extend({},i,{el:e});_.push(new n(r))})),h(t,_)}return r.swiper=c,y.data("swiper",c),r&&r.shadowRoot&&r.shadowRoot.querySelector?(f=s(r.shadowRoot.querySelector(".".concat(c.params.wrapperClass)))).children=function(t){return y.children(t)}:f=y.children(".".concat(c.params.wrapperClass)),b.extend(c,{$el:y,el:r,$wrapperEl:f,wrapperEl:f[0],classNames:[],slides:s(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===c.params.direction},isVertical:function(){return"vertical"===c.params.direction},rtl:"rtl"===r.dir.toLowerCase()||"rtl"===y.css("direction"),rtlTranslate:"horizontal"===c.params.direction&&("rtl"===r.dir.toLowerCase()||"rtl"===y.css("direction")),wrongRTL:"-webkit-box"===f.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:c.params.allowSlideNext,allowSlidePrev:c.params.allowSlidePrev,touchEvents:(d=["touchstart","touchmove","touchend","touchcancel"],v=["mousedown","mousemove","mouseup"],x.pointerEvents&&(v=["pointerdown","pointermove","pointerup"]),c.touchEventsTouch={start:d[0],move:d[1],end:d[2],cancel:d[3]},c.touchEventsDesktop={start:v[0],move:v[1],end:v[2]},x.touch||!c.params.simulateTouch?c.touchEventsTouch:c.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video, label",lastClickTime:b.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:c.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),c.useModules(),c.params.init&&c.init(),h(t,c)}return y(n,[{key:"slidesPerViewDynamic",value:function(){var t=this,e=t.params,n=t.slides,r=t.slidesGrid,i=t.size,o=t.activeIndex,a=1;if(e.centeredSlides){for(var s,u=n[o].swiperSlideSize,c=o+1;c<n.length;c+=1)n[c]&&!s&&(a+=1,(u+=n[c].swiperSlideSize)>i&&(s=!0));for(var l=o-1;l>=0;l-=1)n[l]&&!s&&(a+=1,(u+=n[l].swiperSlideSize)>i&&(s=!0))}else for(var h=o+1;h<n.length;h+=1)r[h]-r[o]<i&&(a+=1);return a}},{key:"update",value:function(){var t=this;if(t&&!t.destroyed){var e=t.snapGrid,n=t.params;n.breakpoints&&t.setBreakpoint(),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.params.freeMode?(r(),t.params.autoHeight&&t.updateAutoHeight()):(("auto"===t.params.slidesPerView||t.params.slidesPerView>1)&&t.isEnd&&!t.params.centeredSlides?t.slideTo(t.slides.length-1,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0))||r(),n.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}function r(){var e=t.rtlTranslate?-1*t.translate:t.translate,n=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(n),t.updateActiveIndex(),t.updateSlidesClasses()}}},{key:"changeDirection",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.params.direction;return t||(t="horizontal"===r?"vertical":"horizontal"),t===r||"horizontal"!==t&&"vertical"!==t||(n.$el.removeClass("".concat(n.params.containerModifierClass).concat(r)).addClass("".concat(n.params.containerModifierClass).concat(t)),n.params.direction=t,n.slides.each((function(e,n){"vertical"===t?n.style.width="":n.style.height=""})),n.emit("changeDirection"),e&&n.update()),n}},{key:"init",value:function(){var t=this;t.initialized||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit),t.attachEvents(),t.initialized=!0,t.emit("init"))}},{key:"destroy",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.params,i=n.$el,o=n.$wrapperEl,a=n.slides;return void 0===n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),r.loop&&n.loopDestroy(),e&&(n.removeClasses(),i.removeAttr("style"),o.removeAttr("style"),a&&a.length&&a.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(t){n.off(t)})),!1!==t&&(n.$el[0].swiper=null,n.$el.data("swiper",null),b.deleteProps(n)),n.destroyed=!0),null}}],[{key:"extendDefaults",value:function(t){b.extend(nt,t)}},{key:"extendedDefaults",get:function(){return nt}},{key:"defaults",get:function(){return tt}},{key:"Class",get:function(){return w}},{key:"$",get:function(){return s}}]),n}(w),it={name:"device",proto:{device:Y},static:{device:Y}},ot={name:"support",proto:{support:x},static:{support:x}},at={isEdge:!!o.navigator.userAgent.match(/Edge/g),isSafari:function(){var t=o.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(o.navigator.userAgent)},st={name:"browser",proto:{browser:at},static:{browser:at}},ut={name:"resize",create:function(){var t=this;b.extend(t,{resize:{resizeHandler:function(){t&&!t.destroyed&&t.initialized&&(t.emit("beforeResize"),t.emit("resize"))},orientationChangeHandler:function(){t&&!t.destroyed&&t.initialized&&t.emit("orientationchange")}}})},on:{init:function(){o.addEventListener("resize",this.resize.resizeHandler),o.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){o.removeEventListener("resize",this.resize.resizeHandler),o.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},ct={func:o.MutationObserver||o.WebkitMutationObserver,attach:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=ct.func,i=new r((function(t){if(1!==t.length){var e=function(){n.emit("observerUpdate",t[0])};o.requestAnimationFrame?o.requestAnimationFrame(e):o.setTimeout(e,0)}else n.emit("observerUpdate",t[0])}));i.observe(t,{attributes:void 0===e.attributes||e.attributes,childList:void 0===e.childList||e.childList,characterData:void 0===e.characterData||e.characterData}),n.observer.observers.push(i)},init:function(){var t=this;if(x.observer&&t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)t.observer.attach(e[n]);t.observer.attach(t.$el[0],{childList:t.params.observeSlideChildren}),t.observer.attach(t.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(t){t.disconnect()})),this.observer.observers=[]}},lt={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){var t=this;b.extend(t,{observer:{init:ct.init.bind(t),attach:ct.attach.bind(t),destroy:ct.destroy.bind(t),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},ht={update:function(t){var e=this,n=e.params,r=n.slidesPerView,i=n.slidesPerGroup,o=n.centeredSlides,a=e.params.virtual,s=a.addSlidesBefore,u=a.addSlidesAfter,c=e.virtual,l=c.from,h=c.to,p=c.slides,f=c.slidesGrid,d=c.renderSlide,g=c.offset;e.updateActiveIndex();var v,y,m,_=e.activeIndex||0;v=e.rtlTranslate?"right":e.isHorizontal()?"left":"top",o?(y=Math.floor(r/2)+i+s,m=Math.floor(r/2)+i+u):(y=r+(i-1)+s,m=i+u);var x=Math.max((_||0)-m,0),w=Math.min((_||0)+y,p.length-1),E=(e.slidesGrid[x]||0)-(e.slidesGrid[0]||0);function S(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load()}if(b.extend(e.virtual,{from:x,to:w,offset:E,slidesGrid:e.slidesGrid}),l===x&&h===w&&!t)return e.slidesGrid!==f&&E!==g&&e.slides.css(v,"".concat(E,"px")),void e.updateProgress();if(e.params.virtual.renderExternal)return e.params.virtual.renderExternal.call(e,{offset:E,from:x,to:w,slides:function(){for(var t=[],e=x;e<=w;e+=1)t.push(p[e]);return t}()}),void S();var C=[],T=[];if(t)e.$wrapperEl.find(".".concat(e.params.slideClass)).remove();else for(var I=l;I<=h;I+=1)(I<x||I>w)&&e.$wrapperEl.find(".".concat(e.params.slideClass,'[data-swiper-slide-index="').concat(I,'"]')).remove();for(var O=0;O<p.length;O+=1)O>=x&&O<=w&&(void 0===h||t?T.push(O):(O>h&&T.push(O),O<l&&C.push(O)));T.forEach((function(t){e.$wrapperEl.append(d(p[t],t))})),C.sort((function(t,e){return e-t})).forEach((function(t){e.$wrapperEl.prepend(d(p[t],t))})),e.$wrapperEl.children(".swiper-slide").css(v,"".concat(E,"px")),S()},renderSlide:function(t,e){var n=this,r=n.params.virtual;if(r.cache&&n.virtual.cache[e])return n.virtual.cache[e];var i=r.renderSlide?s(r.renderSlide.call(n,t,e)):s('<div class="'.concat(n.params.slideClass,'" data-swiper-slide-index="').concat(e,'">').concat(t,"</div>"));return i.attr("data-swiper-slide-index")||i.attr("data-swiper-slide-index",e),r.cache&&(n.virtual.cache[e]=i),i},appendSlide:function(t){var e=this;if("object"===m(t)&&"length"in t)for(var n=0;n<t.length;n+=1)t[n]&&e.virtual.slides.push(t[n]);else e.virtual.slides.push(t);e.virtual.update(!0)},prependSlide:function(t){var e=this,n=e.activeIndex,r=n+1,i=1;if(Array.isArray(t)){for(var o=0;o<t.length;o+=1)t[o]&&e.virtual.slides.unshift(t[o]);r=n+t.length,i=t.length}else e.virtual.slides.unshift(t);if(e.params.virtual.cache){var a=e.virtual.cache,s={};Object.keys(a).forEach((function(t){var e=a[t],n=e.attr("data-swiper-slide-index");n&&e.attr("data-swiper-slide-index",parseInt(n,10)+1),s[parseInt(t,10)+i]=e})),e.virtual.cache=s}e.virtual.update(!0),e.slideTo(r,0)},removeSlide:function(t){var e=this;if(null!=t){var n=e.activeIndex;if(Array.isArray(t))for(var r=t.length-1;r>=0;r-=1)e.virtual.slides.splice(t[r],1),e.params.virtual.cache&&delete e.virtual.cache[t[r]],t[r]<n&&(n-=1),n=Math.max(n,0);else e.virtual.slides.splice(t,1),e.params.virtual.cache&&delete e.virtual.cache[t],t<n&&(n-=1),n=Math.max(n,0);e.virtual.update(!0),e.slideTo(n,0)}},removeAllSlides:function(){var t=this;t.virtual.slides=[],t.params.virtual.cache&&(t.virtual.cache={}),t.virtual.update(!0),t.slideTo(0,0)}},pt={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){var t=this;b.extend(t,{virtual:{update:ht.update.bind(t),appendSlide:ht.appendSlide.bind(t),prependSlide:ht.prependSlide.bind(t),removeSlide:ht.removeSlide.bind(t),removeAllSlides:ht.removeAllSlides.bind(t),renderSlide:ht.renderSlide.bind(t),slides:t.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){var t=this;if(t.params.virtual.enabled){t.classNames.push("".concat(t.params.containerModifierClass,"virtual"));var e={watchSlidesProgress:!0};b.extend(t.params,e),b.extend(t.originalParams,e),t.params.initialSlide||t.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},ft={handle:function(t){var e=this,n=e.rtlTranslate,r=t;r.originalEvent&&(r=r.originalEvent);var a=r.keyCode||r.charCode;if(!e.allowSlideNext&&(e.isHorizontal()&&39===a||e.isVertical()&&40===a||34===a))return!1;if(!e.allowSlidePrev&&(e.isHorizontal()&&37===a||e.isVertical()&&38===a||33===a))return!1;if(!(r.shiftKey||r.altKey||r.ctrlKey||r.metaKey||i.activeElement&&i.activeElement.nodeName&&("input"===i.activeElement.nodeName.toLowerCase()||"textarea"===i.activeElement.nodeName.toLowerCase()))){if(e.params.keyboard.onlyInViewport&&(33===a||34===a||37===a||39===a||38===a||40===a)){var s=!1;if(e.$el.parents(".".concat(e.params.slideClass)).length>0&&0===e.$el.parents(".".concat(e.params.slideActiveClass)).length)return;var u=o.innerWidth,c=o.innerHeight,l=e.$el.offset();n&&(l.left-=e.$el[0].scrollLeft);for(var h=[[l.left,l.top],[l.left+e.width,l.top],[l.left,l.top+e.height],[l.left+e.width,l.top+e.height]],p=0;p<h.length;p+=1){var f=h[p];f[0]>=0&&f[0]<=u&&f[1]>=0&&f[1]<=c&&(s=!0)}if(!s)return}e.isHorizontal()?(33!==a&&34!==a&&37!==a&&39!==a||(r.preventDefault?r.preventDefault():r.returnValue=!1),(34!==a&&39!==a||n)&&(33!==a&&37!==a||!n)||e.slideNext(),(33!==a&&37!==a||n)&&(34!==a&&39!==a||!n)||e.slidePrev()):(33!==a&&34!==a&&38!==a&&40!==a||(r.preventDefault?r.preventDefault():r.returnValue=!1),34!==a&&40!==a||e.slideNext(),33!==a&&38!==a||e.slidePrev()),e.emit("keyPress",a)}},enable:function(){var t=this;t.keyboard.enabled||(s(i).on("keydown",t.keyboard.handle),t.keyboard.enabled=!0)},disable:function(){var t=this;t.keyboard.enabled&&(s(i).off("keydown",t.keyboard.handle),t.keyboard.enabled=!1)}},dt={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){var t=this;b.extend(t,{keyboard:{enabled:!1,enable:ft.enable.bind(t),disable:ft.disable.bind(t),handle:ft.handle.bind(t)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var gt={lastScrollTime:b.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return o.navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var t="onwheel",e=t in i;if(!e){var n=i.createElement("div");n.setAttribute(t,"return;"),e="function"==typeof n.onwheel}return!e&&i.implementation&&i.implementation.hasFeature&&!0!==i.implementation.hasFeature("","")&&(e=i.implementation.hasFeature("Events.wheel","3.0")),e}()?"wheel":"mousewheel"},normalize:function(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=10*e,i=10*n,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),t.shiftKey&&!r&&(r=i,i=0),(r||i)&&t.deltaMode&&(1===t.deltaMode?(r*=40,i*=40):(r*=800,i*=800)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(t){var e=t,n=this,r=n.params.mousewheel;n.params.cssMode&&e.preventDefault();var i=n.$el;if("container"!==n.params.mousewheel.eventsTarged&&(i=s(n.params.mousewheel.eventsTarged)),!n.mouseEntered&&!i[0].contains(e.target)&&!r.releaseOnEdges)return!0;e.originalEvent&&(e=e.originalEvent);var o=0,a=n.rtlTranslate?-1:1,u=gt.normalize(e);if(r.forceToAxis)if(n.isHorizontal()){if(!(Math.abs(u.pixelX)>Math.abs(u.pixelY)))return!0;o=u.pixelX*a}else{if(!(Math.abs(u.pixelY)>Math.abs(u.pixelX)))return!0;o=u.pixelY}else o=Math.abs(u.pixelX)>Math.abs(u.pixelY)?-u.pixelX*a:-u.pixelY;if(0===o)return!0;if(r.invert&&(o=-o),n.params.freeMode){var c={time:b.now(),delta:Math.abs(o),direction:Math.sign(o)},l=n.mousewheel.lastEventBeforeSnap,h=l&&c.time<l.time+500&&c.delta<=l.delta&&c.direction===l.direction;if(!h){n.mousewheel.lastEventBeforeSnap=void 0,n.params.loop&&n.loopFix();var p=n.getTranslate()+o*r.sensitivity,f=n.isBeginning,d=n.isEnd;if(p>=n.minTranslate()&&(p=n.minTranslate()),p<=n.maxTranslate()&&(p=n.maxTranslate()),n.setTransition(0),n.setTranslate(p),n.updateProgress(),n.updateActiveIndex(),n.updateSlidesClasses(),(!f&&n.isBeginning||!d&&n.isEnd)&&n.updateSlidesClasses(),n.params.freeModeSticky){clearTimeout(n.mousewheel.timeout),n.mousewheel.timeout=void 0;var g=n.mousewheel.recentWheelEvents;g.length>=15&&g.shift();var v=g.length?g[g.length-1]:void 0,y=g[0];if(g.push(c),v&&(c.delta>v.delta||c.direction!==v.direction))g.splice(0);else if(g.length>=15&&c.time-y.time<500&&y.delta-c.delta>=1&&c.delta<=6){var m=o>0?.8:.2;n.mousewheel.lastEventBeforeSnap=c,g.splice(0),n.mousewheel.timeout=b.nextTick((function(){n.slideToClosest(n.params.speed,!0,void 0,m)}),0)}n.mousewheel.timeout||(n.mousewheel.timeout=b.nextTick((function(){n.mousewheel.lastEventBeforeSnap=c,g.splice(0),n.slideToClosest(n.params.speed,!0,void 0,.5)}),500))}if(h||n.emit("scroll",e),n.params.autoplay&&n.params.autoplayDisableOnInteraction&&n.autoplay.stop(),p===n.minTranslate()||p===n.maxTranslate())return!0}}else{var _={time:b.now(),delta:Math.abs(o),direction:Math.sign(o),raw:t},x=n.mousewheel.recentWheelEvents;x.length>=2&&x.shift();var w=x.length?x[x.length-1]:void 0;if(x.push(_),w?(_.direction!==w.direction||_.delta>w.delta)&&n.mousewheel.animateSlider(_):n.mousewheel.animateSlider(_),n.mousewheel.releaseScroll(_))return!0}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1},animateSlider:function(t){var e=this;return t.delta>=6&&b.now()-e.mousewheel.lastScrollTime<60||(t.direction<0?e.isEnd&&!e.params.loop||e.animating||(e.slideNext(),e.emit("scroll",t.raw)):e.isBeginning&&!e.params.loop||e.animating||(e.slidePrev(),e.emit("scroll",t.raw)),e.mousewheel.lastScrollTime=(new o.Date).getTime(),!1)},releaseScroll:function(t){var e=this,n=e.params.mousewheel;if(t.direction<0){if(e.isEnd&&!e.params.loop&&n.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&n.releaseOnEdges)return!0;return!1},enable:function(){var t=this,e=gt.event();if(t.params.cssMode)return t.wrapperEl.removeEventListener(e,t.mousewheel.handle),!0;if(!e)return!1;if(t.mousewheel.enabled)return!1;var n=t.$el;return"container"!==t.params.mousewheel.eventsTarged&&(n=s(t.params.mousewheel.eventsTarged)),n.on("mouseenter",t.mousewheel.handleMouseEnter),n.on("mouseleave",t.mousewheel.handleMouseLeave),n.on(e,t.mousewheel.handle),t.mousewheel.enabled=!0,!0},disable:function(){var t=this,e=gt.event();if(t.params.cssMode)return t.wrapperEl.addEventListener(e,t.mousewheel.handle),!0;if(!e)return!1;if(!t.mousewheel.enabled)return!1;var n=t.$el;return"container"!==t.params.mousewheel.eventsTarged&&(n=s(t.params.mousewheel.eventsTarged)),n.off(e,t.mousewheel.handle),t.mousewheel.enabled=!1,!0}},vt={update:function(){var t=this,e=t.params.navigation;if(!t.params.loop){var n=t.navigation,r=n.$nextEl,i=n.$prevEl;i&&i.length>0&&(t.isBeginning?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](e.lockClass)),r&&r.length>0&&(t.isEnd?r.addClass(e.disabledClass):r.removeClass(e.disabledClass),r[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](e.lockClass))}},onPrevClick:function(t){var e=this;t.preventDefault(),e.isBeginning&&!e.params.loop||e.slidePrev()},onNextClick:function(t){var e=this;t.preventDefault(),e.isEnd&&!e.params.loop||e.slideNext()},init:function(){var t,e,n=this,r=n.params.navigation;(r.nextEl||r.prevEl)&&(r.nextEl&&(t=s(r.nextEl),n.params.uniqueNavElements&&"string"==typeof r.nextEl&&t.length>1&&1===n.$el.find(r.nextEl).length&&(t=n.$el.find(r.nextEl))),r.prevEl&&(e=s(r.prevEl),n.params.uniqueNavElements&&"string"==typeof r.prevEl&&e.length>1&&1===n.$el.find(r.prevEl).length&&(e=n.$el.find(r.prevEl))),t&&t.length>0&&t.on("click",n.navigation.onNextClick),e&&e.length>0&&e.on("click",n.navigation.onPrevClick),b.extend(n.navigation,{$nextEl:t,nextEl:t&&t[0],$prevEl:e,prevEl:e&&e[0]}))},destroy:function(){var t=this,e=t.navigation,n=e.$nextEl,r=e.$prevEl;n&&n.length&&(n.off("click",t.navigation.onNextClick),n.removeClass(t.params.navigation.disabledClass)),r&&r.length&&(r.off("click",t.navigation.onPrevClick),r.removeClass(t.params.navigation.disabledClass))}},yt={update:function(){var t=this,e=t.rtl,n=t.params.pagination;if(n.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var r,i=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,o=t.pagination.$el,a=t.params.loop?Math.ceil((i-2*t.loopedSlides)/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?((r=Math.ceil((t.activeIndex-t.loopedSlides)/t.params.slidesPerGroup))>i-1-2*t.loopedSlides&&(r-=i-2*t.loopedSlides),r>a-1&&(r-=a),r<0&&"bullets"!==t.params.paginationType&&(r=a+r)):r=void 0!==t.snapIndex?t.snapIndex:t.activeIndex||0,"bullets"===n.type&&t.pagination.bullets&&t.pagination.bullets.length>0){var u,c,l,h=t.pagination.bullets;if(n.dynamicBullets&&(t.pagination.bulletSize=h.eq(0)[t.isHorizontal()?"outerWidth":"outerHeight"](!0),o.css(t.isHorizontal()?"width":"height","".concat(t.pagination.bulletSize*(n.dynamicMainBullets+4),"px")),n.dynamicMainBullets>1&&void 0!==t.previousIndex&&(t.pagination.dynamicBulletIndex+=r-t.previousIndex,t.pagination.dynamicBulletIndex>n.dynamicMainBullets-1?t.pagination.dynamicBulletIndex=n.dynamicMainBullets-1:t.pagination.dynamicBulletIndex<0&&(t.pagination.dynamicBulletIndex=0)),u=r-t.pagination.dynamicBulletIndex,l=((c=u+(Math.min(h.length,n.dynamicMainBullets)-1))+u)/2),h.removeClass("".concat(n.bulletActiveClass," ").concat(n.bulletActiveClass,"-next ").concat(n.bulletActiveClass,"-next-next ").concat(n.bulletActiveClass,"-prev ").concat(n.bulletActiveClass,"-prev-prev ").concat(n.bulletActiveClass,"-main")),o.length>1)h.each((function(t,e){var i=s(e),o=i.index();o===r&&i.addClass(n.bulletActiveClass),n.dynamicBullets&&(o>=u&&o<=c&&i.addClass("".concat(n.bulletActiveClass,"-main")),o===u&&i.prev().addClass("".concat(n.bulletActiveClass,"-prev")).prev().addClass("".concat(n.bulletActiveClass,"-prev-prev")),o===c&&i.next().addClass("".concat(n.bulletActiveClass,"-next")).next().addClass("".concat(n.bulletActiveClass,"-next-next")))}));else{var p=h.eq(r),f=p.index();if(p.addClass(n.bulletActiveClass),n.dynamicBullets){for(var d=h.eq(u),g=h.eq(c),v=u;v<=c;v+=1)h.eq(v).addClass("".concat(n.bulletActiveClass,"-main"));if(t.params.loop)if(f>=h.length-n.dynamicMainBullets){for(var y=n.dynamicMainBullets;y>=0;y-=1)h.eq(h.length-y).addClass("".concat(n.bulletActiveClass,"-main"));h.eq(h.length-n.dynamicMainBullets-1).addClass("".concat(n.bulletActiveClass,"-prev"))}else d.prev().addClass("".concat(n.bulletActiveClass,"-prev")).prev().addClass("".concat(n.bulletActiveClass,"-prev-prev")),g.next().addClass("".concat(n.bulletActiveClass,"-next")).next().addClass("".concat(n.bulletActiveClass,"-next-next"));else d.prev().addClass("".concat(n.bulletActiveClass,"-prev")).prev().addClass("".concat(n.bulletActiveClass,"-prev-prev")),g.next().addClass("".concat(n.bulletActiveClass,"-next")).next().addClass("".concat(n.bulletActiveClass,"-next-next"))}}if(n.dynamicBullets){var m=Math.min(h.length,n.dynamicMainBullets+4),_=(t.pagination.bulletSize*m-t.pagination.bulletSize)/2-l*t.pagination.bulletSize,b=e?"right":"left";h.css(t.isHorizontal()?b:"top","".concat(_,"px"))}}if("fraction"===n.type&&(o.find(".".concat(n.currentClass)).text(n.formatFractionCurrent(r+1)),o.find(".".concat(n.totalClass)).text(n.formatFractionTotal(a))),"progressbar"===n.type){var x;x=n.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";var w=(r+1)/a,E=1,S=1;"horizontal"===x?E=w:S=w,o.find(".".concat(n.progressbarFillClass)).transform("translate3d(0,0,0) scaleX(".concat(E,") scaleY(").concat(S,")")).transition(t.params.speed)}"custom"===n.type&&n.renderCustom?(o.html(n.renderCustom(t,r+1,a)),t.emit("paginationRender",t,o[0])):t.emit("paginationUpdate",t,o[0]),o[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](n.lockClass)}},render:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var n=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,r=t.pagination.$el,i="";if("bullets"===e.type){for(var o=t.params.loop?Math.ceil((n-2*t.loopedSlides)/t.params.slidesPerGroup):t.snapGrid.length,a=0;a<o;a+=1)e.renderBullet?i+=e.renderBullet.call(t,a,e.bulletClass):i+="<".concat(e.bulletElement,' class="').concat(e.bulletClass,'"></').concat(e.bulletElement,">");r.html(i),t.pagination.bullets=r.find(".".concat(e.bulletClass))}"fraction"===e.type&&(i=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):'<span class="'.concat(e.currentClass,'"></span>')+" / "+'<span class="'.concat(e.totalClass,'"></span>'),r.html(i)),"progressbar"===e.type&&(i=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):'<span class="'.concat(e.progressbarFillClass,'"></span>'),r.html(i)),"custom"!==e.type&&t.emit("paginationRender",t.pagination.$el[0])}},init:function(){var t=this,e=t.params.pagination;if(e.el){var n=s(e.el);0!==n.length&&(t.params.uniqueNavElements&&"string"==typeof e.el&&n.length>1&&1===t.$el.find(e.el).length&&(n=t.$el.find(e.el)),"bullets"===e.type&&e.clickable&&n.addClass(e.clickableClass),n.addClass(e.modifierClass+e.type),"bullets"===e.type&&e.dynamicBullets&&(n.addClass("".concat(e.modifierClass).concat(e.type,"-dynamic")),t.pagination.dynamicBulletIndex=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&n.addClass(e.progressbarOppositeClass),e.clickable&&n.on("click",".".concat(e.bulletClass),(function(e){e.preventDefault();var n=s(this).index()*t.params.slidesPerGroup;t.params.loop&&(n+=t.loopedSlides),t.slideTo(n)})),b.extend(t.pagination,{$el:n,el:n[0]}))}},destroy:function(){var t=this,e=t.params.pagination;if(e.el&&t.pagination.el&&t.pagination.$el&&0!==t.pagination.$el.length){var n=t.pagination.$el;n.removeClass(e.hiddenClass),n.removeClass(e.modifierClass+e.type),t.pagination.bullets&&t.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&n.off("click",".".concat(e.bulletClass))}}},mt={setTranslate:function(){var t=this;if(t.params.scrollbar.el&&t.scrollbar.el){var e=t.scrollbar,n=t.rtlTranslate,r=t.progress,i=e.dragSize,o=e.trackSize,a=e.$dragEl,s=e.$el,u=t.params.scrollbar,c=i,l=(o-i)*r;n?(l=-l)>0?(c=i-l,l=0):-l+i>o&&(c=o+l):l<0?(c=i+l,l=0):l+i>o&&(c=o-l),t.isHorizontal()?(a.transform("translate3d(".concat(l,"px, 0, 0)")),a[0].style.width="".concat(c,"px")):(a.transform("translate3d(0px, ".concat(l,"px, 0)")),a[0].style.height="".concat(c,"px")),u.hide&&(clearTimeout(t.scrollbar.timeout),s[0].style.opacity=1,t.scrollbar.timeout=setTimeout((function(){s[0].style.opacity=0,s.transition(400)}),1e3))}},setTransition:function(t){var e=this;e.params.scrollbar.el&&e.scrollbar.el&&e.scrollbar.$dragEl.transition(t)},updateSize:function(){var t=this;if(t.params.scrollbar.el&&t.scrollbar.el){var e=t.scrollbar,n=e.$dragEl,r=e.$el;n[0].style.width="",n[0].style.height="";var i,o=t.isHorizontal()?r[0].offsetWidth:r[0].offsetHeight,a=t.size/t.virtualSize,s=a*(o/t.size);i="auto"===t.params.scrollbar.dragSize?o*a:parseInt(t.params.scrollbar.dragSize,10),t.isHorizontal()?n[0].style.width="".concat(i,"px"):n[0].style.height="".concat(i,"px"),r[0].style.display=a>=1?"none":"",t.params.scrollbar.hide&&(r[0].style.opacity=0),b.extend(e,{trackSize:o,divider:a,moveDivider:s,dragSize:i}),e.$el[t.params.watchOverflow&&t.isLocked?"addClass":"removeClass"](t.params.scrollbar.lockClass)}},getPointerPosition:function(t){return this.isHorizontal()?"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientX:t.clientX:"touchstart"===t.type||"touchmove"===t.type?t.targetTouches[0].clientY:t.clientY},setDragPosition:function(t){var e,n=this,r=n.scrollbar,i=n.rtlTranslate,o=r.$el,a=r.dragSize,s=r.trackSize,u=r.dragStartPos;e=(r.getPointerPosition(t)-o.offset()[n.isHorizontal()?"left":"top"]-(null!==u?u:a/2))/(s-a),e=Math.max(Math.min(e,1),0),i&&(e=1-e);var c=n.minTranslate()+(n.maxTranslate()-n.minTranslate())*e;n.updateProgress(c),n.setTranslate(c),n.updateActiveIndex(),n.updateSlidesClasses()},onDragStart:function(t){var e=this,n=e.params.scrollbar,r=e.scrollbar,i=e.$wrapperEl,o=r.$el,a=r.$dragEl;e.scrollbar.isTouched=!0,e.scrollbar.dragStartPos=t.target===a[0]||t.target===a?r.getPointerPosition(t)-t.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,t.preventDefault(),t.stopPropagation(),i.transition(100),a.transition(100),r.setDragPosition(t),clearTimeout(e.scrollbar.dragTimeout),o.transition(0),n.hide&&o.css("opacity",1),e.params.cssMode&&e.$wrapperEl.css("scroll-snap-type","none"),e.emit("scrollbarDragStart",t)},onDragMove:function(t){var e=this,n=e.scrollbar,r=e.$wrapperEl,i=n.$el,o=n.$dragEl;e.scrollbar.isTouched&&(t.preventDefault?t.preventDefault():t.returnValue=!1,n.setDragPosition(t),r.transition(0),i.transition(0),o.transition(0),e.emit("scrollbarDragMove",t))},onDragEnd:function(t){var e=this,n=e.params.scrollbar,r=e.scrollbar,i=e.$wrapperEl,o=r.$el;e.scrollbar.isTouched&&(e.scrollbar.isTouched=!1,e.params.cssMode&&(e.$wrapperEl.css("scroll-snap-type",""),i.transition("")),n.hide&&(clearTimeout(e.scrollbar.dragTimeout),e.scrollbar.dragTimeout=b.nextTick((function(){o.css("opacity",0),o.transition(400)}),1e3)),e.emit("scrollbarDragEnd",t),n.snapOnRelease&&e.slideToClosest())},enableDraggable:function(){var t=this;if(t.params.scrollbar.el){var e=t.scrollbar,n=t.touchEventsTouch,r=t.touchEventsDesktop,o=t.params,a=e.$el[0],s=!(!x.passiveListener||!o.passiveListeners)&&{passive:!1,capture:!1},u=!(!x.passiveListener||!o.passiveListeners)&&{passive:!0,capture:!1};x.touch?(a.addEventListener(n.start,t.scrollbar.onDragStart,s),a.addEventListener(n.move,t.scrollbar.onDragMove,s),a.addEventListener(n.end,t.scrollbar.onDragEnd,u)):(a.addEventListener(r.start,t.scrollbar.onDragStart,s),i.addEventListener(r.move,t.scrollbar.onDragMove,s),i.addEventListener(r.end,t.scrollbar.onDragEnd,u))}},disableDraggable:function(){var t=this;if(t.params.scrollbar.el){var e=t.scrollbar,n=t.touchEventsTouch,r=t.touchEventsDesktop,o=t.params,a=e.$el[0],s=!(!x.passiveListener||!o.passiveListeners)&&{passive:!1,capture:!1},u=!(!x.passiveListener||!o.passiveListeners)&&{passive:!0,capture:!1};x.touch?(a.removeEventListener(n.start,t.scrollbar.onDragStart,s),a.removeEventListener(n.move,t.scrollbar.onDragMove,s),a.removeEventListener(n.end,t.scrollbar.onDragEnd,u)):(a.removeEventListener(r.start,t.scrollbar.onDragStart,s),i.removeEventListener(r.move,t.scrollbar.onDragMove,s),i.removeEventListener(r.end,t.scrollbar.onDragEnd,u))}},init:function(){var t=this;if(t.params.scrollbar.el){var e=t.scrollbar,n=t.$el,r=t.params.scrollbar,i=s(r.el);t.params.uniqueNavElements&&"string"==typeof r.el&&i.length>1&&1===n.find(r.el).length&&(i=n.find(r.el));var o=i.find(".".concat(t.params.scrollbar.dragClass));0===o.length&&(o=s('<div class="'.concat(t.params.scrollbar.dragClass,'"></div>')),i.append(o)),b.extend(e,{$el:i,el:i[0],$dragEl:o,dragEl:o[0]}),r.draggable&&e.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},_t={setTransform:function(t,e){var n=this.rtl,r=s(t),i=n?-1:1,o=r.attr("data-swiper-parallax")||"0",a=r.attr("data-swiper-parallax-x"),u=r.attr("data-swiper-parallax-y"),c=r.attr("data-swiper-parallax-scale"),l=r.attr("data-swiper-parallax-opacity");if(a||u?(a=a||"0",u=u||"0"):this.isHorizontal()?(a=o,u="0"):(u=o,a="0"),a=a.indexOf("%")>=0?"".concat(parseInt(a,10)*e*i,"%"):"".concat(a*e*i,"px"),u=u.indexOf("%")>=0?"".concat(parseInt(u,10)*e,"%"):"".concat(u*e,"px"),null!=l){var h=l-(l-1)*(1-Math.abs(e));r[0].style.opacity=h}if(null==c)r.transform("translate3d(".concat(a,", ").concat(u,", 0px)"));else{var p=c-(c-1)*(1-Math.abs(e));r.transform("translate3d(".concat(a,", ").concat(u,", 0px) scale(").concat(p,")"))}},setTranslate:function(){var t=this,e=t.$el,n=t.slides,r=t.progress,i=t.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e,n){t.parallax.setTransform(n,r)})),n.each((function(e,n){var o=n.progress;t.params.slidesPerGroup>1&&"auto"!==t.params.slidesPerView&&(o+=Math.ceil(e/2)-r*(i.length-1)),o=Math.min(Math.max(o,-1),1),s(n).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e,n){t.parallax.setTransform(n,o)}))}))},setTransition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,e=this,n=e.$el;n.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(e,n){var r=s(n),i=parseInt(r.attr("data-swiper-parallax-duration"),10)||t;0===t&&(i=0),r.transition(i)}))}},bt={getDistanceBetweenTouches:function(t){if(t.targetTouches.length<2)return 1;var e=t.targetTouches[0].pageX,n=t.targetTouches[0].pageY,r=t.targetTouches[1].pageX,i=t.targetTouches[1].pageY;return Math.sqrt(Math.pow(r-e,2)+Math.pow(i-n,2))},onGestureStart:function(t){var e=this,n=e.params.zoom,r=e.zoom,i=r.gesture;if(r.fakeGestureTouched=!1,r.fakeGestureMoved=!1,!x.gestures){if("touchstart"!==t.type||"touchstart"===t.type&&t.targetTouches.length<2)return;r.fakeGestureTouched=!0,i.scaleStart=bt.getDistanceBetweenTouches(t)}i.$slideEl&&i.$slideEl.length||(i.$slideEl=s(t.target).closest(".swiper-slide"),0===i.$slideEl.length&&(i.$slideEl=e.slides.eq(e.activeIndex)),i.$imageEl=i.$slideEl.find("img, svg, canvas"),i.$imageWrapEl=i.$imageEl.parent(".".concat(n.containerClass)),i.maxRatio=i.$imageWrapEl.attr("data-swiper-zoom")||n.maxRatio,0!==i.$imageWrapEl.length)?(i.$imageEl.transition(0),e.zoom.isScaling=!0):i.$imageEl=void 0},onGestureChange:function(t){var e=this.params.zoom,n=this.zoom,r=n.gesture;if(!x.gestures){if("touchmove"!==t.type||"touchmove"===t.type&&t.targetTouches.length<2)return;n.fakeGestureMoved=!0,r.scaleMove=bt.getDistanceBetweenTouches(t)}r.$imageEl&&0!==r.$imageEl.length&&(n.scale=x.gestures?t.scale*n.currentScale:r.scaleMove/r.scaleStart*n.currentScale,n.scale>r.maxRatio&&(n.scale=r.maxRatio-1+Math.pow(n.scale-r.maxRatio+1,.5)),n.scale<e.minRatio&&(n.scale=e.minRatio+1-Math.pow(e.minRatio-n.scale+1,.5)),r.$imageEl.transform("translate3d(0,0,0) scale(".concat(n.scale,")")))},onGestureEnd:function(t){var e=this,n=e.params.zoom,r=e.zoom,i=r.gesture;if(!x.gestures){if(!r.fakeGestureTouched||!r.fakeGestureMoved)return;if("touchend"!==t.type||"touchend"===t.type&&t.changedTouches.length<2&&!Y.android)return;r.fakeGestureTouched=!1,r.fakeGestureMoved=!1}i.$imageEl&&0!==i.$imageEl.length&&(r.scale=Math.max(Math.min(r.scale,i.maxRatio),n.minRatio),i.$imageEl.transition(e.params.speed).transform("translate3d(0,0,0) scale(".concat(r.scale,")")),r.currentScale=r.scale,r.isScaling=!1,1===r.scale&&(i.$slideEl=void 0))},onTouchStart:function(t){var e=this.zoom,n=e.gesture,r=e.image;n.$imageEl&&0!==n.$imageEl.length&&(r.isTouched||(Y.android&&t.preventDefault(),r.isTouched=!0,r.touchesStart.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,r.touchesStart.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY))},onTouchMove:function(t){var e=this,n=e.zoom,r=n.gesture,i=n.image,o=n.velocity;if(r.$imageEl&&0!==r.$imageEl.length&&(e.allowClick=!1,i.isTouched&&r.$slideEl)){i.isMoved||(i.width=r.$imageEl[0].offsetWidth,i.height=r.$imageEl[0].offsetHeight,i.startX=b.getTranslate(r.$imageWrapEl[0],"x")||0,i.startY=b.getTranslate(r.$imageWrapEl[0],"y")||0,r.slideWidth=r.$slideEl[0].offsetWidth,r.slideHeight=r.$slideEl[0].offsetHeight,r.$imageWrapEl.transition(0),e.rtl&&(i.startX=-i.startX,i.startY=-i.startY));var a=i.width*n.scale,s=i.height*n.scale;if(!(a<r.slideWidth&&s<r.slideHeight)){if(i.minX=Math.min(r.slideWidth/2-a/2,0),i.maxX=-i.minX,i.minY=Math.min(r.slideHeight/2-s/2,0),i.maxY=-i.minY,i.touchesCurrent.x="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,i.touchesCurrent.y="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,!i.isMoved&&!n.isScaling){if(e.isHorizontal()&&(Math.floor(i.minX)===Math.floor(i.startX)&&i.touchesCurrent.x<i.touchesStart.x||Math.floor(i.maxX)===Math.floor(i.startX)&&i.touchesCurrent.x>i.touchesStart.x))return void(i.isTouched=!1);if(!e.isHorizontal()&&(Math.floor(i.minY)===Math.floor(i.startY)&&i.touchesCurrent.y<i.touchesStart.y||Math.floor(i.maxY)===Math.floor(i.startY)&&i.touchesCurrent.y>i.touchesStart.y))return void(i.isTouched=!1)}t.preventDefault(),t.stopPropagation(),i.isMoved=!0,i.currentX=i.touchesCurrent.x-i.touchesStart.x+i.startX,i.currentY=i.touchesCurrent.y-i.touchesStart.y+i.startY,i.currentX<i.minX&&(i.currentX=i.minX+1-Math.pow(i.minX-i.currentX+1,.8)),i.currentX>i.maxX&&(i.currentX=i.maxX-1+Math.pow(i.currentX-i.maxX+1,.8)),i.currentY<i.minY&&(i.currentY=i.minY+1-Math.pow(i.minY-i.currentY+1,.8)),i.currentY>i.maxY&&(i.currentY=i.maxY-1+Math.pow(i.currentY-i.maxY+1,.8)),o.prevPositionX||(o.prevPositionX=i.touchesCurrent.x),o.prevPositionY||(o.prevPositionY=i.touchesCurrent.y),o.prevTime||(o.prevTime=Date.now()),o.x=(i.touchesCurrent.x-o.prevPositionX)/(Date.now()-o.prevTime)/2,o.y=(i.touchesCurrent.y-o.prevPositionY)/(Date.now()-o.prevTime)/2,Math.abs(i.touchesCurrent.x-o.prevPositionX)<2&&(o.x=0),Math.abs(i.touchesCurrent.y-o.prevPositionY)<2&&(o.y=0),o.prevPositionX=i.touchesCurrent.x,o.prevPositionY=i.touchesCurrent.y,o.prevTime=Date.now(),r.$imageWrapEl.transform("translate3d(".concat(i.currentX,"px, ").concat(i.currentY,"px,0)"))}}},onTouchEnd:function(){var t=this.zoom,e=t.gesture,n=t.image,r=t.velocity;if(e.$imageEl&&0!==e.$imageEl.length){if(!n.isTouched||!n.isMoved)return n.isTouched=!1,void(n.isMoved=!1);n.isTouched=!1,n.isMoved=!1;var i=300,o=300,a=r.x*i,s=n.currentX+a,u=r.y*o,c=n.currentY+u;0!==r.x&&(i=Math.abs((s-n.currentX)/r.x)),0!==r.y&&(o=Math.abs((c-n.currentY)/r.y));var l=Math.max(i,o);n.currentX=s,n.currentY=c;var h=n.width*t.scale,p=n.height*t.scale;n.minX=Math.min(e.slideWidth/2-h/2,0),n.maxX=-n.minX,n.minY=Math.min(e.slideHeight/2-p/2,0),n.maxY=-n.minY,n.currentX=Math.max(Math.min(n.currentX,n.maxX),n.minX),n.currentY=Math.max(Math.min(n.currentY,n.maxY),n.minY),e.$imageWrapEl.transition(l).transform("translate3d(".concat(n.currentX,"px, ").concat(n.currentY,"px,0)"))}},onTransitionEnd:function(){var t=this,e=t.zoom,n=e.gesture;n.$slideEl&&t.previousIndex!==t.activeIndex&&(n.$imageEl.transform("translate3d(0,0,0) scale(1)"),n.$imageWrapEl.transform("translate3d(0,0,0)"),e.scale=1,e.currentScale=1,n.$slideEl=void 0,n.$imageEl=void 0,n.$imageWrapEl=void 0)},toggle:function(t){var e=this.zoom;e.scale&&1!==e.scale?e.out():e.in(t)},in:function(t){var e,n,r,i,o,a,u,c,l,h,p,f,d,g,v,y,m=this,_=m.zoom,b=m.params.zoom,x=_.gesture,w=_.image;(x.$slideEl||(x.$slideEl=m.clickedSlide?s(m.clickedSlide):m.slides.eq(m.activeIndex),x.$imageEl=x.$slideEl.find("img, svg, canvas"),x.$imageWrapEl=x.$imageEl.parent(".".concat(b.containerClass))),x.$imageEl&&0!==x.$imageEl.length)&&(x.$slideEl.addClass("".concat(b.zoomedSlideClass)),void 0===w.touchesStart.x&&t?(e="touchend"===t.type?t.changedTouches[0].pageX:t.pageX,n="touchend"===t.type?t.changedTouches[0].pageY:t.pageY):(e=w.touchesStart.x,n=w.touchesStart.y),_.scale=x.$imageWrapEl.attr("data-swiper-zoom")||b.maxRatio,_.currentScale=x.$imageWrapEl.attr("data-swiper-zoom")||b.maxRatio,t?(v=x.$slideEl[0].offsetWidth,y=x.$slideEl[0].offsetHeight,r=x.$slideEl.offset().left+v/2-e,i=x.$slideEl.offset().top+y/2-n,u=x.$imageEl[0].offsetWidth,c=x.$imageEl[0].offsetHeight,l=u*_.scale,h=c*_.scale,d=-(p=Math.min(v/2-l/2,0)),g=-(f=Math.min(y/2-h/2,0)),(o=r*_.scale)<p&&(o=p),o>d&&(o=d),(a=i*_.scale)<f&&(a=f),a>g&&(a=g)):(o=0,a=0),x.$imageWrapEl.transition(300).transform("translate3d(".concat(o,"px, ").concat(a,"px,0)")),x.$imageEl.transition(300).transform("translate3d(0,0,0) scale(".concat(_.scale,")")))},out:function(){var t=this,e=t.zoom,n=t.params.zoom,r=e.gesture;r.$slideEl||(r.$slideEl=t.clickedSlide?s(t.clickedSlide):t.slides.eq(t.activeIndex),r.$imageEl=r.$slideEl.find("img, svg, canvas"),r.$imageWrapEl=r.$imageEl.parent(".".concat(n.containerClass))),r.$imageEl&&0!==r.$imageEl.length&&(e.scale=1,e.currentScale=1,r.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),r.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),r.$slideEl.removeClass("".concat(n.zoomedSlideClass)),r.$slideEl=void 0)},enable:function(){var t=this,e=t.zoom;if(!e.enabled){e.enabled=!0;var n=!("touchstart"!==t.touchEvents.start||!x.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},r=!x.passiveListener||{passive:!1,capture:!0};x.gestures?(t.$wrapperEl.on("gesturestart",".swiper-slide",e.onGestureStart,n),t.$wrapperEl.on("gesturechange",".swiper-slide",e.onGestureChange,n),t.$wrapperEl.on("gestureend",".swiper-slide",e.onGestureEnd,n)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.on(t.touchEvents.start,".swiper-slide",e.onGestureStart,n),t.$wrapperEl.on(t.touchEvents.move,".swiper-slide",e.onGestureChange,r),t.$wrapperEl.on(t.touchEvents.end,".swiper-slide",e.onGestureEnd,n),t.touchEvents.cancel&&t.$wrapperEl.on(t.touchEvents.cancel,".swiper-slide",e.onGestureEnd,n)),t.$wrapperEl.on(t.touchEvents.move,".".concat(t.params.zoom.containerClass),e.onTouchMove,r)}},disable:function(){var t=this,e=t.zoom;if(e.enabled){t.zoom.enabled=!1;var n=!("touchstart"!==t.touchEvents.start||!x.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1},r=!x.passiveListener||{passive:!1,capture:!0};x.gestures?(t.$wrapperEl.off("gesturestart",".swiper-slide",e.onGestureStart,n),t.$wrapperEl.off("gesturechange",".swiper-slide",e.onGestureChange,n),t.$wrapperEl.off("gestureend",".swiper-slide",e.onGestureEnd,n)):"touchstart"===t.touchEvents.start&&(t.$wrapperEl.off(t.touchEvents.start,".swiper-slide",e.onGestureStart,n),t.$wrapperEl.off(t.touchEvents.move,".swiper-slide",e.onGestureChange,r),t.$wrapperEl.off(t.touchEvents.end,".swiper-slide",e.onGestureEnd,n),t.touchEvents.cancel&&t.$wrapperEl.off(t.touchEvents.cancel,".swiper-slide",e.onGestureEnd,n)),t.$wrapperEl.off(t.touchEvents.move,".".concat(t.params.zoom.containerClass),e.onTouchMove,r)}}},xt={loadInSlide:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=n.params.lazy;if(void 0!==t&&0!==n.slides.length){var i=n.virtual&&n.params.virtual.enabled,o=i?n.$wrapperEl.children(".".concat(n.params.slideClass,'[data-swiper-slide-index="').concat(t,'"]')):n.slides.eq(t),a=o.find(".".concat(r.elementClass,":not(.").concat(r.loadedClass,"):not(.").concat(r.loadingClass,")"));!o.hasClass(r.elementClass)||o.hasClass(r.loadedClass)||o.hasClass(r.loadingClass)||(a=a.add(o[0])),0!==a.length&&a.each((function(t,i){var a=s(i);a.addClass(r.loadingClass);var u=a.attr("data-background"),c=a.attr("data-src"),l=a.attr("data-srcset"),h=a.attr("data-sizes");n.loadImage(a[0],c||u,l,h,!1,(function(){if(null!=n&&n&&(!n||n.params)&&!n.destroyed){if(u?(a.css("background-image",'url("'.concat(u,'")')),a.removeAttr("data-background")):(l&&(a.attr("srcset",l),a.removeAttr("data-srcset")),h&&(a.attr("sizes",h),a.removeAttr("data-sizes")),c&&(a.attr("src",c),a.removeAttr("data-src"))),a.addClass(r.loadedClass).removeClass(r.loadingClass),o.find(".".concat(r.preloaderClass)).remove(),n.params.loop&&e){var t=o.attr("data-swiper-slide-index");if(o.hasClass(n.params.slideDuplicateClass)){var i=n.$wrapperEl.children('[data-swiper-slide-index="'.concat(t,'"]:not(.').concat(n.params.slideDuplicateClass,")"));n.lazy.loadInSlide(i.index(),!1)}else{var s=n.$wrapperEl.children(".".concat(n.params.slideDuplicateClass,'[data-swiper-slide-index="').concat(t,'"]'));n.lazy.loadInSlide(s.index(),!1)}}n.emit("lazyImageReady",o[0],a[0])}})),n.emit("lazyImageLoad",o[0],a[0])}))}},load:function(){var t=this,e=t.$wrapperEl,n=t.params,r=t.slides,i=t.activeIndex,o=t.virtual&&n.virtual.enabled,a=n.lazy,u=n.slidesPerView;function c(t){if(o){if(e.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(t,'"]')).length)return!0}else if(r[t])return!0;return!1}function l(t){return o?s(t).attr("data-swiper-slide-index"):s(t).index()}if("auto"===u&&(u=0),t.lazy.initialImageLoaded||(t.lazy.initialImageLoaded=!0),t.params.watchSlidesVisibility)e.children(".".concat(n.slideVisibleClass)).each((function(e,n){var r=o?s(n).attr("data-swiper-slide-index"):s(n).index();t.lazy.loadInSlide(r)}));else if(u>1)for(var h=i;h<i+u;h+=1)c(h)&&t.lazy.loadInSlide(h);else t.lazy.loadInSlide(i);if(a.loadPrevNext)if(u>1||a.loadPrevNextAmount&&a.loadPrevNextAmount>1){for(var p=a.loadPrevNextAmount,f=u,d=Math.min(i+f+Math.max(p,f),r.length),g=Math.max(i-Math.max(f,p),0),v=i+u;v<d;v+=1)c(v)&&t.lazy.loadInSlide(v);for(var y=g;y<i;y+=1)c(y)&&t.lazy.loadInSlide(y)}else{var m=e.children(".".concat(n.slideNextClass));m.length>0&&t.lazy.loadInSlide(l(m));var _=e.children(".".concat(n.slidePrevClass));_.length>0&&t.lazy.loadInSlide(l(_))}}},wt={LinearSpline:function(t,e){var n,r,i,o,a,s=function(t,e){for(r=-1,n=t.length;n-r>1;)t[i=n+r>>1]<=e?r=i:n=i;return n};return this.x=t,this.y=e,this.lastIndex=t.length-1,this.interpolate=function(t){return t?(a=s(this.x,t),o=a-1,(t-this.x[o])*(this.y[a]-this.y[o])/(this.x[a]-this.x[o])+this.y[o]):0},this},getInterpolateFunction:function(t){var e=this;e.controller.spline||(e.controller.spline=e.params.loop?new wt.LinearSpline(e.slidesGrid,t.slidesGrid):new wt.LinearSpline(e.snapGrid,t.snapGrid))},setTranslate:function(t,e){var n,r,i=this,o=i.controller.control;function a(t){var e=i.rtlTranslate?-i.translate:i.translate;"slide"===i.params.controller.by&&(i.controller.getInterpolateFunction(t),r=-i.controller.spline.interpolate(-e)),r&&"container"!==i.params.controller.by||(n=(t.maxTranslate()-t.minTranslate())/(i.maxTranslate()-i.minTranslate()),r=(e-i.minTranslate())*n+t.minTranslate()),i.params.controller.inverse&&(r=t.maxTranslate()-r),t.updateProgress(r),t.setTranslate(r,i),t.updateActiveIndex(),t.updateSlidesClasses()}if(Array.isArray(o))for(var s=0;s<o.length;s+=1)o[s]!==e&&o[s]instanceof rt&&a(o[s]);else o instanceof rt&&e!==o&&a(o)},setTransition:function(t,e){var n,r=this,i=r.controller.control;function o(e){e.setTransition(t,r),0!==t&&(e.transitionStart(),e.params.autoHeight&&b.nextTick((function(){e.updateAutoHeight()})),e.$wrapperEl.transitionEnd((function(){i&&(e.params.loop&&"slide"===r.params.controller.by&&e.loopFix(),e.transitionEnd())})))}if(Array.isArray(i))for(n=0;n<i.length;n+=1)i[n]!==e&&i[n]instanceof rt&&o(i[n]);else i instanceof rt&&e!==i&&o(i)}},Et={makeElFocusable:function(t){return t.attr("tabIndex","0"),t},addElRole:function(t,e){return t.attr("role",e),t},addElLabel:function(t,e){return t.attr("aria-label",e),t},disableEl:function(t){return t.attr("aria-disabled",!0),t},enableEl:function(t){return t.attr("aria-disabled",!1),t},onEnterKey:function(t){var e=this,n=e.params.a11y;if(13===t.keyCode){var r=s(t.target);e.navigation&&e.navigation.$nextEl&&r.is(e.navigation.$nextEl)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?e.a11y.notify(n.lastSlideMessage):e.a11y.notify(n.nextSlideMessage)),e.navigation&&e.navigation.$prevEl&&r.is(e.navigation.$prevEl)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?e.a11y.notify(n.firstSlideMessage):e.a11y.notify(n.prevSlideMessage)),e.pagination&&r.is(".".concat(e.params.pagination.bulletClass))&&r[0].click()}},notify:function(t){var e=this.a11y.liveRegion;0!==e.length&&(e.html(""),e.html(t))},updateNavigation:function(){var t=this;if(!t.params.loop&&t.navigation){var e=t.navigation,n=e.$nextEl,r=e.$prevEl;r&&r.length>0&&(t.isBeginning?t.a11y.disableEl(r):t.a11y.enableEl(r)),n&&n.length>0&&(t.isEnd?t.a11y.disableEl(n):t.a11y.enableEl(n))}},updatePagination:function(){var t=this,e=t.params.a11y;t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.bullets.each((function(n,r){var i=s(r);t.a11y.makeElFocusable(i),t.a11y.addElRole(i,"button"),t.a11y.addElLabel(i,e.paginationBulletMessage.replace(/{{index}}/,i.index()+1))}))},init:function(){var t=this;t.$el.append(t.a11y.liveRegion);var e,n,r=t.params.a11y;t.navigation&&t.navigation.$nextEl&&(e=t.navigation.$nextEl),t.navigation&&t.navigation.$prevEl&&(n=t.navigation.$prevEl),e&&(t.a11y.makeElFocusable(e),t.a11y.addElRole(e,"button"),t.a11y.addElLabel(e,r.nextSlideMessage),e.on("keydown",t.a11y.onEnterKey)),n&&(t.a11y.makeElFocusable(n),t.a11y.addElRole(n,"button"),t.a11y.addElLabel(n,r.prevSlideMessage),n.on("keydown",t.a11y.onEnterKey)),t.pagination&&t.params.pagination.clickable&&t.pagination.bullets&&t.pagination.bullets.length&&t.pagination.$el.on("keydown",".".concat(t.params.pagination.bulletClass),t.a11y.onEnterKey)},destroy:function(){var t,e,n=this;n.a11y.liveRegion&&n.a11y.liveRegion.length>0&&n.a11y.liveRegion.remove(),n.navigation&&n.navigation.$nextEl&&(t=n.navigation.$nextEl),n.navigation&&n.navigation.$prevEl&&(e=n.navigation.$prevEl),t&&t.off("keydown",n.a11y.onEnterKey),e&&e.off("keydown",n.a11y.onEnterKey),n.pagination&&n.params.pagination.clickable&&n.pagination.bullets&&n.pagination.bullets.length&&n.pagination.$el.off("keydown",".".concat(n.params.pagination.bulletClass),n.a11y.onEnterKey)}},St={init:function(){var t=this;if(t.params.history){if(!o.history||!o.history.pushState)return t.params.history.enabled=!1,void(t.params.hashNavigation.enabled=!0);var e=t.history;e.initialized=!0,e.paths=St.getPathValues(),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,t.params.runCallbacksOnInit),t.params.history.replaceState||o.addEventListener("popstate",t.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||o.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){var t=this;t.history.paths=St.getPathValues(),t.history.scrollToSlide(t.params.speed,t.history.paths.value,!1)},getPathValues:function(){var t=o.location.pathname.slice(1).split("/").filter((function(t){return""!==t})),e=t.length;return{key:t[e-2],value:t[e-1]}},setHistory:function(t,e){var n=this;if(n.history.initialized&&n.params.history.enabled){var r=n.slides.eq(e),i=St.slugify(r.attr("data-history"));o.location.pathname.includes(t)||(i="".concat(t,"/").concat(i));var a=o.history.state;a&&a.value===i||(n.params.history.replaceState?o.history.replaceState({value:i},null,i):o.history.pushState({value:i},null,i))}},slugify:function(t){return t.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(t,e,n){var r=this;if(e)for(var i=0,o=r.slides.length;i<o;i+=1){var a=r.slides.eq(i);if(St.slugify(a.attr("data-history"))===e&&!a.hasClass(r.params.slideDuplicateClass)){var s=a.index();r.slideTo(s,t,n)}}else r.slideTo(0,t,n)}},Ct={onHashCange:function(){var t=this,e=i.location.hash.replace("#","");if(e!==t.slides.eq(t.activeIndex).attr("data-hash")){var n=t.$wrapperEl.children(".".concat(t.params.slideClass,'[data-hash="').concat(e,'"]')).index();if(void 0===n)return;t.slideTo(n)}},setHash:function(){var t=this;if(t.hashNavigation.initialized&&t.params.hashNavigation.enabled)if(t.params.hashNavigation.replaceState&&o.history&&o.history.replaceState)o.history.replaceState(null,null,"#".concat(t.slides.eq(t.activeIndex).attr("data-hash"))||!1);else{var e=t.slides.eq(t.activeIndex),n=e.attr("data-hash")||e.attr("data-history");i.location.hash=n||""}},init:function(){var t=this;if(!(!t.params.hashNavigation.enabled||t.params.history&&t.params.history.enabled)){t.hashNavigation.initialized=!0;var e=i.location.hash.replace("#","");if(e)for(var n=0,r=t.slides.length;n<r;n+=1){var a=t.slides.eq(n);if((a.attr("data-hash")||a.attr("data-history"))===e&&!a.hasClass(t.params.slideDuplicateClass)){var u=a.index();t.slideTo(u,0,t.params.runCallbacksOnInit,!0)}}t.params.hashNavigation.watchState&&s(o).on("hashchange",t.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&s(o).off("hashchange",this.hashNavigation.onHashCange)}},Tt={run:function(){var t=this,e=t.slides.eq(t.activeIndex),n=t.params.autoplay.delay;e.attr("data-swiper-autoplay")&&(n=e.attr("data-swiper-autoplay")||t.params.autoplay.delay),clearTimeout(t.autoplay.timeout),t.autoplay.timeout=b.nextTick((function(){t.params.autoplay.reverseDirection?t.params.loop?(t.loopFix(),t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.isBeginning?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(t.slideTo(t.slides.length-1,t.params.speed,!0,!0),t.emit("autoplay")):(t.slidePrev(t.params.speed,!0,!0),t.emit("autoplay")):t.params.loop?(t.loopFix(),t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")):t.isEnd?t.params.autoplay.stopOnLastSlide?t.autoplay.stop():(t.slideTo(0,t.params.speed,!0,!0),t.emit("autoplay")):(t.slideNext(t.params.speed,!0,!0),t.emit("autoplay")),t.params.cssMode&&t.autoplay.running&&t.autoplay.run()}),n)},start:function(){var t=this;return void 0===t.autoplay.timeout&&(!t.autoplay.running&&(t.autoplay.running=!0,t.emit("autoplayStart"),t.autoplay.run(),!0))},stop:function(){var t=this;return!!t.autoplay.running&&(void 0!==t.autoplay.timeout&&(t.autoplay.timeout&&(clearTimeout(t.autoplay.timeout),t.autoplay.timeout=void 0),t.autoplay.running=!1,t.emit("autoplayStop"),!0))},pause:function(t){var e=this;e.autoplay.running&&(e.autoplay.paused||(e.autoplay.timeout&&clearTimeout(e.autoplay.timeout),e.autoplay.paused=!0,0!==t&&e.params.autoplay.waitForTransition?(e.$wrapperEl[0].addEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].addEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd)):(e.autoplay.paused=!1,e.autoplay.run())))}},It={setTranslate:function(){for(var t=this,e=t.slides,n=0;n<e.length;n+=1){var r=t.slides.eq(n),i=-r[0].swiperSlideOffset;t.params.virtualTranslate||(i-=t.translate);var o=0;t.isHorizontal()||(o=i,i=0);var a=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(r[0].progress),0):1+Math.min(Math.max(r[0].progress,-1),0);r.css({opacity:a}).transform("translate3d(".concat(i,"px, ").concat(o,"px, 0px)"))}},setTransition:function(t){var e=this,n=e.slides,r=e.$wrapperEl;if(n.transition(t),e.params.virtualTranslate&&0!==t){var i=!1;n.transitionEnd((function(){if(!i&&e&&!e.destroyed){i=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],n=0;n<t.length;n+=1)r.trigger(t[n])}}))}}},Ot={setTranslate:function(){var t,e=this,n=e.$el,r=e.$wrapperEl,i=e.slides,o=e.width,a=e.height,u=e.rtlTranslate,c=e.size,l=e.params.cubeEffect,h=e.isHorizontal(),p=e.virtual&&e.params.virtual.enabled,f=0;l.shadow&&(h?(0===(t=r.find(".swiper-cube-shadow")).length&&(t=s('<div class="swiper-cube-shadow"></div>'),r.append(t)),t.css({height:"".concat(o,"px")})):0===(t=n.find(".swiper-cube-shadow")).length&&(t=s('<div class="swiper-cube-shadow"></div>'),n.append(t)));for(var d=0;d<i.length;d+=1){var g=i.eq(d),v=d;p&&(v=parseInt(g.attr("data-swiper-slide-index"),10));var y=90*v,m=Math.floor(y/360);u&&(y=-y,m=Math.floor(-y/360));var _=Math.max(Math.min(g[0].progress,1),-1),b=0,x=0,w=0;v%4==0?(b=4*-m*c,w=0):(v-1)%4==0?(b=0,w=4*-m*c):(v-2)%4==0?(b=c+4*m*c,w=c):(v-3)%4==0&&(b=-c,w=3*c+4*c*m),u&&(b=-b),h||(x=b,b=0);var E="rotateX(".concat(h?0:-y,"deg) rotateY(").concat(h?y:0,"deg) translate3d(").concat(b,"px, ").concat(x,"px, ").concat(w,"px)");if(_<=1&&_>-1&&(f=90*v+90*_,u&&(f=90*-v-90*_)),g.transform(E),l.slideShadows){var S=h?g.find(".swiper-slide-shadow-left"):g.find(".swiper-slide-shadow-top"),C=h?g.find(".swiper-slide-shadow-right"):g.find(".swiper-slide-shadow-bottom");0===S.length&&(S=s('<div class="swiper-slide-shadow-'.concat(h?"left":"top",'"></div>')),g.append(S)),0===C.length&&(C=s('<div class="swiper-slide-shadow-'.concat(h?"right":"bottom",'"></div>')),g.append(C)),S.length&&(S[0].style.opacity=Math.max(-_,0)),C.length&&(C[0].style.opacity=Math.max(_,0))}}if(r.css({"-webkit-transform-origin":"50% 50% -".concat(c/2,"px"),"-moz-transform-origin":"50% 50% -".concat(c/2,"px"),"-ms-transform-origin":"50% 50% -".concat(c/2,"px"),"transform-origin":"50% 50% -".concat(c/2,"px")}),l.shadow)if(h)t.transform("translate3d(0px, ".concat(o/2+l.shadowOffset,"px, ").concat(-o/2,"px) rotateX(90deg) rotateZ(0deg) scale(").concat(l.shadowScale,")"));else{var T=Math.abs(f)-90*Math.floor(Math.abs(f)/90),I=1.5-(Math.sin(2*T*Math.PI/360)/2+Math.cos(2*T*Math.PI/360)/2),O=l.shadowScale,M=l.shadowScale/I,P=l.shadowOffset;t.transform("scale3d(".concat(O,", 1, ").concat(M,") translate3d(0px, ").concat(a/2+P,"px, ").concat(-a/2/M,"px) rotateX(-90deg)"))}var L=at.isSafari||at.isUiWebView?-c/2:0;r.transform("translate3d(0px,0,".concat(L,"px) rotateX(").concat(e.isHorizontal()?0:f,"deg) rotateY(").concat(e.isHorizontal()?-f:0,"deg)"))},setTransition:function(t){var e=this,n=e.$el;e.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.cubeEffect.shadow&&!e.isHorizontal()&&n.find(".swiper-cube-shadow").transition(t)}},Mt={setTranslate:function(){for(var t=this,e=t.slides,n=t.rtlTranslate,r=0;r<e.length;r+=1){var i=e.eq(r),o=i[0].progress;t.params.flipEffect.limitRotation&&(o=Math.max(Math.min(i[0].progress,1),-1));var a=-180*o,u=0,c=-i[0].swiperSlideOffset,l=0;if(t.isHorizontal()?n&&(a=-a):(l=c,c=0,u=-a,a=0),i[0].style.zIndex=-Math.abs(Math.round(o))+e.length,t.params.flipEffect.slideShadows){var h=t.isHorizontal()?i.find(".swiper-slide-shadow-left"):i.find(".swiper-slide-shadow-top"),p=t.isHorizontal()?i.find(".swiper-slide-shadow-right"):i.find(".swiper-slide-shadow-bottom");0===h.length&&(h=s('<div class="swiper-slide-shadow-'.concat(t.isHorizontal()?"left":"top",'"></div>')),i.append(h)),0===p.length&&(p=s('<div class="swiper-slide-shadow-'.concat(t.isHorizontal()?"right":"bottom",'"></div>')),i.append(p)),h.length&&(h[0].style.opacity=Math.max(-o,0)),p.length&&(p[0].style.opacity=Math.max(o,0))}i.transform("translate3d(".concat(c,"px, ").concat(l,"px, 0px) rotateX(").concat(u,"deg) rotateY(").concat(a,"deg)"))}},setTransition:function(t){var e=this,n=e.slides,r=e.activeIndex,i=e.$wrapperEl;if(n.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t),e.params.virtualTranslate&&0!==t){var o=!1;n.eq(r).transitionEnd((function(){if(!o&&e&&!e.destroyed){o=!0,e.animating=!1;for(var t=["webkitTransitionEnd","transitionend"],n=0;n<t.length;n+=1)i.trigger(t[n])}}))}}},Pt={setTranslate:function(){for(var t=this,e=t.width,n=t.height,r=t.slides,i=t.$wrapperEl,o=t.slidesSizesGrid,a=t.params.coverflowEffect,u=t.isHorizontal(),c=t.translate,l=u?e/2-c:n/2-c,h=u?a.rotate:-a.rotate,p=a.depth,f=0,d=r.length;f<d;f+=1){var g=r.eq(f),v=o[f],y=(l-g[0].swiperSlideOffset-v/2)/v*a.modifier,m=u?h*y:0,_=u?0:h*y,b=-p*Math.abs(y),w=u?0:a.stretch*y,E=u?a.stretch*y:0;Math.abs(E)<.001&&(E=0),Math.abs(w)<.001&&(w=0),Math.abs(b)<.001&&(b=0),Math.abs(m)<.001&&(m=0),Math.abs(_)<.001&&(_=0);var S="translate3d(".concat(E,"px,").concat(w,"px,").concat(b,"px) rotateX(").concat(_,"deg) rotateY(").concat(m,"deg)");if(g.transform(S),g[0].style.zIndex=1-Math.abs(Math.round(y)),a.slideShadows){var C=u?g.find(".swiper-slide-shadow-left"):g.find(".swiper-slide-shadow-top"),T=u?g.find(".swiper-slide-shadow-right"):g.find(".swiper-slide-shadow-bottom");0===C.length&&(C=s('<div class="swiper-slide-shadow-'.concat(u?"left":"top",'"></div>')),g.append(C)),0===T.length&&(T=s('<div class="swiper-slide-shadow-'.concat(u?"right":"bottom",'"></div>')),g.append(T)),C.length&&(C[0].style.opacity=y>0?y:0),T.length&&(T[0].style.opacity=-y>0?-y:0)}}(x.pointerEvents||x.prefixedPointerEvents)&&(i[0].style.perspectiveOrigin="".concat(l,"px 50%"))},setTransition:function(t){this.slides.transition(t).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(t)}},Lt={init:function(){var t=this,e=t.params.thumbs,n=t.constructor;e.swiper instanceof n?(t.thumbs.swiper=e.swiper,b.extend(t.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),b.extend(t.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):b.isObject(e.swiper)&&(t.thumbs.swiper=new n(b.extend({},e.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),t.thumbs.swiperCreated=!0),t.thumbs.swiper.$el.addClass(t.params.thumbs.thumbsContainerClass),t.thumbs.swiper.on("tap",t.thumbs.onThumbClick)},onThumbClick:function(){var t=this,e=t.thumbs.swiper;if(e){var n=e.clickedIndex,r=e.clickedSlide;if(!(r&&s(r).hasClass(t.params.thumbs.slideThumbActiveClass)||null==n)){var i;if(i=e.params.loop?parseInt(s(e.clickedSlide).attr("data-swiper-slide-index"),10):n,t.params.loop){var o=t.activeIndex;t.slides.eq(o).hasClass(t.params.slideDuplicateClass)&&(t.loopFix(),t._clientLeft=t.$wrapperEl[0].clientLeft,o=t.activeIndex);var a=t.slides.eq(o).prevAll('[data-swiper-slide-index="'.concat(i,'"]')).eq(0).index(),u=t.slides.eq(o).nextAll('[data-swiper-slide-index="'.concat(i,'"]')).eq(0).index();i=void 0===a?u:void 0===u?a:u-o<o-a?u:a}t.slideTo(i)}}},update:function(t){var e=this,n=e.thumbs.swiper;if(n){var r="auto"===n.params.slidesPerView?n.slidesPerViewDynamic():n.params.slidesPerView;if(e.realIndex!==n.realIndex){var i,o=n.activeIndex;if(n.params.loop){n.slides.eq(o).hasClass(n.params.slideDuplicateClass)&&(n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft,o=n.activeIndex);var a=n.slides.eq(o).prevAll('[data-swiper-slide-index="'.concat(e.realIndex,'"]')).eq(0).index(),s=n.slides.eq(o).nextAll('[data-swiper-slide-index="'.concat(e.realIndex,'"]')).eq(0).index();i=void 0===a?s:void 0===s?a:s-o==o-a?o:s-o<o-a?s:a}else i=e.realIndex;n.visibleSlidesIndexes&&n.visibleSlidesIndexes.indexOf(i)<0&&(n.params.centeredSlides?i=i>o?i-Math.floor(r/2)+1:i+Math.floor(r/2)-1:i>o&&(i=i-r+1),n.slideTo(i,t?0:void 0))}var u=1,c=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(u=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(u=1),u=Math.floor(u),n.slides.removeClass(c),n.params.loop||n.params.virtual&&n.params.virtual.enabled)for(var l=0;l<u;l+=1)n.$wrapperEl.children('[data-swiper-slide-index="'.concat(e.realIndex+l,'"]')).addClass(c);else for(var h=0;h<u;h+=1)n.slides.eq(e.realIndex+h).addClass(c)}}},Rt=[it,ot,st,ut,lt,pt,dt,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){var t=this;b.extend(t,{mousewheel:{enabled:!1,enable:gt.enable.bind(t),disable:gt.disable.bind(t),handle:gt.handle.bind(t),handleMouseEnter:gt.handleMouseEnter.bind(t),handleMouseLeave:gt.handleMouseLeave.bind(t),animateSlider:gt.animateSlider.bind(t),releaseScroll:gt.releaseScroll.bind(t),lastScrollTime:b.now(),lastEventBeforeSnap:void 0,recentWheelEvents:[]}})},on:{init:function(){var t=this;!t.params.mousewheel.enabled&&t.params.cssMode&&t.mousewheel.disable(),t.params.mousewheel.enabled&&t.mousewheel.enable()},destroy:function(){var t=this;t.params.cssMode&&t.mousewheel.enable(),t.mousewheel.enabled&&t.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){var t=this;b.extend(t,{navigation:{init:vt.init.bind(t),update:vt.update.bind(t),destroy:vt.destroy.bind(t),onNextClick:vt.onNextClick.bind(t),onPrevClick:vt.onPrevClick.bind(t)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(t){var e,n=this,r=n.navigation,i=r.$nextEl,o=r.$prevEl;!n.params.navigation.hideOnClick||s(t.target).is(o)||s(t.target).is(i)||(i?e=i.hasClass(n.params.navigation.hiddenClass):o&&(e=o.hasClass(n.params.navigation.hiddenClass)),!0===e?n.emit("navigationShow",n):n.emit("navigationHide",n),i&&i.toggleClass(n.params.navigation.hiddenClass),o&&o.toggleClass(n.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(t){return t},formatFractionTotal:function(t){return t},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){var t=this;b.extend(t,{pagination:{init:yt.init.bind(t),render:yt.render.bind(t),update:yt.update.bind(t),destroy:yt.destroy.bind(t),dynamicBulletIndex:0}})},on:{init:function(){var t=this;t.pagination.init(),t.pagination.render(),t.pagination.update()},activeIndexChange:function(){var t=this;(t.params.loop||void 0===t.snapIndex)&&t.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){var t=this;t.params.loop&&(t.pagination.render(),t.pagination.update())},snapGridLengthChange:function(){var t=this;t.params.loop||(t.pagination.render(),t.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(t){var e=this;e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!s(t.target).hasClass(e.params.pagination.bulletClass)&&(!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow",e):e.emit("paginationHide",e),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass))}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var t=this;b.extend(t,{scrollbar:{init:mt.init.bind(t),destroy:mt.destroy.bind(t),updateSize:mt.updateSize.bind(t),setTranslate:mt.setTranslate.bind(t),setTransition:mt.setTransition.bind(t),enableDraggable:mt.enableDraggable.bind(t),disableDraggable:mt.disableDraggable.bind(t),setDragPosition:mt.setDragPosition.bind(t),getPointerPosition:mt.getPointerPosition.bind(t),onDragStart:mt.onDragStart.bind(t),onDragMove:mt.onDragMove.bind(t),onDragEnd:mt.onDragEnd.bind(t),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){var t=this;t.scrollbar.init(),t.scrollbar.updateSize(),t.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(t){this.scrollbar.setTransition(t)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){var t=this;b.extend(t,{parallax:{setTransform:_t.setTransform.bind(t),setTranslate:_t.setTranslate.bind(t),setTransition:_t.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;t.params.parallax.enabled&&(t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax.enabled&&this.parallax.setTranslate()},setTransition:function(t){this.params.parallax.enabled&&this.parallax.setTransition(t)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var t=this,e={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach((function(n){e[n]=bt[n].bind(t)})),b.extend(t,{zoom:e});var n=1;Object.defineProperty(t.zoom,"scale",{get:function(){return n},set:function(e){if(n!==e){var r=t.zoom.gesture.$imageEl?t.zoom.gesture.$imageEl[0]:void 0,i=t.zoom.gesture.$slideEl?t.zoom.gesture.$slideEl[0]:void 0;t.emit("zoomChange",e,r,i)}n=e}})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(t){this.zoom.enabled&&this.zoom.onTouchStart(t)},touchEnd:function(t){this.zoom.enabled&&this.zoom.onTouchEnd(t)},doubleTap:function(t){var e=this;e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&e.zoom.toggle(t)},transitionEnd:function(){var t=this;t.zoom.enabled&&t.params.zoom.enabled&&t.zoom.onTransitionEnd()},slideChange:function(){var t=this;t.zoom.enabled&&t.params.zoom.enabled&&t.params.cssMode&&t.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){var t=this;b.extend(t,{lazy:{initialImageLoaded:!1,load:xt.load.bind(t),loadInSlide:xt.loadInSlide.bind(t)}})},on:{beforeInit:function(){var t=this;t.params.lazy.enabled&&t.params.preloadImages&&(t.params.preloadImages=!1)},init:function(){var t=this;t.params.lazy.enabled&&!t.params.loop&&0===t.params.initialSlide&&t.lazy.load()},scroll:function(){var t=this;t.params.freeMode&&!t.params.freeModeSticky&&t.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){var t=this;t.params.lazy.enabled&&(t.params.lazy.loadOnTransitionStart||!t.params.lazy.loadOnTransitionStart&&!t.lazy.initialImageLoaded)&&t.lazy.load()},transitionEnd:function(){var t=this;t.params.lazy.enabled&&!t.params.lazy.loadOnTransitionStart&&t.lazy.load()},slideChange:function(){var t=this;t.params.lazy.enabled&&t.params.cssMode&&t.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){var t=this;b.extend(t,{controller:{control:t.params.controller.control,getInterpolateFunction:wt.getInterpolateFunction.bind(t),setTranslate:wt.setTranslate.bind(t),setTransition:wt.setTransition.bind(t)}})},on:{update:function(){var t=this;t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},resize:function(){var t=this;t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},observerUpdate:function(){var t=this;t.controller.control&&t.controller.spline&&(t.controller.spline=void 0,delete t.controller.spline)},setTranslate:function(t,e){this.controller.control&&this.controller.setTranslate(t,e)},setTransition:function(t,e){this.controller.control&&this.controller.setTransition(t,e)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var t=this;b.extend(t,{a11y:{liveRegion:s('<span class="'.concat(t.params.a11y.notificationClass,'" aria-live="assertive" aria-atomic="true"></span>'))}}),Object.keys(Et).forEach((function(e){t.a11y[e]=Et[e].bind(t)}))},on:{init:function(){var t=this;t.params.a11y.enabled&&(t.a11y.init(),t.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){var t=this;b.extend(t,{history:{init:St.init.bind(t),setHistory:St.setHistory.bind(t),setHistoryPopState:St.setHistoryPopState.bind(t),scrollToSlide:St.scrollToSlide.bind(t),destroy:St.destroy.bind(t)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){var t=this;t.history.initialized&&t.history.setHistory(t.params.history.key,t.activeIndex)},slideChange:function(){var t=this;t.history.initialized&&t.params.cssMode&&t.history.setHistory(t.params.history.key,t.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){var t=this;b.extend(t,{hashNavigation:{initialized:!1,init:Ct.init.bind(t),destroy:Ct.destroy.bind(t),setHash:Ct.setHash.bind(t),onHashCange:Ct.onHashCange.bind(t)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()},slideChange:function(){var t=this;t.hashNavigation.initialized&&t.params.cssMode&&t.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var t=this;b.extend(t,{autoplay:{running:!1,paused:!1,run:Tt.run.bind(t),start:Tt.start.bind(t),stop:Tt.stop.bind(t),pause:Tt.pause.bind(t),onVisibilityChange:function(){"hidden"===document.visibilityState&&t.autoplay.running&&t.autoplay.pause(),"visible"===document.visibilityState&&t.autoplay.paused&&(t.autoplay.run(),t.autoplay.paused=!1)},onTransitionEnd:function(e){t&&!t.destroyed&&t.$wrapperEl&&e.target===this&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}}})},on:{init:function(){var t=this;t.params.autoplay.enabled&&(t.autoplay.start(),document.addEventListener("visibilitychange",t.autoplay.onVisibilityChange))},beforeTransitionStart:function(t,e){var n=this;n.autoplay.running&&(e||!n.params.autoplay.disableOnInteraction?n.autoplay.pause(t):n.autoplay.stop())},sliderFirstMove:function(){var t=this;t.autoplay.running&&(t.params.autoplay.disableOnInteraction?t.autoplay.stop():t.autoplay.pause())},touchEnd:function(){var t=this;t.params.cssMode&&t.autoplay.paused&&!t.params.autoplay.disableOnInteraction&&t.autoplay.run()},destroy:function(){var t=this;t.autoplay.running&&t.autoplay.stop(),document.removeEventListener("visibilitychange",t.autoplay.onVisibilityChange)}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){var t=this;b.extend(t,{fadeEffect:{setTranslate:It.setTranslate.bind(t),setTransition:It.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;if("fade"===t.params.effect){t.classNames.push("".concat(t.params.containerModifierClass,"fade"));var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};b.extend(t.params,e),b.extend(t.originalParams,e)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(t){"fade"===this.params.effect&&this.fadeEffect.setTransition(t)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){var t=this;b.extend(t,{cubeEffect:{setTranslate:Ot.setTranslate.bind(t),setTransition:Ot.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;if("cube"===t.params.effect){t.classNames.push("".concat(t.params.containerModifierClass,"cube")),t.classNames.push("".concat(t.params.containerModifierClass,"3d"));var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};b.extend(t.params,e),b.extend(t.originalParams,e)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(t){"cube"===this.params.effect&&this.cubeEffect.setTransition(t)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){var t=this;b.extend(t,{flipEffect:{setTranslate:Mt.setTranslate.bind(t),setTransition:Mt.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;if("flip"===t.params.effect){t.classNames.push("".concat(t.params.containerModifierClass,"flip")),t.classNames.push("".concat(t.params.containerModifierClass,"3d"));var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};b.extend(t.params,e),b.extend(t.originalParams,e)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(t){"flip"===this.params.effect&&this.flipEffect.setTransition(t)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){var t=this;b.extend(t,{coverflowEffect:{setTranslate:Pt.setTranslate.bind(t),setTransition:Pt.setTransition.bind(t)}})},on:{beforeInit:function(){var t=this;"coverflow"===t.params.effect&&(t.classNames.push("".concat(t.params.containerModifierClass,"coverflow")),t.classNames.push("".concat(t.params.containerModifierClass,"3d")),t.params.watchSlidesProgress=!0,t.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(t){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(t)}}},{name:"thumbs",params:{thumbs:{multipleActiveThumbs:!0,swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){var t=this;b.extend(t,{thumbs:{swiper:null,init:Lt.init.bind(t),update:Lt.update.bind(t),onThumbClick:Lt.onThumbClick.bind(t)}})},on:{beforeInit:function(){var t=this,e=t.params.thumbs;e&&e.swiper&&(t.thumbs.init(),t.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(t){var e=this.thumbs.swiper;e&&e.setTransition(t)},beforeDestroy:function(){var t=this.thumbs.swiper;t&&this.thumbs.swiperCreated&&t&&t.destroy()}}}];void 0===rt.use&&(rt.use=rt.Class.use,rt.installModule=rt.Class.installModule),rt.use(Rt);var At=rt;At.prototype.slideToMapID=function(t){if(this.$el[0].querySelector(".swiper-slide-active").getAttribute("data")!=t)for(var e=this.$el[0].querySelectorAll(".swiper-slide"),n=0;n<e.length;n++){var r=e[n];if(r.getAttribute("data")==t)return this.slideToLoop(parseInt(r.getAttribute("data-swiper-slide-index")))}},At.prototype.slideToIndex=function(t){var e=this.$el[0].querySelector(".swiper-slide-active");parseInt(e.getAttribute("data-swiper-slide-index"))!=t&&this.slideToLoop(t)},At.prototype.setSlideMapID=function(t){this.slideToMapID(t),this.setSlideMapIDAsSelected(t)},At.prototype.setSlideIndex=function(t){this.slideToIndex(t),this.setSlideIndexAsSelected(t)},At.prototype.setSlideIndexAsSelected=function(t){for(var e=this.$el[0].querySelectorAll(".swiper-slide"),n=0;n<e.length;n++){var r=e[n];r.getAttribute("data-swiper-slide-index")==t?r.classList.add("selected"):r.classList.remove("selected")}},At.prototype.setSlideMapIDAsSelected=function(t){for(var e=this.$el[0].querySelectorAll(".swiper-slide"),n=0;n<e.length;n++){var r=e[n];r.getAttribute("data")==t?r.classList.add("selected"):r.classList.remove("selected")}};var kt=n(27),Nt=n(93),Dt=n(54);function Ft(t){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t){return(jt="function"==typeof Symbol&&"symbol"===Ft(Symbol.iterator)?function(t){return Ft(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":Ft(t)})(t)}function zt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){zt(t,e,n[e])}))}return t}function Gt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ut(t,e,n){return e&&Xt(t.prototype,e),n&&Xt(t,n),t}function qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t,e){return!e||"object"!==jt(e)&&"function"!=typeof e?qt(t):e}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ht(t,e){return(Ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Wt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ht(t,e)}function Kt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Zt={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,e){var n;console&&console[t]&&(n=console)[t].apply(n,Kt(e))}},Jt=new(function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Gt(this,t),this.init(e,n)}return Ut(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||Zt,this.options=e,this.debug=e.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,e,n,r){return r&&!this.debug?null:("string"==typeof t[0]&&(t[0]="".concat(n).concat(this.prefix," ").concat(t[0])),this.logger[e](t))}},{key:"create",value:function(e){return new t(this.logger,Bt({},{prefix:"".concat(this.prefix,":").concat(e,":")},this.options))}}]),t}()),Qt=function(){function t(){Gt(this,t),this.observers={}}return Ut(t,[{key:"on",value:function(t,e){var n=this;return t.split(" ").forEach((function(t){n.observers[t]=n.observers[t]||[],n.observers[t].push(e)})),this}},{key:"off",value:function(t,e){this.observers[t]&&(e?this.observers[t]=this.observers[t].filter((function(t){return t!==e})):delete this.observers[t])}},{key:"emit",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.observers[t]){var i=[].concat(this.observers[t]);i.forEach((function(t){t.apply(void 0,n)}))}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach((function(e){e.apply(e,[t].concat(n))}))}}}]),t}();function te(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n}function ee(t){return null==t?"":""+t}function ne(t,e,n){t.forEach((function(t){e[t]&&(n[t]=e[t])}))}function re(t,e,n){function r(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}function i(){return!t||"string"==typeof t}for(var o="string"!=typeof e?[].concat(e):e.split(".");o.length>1;){if(i())return{};var a=r(o.shift());!t[a]&&n&&(t[a]=new n),t=t[a]}return i()?{}:{obj:t,k:r(o.shift())}}function ie(t,e,n){var r=re(t,e,Object);r.obj[r.k]=n}function oe(t,e){var n=re(t,e),r=n.obj,i=n.k;if(r)return r[i]}function ae(t,e,n){var r=oe(t,n);return void 0!==r?r:oe(e,n)}function se(t,e,n){for(var r in e)r in t?"string"==typeof t[r]||t[r]instanceof String||"string"==typeof e[r]||e[r]instanceof String?n&&(t[r]=e[r]):se(t[r],e[r],n):t[r]=e[r];return t}function ue(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var ce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function le(t){return"string"==typeof t?t.replace(/[&<>"'\/]/g,(function(t){return ce[t]})):t}var he=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return Gt(this,e),n=Yt(this,Vt(e).call(this)),Qt.call(qt(n)),n.data=t||{},n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n}return Wt(e,t),Ut(e,[{key:"addNamespaces",value:function(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}},{key:"removeNamespaces",value:function(t){var e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,o=[t,e];return n&&"string"!=typeof n&&(o=o.concat(n)),n&&"string"==typeof n&&(o=o.concat(i?n.split(i):n)),t.indexOf(".")>-1&&(o=t.split(".")),oe(this.data,o)}},{key:"addResource",value:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},o=this.options.keySeparator;void 0===o&&(o=".");var a=[t,e];n&&(a=a.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(r=e,e=(a=t.split("."))[1]),this.addNamespaces(e),ie(this.data,a,r),i.silent||this.emit("added",t,e,n,r)}},{key:"addResources",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var i in n)"string"!=typeof n[i]&&"[object Array]"!==Object.prototype.toString.apply(n[i])||this.addResource(t,e,i,n[i],{silent:!0});r.silent||this.emit("added",t,e,n)}},{key:"addResourceBundle",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},a=[t,e];t.indexOf(".")>-1&&(r=n,n=e,e=(a=t.split("."))[1]),this.addNamespaces(e);var s=oe(this.data,a)||{};r?se(s,n,i):s=Bt({},s,n),ie(this.data,a,s),o.silent||this.emit("added",t,e,n)}},{key:"removeResourceBundle",value:function(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}},{key:"hasResourceBundle",value:function(t,e){return void 0!==this.getResource(t,e)}},{key:"getResourceBundle",value:function(t,e){return e||(e=this.options.defaultNS),"v1"===this.options.compatibilityAPI?Bt({},{},this.getResource(t,e)):this.getResource(t,e)}},{key:"getDataByLanguage",value:function(t){return this.data[t]}},{key:"toJSON",value:function(){return this.data}}]),e}(Qt),pe={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,e,n,r,i){var o=this;return t.forEach((function(t){o.processors[t]&&(e=o.processors[t].process(e,n,r,i))})),e}},fe=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Gt(this,e),n=Yt(this,Vt(e).call(this)),Qt.call(qt(n)),ne(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,qt(n)),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=Jt.create("translator"),n}return Wt(e,t),Ut(e,[{key:"changeLanguage",value:function(t){t&&(this.language=t)}},{key:"exists",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(t,e);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(t,e){var n=e.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=e.ns||this.options.defaultNS;if(n&&t.indexOf(n)>-1){var o=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(o[0])>-1)&&(i=o.shift()),t=o.join(r)}return"string"==typeof i&&(i=[i]),{key:t,namespaces:i}}},{key:"translate",value:function(t,e){var n=this;if("object"!==jt(e)&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),null==t)return"";Array.isArray(t)||(t=[String(t)]);var r=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator,i=this.extractFromKey(t[t.length-1],e),o=i.key,a=i.namespaces,s=a[a.length-1],u=e.lng||this.language,c=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&"cimode"===u.toLowerCase()){if(c){var l=e.nsSeparator||this.options.nsSeparator;return s+l+o}return o}var h=this.resolve(t,e),p=h&&h.res,f=h&&h.usedKey||o,d=h&&h.exactUsedKey||o,g=Object.prototype.toString.apply(p),v=["[object Number]","[object Function]","[object RegExp]"],y=void 0!==e.joinArrays?e.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,_="string"!=typeof p&&"boolean"!=typeof p&&"number"!=typeof p;if(m&&p&&_&&v.indexOf(g)<0&&("string"!=typeof y||"[object Array]"!==g)){if(!e.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,p,e):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");if(r){var b="[object Array]"===g,x=b?[]:{},w=b?d:f;for(var E in p)if(Object.prototype.hasOwnProperty.call(p,E)){var S="".concat(w).concat(r).concat(E);x[E]=this.translate(S,Bt({},e,{joinArrays:!1,ns:a})),x[E]===S&&(x[E]=p[E])}p=x}}else if(m&&"string"==typeof y&&"[object Array]"===g)(p=p.join(y))&&(p=this.extendTranslation(p,t,e));else{var C=!1,T=!1;if(!this.isValidLookup(p)&&void 0!==e.defaultValue){if(C=!0,void 0!==e.count){var I=this.pluralResolver.getSuffix(u,e.count);p=e["defaultValue".concat(I)]}p||(p=e.defaultValue)}this.isValidLookup(p)||(T=!0,p=o);var O=e.defaultValue&&e.defaultValue!==p&&this.options.updateMissing;if(T||C||O){this.logger.log(O?"updateKey":"missingKey",u,s,o,O?e.defaultValue:p);var M=[],P=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if("fallback"===this.options.saveMissingTo&&P&&P[0])for(var L=0;L<P.length;L++)M.push(P[L]);else"all"===this.options.saveMissingTo?M=this.languageUtils.toResolveHierarchy(e.lng||this.language):M.push(e.lng||this.language);var R=function(t,r){n.options.missingKeyHandler?n.options.missingKeyHandler(t,s,r,O?e.defaultValue:p,O,e):n.backendConnector&&n.backendConnector.saveMissing&&n.backendConnector.saveMissing(t,s,r,O?e.defaultValue:p,O,e),n.emit("missingKey",t,s,r,p)};if(this.options.saveMissing){var A=void 0!==e.count&&"string"!=typeof e.count;this.options.saveMissingPlurals&&A?M.forEach((function(t){n.pluralResolver.getPluralFormsOfKey(t,o).forEach((function(e){return R([t],e)}))})):R(M,o)}}p=this.extendTranslation(p,t,e,h),T&&p===o&&this.options.appendNamespaceToMissingKey&&(p="".concat(s,":").concat(o)),T&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(p))}return p}},{key:"extendTranslation",value:function(t,e,n,r){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(Bt({},n,{interpolation:Bt({},this.options.interpolation,n.interpolation)}));var o=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(o=Bt({},this.options.interpolation.defaultVariables,o)),t=this.interpolator.interpolate(t,o,n.lng||this.language,n),!1!==n.nest&&(t=this.interpolator.nest(t,(function(){return i.translate.apply(i,arguments)}),n)),n.interpolation&&this.interpolator.reset()}var a=n.postProcess||this.options.postProcess,s="string"==typeof a?[a]:a;return null!=t&&s&&s.length&&!1!==n.applyPostProcessor&&(t=pe.handle(s,t,e,this.options&&this.options.postProcessPassResolved?Bt({i18nResolved:r},n):n,this)),t}},{key:"resolve",value:function(t){var e,n,r,i,o,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof t&&(t=[t]),t.forEach((function(t){if(!a.isValidLookup(e)){var u=a.extractFromKey(t,s),c=u.key;n=c;var l=u.namespaces;a.options.fallbackNS&&(l=l.concat(a.options.fallbackNS));var h=void 0!==s.count&&"string"!=typeof s.count,p=void 0!==s.context&&"string"==typeof s.context&&""!==s.context,f=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);l.forEach((function(t){a.isValidLookup(e)||(o=t,a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(o)&&a.logger.warn('key "'.concat(n,'" for namespace "').concat(o,"\" won't get resolved as namespace was not yet loaded"),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"),f.forEach((function(n){if(!a.isValidLookup(e)){i=n;var o,u,l=c,f=[l];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(f,c,n,t,s);else h&&(o=a.pluralResolver.getSuffix(n,s.count)),h&&p&&f.push(l+o),p&&f.push(l+="".concat(a.options.contextSeparator).concat(s.context)),h&&f.push(l+=o);for(;u=f.pop();)a.isValidLookup(e)||(r=u,e=a.getResource(n,t,u,s))}})))}))}})),{res:e,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:o}}},{key:"isValidLookup",value:function(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}},{key:"getResource",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}}]),e}(Qt);function de(t){return t.charAt(0).toUpperCase()+t.slice(1)}var ge=function(){function t(e){Gt(this,t),this.options=e,this.whitelist=this.options.whitelist||!1,this.logger=Jt.create("languageUtils")}return Ut(t,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var e=t.split("-");return 2===e.length?null:(e.pop(),this.formatLanguageCode(e.join("-")))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var e=t.split("-");return this.formatLanguageCode(e[0])}},{key:"formatLanguageCode",value:function(t){if("string"==typeof t&&t.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"],n=t.split("-");return this.options.lowerCaseLng?n=n.map((function(t){return t.toLowerCase()})):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=de(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=de(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=de(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isWhitelisted",value:function(t){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(t=this.getLanguagePartFromCode(t)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(t)>-1}},{key:"getFallbackCodes",value:function(t,e){if(!t)return[];if("string"==typeof t&&(t=[t]),"[object Array]"===Object.prototype.toString.apply(t))return t;if(!e)return t.default||[];var n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t.default),n||[]}},{key:"toResolveHierarchy",value:function(t,e){var n=this,r=this.getFallbackCodes(e||this.options.fallbackLng||[],t),i=[],o=function(t){t&&(n.isWhitelisted(t)?i.push(t):n.logger.warn("rejecting non-whitelisted language code: ".concat(t)))};return"string"==typeof t&&t.indexOf("-")>-1?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(t))):"string"==typeof t&&o(this.formatLanguageCode(t)),r.forEach((function(t){i.indexOf(t)<0&&o(n.formatLanguageCode(t))})),i}}]),t}(),ve=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],ye={1:function(t){return Number(t>1)},2:function(t){return Number(1!=t)},3:function(t){return 0},4:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},5:function(t){return Number(0===t?0:1==t?1:2==t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5)},6:function(t){return Number(1==t?0:t>=2&&t<=4?1:2)},7:function(t){return Number(1==t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2)},8:function(t){return Number(1==t?0:2==t?1:8!=t&&11!=t?2:3)},9:function(t){return Number(t>=2)},10:function(t){return Number(1==t?0:2==t?1:t<7?2:t<11?3:4)},11:function(t){return Number(1==t||11==t?0:2==t||12==t?1:t>2&&t<20?2:3)},12:function(t){return Number(t%10!=1||t%100==11)},13:function(t){return Number(0!==t)},14:function(t){return Number(1==t?0:2==t?1:3==t?2:3)},15:function(t){return Number(t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2)},16:function(t){return Number(t%10==1&&t%100!=11?0:0!==t?1:2)},17:function(t){return Number(1==t||t%10==1?0:1)},18:function(t){return Number(0==t?0:1==t?1:2)},19:function(t){return Number(1==t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3)},20:function(t){return Number(1==t?0:0===t||t%100>0&&t%100<20?1:2)},21:function(t){return Number(t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0)},22:function(t){return Number(1===t?0:2===t?1:(t<0||t>10)&&t%10==0?2:3)}};function me(){var t={};return ve.forEach((function(e){e.lngs.forEach((function(n){t[n]={numbers:e.nr,plurals:ye[e.fc]}}))})),t}var _e=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Gt(this,t),this.languageUtils=e,this.options=n,this.logger=Jt.create("pluralResolver"),this.rules=me()}return Ut(t,[{key:"addRule",value:function(t,e){this.rules[t]=e}},{key:"getRule",value:function(t){return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var e=this.getRule(t);return e&&e.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,e){var n=this,r=[],i=this.getRule(t);return i?(i.numbers.forEach((function(i){var o=n.getSuffix(t,i);r.push("".concat(e).concat(o))})),r):r}},{key:"getSuffix",value:function(t,e){var n=this,r=this.getRule(t);if(r){var i=r.noAbs?r.plurals(e):r.plurals(Math.abs(e)),o=r.numbers[i];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===o?o="plural":1===o&&(o=""));var a=function(){return n.options.prepend&&o.toString()?n.options.prepend+o.toString():o.toString()};return"v1"===this.options.compatibilityJSON?1===o?"":"number"==typeof o?"_plural_".concat(o.toString()):a():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}return this.logger.warn("no plural rule found for: ".concat(t)),""}}]),t}(),be=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Gt(this,t),this.logger=Jt.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return Ut(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var e=t.interpolation;this.escape=void 0!==e.escape?e.escape:le,this.escapeValue=void 0===e.escapeValue||e.escapeValue,this.useRawValueToEscape=void 0!==e.useRawValueToEscape&&e.useRawValueToEscape,this.prefix=e.prefix?ue(e.prefix):e.prefixEscaped||"{{",this.suffix=e.suffix?ue(e.suffix):e.suffixEscaped||"}}",this.formatSeparator=e.formatSeparator?e.formatSeparator:e.formatSeparator||",",this.unescapePrefix=e.unescapeSuffix?"":e.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":e.unescapeSuffix||"",this.nestingPrefix=e.nestingPrefix?ue(e.nestingPrefix):e.nestingPrefixEscaped||ue("$t("),this.nestingSuffix=e.nestingSuffix?ue(e.nestingSuffix):e.nestingSuffixEscaped||ue(")"),this.maxReplaces=e.maxReplaces?e.maxReplaces:1e3,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var e="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(e,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(t,e,n,r){var i,o,a,s=this,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function c(t){return t.replace(/\$/g,"$$$$")}var l=function(t){if(t.indexOf(s.formatSeparator)<0)return ae(e,u,t);var r=t.split(s.formatSeparator),i=r.shift().trim(),o=r.join(s.formatSeparator).trim();return s.format(ae(e,u,i),o,n)};this.resetRegExp();var h=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler;for(a=0;i=this.regexpUnescape.exec(t);){if(void 0===(o=l(i[1].trim())))if("function"==typeof h){var p=h(t,i,r);o="string"==typeof p?p:""}else this.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(t)),o="";else"string"==typeof o||this.useRawValueToEscape||(o=ee(o));if(t=t.replace(i[0],c(o)),this.regexpUnescape.lastIndex=0,++a>=this.maxReplaces)break}for(a=0;i=this.regexp.exec(t);){if(void 0===(o=l(i[1].trim())))if("function"==typeof h){var f=h(t,i,r);o="string"==typeof f?f:""}else this.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(t)),o="";else"string"==typeof o||this.useRawValueToEscape||(o=ee(o));if(o=this.escapeValue?c(this.escape(o)):c(o),t=t.replace(i[0],o),this.regexp.lastIndex=0,++a>=this.maxReplaces)break}return t}},{key:"nest",value:function(t,e){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Bt({},i);function a(t,e){if(t.indexOf(",")<0)return t;var n=t.split(",");t=n.shift();var r=n.join(",");r=(r=this.interpolate(r,o)).replace(/'/g,'"');try{o=JSON.parse(r),e&&(o=Bt({},e,o))}catch(e){this.logger.error("failed parsing options string in nesting for key ".concat(t),e)}return delete o.defaultValue,t}for(o.applyPostProcessor=!1,delete o.defaultValue;n=this.nestingRegexp.exec(t);){if((r=e(a.call(this,n[1].trim(),o),o))&&n[0]===t&&"string"!=typeof r)return r;"string"!=typeof r&&(r=ee(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(t)),r=""),t=t.replace(n[0],r),this.regexp.lastIndex=0}return t}}]),t}();var xe=function(t){function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Gt(this,e),i=Yt(this,Vt(e).call(this)),Qt.call(qt(i)),i.backend=t,i.store=n,i.services=r,i.languageUtils=r.languageUtils,i.options=o,i.logger=Jt.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(r,o.backend,o),i}return Wt(e,t),Ut(e,[{key:"queueLoad",value:function(t,e,n,r){var i=this,o=[],a=[],s=[],u=[];return t.forEach((function(t){var r=!0;e.forEach((function(e){var s="".concat(t,"|").concat(e);!n.reload&&i.store.hasResourceBundle(t,e)?i.state[s]=2:i.state[s]<0||(1===i.state[s]?a.indexOf(s)<0&&a.push(s):(i.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),o.indexOf(s)<0&&o.push(s),u.indexOf(e)<0&&u.push(e)))})),r||s.push(t)})),(o.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:o,pending:a,toLoadLanguages:s,toLoadNamespaces:u}}},{key:"loaded",value:function(t,e,n){var r=$t(t.split("|"),2),i=r[0],o=r[1];e&&this.emit("failedLoading",i,o,e),n&&this.store.addResourceBundle(i,o,n),this.state[t]=e?-1:2;var a={};this.queue.forEach((function(n){var r,s,u,c,l,h;r=n.loaded,s=o,c=re(r,[i],Object),l=c.obj,h=c.k,l[h]=l[h]||[],u&&(l[h]=l[h].concat(s)),u||l[h].push(s),function(t,e){for(var n=t.indexOf(e);-1!==n;)t.splice(n,1),n=t.indexOf(e)}(n.pending,t),e&&n.errors.push(e),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach((function(t){a[t]||(a[t]=[]),n.loaded[t].length&&n.loaded[t].forEach((function(e){a[t].indexOf(e)<0&&a[t].push(e)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((function(t){return!t.done}))}},{key:"read",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,a=arguments.length>5?arguments[5]:void 0;return t.length?this.backend[n](t,e,(function(s,u){s&&u&&i<5?setTimeout((function(){r.read.call(r,t,e,n,i+1,2*o,a)}),o):a(s,u)})):a(null,{})}},{key:"prepareLoading",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();"string"==typeof t&&(t=this.languageUtils.toResolveHierarchy(t)),"string"==typeof e&&(e=[e]);var o=this.queueLoad(t,e,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((function(t){n.loadOne(t)}))}},{key:"load",value:function(t,e,n){this.prepareLoading(t,e,{},n)}},{key:"reload",value:function(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}},{key:"loadOne",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t.split("|"),i=$t(r,2),o=i[0],a=i[1];this.read(o,a,"read",null,null,(function(r,i){r&&e.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(o," failed"),r),!r&&i&&e.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(o),i),e.loaded(t,r,i)}))}},{key:"saveMissing",value:function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)?this.logger.warn('did not save key "'.concat(n,'" for namespace "').concat(e,'" as the namespace was not yet loaded'),"This means something IS WRONG in your application setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!"):(this.backend&&this.backend.create&&this.backend.create(t,e,n,r,null,Bt({},o,{isUpdate:i})),t&&t[0]&&this.store.addResource(t[0],e,n,r))}}]),e}(Qt);function we(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var e={};if("object"===jt(t[1])&&(e=t[1]),"string"==typeof t[1]&&(e.defaultValue=t[1]),"string"==typeof t[2]&&(e.tDescription=t[2]),"object"===jt(t[2])||"object"===jt(t[3])){var n=t[3]||t[2];Object.keys(n).forEach((function(t){e[t]=n[t]}))}return e},interpolation:{escapeValue:!0,format:function(t,e,n){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}}}function Ee(t){return"string"==typeof t.ns&&(t.ns=[t.ns]),"string"==typeof t.fallbackLng&&(t.fallbackLng=[t.fallbackLng]),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),t.whitelist&&t.whitelist.indexOf("cimode")<0&&(t.whitelist=t.whitelist.concat(["cimode"])),t}function Se(){}var Ce=new(function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(Gt(this,e),t=Yt(this,Vt(e).call(this)),Qt.call(qt(t)),t.options=Ee(n),t.services={},t.logger=Jt,t.modules={external:[]},r&&!t.isInitialized&&!n.isClone){if(!t.options.initImmediate)return t.init(n,r),Yt(t,qt(t));setTimeout((function(){t.init(n,r)}),0)}return t}return Wt(e,t),Ut(e,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;function r(t){return t?"function"==typeof t?new t:t:null}if("function"==typeof e&&(n=e,e={}),this.options=Bt({},we(),this.options,Ee(e)),this.format=this.options.interpolation.format,n||(n=Se),!this.options.isClone){this.modules.logger?Jt.init(r(this.modules.logger),this.options):Jt.init(null,this.options);var i=new ge(this.options);this.store=new he(this.options.resources,this.options);var o=this.services;o.logger=Jt,o.resourceStore=this.store,o.languageUtils=i,o.pluralResolver=new _e(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),o.interpolator=new be(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new xe(r(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.languageDetector&&(o.languageDetector=r(this.modules.languageDetector),o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=r(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new fe(this.services,this.options),this.translator.on("*",(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.emit.apply(t,[e].concat(r))})),this.modules.external.forEach((function(e){e.init&&e.init(t)}))}var a=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];a.forEach((function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}}));var s=te(),u=function(){t.changeLanguage(t.options.lng,(function(e,r){t.isInitialized=!0,t.logger.log("initialized",t.options),t.emit("initialized",t.options),s.resolve(r),n(e,r)}))};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),s}},{key:"loadResources",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se;if(!this.options.resources||this.options.partialBundledLanguages){if(this.language&&"cimode"===this.language.toLowerCase())return e();var n=[],r=function(e){e&&t.services.languageUtils.toResolveHierarchy(e).forEach((function(t){n.indexOf(t)<0&&n.push(t)}))};if(this.language)r(this.language);else{var i=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);i.forEach((function(t){return r(t)}))}this.options.preload&&this.options.preload.forEach((function(t){return r(t)})),this.services.backendConnector.load(n,this.options.ns,e)}else e(null)}},{key:"reloadResources",value:function(t,e,n){var r=te();return t||(t=this.languages),e||(e=this.options.ns),n||(n=Se),this.services.backendConnector.reload(t,e,(function(t){r.resolve(),n(t)})),r}},{key:"use",value:function(t){return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&pe.addPostProcessor(t),"3rdParty"===t.type&&this.modules.external.push(t),this}},{key:"changeLanguage",value:function(t,e){var n=this,r=te();this.emit("languageChanging",t);var i=function(t){t&&(n.language=t,n.languages=n.services.languageUtils.toResolveHierarchy(t),n.translator.language||n.translator.changeLanguage(t),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(t)),n.loadResources((function(i){!function(t,i){n.translator.changeLanguage(i),i&&(n.emit("languageChanged",i),n.logger.log("languageChanged",i)),r.resolve((function(){return n.t.apply(n,arguments)})),e&&e(t,(function(){return n.t.apply(n,arguments)}))}(i,t)}))};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(t):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(t,e){var n=this,r=function t(e,r){var i;if("object"!==jt(r)){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];i=n.options.overloadTranslationOptionHandler([e,r].concat(a))}else i=Bt({},r);return i.lng=i.lng||t.lng,i.lngs=i.lngs||t.lngs,i.ns=i.ns||t.ns,n.t(e,i)};return"string"==typeof t?r.lng=t:r.lngs=t,r.ns=e,r}},{key:"t",value:function(){var t;return this.translator&&(t=this.translator).translate.apply(t,arguments)}},{key:"exists",value:function(){var t;return this.translator&&(t=this.translator).exists.apply(t,arguments)}},{key:"setDefaultNamespace",value:function(t){this.options.defaultNS=t}},{key:"hasLoadedNamespace",value:function(t){var e=this;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var n=this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;var o=function(t,n){var r=e.services.backendConnector.state["".concat(t,"|").concat(n)];return-1===r||2===r};return!!this.hasResourceBundle(n,t)||(!this.services.backendConnector.backend||!(!o(n,t)||r&&!o(i,t)))}},{key:"loadNamespaces",value:function(t,e){var n=this,r=te();return this.options.ns?("string"==typeof t&&(t=[t]),t.forEach((function(t){n.options.ns.indexOf(t)<0&&n.options.ns.push(t)})),this.loadResources((function(t){r.resolve(),e&&e(t)})),r):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(t,e){var n=te();"string"==typeof t&&(t=[t]);var r=this.options.preload||[],i=t.filter((function(t){return r.indexOf(t)<0}));return i.length?(this.options.preload=r.concat(i),this.loadResources((function(t){n.resolve(),e&&e(t)})),n):(e&&e(),Promise.resolve())}},{key:"dir",value:function(t){if(t||(t=this.languages&&this.languages.length>0?this.languages[0]:this.language),!t)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(t))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new e(t,n)}},{key:"cloneInstance",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Se,i=Bt({},this.options,n,{isClone:!0}),o=new e(i),a=["store","services","language"];return a.forEach((function(e){o[e]=t[e]})),o.translator=new fe(o.services,o.options),o.translator.on("*",(function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.emit.apply(o,[t].concat(n))})),o.init(i,r),o.translator.options=o.options,o}}]),e}(Qt)),Te=[],Ie=Te.forEach,Oe=Te.slice;function Me(t){return Ie.call(Oe.call(arguments,1),(function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])})),t}function Pe(t,e){if(e&&"object"===jt(e)){var n="",r=encodeURIComponent;for(var i in e)n+="&"+r(i)+"="+r(e[i]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t}function Le(t,e,n,r,i){r&&"object"===jt(r)&&(i||(r._t=new Date),r=Pe("",r).slice(1)),e.queryStringParams&&(t=Pe(t,e.queryStringParams));try{var o;(o=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0")).open(r?"POST":"GET",t,1),e.crossDomain||o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.withCredentials=!!e.withCredentials,r&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.overrideMimeType&&o.overrideMimeType("application/json");var a=e.customHeaders;if(a="function"==typeof a?a():a)for(var s in a)o.setRequestHeader(s,a[s]);o.onreadystatechange=function(){o.readyState>3&&n&&n(o.responseText,o)},o.send(r)}catch(t){console&&console.log(t)}}function Re(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,parsePayload:function(t,e,n){return zt({},e,n||"")},crossDomain:!1,ajax:Le}}var Ae=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Gt(this,t),this.init(e,n),this.type="backend"}return Ut(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=Me(e,this.options||{},Re())}},{key:"readMulti",value:function(t,e,n){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath(t,e));var i=this.services.interpolator.interpolate(r,{lng:t.join("+"),ns:e.join("+")});this.loadUrl(i,n)}},{key:"read",value:function(t,e,n){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath([t],[e]));var i=this.services.interpolator.interpolate(r,{lng:t,ns:e});this.loadUrl(i,n)}},{key:"loadUrl",value:function(t,e){var n=this;this.options.ajax(t,this.options,(function(r,i){if(i.status>=500&&i.status<600)return e("failed loading "+t,!0);if(i.status>=400&&i.status<500)return e("failed loading "+t,!1);var o,a;try{o=n.options.parse(r,t)}catch(e){a="failed parsing "+t+" to json"}if(a)return e(a,!1);e(null,o)}))}},{key:"create",value:function(t,e,n,r){var i=this;"string"==typeof t&&(t=[t]);var o=this.options.parsePayload(e,n,r);t.forEach((function(t){var n=i.services.interpolator.interpolate(i.options.addPath,{lng:t,ns:e});i.options.ajax(n,i.options,(function(t,e){}),o)}))}}]),t}();Ae.type="backend";var ke=Ae,Ne=n(18);function De(t){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,e){return(Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function je(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Be(t);if(e){var i=Be(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ze(this,n)}}function ze(t,e){return!e||"object"!==De(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Be(t){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ge=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fe(t,e)}(n,t);var e=je(n);function n(t,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=e.call(this,t)).detail=r,i}return n}(Ne.a),Xe=function(){var t=window.navigator.userAgent.toLowerCase();try{return-1!=t.indexOf("chrome")?(navigator.languages[0]||navigator.browserLanguage||navigator.language||navigator.userLanguage).split(";")[0]:(navigator.browserLanguage||navigator.language||navigator.userLanguage).split(";")[0]}catch(t){return""}};function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qe={ALL:-99,DEBUG:-1,INFO:0,WARN:1,ERROR:2,OFF:99},Ye=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.level=isNaN(e)?qe.INFO:e,this.make()}var e,n,r;return e=t,(n=[{key:"make",value:function(){for(var e in console){var n=qe[e.toUpperCase()];n&&(this.level<=n?Function.bind?t.prototype[e]=console.log.bind(console):t.prototype[e]=function(){var t;return(t=console).log.apply(t,arguments)}(e):t.prototype[e]=function(){})}}}])&&Ue(e.prototype,n),r&&Ue(e,r),t}();function Ve(t,e,n){return Math.min(Math.max(t,e),n)}var He="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function We(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return Ke(t,e,n,r)}function Ke(t,e,n,r){var i=n-t,o=r-e;return i*i+o*o}function $e(t){return 180*t/Math.PI}function Ze(t){return t*Math.PI/180}function Je(t,e){var n=t%e;return n*e<0?n+e:n}function Qe(t,e,n){return t+n*(e-t)}var tn="Point",en="LineString",nn="LinearRing",rn="Polygon",on="MultiPoint",an="MultiLineString",sn="MultiPolygon",un="GeometryCollection",cn="Circle",ln=6371008.8;function hn(t,e,n){var r=n||ln,i=Ze(t[1]),o=Ze(e[1]),a=(o-i)/2,s=Ze(e[0]-t[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function pn(t,e,n,r){var i=r||ln,o=Ze(t[1]),a=Ze(t[0]),s=e/i,u=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(n));return[$e(a+Math.atan2(Math.sin(n)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(u))),$e(u)]}var fn,dn=n(0),gn=(fn=function(t,e){return(fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}fn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),vn=function(t){function e(e){var n=this,r="Assertion failed. See https://openlayers.org/en/"+("latest"===dn.a?dn.a:"v"+dn.a.split("-")[0])+"/doc/errors/#"+e+" for details.";return(n=t.call(this,r)||this).code=e,n.name="AssertionError",n.message=r,n}return gn(e,t),e}(Error);function yn(t,e){if(!t)throw new vn(e)}var mn="bottom-left",_n="bottom-right",bn="top-left",xn="top-right",wn=0,En=1,Sn=2,Cn=4,Tn=8,In=16;function On(t){for(var e=Dn(),n=0,r=t.length;n<r;++n)Gn(e,t[n]);return e}function Mn(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Pn(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Ln(t,e,n){var r,i;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function Rn(t,e){return kn(t,e[0],e[1])}function An(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function kn(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Nn(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=wn;return a<n?u|=In:a>i&&(u|=Cn),s<r?u|=Tn:s>o&&(u|=Sn),u===wn&&(u=En),u}function Dn(){return[1/0,1/0,-1/0,-1/0]}function Fn(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function jn(t){return Fn(1/0,1/0,-1/0,-1/0,t)}function zn(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Bn(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Gn(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Xn(t,e){for(var n=0,r=e.length;n<r;++n)Gn(t,e[n]);return t}function Un(t,e,n,r,i){for(;n<r;n+=i)qn(t,e[n],e[n+1]);return t}function qn(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Yn(t,e){var n;return(n=e(Hn(t)))||(n=e(Wn(t)))||(n=e(er(t)))?n:(n=e(tr(t)))||!1}function Vn(t){var e=0;return ir(t)||(e=nr(t)*Jn(t)),e}function Hn(t){return[t[0],t[1]]}function Wn(t){return[t[2],t[1]]}function Kn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function $n(t,e){var n;return e===mn?n=Hn(t):e===_n?n=Wn(t):e===bn?n=tr(t):e===xn?n=er(t):yn(!1,13),n}function Zn(t,e,n,r,i){var o=e*r[0]/2,a=e*r[1]/2,s=Math.cos(n),u=Math.sin(n),c=o*s,l=o*u,h=a*s,p=a*u,f=t[0],d=t[1],g=f-c+p,v=f-c-p,y=f+c-p,m=f+c+p,_=d-l-h,b=d-l+h,x=d+l+h,w=d+l-h;return Fn(Math.min(g,v,y,m),Math.min(_,b,x,w),Math.max(g,v,y,m),Math.max(_,b,x,w),i)}function Jn(t){return t[3]-t[1]}function Qn(t,e,n){var r=n||[1/0,1/0,-1/0,-1/0];return rr(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):jn(r),r}function tr(t){return[t[0],t[3]]}function er(t){return[t[2],t[3]]}function nr(t){return t[2]-t[0]}function rr(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function ir(t){return t[2]<t[0]||t[3]<t[1]}function or(t,e,n){var r=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(r,r,2),function(t,e,n){return Fn(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}([r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]],n)}var ar={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},sr={};sr[ar.DEGREES]=2*Math.PI*6370997/360,sr[ar.FEET]=.3048,sr[ar.METERS]=1,sr[ar.USFEET]=1200/3937;var ur=ar,cr=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||sr[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),lr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hr=6378137,pr=Math.PI*hr,fr=[-pr,-pr,pr,pr],dr=[-180,-85,180,85],gr=function(t){function e(e){return t.call(this,{code:e,units:ur.METERS,extent:fr,global:!0,worldExtent:dr,getPointResolution:function(t,e){return t/He(e[1]/hr)}})||this}return lr(e,t),e}(cr),vr=[new gr("EPSG:3857"),new gr("EPSG:102100"),new gr("EPSG:102113"),new gr("EPSG:900913"),new gr("urn:ogc:def:crs:EPSG:6.18:3:3857"),new gr("urn:ogc:def:crs:EPSG::3857"),new gr("http://www.opengis.net/gml/srs/epsg.xml#3857")];function yr(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=pr,s=0;s<r;s+=i){o[s]=a*t[s]/180;var u=hr*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[s+1]=u}return o}function mr(t,e,n){var r=t.length,i=n>1?n:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(r));for(var a=0;a<r;a+=i)o[a]=180*t[a]/pr,o[a+1]=360*Math.atan(Math.exp(t[a+1]/hr))/Math.PI-90;return o}var _r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),br=[-180,-90,180,90],xr=6378137*Math.PI/180,wr=function(t){function e(e,n){return t.call(this,{code:e,units:ur.DEGREES,extent:br,axisOrientation:n,global:!0,metersPerUnit:xr,worldExtent:br})||this}return _r(e,t),e}(cr),Er=[new wr("CRS:84"),new wr("EPSG:4326","neu"),new wr("urn:ogc:def:crs:EPSG::4326","neu"),new wr("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new wr("urn:ogc:def:crs:OGC:1.3:CRS84"),new wr("urn:ogc:def:crs:OGC:2:84"),new wr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new wr("urn:x-ogc:def:crs:EPSG:4326","neu")],Sr=n(3),Cr={};function Tr(t,e,n){var r=t.getCode(),i=e.getCode();r in Cr||(Cr[r]={}),Cr[r][i]=n}var Ir={};function Or(t,e,n){var r;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];r=e}else r=t.slice();return r}function Mr(t,e,n){if(void 0!==e&&t!==e){for(var r=0,i=t.length;r<i;++r)e[r]=t[r];t=e}return t}function Pr(t){!function(t,e){Ir[t]=e}(t.getCode(),t),Tr(t,t,Or)}function Lr(t){return"string"==typeof t?Ir[t]||null:t||null}function Rr(t,e,n,r){var i,o=(t=Lr(t)).getPointResolutionFunc();if(o)i=o(e,n),r&&r!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/sr[r]);else if(t.getUnits()==ur.DEGREES&&!r||r==ur.DEGREES)i=e;else{var a,s=zr(t,Lr("EPSG:4326")),u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(hn((u=s(u,u,2)).slice(0,2),u.slice(2,4))+hn(u.slice(4,6),u.slice(6,8)))/2,void 0!==(a=r?sr[r]:t.getMetersPerUnit())&&(i/=a)}return i}function Ar(t){!function(t){t.forEach(Pr)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Tr(e,t,Or)}))}))}function kr(t,e){return t?"string"==typeof t?Lr(t):t:Lr(e)}function Nr(t){return function(e,n,r){for(var i=e.length,o=void 0!==r?r:2,a=void 0!==n?n:new Array(i),s=0;s<i;s+=o){var u=t([e[s],e[s+1]]);a[s]=u[0],a[s+1]=u[1];for(var c=o-1;c>=2;--c)a[s+c]=e[s+c]}return a}}function Dr(t,e,n,r){var i=Lr(t),o=Lr(e);Tr(i,o,Nr(n)),Tr(o,i,Nr(r))}function Fr(t,e){var n=Gr(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=Je(r+180,360)-180),n}function jr(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||zr(t,e)===Or)&&n}function zr(t,e){var n=function(t,e){var n;return t in Cr&&e in Cr[t]&&(n=Cr[t][e]),n}(t.getCode(),e.getCode());return n||(n=Mr),n}function Br(t,e){return zr(Lr(t),Lr(e))}function Gr(t,e,n){return Br(e,n)(t,void 0,t.length)}function Xr(t,e,n){return or(t,Br(e,n))}var Ur,qr,Yr,Vr=null;function Hr(){return Vr}function Wr(t,e){return Vr?Gr(t,e,Vr):t}function Kr(t,e){return Vr?Gr(t,Vr,e):t}function $r(t,e){return Vr?Xr(t,e,Vr):t}function Zr(t,e){return Vr?Xr(t,Vr,e):t}Ar(vr),Ar(Er),Ur=vr,qr=yr,Yr=mr,Er.forEach((function(t){Ur.forEach((function(e){Tr(t,e,qr),Tr(e,t,Yr)}))}));var Jr=20037508.342789244,Qr=[[0,0],[0,1],[1,0],[0,-1],[-1,0]],ti="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAB3RJTUUH3QgIBToaSbAjlwAAABd0RVh0U29mdHdhcmUAR0xEUE5HIHZlciAzLjRxhaThAAAACHRwTkdHTEQzAAAAAEqAKR8AAAAEZ0FNQQAAsY8L/GEFAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAFRJREFUeNrtwQEBAAAAgJD+r+4ICgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgBDwABHHIJwwAAAABJRU5ErkJggg==",ei=256,ni='<canvas width="'.concat(ei,'" height="').concat(ei,'" src="').concat(ti,'"></canvas>');function ri(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ii(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function oi(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){ii(o,r,i,a,s,"next",t)}function s(t){ii(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ai(t){return si.apply(this,arguments)}function si(){return(si=oi(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=4;break}return t.abrupt("return",new Promise((function(t,n){var r=e.match(/\//)?e:"pois/".concat(e),i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType="json",i.onload=function(e){if(200==this.status||0==this.status)try{var r=this.response;"string"==typeof r&&(r=JSON.parse(r)),t(r)}catch(t){n(t)}else n("Fail to load poi json")},i.send()})));case 4:return t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ui(t,e){return ci.apply(this,arguments)}function ci(){return(ci=oi(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ai(e);case 2:if(e=t.sent,!Array.isArray(e)){t.next=10;break}return t.next=6,Promise.all(e.map(function(){var t=oi(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ai(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 6:e=(e=t.sent).length>0&&"FeatureCollection"===e[0].type?e.reduce((function(t,e,r){var i=e.id||e.properties&&e.properties.id;if(!i){if(0!==r)throw"POI layers include bad key setting";i="main"}return t[i]=li(e,i,n),t}),{}):{main:li(e,"main",n)},t.next=11;break;case 10:"FeatureCollection"===e.type?(r=e.id||e.properties&&e.properties.id||"main",e=ri({},r,li(e,r,n))):Object.keys(e).map((function(t){e[t]=li(e[t],t,n)}));case 11:return e.main||(e.main=li([],"main",n)),Object.keys(e).map((function(t){pi(e,t,n)})),t.abrupt("return",e);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function li(t,e,n){if(Array.isArray(t))t={pois:t.map((function(t){return hi(t)}))};else if("FeatureCollection"===t.type){var r=Object.assign({},t.properties||{});t.name&&(r.name=t.name),r.pois=t.features.map((function(t){return hi(t)})),t=r}if(void 0===t.id)t.id=e;else if(t.id!==e)throw"POI layers include bad key setting";return t.namespaceID||(t.namespaceID="".concat(n.namespace?"".concat(n.namespace,"#"):"").concat(e)),t.name||(t.name="main"===e?n.name:e),t.pois||(t.pois=[]),t}function hi(t){if("Feature"===t.type){var e=Object.assign({},t.properties||{});e.lnglat=t.geometry.coordinates,e.id||(e.id=t.id),e.name||(e.name=t.name),t=e}return t.lnglat||(t.lnglat=[t.lng||t.longitude,t.lat||t.latitude]),delete t.lng,delete t.lat,delete t.longitude,delete t.latitude,t}function pi(t,e,n){if(t[e]){var r=t[e],i=r.pois;r.__nextId||(r.__nextId=0),i.map((function(t){t.id||(t.id="".concat(e,"_").concat(r.__nextId),r.__nextId++),t.namespaceID||(t.namespaceID="".concat(n.namespace?"".concat(n.namespace,"#"):"").concat(t.id))}))}}var fi=n(4),di=n(19),gi=n(6);var vi=function(t,e){var n=0,r=0,i=0;return Object(di.a)(t,(function(t){n+=t[0],r+=t[1],i++}),!0),Object(gi.f)([n/i,r/i],e)};function yi(t){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mi(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function _i(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){mi(o,r,i,a,s,"next",t)}function s(t){mi(o,r,i,a,s,"throw",t)}a(void 0)}))}}function bi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wi(t,e){return(wi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ei(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ci(t);if(e){var i=Ci(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Si(this,n)}}function Si(t,e){return!e||"object"!==yi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ci(t){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ti(t){return function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wi(t,e)}(h,t);var e,n,r,i,o,a,s,u,c,l=Ei(h);function h(){var t;return bi(this,h),(t=l.apply(this,arguments)).officialTitle="",t.title="",t.mapID="",t.label="",t}return e=h,(n=[{key:"getCacheEnable",value:function(){return!!this.weiwudi}},{key:"getTileCacheStatsAsync",value:(c=_i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.weiwudi){t.next=2;break}return t.abrupt("return",{});case 2:return t.prev=2,t.next=5,this.weiwudi.stats();case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t.catch(2),t.abrupt("return",{});case 11:case"end":return t.stop()}}),t,this,[[2,8]])}))),function(){return c.apply(this,arguments)})},{key:"getTileCacheSizeAsync",value:(u=_i(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTileCacheStatsAsync();case 2:return e=t.sent,t.abrupt("return",e.size||0);case 4:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"fetchAllTileCacheAsync",value:(s=_i(regeneratorRuntime.mark((function t(e){var n,r,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.weiwudi){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,n=function(t){e(t.type,t.detail)},r=function t(e){i.weiwudi.removeEventListener("proceed",n),i.weiwudi.removeEventListener("finish",t),i.weiwudi.removeEventListener("stop",t),i.weiwudi.removeEventListener("canceled",t),n(e)},this.weiwudi.addEventListener("proceed",n),this.weiwudi.addEventListener("finish",r),this.weiwudi.addEventListener("stop",r),this.weiwudi.addEventListener("canceled",r),t.next=11,this.weiwudi.fetchAll();case 11:t.next=15;break;case 13:t.prev=13,t.t0=t.catch(2);case 15:case"end":return t.stop()}}),t,this,[[2,13]])}))),function(t){return s.apply(this,arguments)})},{key:"cancelTileCacheAsync",value:(a=_i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.weiwudi){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.weiwudi.cancel();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,this,[[2,7]])}))),function(){return a.apply(this,arguments)})},{key:"clearTileCacheAsync",value:(o=_i(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.weiwudi){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.weiwudi.clean();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,this,[[2,7]])}))),function(){return o.apply(this,arguments)})},{key:"getMap",value:function(){return this._map}},{key:"setViewpointRadian",value:function(t){var e,n,r=this,i=t.mercZoom,o=t.zoom,a=t.direction,s=t.rotation,u=this._map,c=null==u?void 0:u.getView();void 0!==t.latitude&&void 0!==t.longitude&&(e=Gr([t.longitude,t.latitude],"EPSG:4326","EPSG:3857")),void 0!==t.x&&null!=t.y&&(n=[t.x,t.y]),this.size2MercsAsync().then((function(t){return r.mercs2MercSizeAsync(t)})).then((function(t){var u=r.mercsFromGivenMercZoom(e||t[0],i||t[1],null!=a?a:t[2]);r.mercs2SizeAsync(u).then((function(t){null!=e?null==c||c.setCenter(t[0]):null!=n&&(null==c||c.setCenter(n)),null!=i?null==c||c.setZoom(t[1]):null!=o&&(null==c||c.setZoom(o)),null!=a?null==c||c.setRotation(t[2]):null!=s&&(null==c||c.setRotation(s))}))}))}},{key:"setViewpoint",value:function(t){t.rotation&&(t.rotation=t.rotation*Math.PI/180),t.direction&&(t.direction=t.direction*Math.PI/180),this.setViewpointRadian(t)}},{key:"goHome",value:function(){this.setViewpointRadian({longitude:this.homePosition[0],latitude:this.homePosition[1],mercZoom:this.mercZoom,rotation:0})}},{key:"setGPSMarkerAsync",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.getMap(),i=null==r?void 0:r.getView();if(!t)return new Promise((function(t,e){null==r||r.setGPSPosition(null),t(!0)}));var o=this.mercsFromGPSValue(t.lnglat,t.acc);return this.mercs2XysAsync(o).then((function(t){var o=!t[0],a=o?t[1]:t[0],s=o?null:t[1],u={xy:a[0]};if(!e.insideCheckHistMapCoords(a[0]))return null==r||r.handleGPS(!1,!0),!1;var c=a.slice(1);return u.rad=c.reduce((function(t,e,n){var r=t+Math.sqrt(Math.pow(e[0]-u.xy[0],2)+Math.pow(e[1]-u.xy[1],2));return 3===n?r/4:r}),0),n||null==i||i.setCenter(u.xy),null==r||r.setGPSPosition(u,o?"hide":null),s&&(null==r||r.setGPSPosition({xy:s[0]},"sub")),!0})).catch((function(t){throw t}))}},{key:"setGPSMarker",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setGPSMarkerAsync(t,e).then((function(){}))}},{key:"getRadius",value:function(t,e){var n,r=Math.floor(Math.min(t[0],t[1])/4);return void 0===e&&(e=null===(n=this._map)||void 0===n?void 0:n.getView().getDecimalZoom()),r*Jr/128/Math.pow(2,e)}},{key:"mercsFromGivenMercZoom",value:function(t,e,n){void 0===e&&(e=17);var r=this._map.getSize(),i=Math.floor(Math.min(r[0],r[1])/4)*Jr/128/Math.pow(2,e);return this.rotateMatrix(Qr,n).map((function(e){return[e[0]*i+t[0],e[1]*i+t[1]]}))}},{key:"mercsFromGPSValue",value:function(t,e){var n=Gr(t,"EPSG:4326","EPSG:3857"),r=t[1]*Math.PI/180,i=e/Math.cos(r);return Qr.map((function(t){return[t[0]*i+n[0],t[1]*i+n[1]]}))}},{key:"rotateMatrix",value:function(t,e){void 0===e&&(e=this._map.getView().getRotation());for(var n=[],r=0;r<t.length;r++){var i=t[r],o=i[0]*Math.cos(e)-i[1]*Math.sin(e),a=i[0]*Math.sin(e)+i[1]*Math.cos(e);n.push([o,a])}return n}},{key:"size2Xys",value:function(t,e,n){void 0===t&&(t=this._map.getView().getCenter());var r=this._map.getSize(),i=this.getRadius(r,e),o=this.rotateMatrix(Qr,n).map((function(e){return[e[0]*i+t[0],e[1]*i+t[1]]}));return o.push(r),o}},{key:"size2MercsAsync",value:function(t,e,n){var r=this,i=this.size2Xys(t,e,n).map((function(t,e){return 5===e?Promise.resolve(t):r.xy2MercAsync(t)}));return Promise.all(i)}},{key:"mercs2SizeAsync",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=n?Promise.resolve(t):Promise.all(t.map((function(t,n){return 5===n?t:e.merc2XyAsync(t).then((function(t){return t}))})));return r.then((function(t){return e.xys2Size(t)}))}},{key:"mercs2MercSizeAsync",value:function(t){return this.mercs2SizeAsync(t,!0)}},{key:"xys2Size",value:function(t){for(var e=t[0],n=t[5],r=t.slice(1,5).map((function(t){return[t[0]-e[0],t[1]-e[1]]})),i=[[0,1],[1,0],[0,-1],[-1,0]],o=0,a=0,s=0,u=0;u<4;u++){var c=r[u],l=i[u],h=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2));o+=h;var p=c[0]*l[1]-c[1]*l[0],f=Math.acos((c[0]*l[0]+c[1]*l[1])/h),d=p>0?-1*f:f;a+=Math.cos(d),s+=Math.sin(d)}var g=o/4,v=Math.atan2(s,a);n||(n=this._map.getSize());var y=Math.floor(Math.min(n[0],n[1])/4),m=Math.log(y*Jr/128/g)/Math.log(2);return[e,m,v]}},{key:"mercs2MercRotation",value:function(t){for(var e=t[0],n=t.slice(1,5).map((function(t){return[t[0]-e[0],t[1]-e[1]]})),r=[[0,1],[1,0],[0,-1],[-1,0]],i=0,o=0,a=0;a<4;a++){var s=n[a],u=r[a],c=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)),l=s[0]*u[1]-s[1]*u[0],h=Math.acos((s[0]*u[0]+s[1]*u[1])/c),p=l>0?-1*h:h;i+=Math.cos(p),o+=Math.sin(p)}return Math.atan2(o,i)}},{key:"mercs2XysAsync",value:function(t){var e=this;return Promise.all(t.map((function(t,n){return 5===n?t:e.merc2XyAsync(t)}))).then((function(t){return[t]}))}},{key:"resolvePois",value:(i=_i(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ui(e||[],{name:this.officialTitle||this.title,namespace:this.mapID});case 2:this.pois=t.sent;case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"getPoi",value:function(t){var e=this,n=void 0;return Object.keys(this.pois).map((function(r){e.pois[r].pois.map((function(i,o){i.id===t&&(n=e.pois[r].pois[o])}))})),n}},{key:"addPoi",value:function(t,e){if(e||(e="main"),this.pois[e])return t=hi(t),this.pois[e].pois.push(t),pi(this.pois,e,{name:this.officialTitle||this.title,namespace:this.mapID}),t.namespaceID}},{key:"removePoi",value:function(t){var e=this;Object.keys(this.pois).map((function(n){e.pois[n].pois.map((function(r,i){r.id===t&&delete e.pois[n].pois[i]}))}))}},{key:"clearPoi",value:function(t){var e=this;t||(t="main"),"all"===t?Object.keys(this.pois).map((function(t){e.pois[t].pois=[]})):this.pois[t]&&(this.pois[t].pois=[])}},{key:"listPoiLayers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object.keys(this.pois).sort((function(t,e){return"main"===t?-1:"main"===e?1:t<e?-1:t>e?1:0})).map((function(e){return t.pois[e]})).filter((function(t){return n?e?t.pois.length&&t.hide:t.pois.length:!e||t.hide}))}},{key:"getPoiLayer",value:function(t){return this.pois[t]}},{key:"addPoiLayer",value:function(t,e){"main"!==t&&(this.pois[t]||(this.pois[t]=li(e||[],t,{name:this.officialTitle||this.title,namespace:this.mapID})))}},{key:"removePoiLayer",value:function(t){"main"!==t&&this.pois[t]&&delete this.pois[t]}}])&&xi(e.prototype,n),r&&xi(e,r),h}(t)}var Ii=["title","officialTitle","author","createdAt","era","contributor","mapper","license","dataLicense","attr","dataAttr","reference","description"],Oi=["title","official_title","author","created_at","era","contributor","mapper","license","data_license","attr","data_attr","reference","description"];function Mi(t,e){var n;if(e=ki(e),t.mapID=e.mapID,t.homePosition=e.homePosition,t.mercZoom=e.mercZoom,t.label=e.label,t.maxZoom=e.maxZoom,t.minZoom=e.minZoom,t.poiTemplate=e.poiTemplate,t.poiStyle=e.poiStyle,t.iconTemplate=e.iconTemplate,t.icon=e.icon,t.selectedIcon=e.selectedIcon,t.mercatorXShift=e.mercatorXShift,t.mercatorYShift=e.mercatorYShift,t.weiwudi=e.weiwudi,e.envelopeLngLats){var r=e.envelopeLngLats.map((function(t){return Gr(t,"EPSG:4326","EPSG:3857")}));r.push(r[0]),t.envelope=Object(fi.polygon)([r]),t.centroid=null===(n=vi(t.envelope).geometry)||void 0===n?void 0:n.coordinates}for(var i=0;i<Ii.length;i++){var o=Ii[i],a=Oi[i];t[o]=e[a]||e[o]}var s=e.thumbnail?new Promise((function(n){t.thumbnail=e.thumbnail,n(void 0)})):new Promise((function(n){t.thumbnail="./tmbs/".concat(e.mapID,".jpg"),fetch(t.thumbnail).then((function(r){r.ok||(t.thumbnail="./tmbs/".concat(e.mapID,"_menu.jpg")),n(void 0)})).catch((function(r){t.thumbnail="./tmbs/".concat(e.mapID,"_menu.jpg"),n(void 0)}))})).catch((function(n){t.thumbnail="./tmbs/".concat(e.mapID||e.sourceID,"_menu.jpg")})),u=t.resolvePois(e.pois);t.initialWait=Promise.all([u,s])}function Pi(t){var e,n=t;t.setTileLoadFunction((e=n.getTileLoadFunction(),function(t,r){for(var i=t.tileCoord[0],o=t.tileCoord[1],a=t.tileCoord[2],s=Math.round(128*(n.mercatorXShift||0)*Math.pow(2,i)/Jr),u=Math.round(-128*(n.mercatorYShift||0)*Math.pow(2,i)/Jr);s<0||s>=256;)s<0?(s+=256,o++):(s-=256,o--);for(;u<0||u>=256;)u<0?(u+=256,a++):(u-=256,a--);var c=document.createElement("div");c.innerHTML=ni;var l=c.childNodes[0],h=[[[i,o,a],0,0,256-s,256-u]];0!==s&&h.push([[i,o-1,a],256-s,0,s,256-u]),0!==u&&(h.push([[i,o,a-1],0,256-u,256-s,u]),0!==s&&h.push([[i,o-1,a-1],256-s,256-u,s,u])),Promise.all(h.map((function(t){var e=n.tileUrlFunction(t[0],n.tilePixelRatio_,n.projection_);return function(t,e,n,r,i,o,a){return new Promise((function(t,s){!function e(s){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=document.createElement("img");c.crossOrigin="Anonymous",c.onload=c.onerror=function(){if(c.width&&c.height){var s=n.getContext("2d"),l=0===r?256-o:0,h=0===i?256-a:0;o=r+o>c.width?c.width-r:o,a=i+a>c.height?c.height-i:a,s.drawImage(c,r,i,o,a,l,h,o,a),t(void 0)}else u?e(u):t("tileLoadError")},c.src=s}(e)}))}(t[0],e,l,t[1],t[2],t[3],t[4])}))).then((function(n){if(n.reduce((function(t,e){return t&&e}),!0))t.handleImageError_();else{var r=l.toDataURL();t.getImage().crossOrigin=null,e(t,r)}})).catch((function(e){t.handleImageError_()}))}))}function Li(t){var e=document,n=e.createDocumentFragment(),r=[];t=t.replace(/(<\/?)d([ >])/g,"$1div$2").replace(/(<\/?)s([ >])/g,"$1span$2").replace(/ din="/g,' data-i18n="').replace(/ dinh="/g,' data-i18n-html="').replace(/ c="/g,' class="');var i=n.appendChild(e.createElement("div"));i.innerHTML=t;for(var o=0;o<i.childNodes.length;o++){var a=i.childNodes[o];if(a.nodeName&&"script"===a.nodeName.toLowerCase()){var s=e.createElement("script");a.type&&(s.type=a.type),a.src?s.src=a.src:s.text=a.text,r[o]=s}else r[o]=a}return r}function Ri(t){for(;!(t<=180&&t>-180);){t+=360*(t>0?-1:1)}return t}function Ai(t){if(t){for(var e={mapID:t.mapID},n=0;n<Ii.length;n++){var r=Ii[n];t[r]&&(e[r]=t[r])}return e}}function ki(t){var e={max_zoom:"maxZoom",min_zoom:"minZoom",envelope_lnglats:"envelopeLngLats",envelopLngLats:"envelopeLngLats",image_extention:"imageExtension",image_extension:"imageExtension",imageExtention:"imageExtension",map_id:"mapID",sourceID:"mapID",source_id:"mapID",merc_max_zoom:"mercMaxZoom",merc_min_zoom:"mercMinZoom",zoom_restriction:"zoomRestriction",enable_cache:"enableCache",default_zoom:"defaultZoom",start_from:"startFrom",home_position:"homePosition",fake_radius:"fakeRadius",fake_center:"fakeCenter",fake_gps:"fakeGps",app_name:"appName",setting_file:"settingFile",merc_zoom:"mercZoom",mapbox_token:"mapboxToken",translate_ui:"translateUI",restore_session:"restoreSession",no_rotate:"noRotate",poi_template:"poiTemplate",poi_style:"poiStyle",icon_template:"iconTemplate",default_center:"defaultCenter",default_rotation:"defaultRotation",selected_icon:"selectedIcon",namespace_id:"namespaceID",mercator_x_shift:"mercatorXShift",mercator_y_shift:"mercatorYShift"};return Object.keys(e).reduce((function(t,n){return t[n]&&(t[e[n]]=t[n],delete t[n]),t}),t)}n(228);var Ni=n(2),Di=n(1),Fi=n(10),ji=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var zi=function(t){function e(e){var n=t.call(this)||this;if(n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addEventListener(Object(Fi.b)(n.geometryName_),n.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var r=e;n.setGeometry(r)}else{var i=e;n.setProperties(i)}return n}return ji(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(Ni.c)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(Ni.a)(t,Di.a.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;var e;Array.isArray(t)?e=t:(yn("function"==typeof t.getZIndex,41),e=[t]);return function(){return e}}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(Object(Fi.b)(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(Object(Fi.b)(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Fi.a),Bi=n(5),Gi="XY",Xi="XYZ",Ui="XYM",qi="XYZM";function Yi(t,e,n,r,i,o){for(var a=o||[],s=0,u=e;u<n;u+=r){var c=t[u],l=t[u+1];a[s++]=i[0]*c+i[2]*l+i[4],a[s++]=i[1]*c+i[3]*l+i[5]}return o&&a.length!=s&&(a.length=s),a}function Vi(t,e,n,r,i,o,a){for(var s=a||[],u=Math.cos(i),c=Math.sin(i),l=o[0],h=o[1],p=0,f=e;f<n;f+=r){var d=t[f]-l,g=t[f+1]-h;s[p++]=l+d*u-g*c,s[p++]=h+d*c+g*u;for(var v=f+2;v<f+r;++v)s[p++]=t[v]}return a&&s.length!=p&&(s.length=p),s}function Hi(t,e,n,r,i,o,a){for(var s=a||[],u=0,c=e;c<n;c+=r){s[u++]=t[c]+i,s[u++]=t[c+1]+o;for(var l=c+2;l<c+r;++l)s[u++]=t[l]}return a&&s.length!=u&&(s.length=u),s}new Array(6);function Wi(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function Ki(t,e){var n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function $i(t,e,n,r,i,o,a,s){var u=Math.sin(o),c=Math.cos(o);return t[0]=r*c,t[1]=i*u,t[2]=-r*u,t[3]=i*c,t[4]=a*r*c-s*r*u+e,t[5]=a*i*u+s*i*c+n,t}function Zi(t,e){var n,r=(n=e)[0]*n[3]-n[1]*n[2];yn(0!==r,32);var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],c=e[5];return t[0]=s/r,t[1]=-o/r,t[2]=-a/r,t[3]=i/r,t[4]=(a*c-s*u)/r,t[5]=-(i*c-o*u)/r,t}function Ji(t){return"matrix("+t.join(", ")+")"}var Qi=n(8),to=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eo=[1,0,0,1,0,0],no=function(t){function e(){var e=t.call(this)||this;return e.extent_=[1/0,1/0,-1/0,-1/0],e.extentRevision_=-1,e.simplifiedGeometryMaxMinSquaredTolerance=0,e.simplifiedGeometryRevision=0,e.simplifyTransformedInternal=Object(Qi.d)((function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(e)})),e}return to(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return Object(dn.b)()},e.prototype.closestPointXY=function(t,e,n,r){return Object(dn.b)()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Object(dn.b)()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){Object(dn.b)()},e.prototype.scale=function(t,e,n){Object(dn.b)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Object(dn.b)()},e.prototype.getType=function(){return Object(dn.b)()},e.prototype.applyTransform=function(t){Object(dn.b)()},e.prototype.intersectsExtent=function(t){return Object(dn.b)()},e.prototype.translate=function(t,e){Object(dn.b)()},e.prototype.transform=function(t,e){var n=Lr(t),r=n.getUnits()==ur.TILE_PIXELS?function(t,r,i){var o=n.getExtent(),a=n.getWorldExtent(),s=Jn(a)/Jn(o);return $i(eo,a[0],a[3],s,-s,0,0,0),Yi(t,0,t.length,i,eo,r),Br(n,e)(t,r,i)}:Br(n,e);return this.applyTransform(r),this},e}(Fi.a),ro=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function io(t){var e;return t==Gi?e=2:t==Xi||t==Ui?e=3:t==qi&&(e=4),e}var oo=function(t){function e(){var e=t.call(this)||this;return e.layout=Gi,e.stride=2,e.flatCoordinates=null,e}return ro(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=0,r=this.flatCoordinates.length,i=this.stride,Un(jn(t),e,n,r,i);var e,n,r,i},e.prototype.getCoordinates=function(){return Object(dn.b)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=io(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Object(dn.b)()},e.prototype.setLayout=function(t,e,n){var r;if(t)r=io(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=Gi,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=Gi:3==t?e=Xi:4==t&&(e=qi);return e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Vi(n,0,n.length,r,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var r=e;void 0===r&&(r=t);var i=n;i||(i=Kn(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,n,r,i,o,a,s){for(var u=s||[],c=a[0],l=a[1],h=0,p=e;p<n;p+=r){var f=t[p]-c,d=t[p+1]-l;u[h++]=c+i*f,u[h++]=l+o*d;for(var g=p+2;g<p+r;++g)u[h++]=t[g]}s&&u.length!=h&&(u.length=h)}(o,0,o.length,a,t,r,i,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var r=this.getStride();Hi(n,0,n.length,r,t,e,n),this.changed()}},e}(no);function ao(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],u=t[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function so(t,e,n,r){for(var i=0,o=0,a=n.length;o<a;++o){var s=n[o];i+=ao(t,e,s,r),e=s}return i}function uo(t,e,n,r,i,o,a){var s,u=t[e],c=t[e+1],l=t[n]-u,h=t[n+1]-c;if(0===l&&0===h)s=e;else{var p=((i-u)*l+(o-c)*h)/(l*l+h*h);if(p>1)s=n;else{if(p>0){for(var f=0;f<r;++f)a[f]=Qe(t[e+f],t[n+f],p);return void(a.length=r)}s=e}}for(f=0;f<r;++f)a[f]=t[s+f];a.length=r}function co(t,e,n,r,i){var o=t[e],a=t[e+1];for(e+=r;e<n;e+=r){var s=t[e],u=t[e+1],c=Ke(o,a,s,u);c>i&&(i=c),o=s,a=u}return i}function lo(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o];i=co(t,e,s,r,i),e=s}return i}function ho(t,e,n,r,i,o,a,s,u,c,l){if(e==n)return c;var h,p;if(0===i){if((p=Ke(a,s,t[e],t[e+1]))<c){for(h=0;h<r;++h)u[h]=t[e+h];return u.length=r,p}return c}for(var f=l||[NaN,NaN],d=e+r;d<n;)if(uo(t,d-r,d,r,a,s,f),(p=Ke(a,s,f[0],f[1]))<c){for(c=p,h=0;h<r;++h)u[h]=f[h];u.length=r,d+=r}else d+=r*Math.max((Math.sqrt(p)-Math.sqrt(c))/i|0,1);if(o&&(uo(t,n-r,e,r,a,s,f),(p=Ke(a,s,f[0],f[1]))<c)){for(c=p,h=0;h<r;++h)u[h]=f[h];u.length=r}return c}function po(t,e,n,r,i,o,a,s,u,c,l){for(var h=l||[NaN,NaN],p=0,f=n.length;p<f;++p){var d=n[p];c=ho(t,e,d,r,i,o,a,s,u,c,h),e=d}return c}function fo(t,e,n,r){for(var i=0,o=n.length;i<o;++i)t[e++]=n[i];return e}function go(t,e,n,r){for(var i=0,o=n.length;i<o;++i)for(var a=n[i],s=0;s<r;++s)t[e++]=a[s];return e}function vo(t,e,n,r,i){for(var o=i||[],a=0,s=0,u=n.length;s<u;++s){var c=go(t,e,n[s],r);o[a++]=c,e=c}return o.length=a,o}function yo(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=e;s<n;s+=r)o[a++]=t.slice(s,s+r);return o.length=a,o}function mo(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=0,u=n.length;s<u;++s){var c=n[s];o[a++]=yo(t,e,c,r,o[a]),e=c}return o.length=a,o}function _o(t,e,n,r,i){for(var o=void 0!==i?i:[],a=0,s=0,u=n.length;s<u;++s){var c=n[s];o[a++]=mo(t,e,c,r,o[a]),e=c[c.length-1]}return o.length=a,o}function bo(t,e,n,r,i,o,a){var s=(n-e)/r;if(s<3){for(;e<n;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var c=[e,n-r],l=0;c.length>0;){for(var h=c.pop(),p=c.pop(),f=0,d=t[p],g=t[p+1],v=t[h],y=t[h+1],m=p+r;m<h;m+=r){var _=We(t[m],t[m+1],d,g,v,y);_>f&&(l=m,f=_)}f>i&&(u[(l-e)/r]=1,p+r<l&&c.push(p,l),l+r<h&&c.push(l,h))}for(m=0;m<s;++m)u[m]&&(o[a++]=t[e+m*r],o[a++]=t[e+m*r+1]);return a}function xo(t,e){return e*Math.round(t/e)}function wo(t,e,n,r,i,o,a){if(e==n)return a;var s,u,c=xo(t[e],i),l=xo(t[e+1],i);e+=r,o[a++]=c,o[a++]=l;do{if(s=xo(t[e],i),u=xo(t[e+1],i),(e+=r)==n)return o[a++]=s,o[a++]=u,a}while(s==c&&u==l);for(;e<n;){var h=xo(t[e],i),p=xo(t[e+1],i);if(e+=r,h!=s||p!=u){var f=s-c,d=u-l,g=h-c,v=p-l;f*v==d*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(d<0&&v<d||d==v||d>0&&v>d)?(s=h,u=p):(o[a++]=s,o[a++]=u,c=s,l=u,s=h,u=p)}}return o[a++]=s,o[a++]=u,a}function Eo(t,e,n,r,i,o,a,s){for(var u=0,c=n.length;u<c;++u){var l=n[u];a=wo(t,e,l,r,i,o,a),s.push(a),e=l}return a}var So=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Co=function(t){function e(e,n){var r=t.call(this)||this;return r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return So(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){return r<Ln(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ho(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.getArea=function(){return ao(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return yo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=bo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Gi)},e.prototype.getType=function(){return nn},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=go(this.flatCoordinates,0,t,this.stride),this.changed()},e}(oo),To=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Io=function(t){function e(e,n){var r=t.call(this)||this;return r.setCoordinates(e,n),r}return To(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=Ke(t,e,i[0],i[1]);if(o<r){for(var a=this.stride,s=0;s<a;++s)n[s]=i[s];return n.length=a,o}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=t,r=e[0],i=e[1],Fn(r,i,r,i,n);var e,n,r,i},e.prototype.getType=function(){return tn},e.prototype.intersectsExtent=function(t){return kn(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=fo(this.flatCoordinates,0,t,this.stride),this.changed()},e}(oo);function Oo(t,e,n,r,i){return!Yn(i,(function(i){return!Mo(t,e,n,r,i[0],i[1])}))}function Mo(t,e,n,r,i,o){for(var a=0,s=t[n-r],u=t[n-r+1];e<n;e+=r){var c=t[e],l=t[e+1];u<=o?l>o&&(c-s)*(o-u)-(i-s)*(l-u)>0&&a++:l<=o&&(c-s)*(o-u)-(i-s)*(l-u)<0&&a--,s=c,u=l}return 0!==a}function Po(t,e,n,r,i,o){if(0===n.length)return!1;if(!Mo(t,e,n[0],r,i,o))return!1;for(var a=1,s=n.length;a<s;++a)if(Mo(t,n[a-1],n[a],r,i,o))return!1;return!0}function Lo(t,e,n,r,i,o,a){for(var s,u,c,l,h,p,f,d=i[o+1],g=[],v=0,y=n.length;v<y;++v){var m=n[v];for(l=t[m-r],p=t[m-r+1],s=e;s<m;s+=r)h=t[s],f=t[s+1],(d<=p&&f<=d||p<=d&&d<=f)&&(c=(d-p)/(f-p)*(h-l)+l,g.push(c)),l=h,p=f}var _=NaN,b=-1/0;for(g.sort(Bi.f),l=g[0],s=1,u=g.length;s<u;++s){h=g[s];var x=Math.abs(h-l);x>b&&Po(t,e,n,r,c=(l+h)/2,d)&&(_=c,b=x),l=h}return isNaN(_)&&(_=i[o]),a?(a.push(_,d,b),a):[_,d,b]}function Ro(t,e,n,r,i){for(var o,a=[t[e],t[e+1]],s=[];e+r<n;e+=r){if(s[0]=t[e+r],s[1]=t[e+r+1],o=i(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}function Ao(t,e,n,r,i){var o=Un([1/0,1/0,-1/0,-1/0],t,e,n,r);return!!rr(i,o)&&(!!An(i,o)||(o[0]>=i[0]&&o[2]<=i[2]||(o[1]>=i[1]&&o[3]<=i[3]||Ro(t,e,n,r,(function(t,e){return function(t,e,n){var r=!1,i=Nn(t,e),o=Nn(t,n);if(i===En||o===En)r=!0;else{var a=t[0],s=t[1],u=t[2],c=t[3],l=e[0],h=e[1],p=n[0],f=n[1],d=(f-h)/(p-l),g=void 0,v=void 0;o&Sn&&!(i&Sn)&&(r=(g=p-(f-c)/d)>=a&&g<=u),r||!(o&Cn)||i&Cn||(r=(v=f-(p-u)*d)>=s&&v<=c),r||!(o&Tn)||i&Tn||(r=(g=p-(f-s)/d)>=a&&g<=u),r||!(o&In)||i&In||(r=(v=f-(p-a)*d)>=s&&v<=c)}return r}(i,t,e)})))))}function ko(t,e,n,r,i){if(!function(t,e,n,r,i){return!!(Ao(t,e,n,r,i)||Mo(t,e,n,r,i[0],i[1])||Mo(t,e,n,r,i[0],i[3])||Mo(t,e,n,r,i[2],i[1])||Mo(t,e,n,r,i[2],i[3]))}(t,e,n[0],r,i))return!1;if(1===n.length)return!0;for(var o=1,a=n.length;o<a;++o)if(Oo(t,n[o-1],n[o],r,i)&&!Ao(t,n[o-1],n[o],r,i))return!1;return!0}function No(t,e,n,r){for(;e<n-r;){for(var i=0;i<r;++i){var o=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=o}e+=r,n-=r}}function Do(t,e,n,r){for(var i=0,o=t[n-r],a=t[n-r+1];e<n;e+=r){var s=t[e],u=t[e+1];i+=(s-o)*(u+a),o=s,a=u}return i>0}function Fo(t,e,n,r,i){for(var o=void 0!==i&&i,a=0,s=n.length;a<s;++a){var u=n[a],c=Do(t,e,u,r);if(0===a){if(o&&c||!o&&!c)return!1}else if(o&&!c||!o&&c)return!1;e=u}return!0}function jo(t,e,n,r,i){for(var o=void 0!==i&&i,a=0,s=n.length;a<s;++a){var u=n[a],c=Do(t,e,u,r);(0===a?o&&c||!o&&!c:o&&!c||!o&&c)&&No(t,e,u,r),e=u}return e}var zo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Bo=function(t){function e(e,n,r){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&r?(i.setFlatCoordinates(n,e),i.ends_=r):i.setCoordinates(e,n),i}return zo(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(Bi.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,n,r){return r<Ln(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(lo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),po(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,r))},e.prototype.containsXY=function(t,e){return Po(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return so(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?jo(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,mo(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Kn(this.getExtent());this.flatInteriorPoint_=Lo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Io(this.getFlatInteriorPoint(),Ui)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Co(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,r=[],i=0,o=0,a=n.length;o<a;++o){var s=n[o],u=new Co(e.slice(i,s),t);r.push(u),i=s}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Fo(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=jo(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],r=[];return n.length=Eo(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new e(n,Gi,r)},e.prototype.getType=function(){return rn},e.prototype.intersectsExtent=function(t){return ko(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=vo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(oo),Go=Bo;function Xo(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=[e,n,e,i,r,i,r,n,e,n];return new Bo(o,Gi,[o.length])}var Uo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qo="accuracy",Yo="accuracyGeometry",Vo="altitude",Ho="altitudeAccuracy",Wo="heading",Ko="position",$o="projection",Zo="speed",Jo="tracking",Qo="trackingOptions",ta=function(t){function e(e){var n=t.call(this,Di.a.ERROR)||this;return n.code=e.code,n.message=e.message,n}return Uo(e,t),e}(Ne.a),ea=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.position_=null,n.transform_=Mr,n.watchId_=void 0,n.addEventListener(Object(Fi.b)($o),n.handleProjectionChanged_),n.addEventListener(Object(Fi.b)(Jo),n.handleTrackingChanged_),void 0!==r.projection&&n.setProjection(r.projection),void 0!==r.trackingOptions&&n.setTrackingOptions(r.trackingOptions),n.setTracking(void 0!==r.tracking&&r.tracking),n}return Uo(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=zr(Lr("EPSG:4326"),t),this.position_&&this.set(Ko,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(qo,e.accuracy),this.set(Vo,null===e.altitude?void 0:e.altitude),this.set(Ho,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Wo,null===e.heading?void 0:Ze(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var n=this.transform_(this.position_);this.set(Ko,n),this.set(Zo,null===e.speed?void 0:e.speed);var r=function(t,e,n,r){for(var i=n||32,o=[],a=0;a<i;++a)Object(Bi.c)(o,pn(t,e,2*Math.PI*a/i,r));return o.push(o[0],o[1]),new Bo(o,Gi,[o.length])}(this.position_,e.accuracy);r.applyTransform(this.transform_),this.set(Yo,r),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new ta(t))},e.prototype.getAccuracy=function(){return this.get(qo)},e.prototype.getAccuracyGeometry=function(){return this.get(Yo)||null},e.prototype.getAltitude=function(){return this.get(Vo)},e.prototype.getAltitudeAccuracy=function(){return this.get(Ho)},e.prototype.getHeading=function(){return this.get(Wo)},e.prototype.getPosition=function(){return this.get(Ko)},e.prototype.getProjection=function(){return this.get($o)},e.prototype.getSpeed=function(){return this.get(Zo)},e.prototype.getTracking=function(){return this.get(Jo)},e.prototype.getTrackingOptions=function(){return this.get(Qo)},e.prototype.setProjection=function(t){this.set($o,Lr(t))},e.prototype.setTracking=function(t){this.set(Jo,t)},e.prototype.setTrackingOptions=function(t){this.set(Qo,t)},e}(Fi.a),na=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ra=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==r?r:null,i}return na(e,t),e}(Ne.a),ia="add",oa="remove",aa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sa="length",ua=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.element=n,i.index=r,i}return aa(e,t),e}(Ne.a),ca=function(t){function e(e,n){var r=t.call(this)||this,i=n||{};if(r.unique_=!!i.unique,r.array_=e||[],r.unique_)for(var o=0,a=r.array_.length;o<a;++o)r.assertUnique_(r.array_[o],o);return r.updateLength_(),r}return aa(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(sa)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new ua(ia,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,r=e.length;n<r;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new ua(oa,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new ua(oa,r,t)),this.dispatchEvent(new ua(ia,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(sa,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===t&&n!==e)throw new vn(58)},e}(Fi.a),la=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ha=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,o)||this;return a.originalEvent=r,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==i&&i,a}return la(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(ra),pa=(n(231),"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():""),fa=-1!==pa.indexOf("firefox"),da=(-1!==pa.indexOf("safari")&&pa.indexOf("chrom"),-1!==pa.indexOf("webkit")&&-1==pa.indexOf("edge")),ga=-1!==pa.indexOf("macintosh"),va=window.devicePixelRatio||1,ya="undefined"!=typeof Image&&Image.prototype.decode,ma={SINGLECLICK:"singleclick",CLICK:Di.a.CLICK,DBLCLICK:Di.a.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},_a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ba=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i,o)||this;return a.pointerEvent=r,a}return _a(e,t),e}(ha),xa="pointermove",wa="pointerdown",Ea=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sa=function(t){function e(e,n){var r=t.call(this,e)||this;r.map_=e,r.clickTimeoutId_,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=n?n*va:va,r.down_=null;var i=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.element_=i,r.pointerdownListenerKey_=Object(Ni.a)(i,wa,r.handlePointerDown_,r),r.relayedListenerKey_=Object(Ni.a)(i,xa,r.relayEvent_,r),r}return Ea(e,t),e.prototype.emulateClick_=function(t){var e=new ba(ma.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new ba(ma.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new ba(ma.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==ma.POINTERUP||e.type==ma.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==ma.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new ba(ma.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(Ni.c),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new ba(ma.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(Object(Ni.a)(document,ma.POINTERMOVE,this.handlePointerMove_,this),Object(Ni.a)(document,ma.POINTERUP,this.handlePointerUp_,this),Object(Ni.a)(this.element_,ma.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new ba(ma.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new ba(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(Ni.c)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Object(Ni.c)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ni.c),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(kt.a),Ca=n(75),Ta="layergroup",Ia="size",Oa="target",Ma="view",Pa="prerender",La="postrender",Ra="precompose",Aa="postcompose",ka="rendercomplete",Na=n(53),Da=0,Fa=1,ja=2,za=3,Ba=4,Ga=5,Xa=1/0,Ua=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(Sr.b)(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(n);return delete this.queuedElements_[r],n},t.prototype.enqueue=function(t){yn(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=Xa&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,r=e.length,i=e[t],o=n[t],a=t;t<r>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),c=u<r&&n[u]<n[s]?u:s;e[t]=e[c],n[t]=n[c],t=c}e[t]=i,n[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,r=this.priorities_,i=n[e],o=r[e];e>t;){var a=this.getParentIndex_(e);if(!(r[a]>o))break;n[e]=n[a],r[e]=r[a],e=a}n[e]=i,r[e]=o},t.prototype.reprioritize=function(){var t,e,n,r=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(n=r(t=i[e]))==Xa?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=n,i[a++]=t);i.length=a,o.length=a,this.heapify_()},t}(),qa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ya=function(t){function e(e,n){var r=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return r.boundHandleTileChange_=r.handleTileChange.bind(r),r.tileChangeCallback_=n,r.tilesLoading_=0,r.tilesLoadingKeys_={},r}return qa(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);n&&e[0].addEventListener(Di.a.CHANGE,this.boundHandleTileChange_);return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(e.hifi&&n===ja||n===za||n===Ba||n===Ga){e.removeEventListener(Di.a.CHANGE,this.boundHandleTileChange_);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,r,i,o=0,a=!1;this.tilesLoading_<t&&o<e&&this.getCount()>0;)i=(r=this.dequeue()[0]).getKey(),(n=r.getState())===Ga?a=!0:n!==Da||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++o,r.load());0===o&&a&&this.tileChangeCallback_()},e}(Ua),Va=256;function Ha(t,e,n){return function(r,i,o,a){if(r){var s=e?0:o[0]*i,u=e?0:o[1]*i,c=t[0]+s/2,l=t[2]-s/2,h=t[1]+u/2,p=t[3]-u/2;c>l&&(l=c=(l+c)/2),h>p&&(p=h=(p+h)/2);var f=Ve(r[0],c,l),d=Ve(r[1],h,p),g=30*i;return a&&n&&(f+=-g*Math.log(1+Math.max(0,c-r[0])/g)+g*Math.log(1+Math.max(0,r[0]-l)/g),d+=-g*Math.log(1+Math.max(0,h-r[1])/g)+g*Math.log(1+Math.max(0,r[1]-p)/g)),[f,d]}}}function Wa(t){return t}function Ka(t,e,n){var r=nr(e)/n[0],i=Jn(e)/n[1];return Math.min(t,Math.min(r,i))}function $a(t,e,n){var r=Math.min(t,e);return r*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(r=Math.max(r,n),r/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Ve(r,n/2,2*e)}function Za(t,e,n,r){return function(i,o,a,s){if(void 0!==i){var u=r?Ka(t,r,a):t;return(void 0===n||n)&&s?$a(i,u,e):Ve(i,e,u)}}}function Ja(t){return void 0!==t?0:void 0}function Qa(t){return void 0!==t?t:void 0}var ts=0,es=1,ns="center",rs="resolution",is="rotation";function os(t,e){for(var n=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function as(t,e){var n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,o=t[1]*n+t[0]*r;return t[0]=i,t[1]=o,t}function ss(t){return Math.pow(t,3)}function us(t){return 1-ss(1-t)}function cs(t){return 3*t*t-2*t*t*t}function ls(t){return t}var hs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ps(t,e){setTimeout((function(){t(e)}),0)}function fs(t){return!(t.sourceCenter&&t.targetCenter&&!os(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var ds=function(t){function e(e){var n=t.call(this)||this,r=Object(Sr.a)({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=kr(r.projection,"EPSG:3857"),n.targetCenter_=null,n.targetResolution_,n.targetRotation_,r.center&&(r.center=Kr(r.center,n.projection_)),r.extent&&(r.extent=Zr(r.extent,n.projection_)),n.applyOptions_(r),n}return hs(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,n,r,i=28,o=2,a=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:i,u=void 0!==t.zoomFactor?t.zoomFactor:o,c=void 0!==t.multiWorld&&t.multiWorld,l=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=kr(t.projection,"EPSG:3857"),p=h.getExtent(),f=t.constrainOnlyCenter,d=t.extent;c||d||!h.isGlobal()||(f=!1,d=p);if(void 0!==t.resolutions){var g=t.resolutions;n=g[a],r=void 0!==g[s]?g[s]:g[g.length-1],e=t.constrainResolution?function(t,e,n){return function(r,i,o,a){if(void 0!==r){var s=t[0],u=t[t.length-1],c=n?Ka(s,n,o):s;if(a)return void 0===e||e?$a(r,c,u):Ve(r,u,c);var l=Math.min(c,r),h=Math.floor(Object(Bi.e)(t,l,i));return t[h]>c&&h<t.length-1?t[h+1]:t[h]}}}(g,l,!f&&d):Za(n,r,l,!f&&d)}else{var v=(p?Math.max(nr(p),Jn(p)):360*sr[ur.DEGREES]/h.getMetersPerUnit())/Va/Math.pow(o,0),y=v/Math.pow(o,i-0);void 0!==(n=t.maxResolution)?a=0:n=v/Math.pow(u,a),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(u,s):v/Math.pow(u,s):y),s=a+Math.floor(Math.log(n/r)/Math.log(u)),r=n/Math.pow(u,s-a),e=t.constrainResolution?function(t,e,n,r,i){return function(o,a,s,u){if(void 0!==o){var c=i?Ka(e,i,s):e,l=void 0!==n?n:0;if(u)return void 0===r||r?$a(o,c,l):Ve(o,l,c);var h=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),p=-a*(.5-1e-9)+.5,f=Math.min(c,o),d=Math.floor(Math.log(e/f)/Math.log(t)+p),g=Math.max(h,d);return Ve(e/Math.pow(t,g),l,c)}}}(u,n,r,l,!f&&d):Za(n,r,l,!f&&d)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:a,zoomFactor:u}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var n=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Ha(t.extent,t.constrainOnlyCenter,e)}var n=kr(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var r=n.getExtent().slice();return r[0]=-1/0,r[2]=1/0,Ha(r,!1,!1)}return Wa}(t),r=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=i||Ze(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=o?0:t:void 0}):!1===e?Qa:"number"==typeof e?(n=e,r=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/r+.5)*r:void 0}):Qa}return Ja;var n,r;var i,o}(t);this.constraints_={center:n,resolution:r,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.resolveConstraints(0),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Object(Sr.a)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object(Sr.a)({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var r=arguments[n];r.center&&((r=Object(Sr.a)({},r)).center=Kr(r.center,this.getProjection())),r.anchor&&((r=Object(Sr.a)({},r)).anchor=Kr(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var r=arguments[n-1];return r.center&&this.setCenterInternal(r.center),void 0!==r.zoom&&this.setZoom(r.zoom),void 0!==r.rotation&&this.setRotation(r.rotation),void(e&&ps(e,!0))}for(var i=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],c=0;c<n;++c){var l=arguments[c],h={start:i,complete:!1,anchor:l.anchor,duration:void 0!==l.duration?l.duration:1e3,easing:l.easing||cs,callback:e};if(l.center&&(h.sourceCenter=o,h.targetCenter=l.center.slice(),o=h.targetCenter),void 0!==l.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(l.zoom),a=h.targetResolution):l.resolution&&(h.sourceResolution=a,h.targetResolution=l.resolution,a=h.targetResolution),void 0!==l.rotation){h.sourceRotation=s;var p=Je(l.rotation-s+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=s+p,s=h.targetRotation}fs(h)?h.complete=!0:i+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(ts,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[ts]>0},e.prototype.getInteracting=function(){return this.hints_[es]>0},e.prototype.cancelAnimations=function(){this.setHint(ts,-this.hints_[ts]);for(var t=0,e=this.animations_.length;t<e;++t){var n=this.animations_[t];n[0].callback&&ps(n[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var r=this.animations_[n],i=!0,o=0,a=r.length;o<a;++o){var s=r[o];if(!s.complete){var u=t-s.start,c=s.duration>0?u/s.duration:1;c>=1?(s.complete=!0,c=1):i=!1;var l=s.easing(c);if(s.sourceCenter){var h=s.sourceCenter[0],p=s.sourceCenter[1],f=h+l*(s.targetCenter[0]-h),d=p+l*(s.targetCenter[1]-p);this.targetCenter_=[f,d]}if(s.sourceResolution&&s.targetResolution){var g=1===l?s.targetResolution:s.sourceResolution+l*(s.targetResolution-s.sourceResolution);if(s.anchor){var v=this.getSizeFromViewport_(this.getRotation()),y=this.constraints_.resolution(g,0,v,!0);this.targetCenter_=this.calculateCenterZoom(y,s.anchor)}this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var m=1===l?Je(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+l*(s.targetRotation-s.sourceRotation);if(s.anchor){var _=this.constraints_.rotation(m,!0);this.targetCenter_=this.calculateCenterRotate(_,s.anchor)}this.targetRotation_=m}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[n]=null,this.setHint(ts,-1);var b=r[0].callback;b&&ps(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,r,i,o=this.getCenterInternal();return void 0!==o&&(as(n=[o[0]-e[0],o[1]-e[1]],t-this.getRotation()),i=e,(r=n)[0]+=+i[0],r[1]+=+i[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,r=this.getCenterInternal(),i=this.getResolution();void 0!==r&&void 0!==i&&(n=[e[0]-t*(e[0]-r[0])/i,e[1]-t*(e[1]-r[1])/i]);return n},e.prototype.getSizeFromViewport_=function(t){var e=[100,100],n='.ol-viewport[data-view="'+Object(dn.c)(this)+'"]',r=document.querySelector(n);if(r){var i=getComputedStyle(r);e[0]=parseInt(i.width,10),e[1]=parseInt(i.height,10)}if(t){var o=e[0],a=e[1];e[0]=Math.abs(o*Math.cos(t))+Math.abs(a*Math.sin(t)),e[1]=Math.abs(o*Math.sin(t))+Math.abs(a*Math.cos(t))}return e},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Wr(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(ns)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return $r(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getSizeFromViewport_(),n=this.getCenterInternal();yn(n,1);var r=this.getResolution();yn(void 0!==r,2);var i=this.getRotation();return yn(void 0!==i,3),Zn(n,r,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(rs)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Zr(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getSizeFromViewport_(),r=nr(t)/n[0],i=Jn(t)/n[1];return Math.max(r,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.maxResolution_,r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(is)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,n=this.maxResolution_,r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return function(t){return Math.log(n/t)/Math.log(e)/i}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),n=this.getResolution(),r=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:n,rotation:r,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,r=this.minZoom_||0;if(this.resolutions_){var i=Object(Bi.e)(this.resolutions_,t,1);r=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return r+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Ve(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Ve(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n,r=Object(Sr.a)({size:this.getSizeFromViewport_()},e||{});if(yn(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))yn(!ir(t),25),n=Xo(i=Zr(t,this.getProjection()));else if(t.getType()===cn){var i;(n=Xo(i=Zr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Kn(i))}else{var o=Hr();n=o?n.clone().transform(o,this.getProjection()):t}this.fitInternal(n,r)},e.prototype.fitInternal=function(t,e){var n=e||{},r=n.size;r||(r=this.getSizeFromViewport_());var i,o=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var s=t.getFlatCoordinates(),u=this.getRotation(),c=Math.cos(-u),l=Math.sin(-u),h=1/0,p=1/0,f=-1/0,d=-1/0,g=t.getStride(),v=0,y=s.length;v<y;v+=g){var m=s[v]*c-s[v+1]*l,_=s[v]*l+s[v+1]*c;h=Math.min(h,m),p=Math.min(p,_),f=Math.max(f,m),d=Math.max(d,_)}var b=this.getResolutionForExtentInternal([h,p,f,d],[r[0]-o[1]-o[3],r[1]-o[0]-o[2]]);b=isNaN(b)?i:Math.max(b,i),b=this.getConstrainedResolution(b,a?0:1),l=-l;var x=(h+f)/2,w=(p+d)/2,E=[(x+=(o[1]-o[3])/2*b)*c-(w+=(o[0]-o[2])/2*b)*l,w*c+x*l],S=n.callback?n.callback:Qi.c;void 0!==n.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(E,b),duration:n.duration,easing:n.easing},S):(this.targetResolution_=b,this.targetCenter_=E,this.applyTargetState_(!1,!0),ps(S,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(Kr(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){var r=this.getRotation(),i=Math.cos(-r),o=Math.sin(-r),a=t[0]*i-t[1]*o,s=t[1]*i+t[0]*o,u=this.getResolution(),c=(a+=(e[0]/2-n[0])*u)*i-(s+=(n[1]-e[1]/2)*u)*(o=-o),l=s*i+a*o;this.setCenterInternal([c,l])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Wr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&Kr(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.getSizeFromViewport_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,r,n);void 0!==e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Kr(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);void 0!==e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Kr(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,n),i=this.getSizeFromViewport_(r),o=this.constraints_.resolution(this.targetResolution_,0,i,n),a=this.constraints_.center(this.targetCenter_,o,i,n);this.get(is)!==r&&this.set(is,r),this.get(rs)!==o&&this.set(rs,o),this.get(ns)&&os(this.get(ns),a)||this.set(ns,a),this.getAnimating()&&!t&&this.cancelAnimations()},e.prototype.resolveConstraints=function(t,e,n){var r=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getSizeFromViewport_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),u=this.constraints_.center(this.targetCenter_,s,a);if(0===r)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=u,void this.applyTargetState_();this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&os(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:u,resolution:s,duration:r,easing:us,anchor:n}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(es,1)},e.prototype.endInteraction=function(t,e,n){var r=n&&Kr(n,this.getProjection());this.endInteractionInternal(t,e,r)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(es,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getSizeFromViewport_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,r=this.getSizeFromViewport_(this.getRotation());return this.constraints_.resolution(t,n,r)},e}(Fi.a),gs=n(9),vs="opacity",ys="visible",ms="extent",_s="zIndex",bs="maxResolution",xs="minResolution",ws="maxZoom",Es="minZoom",Ss="source",Cs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ts=function(t){function e(e){var n=t.call(this)||this,r=Object(Sr.a)({},e);return r[vs]=void 0!==e.opacity?e.opacity:1,yn("number"==typeof r[vs],64),r[ys]=void 0===e.visible||e.visible,r[_s]=e.zIndex,r[bs]=void 0!==e.maxResolution?e.maxResolution:1/0,r[xs]=void 0!==e.minResolution?e.minResolution:0,r[Es]=void 0!==e.minZoom?e.minZoom:-1/0,r[ws]=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==r.className?e.className:"ol-layer",delete r.className,n.setProperties(r),n.state_=null,n}return Cs(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Ve(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n?n:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return Object(dn.b)()},e.prototype.getLayerStatesArray=function(t){return Object(dn.b)()},e.prototype.getExtent=function(){return this.get(ms)},e.prototype.getMaxResolution=function(){return this.get(bs)},e.prototype.getMinResolution=function(){return this.get(xs)},e.prototype.getMinZoom=function(){return this.get(Es)},e.prototype.getMaxZoom=function(){return this.get(ws)},e.prototype.getOpacity=function(){return this.get(vs)},e.prototype.getSourceState=function(){return Object(dn.b)()},e.prototype.getVisible=function(){return this.get(ys)},e.prototype.getZIndex=function(){return this.get(_s)},e.prototype.setExtent=function(t){this.set(ms,t)},e.prototype.setMaxResolution=function(t){this.set(bs,t)},e.prototype.setMinResolution=function(t){this.set(xs,t)},e.prototype.setMaxZoom=function(t){this.set(ws,t)},e.prototype.setMinZoom=function(t){this.set(Es,t)},e.prototype.setOpacity=function(t){yn("number"==typeof t,64),this.set(vs,t)},e.prototype.setVisible=function(t){this.set(ys,t)},e.prototype.setZIndex=function(t){this.set(_s,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Fi.a),Is="undefined",Os="ready",Ms=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ps="layers",Ls=function(t){function e(e){var n=this,r=e||{},i=Object(Sr.a)({},r);delete i.layers;var o=r.layers;return(n=t.call(this,i)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addEventListener(Object(Fi.b)(Ps),n.handleLayersChanged_),o?Array.isArray(o)?o=new ca(o.slice(),{unique:!0}):yn("function"==typeof o.getArray,43):o=new ca(void 0,{unique:!0}),n.setLayers(o),n}return Ms(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Ni.c),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(Ni.a)(t,ia,this.handleLayersAdd_,this),Object(Ni.a)(t,oa,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(Ni.c);Object(Sr.b)(this.listenerKeys_);for(var n=t.getArray(),r=0,i=n.length;r<i;r++){var o=n[r];this.listenerKeys_[Object(dn.c)(o)]=[Object(Ni.a)(o,Na.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(Ni.a)(o,Di.a.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Object(dn.c)(e)]=[Object(Ni.a)(e,Na.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(Ni.a)(e,Di.a.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,n=Object(dn.c)(e);this.listenerKeys_[n].forEach(Ni.c),delete this.listenerKeys_[n],this.changed()},e.prototype.getLayers=function(){return this.get(Ps)},e.prototype.setLayers=function(t){this.set(Ps,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var r=this.getLayerState(),i=n,o=e.length;i<o;i++){var a=e[i];a.opacity*=r.opacity,a.visible=a.visible&&r.visible,a.maxResolution=Math.min(a.maxResolution,r.maxResolution),a.minResolution=Math.max(a.minResolution,r.minResolution),a.minZoom=Math.max(a.minZoom,r.minZoom),a.maxZoom=Math.min(a.maxZoom,r.maxZoom),void 0!==r.extent&&(void 0!==a.extent?a.extent=Qn(a.extent,r.extent):a.extent=r.extent)}return e},e.prototype.getSourceState=function(){return Os},e}(Ts);function Rs(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var As=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ks(t,e){t.style.msTouchAction=e,t.style.touchAction=e,t.setAttribute("touch-action",e)}var Ns,Ds,Fs=function(t){function e(e){var n=t.call(this)||this,r=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,r,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Ls({layers:t.layers});o[Ta]=a,o[Oa]=t.target,o[Ma]=void 0!==t.view?t.view:new ds,void 0!==t.controls&&(Array.isArray(t.controls)?n=new ca(t.controls.slice()):(yn("function"==typeof t.controls.getArray,47),n=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new ca(t.interactions.slice()):(yn("function"==typeof t.interactions.getArray,48),r=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?i=new ca(t.overlays.slice()):(yn("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new ca;return{controls:n,interactions:r,keyboardEventTarget:e,overlays:i,values:o}}(e);n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:va,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=new Sa(n,e.moveTolerance);var i=n.handleMapBrowserEvent.bind(n);for(var o in ma)n.mapBrowserEventHandler_.addEventListener(ma[o],i);n.keyboardEventTarget_=r.keyboardEventTarget,n.keyHandlerKeys_=null,n.focusHandlerKeys_=null;var a=n.handleBrowserEvent.bind(n);return n.viewport_.addEventListener(Di.a.CONTEXTMENU,a,!1),n.viewport_.addEventListener(Di.a.WHEEL,a,!1),n.controls=r.controls||new ca,n.interactions=r.interactions||new ca,n.overlays_=r.overlays,n.overlayIdIndex_={},n.renderer_=null,n.handleResize_,n.postRenderFunctions_=[],n.tileQueue_=new Ya(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addEventListener(Object(Fi.b)(Ta),n.handleLayerGroupChanged_),n.addEventListener(Object(Fi.b)(Ma),n.handleViewChanged_),n.addEventListener(Object(Fi.b)(Ia),n.handleSizeChanged_),n.addEventListener(Object(Fi.b)(Oa),n.handleTargetChanged_),n.setProperties(r.values),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.controls.addEventListener(ia,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(oa,function(t){t.element.setMap(null)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.addEventListener(ia,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(oa,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n.overlays_.addEventListener(ia,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(oa,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n}return As(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(Di.a.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Di.a.WHEEL,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(Di.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var r=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==n.layerFilter?n.layerFilter:Qi.b,a=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,i,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var r=n||{},i=void 0!==r.hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=r.layerFilter||Qi.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Qi.b,i=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,o,r,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Oa)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Wr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Ki(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ta)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer.getSource();if(r&&r.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Kr(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Ki(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Ia)},e.prototype.getView=function(){return this.get(Ma)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,n,r){var i=this.frameState_;if(!i||!(e in i.wantedTiles))return Xa;if(!i.wantedTiles[e][t.getKey()])return Xa;var o=i.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+s*s)/r},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,r=new ha(n,this,t);this.handleMapBrowserEvent(r)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){for(var e=t.originalEvent.target;e instanceof HTMLElement;){if(e.parentElement===this.overlayContainerStopEvent_)return;e=e.parentElement}t.frameState=this.frameState_;var n=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var r=n.length-1;r>=0;r--){var i=n[r];if(i.getActive())if(!i.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,r=n;if(t){var i=t.viewHints;if(i[ts]||i[es]){var o=!ya&&Date.now()-t.time>8;n=o?0:8,r=o?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}!t||!this.hasListener(ka)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(ka,t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.focusHandlerKeys_){for(var e=0,n=this.focusHandlerKeys_.length;e<n;++e)Object(Ni.c)(this.focusHandlerKeys_[e]);this.focusHandlerKeys_=null}if(this.keyHandlerKeys_){for(e=0,n=this.keyHandlerKeys_.length;e<n;++e)Object(Ni.c)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var r=!0;t.hasAttribute("tabindex")&&(r=document.activeElement===t,this.focusHandlerKeys_=[Object(Ni.a)(t,Di.a.FOCUS,ks.bind(this,this.viewport_,"none")),Object(Ni.a)(t,Di.a.BLUR,ks.bind(this,this.viewport_,"auto"))]),ks(this.viewport_,r?"none":"auto");var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(Ni.a)(i,Di.a.KEYDOWN,this.handleBrowserEvent,this),Object(Ni.a)(i,Di.a.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Di.a.RESIZE,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),Object(gs.c)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(Di.a.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(Ni.c)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(Ni.c)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",Object(dn.c)(t)),this.viewPropertyListenerKey_=Object(Ni.a)(t,Na.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(Ni.a)(t,Di.a.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ni.c),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(Ni.a)(t,Na.a.PROPERTYCHANGE,this.render,this),Object(Ni.a)(t,Di.a.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var r=t[e].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),n=this.getView(),r=this.frameState_,i=null;if(void 0!==e&&function(t){return t[0]>0&&t[1]>0}(e)&&n&&n.isDef()){var o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:r?r.declutterItems:[],extent:Zn(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}if(this.frameState_=i,this.renderer_.renderFrame(i),i){if(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),r)(!this.previousExtent_||!ir(this.previousExtent_)&&!zn(i.extent,this.previousExtent_))&&(this.dispatchEvent(new ra(Ca.a.MOVESTART,this,r)),this.previousExtent_=jn(this.previousExtent_));this.previousExtent_&&!i.viewHints[ts]&&!i.viewHints[es]&&!zn(i.extent,this.previousExtent_)&&(this.dispatchEvent(new ra(Ca.a.MOVEEND,this,i)),Pn(i.extent,this.previousExtent_))}this.dispatchEvent(new ra(Ca.a.POSTRENDER,this,i)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Ta,t)},e.prototype.setSize=function(t){this.set(Ia,t)},e.prototype.setTarget=function(t){this.set(Oa,t)},e.prototype.setView=function(t){this.set(Ma,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e}(Fi.a),js=n(58),zs="ol-hidden",Bs="ol-control",Gs="ol-collapsed",Xs=(Ds={},function(t){if(Ns||(Ns=document.createElement("div").style),!(t in Ds)){Ns.font=t;var e=Ns.fontFamily,n=Ns.fontWeight,r=Ns.fontStyle;if(Ns.font="",!e)return null;var i=e.split(/,\s?/);Ds[t]={families:i,weight:n,style:r}}return Ds[t]}),Us=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function qs(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}var Ys=function(t){function e(e){var n=this,r=Object(Sr.a)({},e);delete r.source,(n=t.call(this,r)||this).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addEventListener(Object(Fi.b)(Ss),n.handleSourcePropertyChange_);var i=e.source?e.source:null;return n.setSource(i),n}return Us(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(Ss)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():Is},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(Ni.c)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(Ni.a)(t,Di.a.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(Ni.c)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(Ni.c)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(Ni.a)(t,Ra,(function(t){t.frameState.layerStatesArray.push(this.getLayerState(!1))}),this),this.mapRenderKey_=Object(Ni.a)(this,Di.a.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Ss,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(Ts),Vs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Hs(t){this.updateElement_(t.frameState)}var Ws=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{element:document.createElement("div"),render:r.render||Hs,target:r.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===r.collapsed||r.collapsed,n.overrideCollapsible_=void 0!==r.collapsible,n.collapsible_=void 0===r.collapsible||r.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==r.className?r.className:"ol-attribution",o=void 0!==r.tipLabel?r.tipLabel:"Attributions",a=void 0!==r.collapseLabel?r.collapseLabel:"»";"string"==typeof a?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=a):n.collapseLabel_=a;var s=void 0!==r.label?r.label:"i";"string"==typeof s?(n.label_=document.createElement("span"),n.label_.textContent=s):n.label_=s;var u=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=o,c.appendChild(u),c.addEventListener(Di.a.CLICK,n.handleClick_.bind(n),!1);var l=i+" "+"ol-unselectable "+Bs+(n.collapsed_&&n.collapsible_?" ol-collapsed":"")+(n.collapsible_?"":" ol-uncollapsible"),h=n.element;return h.className=l,h.appendChild(n.ulElement_),h.appendChild(c),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return Vs(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],r=t.layerStatesArray,i=0,o=r.length;i<o;++i){var a=r[i];if(qs(a,t.viewState)){var s=a.layer.getSource();if(s){var u=s.getAttributions();if(u){var c=u(t);if(c)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(c))for(var l=0,h=c.length;l<h;++l)c[l]in e||(n.push(c[l]),e[c[l]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Object(Bi.b)(e,this.renderedAttributions_)){Object(gs.b)(this.ulElement_);for(var r=0,i=e.length;r<i;++r){var o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(Gs),this.collapsed_?Object(gs.e)(this.collapseLabel_,this.label_):Object(gs.e)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(js.default),Ks=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function $s(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var r="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(zs);i||0!==n?i&&0!==n&&this.element.classList.remove(zs):this.element.classList.add(zs)}this.label_.style.transform=r}this.rotation_=n}}var Zs=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),render:r.render||$s,target:r.target})||this;var i=void 0!==r.className?r.className:"ol-rotate",o=void 0!==r.label?r.label:"⇧";n.label_=null,"string"==typeof o?(n.label_=document.createElement("span"),n.label_.className="ol-compass",n.label_.textContent=o):(n.label_=o,n.label_.classList.add("ol-compass"));var a=r.tipLabel?r.tipLabel:"Reset rotation",s=document.createElement("button");s.className=i+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(n.label_),s.addEventListener(Di.a.CLICK,n.handleClick_.bind(n),!1);var u=i+" "+"ol-unselectable "+Bs,c=n.element;return c.className=u,c.appendChild(s),n.callResetNorth_=r.resetNorth?r.resetNorth:void 0,n.duration_=void 0!==r.duration?r.duration:250,n.autoHide_=void 0===r.autoHide||r.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(zs),n}return Ks(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:us}):t.setRotation(0))},e}(js.default),Js=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qs=function(t){function e(e){var n=this,r=e||{};n=t.call(this,{element:document.createElement("div"),target:r.target})||this;var i=void 0!==r.className?r.className:"ol-zoom",o=void 0!==r.delta?r.delta:1,a=void 0!==r.zoomInLabel?r.zoomInLabel:"+",s=void 0!==r.zoomOutLabel?r.zoomOutLabel:"−",u=void 0!==r.zoomInTipLabel?r.zoomInTipLabel:"Zoom in",c=void 0!==r.zoomOutTipLabel?r.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=i+"-in",l.setAttribute("type","button"),l.title=u,l.appendChild("string"==typeof a?document.createTextNode(a):a),l.addEventListener(Di.a.CLICK,n.handleClick_.bind(n,o),!1);var h=document.createElement("button");h.className=i+"-out",h.setAttribute("type","button"),h.title=c,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(Di.a.CLICK,n.handleClick_.bind(n,-o),!1);var p=i+" "+"ol-unselectable "+Bs,f=n.element;return f.className=p,f.appendChild(l),f.appendChild(h),n.duration_=void 0!==r.duration?r.duration:250,n}return Js(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var r=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:r,duration:this.duration_,easing:us})):e.setZoom(r)}}},e}(js.default);var tu=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var r=this.points_[e+2]-this.points_[n+2];if(r<1e3/60)return!1;var i=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/r,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),eu="active",nu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ru(t,e,n,r){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==r?r:250,easing:us})}}var iu=function(t){function e(e){var n=t.call(this)||this;return e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return nu(e,t),e.prototype.getActive=function(){return this.get(eu)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(eu,t)},e.prototype.setMap=function(t){this.map_=t},e}(Fi.a),ou=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function au(t){var e=!1;if(t.type==ma.DBLCLICK){var n=t.originalEvent,r=t.map,i=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;ru(r.getView(),o,i,this.duration_),t.preventDefault(),e=!0}return!e}var su=function(t){function e(e){var n=t.call(this,{handleEvent:au})||this,r=e||{};return n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:250,n}return ou(e,t),e}(iu),uu=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},cu=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},lu=function(t){return t.target.getTargetElement()===document.activeElement},hu=Qi.b,pu=function(t){var e=t.originalEvent;return 0==e.button&&!(da&&ga&&e.ctrlKey)},fu=(Qi.a,function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey}),du=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},gu=function(t){var e=t.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},vu=function(t){var e=t.pointerEvent;return yn(void 0!==e,56),"mouse"==e.pointerType},yu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function mu(t){for(var e=t.length,n=0,r=0,i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return[n/e,r/e]}var _u=function(t){function e(e){var n=this,r=e||{};return n=t.call(this,r)||this,r.handleDownEvent&&(n.handleDownEvent=r.handleDownEvent),r.handleDragEvent&&(n.handleDragEvent=r.handleDragEvent),r.handleMoveEvent&&(n.handleMoveEvent=r.handleMoveEvent),r.handleUpEvent&&(n.handleUpEvent=r.handleUpEvent),r.stopDown&&(n.stopDown=r.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return yu(e,t),e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==ma.POINTERDRAG)this.handleDragEvent(t);else if(t.type==ma.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==ma.POINTERDOWN){var r=this.handleDownEvent(t);r&&t.preventDefault(),this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==ma.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===ma.POINTERDOWN||e===ma.POINTERDRAG||e===ma.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==ma.POINTERUP?delete this.trackedPointers_[n]:(t.type==ma.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=Object(Sr.c)(this.trackedPointers_)}},e}(iu),bu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function xu(t){return fu(t)&&function(t){var e=t.pointerEvent;return yn(void 0!==e,56),e.isPrimary&&0===e.button}(t)}var wu=function(t){function e(e){var n=t.call(this,{stopDown:Qi.a})||this,r=e||{};return n.kinetic_=r.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1,n.condition_=r.condition?r.condition:xu,n.noKinetic_=!1,n}return bu(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,r=this.targetPointers,i=mu(r);if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=t.map.getView();e=o,n=a.getResolution(),e[0]*=n,e[1]*=n,as(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-r*Math.cos(i),a[1]-r*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:us})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(_u),Eu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Su=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,{stopDown:Qi.a})||this).condition_=r.condition?r.condition:cu,n.lastAngle_=void 0,n.duration_=void 0!==r.duration?r.duration:250,n}return Eu(e,t),e.prototype.handleDragEvent=function(t){if(vu(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==Ja){var r=e.getSize(),i=t.pixel,o=Math.atan2(r[1]/2-i[1],i[0]-r[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!vu(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!vu(t)&&(!(!pu(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(_u),Cu=n(52),Tu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Iu=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Tu(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(t[0],e[0])+n,r.top=Math.min(t[1],e[1])+n,r.width=Math.abs(e[0]-t[0])+n,r.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Go([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(Cu.a),Ou=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mu="boxstart",Pu="boxdrag",Lu="boxend",Ru=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=r,i}return Ou(e,t),e}(Ne.a),Au=function(t){function e(e){var n=t.call(this)||this,r=e||{};return n.box_=new Iu(r.className||"ol-dragbox"),n.minArea_=void 0!==r.minArea?r.minArea:64,n.onBoxEnd_=r.onBoxEnd?r.onBoxEnd:Qi.c,n.startPixel_=null,n.condition_=r.condition?r.condition:hu,n.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:n.defaultBoxEndCondition,n}return Ou(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var r=n[0]-e[0],i=n[1]-e[1];return r*r+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){vu(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ru(Pu,t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!vu(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Ru(Lu,t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!!vu(t)&&(!(!pu(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ru(Mu,t.coordinate,t)),!0))},e}(_u),ku=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Nu(){var t,e,n=this.getMap(),r=n.getView(),i=n.getSize(),o=this.getGeometry().getExtent();if(this.out_){var a=r.calculateExtentInternal(i),s=(t=[n.getPixelFromCoordinateInternal(Hn(o)),n.getPixelFromCoordinateInternal(er(o))],Xn(jn(e),t));!function(t,e){var n=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=r,t[3]+=r}(a,1/r.getResolutionForExtentInternal(s,i)),o=a}var u=r.getConstrainedResolution(r.getResolutionForExtentInternal(o,i)),c=r.getConstrainedCenter(Kn(o),u);r.animateInternal({resolution:u,center:c,duration:this.duration_,easing:us})}var Du=function(t){function e(e){var n=this,r=e||{},i=r.condition?r.condition:du;return(n=t.call(this,{condition:i,className:r.className||"ol-dragzoom",minArea:r.minArea,onBoxEnd:Nu})||this).duration_=void 0!==r.duration?r.duration:200,n.out_=void 0!==r.out&&r.out,n}return ku(e,t),e}(Au),Fu=37,ju=38,zu=39,Bu=40,Gu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Xu(t){var e=!1;if(t.type==Di.a.KEYDOWN){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==Bu||n==Fu||n==zu||n==ju)){var r=t.map.getView(),i=r.getResolution()*this.pixelDelta_,o=0,a=0;n==Bu?a=-i:n==Fu?o=-i:n==zu?o=i:a=i;var s=[o,a];as(s,r.getRotation()),function(t,e,n){var r=t.getCenterInternal();if(r){var i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:ls,center:t.getConstrainedCenter(i)})}}(r,s,this.duration_),t.preventDefault(),e=!0}}return!e}var Uu=function(t){function e(e){var n=t.call(this,{handleEvent:Xu})||this,r=e||{};return n.defaultCondition_=function(t){return fu(t)&&gu(t)},n.condition_=void 0!==r.condition?r.condition:n.defaultCondition_,n.duration_=void 0!==r.duration?r.duration:100,n.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,n}return Gu(e,t),e}(iu),qu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Yu(t){var e=!1;if(t.type==Di.a.KEYDOWN||t.type==Di.a.KEYPRESS){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var r=t.map,i=n=="+".charCodeAt(0)?this.delta_:-this.delta_;ru(r.getView(),i,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var Vu=function(t){function e(e){var n=t.call(this,{handleEvent:Yu})||this,r=e||{};return n.condition_=r.condition?r.condition:gu,n.delta_=r.delta?r.delta:1,n.duration_=void 0!==r.duration?r.duration:100,n}return qu(e,t),e}(iu),Hu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wu="trackpad",Ku="wheel",$u=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==r.maxDelta?r.maxDelta:1,n.duration_=void 0!==r.duration?r.duration:250,n.timeout_=void 0!==r.timeout?r.timeout:80,n.useAnchor_=void 0===r.useAnchor||r.useAnchor,n.condition_=r.condition?r.condition:hu,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.trackpadDeltaPerZoom_=300,n}return Hu(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,Math.sign(this.lastDelta_),this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==Di.a.WHEEL)return!0;t.preventDefault();var e,n=t.map,r=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Di.a.WHEEL&&(e=r.deltaY,fa&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=va),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();if(void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Wu:Ku),this.mode_===Wu){var o=n.getView();return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):o.beginInteraction(),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.trackpadEventGap_),o.adjustZoom(-e/this.trackpadDeltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1}this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations(),ru(e,-Ve(this.totalDelta_,-this.maxDelta_,this.maxDelta_),this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(iu),Zu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ju=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=Qi.a),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==r.threshold?r.threshold:.3,n.duration_=void 0!==r.duration?r.duration:250,n}return Zu(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],r=this.targetPointers[1],i=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Ja){var u=a.getViewport().getBoundingClientRect(),c=mu(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(c),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(_u),Qu=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),tc=function(t){function e(e){var n=this,r=e||{},i=r;return i.stopDown||(i.stopDown=Qi.a),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==r.duration?r.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return Qu(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],r=this.targetPointers[1],i=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var c=s.getViewport().getBoundingClientRect(),l=mu(this.targetPointers);l[0]-=c.left,l[1]-=c.top,this.anchor_=s.getCoordinateFromPixelInternal(l),s.render(),u.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(_u);function ec(t){var e=t||{},n=new ca,r=new tu(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Su),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new su({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new wu({condition:e.onFocusOnly?lu:void 0,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new Ju),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new tc({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Uu),n.push(new Vu({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new $u({condition:e.onFocusOnly?lu:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Du({duration:e.zoomDuration})),n}var nc=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rc=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=r,o.context=i,o}return nc(e,t),e}(Ne.a),ic=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,oc=/^([a-z]*)$|^hsla?\(.*\)$/i;function ac(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}var sc=function(){var t={},e=0;return function(n){var r;if(t.hasOwnProperty(n))r=t[n];else{if(e>=1024){var i=0;for(var o in t)0==(3&i++)&&(delete t[o],--e)}r=function(t){var e,n,r,i,o;oc.exec(t)&&(t=ac(t));if(ic.exec(t)){var a=t.length-1,s=void 0;s=a<=4?1:2;var u=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),n=parseInt(t.substr(1+1*s,s),16),r=parseInt(t.substr(1+2*s,s),16),i=u?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,n=(n<<4)+n,r=(r<<4)+r,u&&(i=(i<<4)+i)),o=[e,n,r,i/255]}else 0==t.indexOf("rgba(")?cc(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),cc(o)):yn(!1,14);return o}(n),t[n]=r,++e}return r}}();function uc(t){return Array.isArray(t)?t:sc(t)}function cc(t){return t[0]=Ve(t[0]+.5|0,0,255),t[1]=Ve(t[1]+.5|0,0,255),t[2]=Ve(t[2]+.5|0,0,255),t[3]=Ve(t[3],0,1),t}function lc(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+n+","+r+","+(void 0===t[3]?1:t[3])+")"}var hc=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var r=pc(t,e,n);return r in this.cache_?this.cache_[r]:null},t.prototype.set=function(t,e,n,r){var i=pc(t,e,n);this.cache_[i]=r,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function pc(t,e,n){return e+":"+t+":"+(n?function(t){return"string"==typeof t?t:lc(t)}(n):"null")}var fc=new hc;function dc(t){return Array.isArray(t)?lc(t):t}var gc,vc=function(){function t(){}return t.prototype.drawCustom=function(t,e,n){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),yc=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mc=function(t){function e(e){var n=t.call(this)||this;return n.highWaterMark=void 0!==e?e:2048,n.count_=0,n.entries_={},n.oldest_=null,n.newest_=null,n}return yc(e,t),e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(Di.a.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},e.prototype.get=function(t,e){var n=this.entries_[t];return yn(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(t){var e=this.entries_[t];return yn(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){yn(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(kt.a),_c=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),bc=function(t){function e(e){var n=t.call(this,e)||this;return n.consumers={},n}return _c(e,t),e.prototype.clear=function(){this.consumers={},t.prototype.clear.call(this)},e.prototype.get=function(e,n){var r=t.prototype.get.call(this,e),i=Object(dn.c)(n);return i in this.consumers||(this.consumers[i]={}),this.consumers[i][e]=!0,r},e.prototype.prune=function(){t:for(;this.canExpireCache();){var t=this.peekLastKey();for(var e in this.consumers)if(t in this.consumers[e])break t;var n=this.pop();for(var e in n.width=0,n.height=0,this.consumers)delete this.consumers[e][t]}},e.prototype.release=function(t){delete this.consumers[Object(dn.c)(t)]},e}(mc),xc="10px sans-serif",wc="#000",Ec="round",Sc=[],Cc="round",Tc="#000",Ic="center",Oc="middle",Mc=[0,0,0,0],Pc=new bc,Lc={},Rc=null,Ac={},kc=function(){var t,e,n=Lc,r="32px ",i=["monospace","serif"],o=i.length,a="wmytzilWMYTZIL@#/&?$%10";function s(t,n,s){for(var u=Nc(),c=!0,l=0;l<o;++l){var h=i[l];if(u.font=t+" "+n+" "+r+h,e=u.measureText(a).width,s!=h){u.font=t+" "+n+" "+r+s+","+h;var p=u.measureText(a).width;c=c&&p!=e}}return!!c}function u(){var e=!0;for(var r in n)n[r]<100&&(s.apply(this,r.split("\n"))?(n[r]=100,Object(Sr.b)(Ac),Rc=null,gc=void 0,Pc.getCount()&&Pc.clear()):(++n[r],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var r=Xs(e);if(r)for(var i=r.families,o=0,a=i.length;o<a;++o){var c=i[o],l=r.style+"\n"+r.weight+"\n"+c;l in n||(n[l]=100,s(r.style,r.weight,c)||(n[l]=0,void 0===t&&(t=setInterval(u,32))))}}}();function Nc(){return Rc||(Rc=Object(gs.a)(1,1)),Rc}var Dc,Fc,jc=(Fc=Ac,function(t){var e=Fc[t];return null==e&&(Dc||((Dc=document.createElement("div")).innerHTML="M",Dc.style.margin="0 !important",Dc.style.padding="0 !important",Dc.style.position="absolute !important",Dc.style.left="-99999px !important"),Dc.style.font=t,document.body.appendChild(Dc),e=Dc.offsetHeight,Fc[t]=e,document.body.removeChild(Dc)),e});function zc(t,e){var n=Nc();return t!=gc&&(n.font=t,gc=n.font),n.measureText(e).width}function Bc(t,e,n){if(e in n)return n[e];var r=zc(t,e);return n[e]=r,r}function Gc(t,e,n,r){0!==e&&(t.translate(n,r),t.rotate(e),t.translate(-n,-r))}var Xc=[1,0,0,1,0,0];function Uc(t,e,n,r,i,o,a,s,u,c,l){var h;1!=n&&(h=t.globalAlpha,t.globalAlpha=h*n),e&&t.setTransform.apply(t,e),t.drawImage(r,i,o,a,s,u,c,a*l,s*l),1!=n&&(t.globalAlpha=h),e&&t.setTransform.apply(t,Xc)}var qc=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yc=function(t){function e(e,n,r,i,o,a,s){var u=t.call(this)||this;return u.context_=e,u.pixelRatio_=n,u.extent_=r,u.transform_=i,u.viewRotation_=o,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=0,u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=0,u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}return qc(e,t),e.prototype.drawImages_=function(t,e,n,r){if(this.image_){var i=Yi(t,e,n,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var c=0,l=i.length;c<l;c+=2){var h=i[c]-this.imageAnchorX_,p=i[c+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var f=h+this.imageAnchorX_,d=p+this.imageAnchorY_;$i(a,f,d,this.imageScale_,this.imageScale_,u,-f,-d),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,p,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,n,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=Yi(t,e,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<n;e+=r){var s=i[e]+this.textOffsetX_,u=i[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var c=$i(this.tmpLocalTransform_,s,u,this.textScale_,this.textScale_,a,-s,-u);o.setTransform.apply(o,c)}this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,n,r,i){var o=this.context_,a=Yi(t,e,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return i&&o.closePath(),n},e.prototype.drawRings_=function(t,e,n,r){for(var i=0,o=n.length;i<o;++i)e=this.moveToLineTo_(t,e,n[i],r,!0);return e},e.prototype.drawCircle=function(t){if(rr(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,n){var r=t.getFlatCoordinates();if(r){var i=t.getStride();return Yi(r,0,r.length,i,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],r=e[3]-e[1],i=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case tn:this.drawPoint(t);break;case en:this.drawLineString(t);break;case rn:this.drawPolygon(t);break;case on:this.drawMultiPoint(t);break;case an:this.drawMultiLineString(t);break;case sn:this.drawMultiPolygon(t);break;case un:this.drawGeometryCollection(t);break;case cn:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&rr(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,r=e.length;n<r;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),rr(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(rr(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,r=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();n.beginPath();for(var s=0,u=o.length;s<u;++s)i=this.moveToLineTo_(r,i,o[s],a,!1);n.stroke()}if(""!==this.text_){var c=t.getFlatMidpoints();this.drawText_(c,0,c.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),rr(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),rr(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),r=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var u=i[a];r=this.drawRings_(n,r,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var c=t.getFlatInteriorPoints();this.drawText_(c,0,c.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(Object(Bi.b)(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,r=t.textAlign?t.textAlign:Ic;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=r&&(n.textAlign=r,e.textAlign=r),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var n=t.getColor();this.fillState_={fillStyle:dc(n||wc)}}else this.fillState_=null;if(e){var r=e.getColor(),i=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),u=e.getWidth(),c=e.getMiterLimit();this.strokeState_={lineCap:void 0!==i?i:Ec,lineDash:o||Sc,lineDashOffset:a||0,lineJoin:void 0!==s?s:Cc,lineWidth:this.pixelRatio_*(void 0!==u?u:1),miterLimit:void 0!==c?c:10,strokeStyle:dc(r||Tc)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),n=t.getImage(1),r=t.getOrigin(),i=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=i[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=i[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:dc(n||wc)}}else this.textFillState_=null;var r=t.getStroke();if(r){var i=r.getColor(),o=r.getLineCap(),a=r.getLineDash(),s=r.getLineDashOffset(),u=r.getLineJoin(),c=r.getWidth(),l=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:Ec,lineDash:a||Sc,lineDashOffset:s||0,lineJoin:void 0!==u?u:Cc,lineWidth:void 0!==c?c:1,miterLimit:void 0!==l?l:10,strokeStyle:dc(i||Tc)}}else this.textStrokeState_=null;var h=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),v=t.getScale(),y=t.getText(),m=t.getTextAlign(),_=t.getTextBaseline();this.textState_={font:void 0!==h?h:xc,textAlign:void 0!==m?m:Ic,textBaseline:void 0!==_?_:Oc},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==v?v:1)}else this.text_=""},e}(vc),Vc=0,Hc=1,Wc=2,Kc=3,$c="Circle",Zc="Default",Jc="Image",Qc="LineString",tl="Polygon",el="Text",nl={Point:function(t,e,n,r){var i=n.getImage();if(i){if(i.getImageState()!=Wc)return;var o=t.getBuilder(n.getZIndex(),Jc);o.setImageStyle(i,t.addDeclutter(!1)),o.drawPoint(e,r)}var a=n.getText();if(a){var s=t.getBuilder(n.getZIndex(),el);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,r)}},LineString:function(t,e,n,r){var i=n.getStroke();if(i){var o=t.getBuilder(n.getZIndex(),Qc);o.setFillStrokeStyle(null,i),o.drawLineString(e,r)}var a=n.getText();if(a){var s=t.getBuilder(n.getZIndex(),el);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,r)}},Polygon:function(t,e,n,r){var i=n.getFill(),o=n.getStroke();if(i||o){var a=t.getBuilder(n.getZIndex(),tl);a.setFillStrokeStyle(i,o),a.drawPolygon(e,r)}var s=n.getText();if(s){var u=t.getBuilder(n.getZIndex(),el);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,r)}},MultiPoint:function(t,e,n,r){var i=n.getImage();if(i){if(i.getImageState()!=Wc)return;var o=t.getBuilder(n.getZIndex(),Jc);o.setImageStyle(i,t.addDeclutter(!1)),o.drawMultiPoint(e,r)}var a=n.getText();if(a){var s=t.getBuilder(n.getZIndex(),el);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,r)}},MultiLineString:function(t,e,n,r){var i=n.getStroke();if(i){var o=t.getBuilder(n.getZIndex(),Qc);o.setFillStrokeStyle(null,i),o.drawMultiLineString(e,r)}var a=n.getText();if(a){var s=t.getBuilder(n.getZIndex(),el);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,r)}},MultiPolygon:function(t,e,n,r){var i=n.getFill(),o=n.getStroke();if(o||i){var a=t.getBuilder(n.getZIndex(),tl);a.setFillStrokeStyle(i,o),a.drawMultiPolygon(e,r)}var s=n.getText();if(s){var u=t.getBuilder(n.getZIndex(),el);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,r)}},GeometryCollection:function(t,e,n,r){var i,o,a=e.getGeometriesArray();for(i=0,o=a.length;i<o;++i){(0,nl[a[i].getType()])(t,a[i],n,r)}},Circle:function(t,e,n,r){var i=n.getFill(),o=n.getStroke();if(i||o){var a=t.getBuilder(n.getZIndex(),$c);a.setFillStrokeStyle(i,o),a.drawCircle(e,r)}var s=n.getText();if(s){var u=t.getBuilder(n.getZIndex(),el);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,r)}}};function rl(t,e){return parseInt(Object(dn.c)(t),10)-parseInt(Object(dn.c)(e),10)}function il(t,e){var n=ol(t,e);return n*n}function ol(t,e){return.5*t/e}function al(t,e,n,r,i,o){var a=!1,s=n.getImage();if(s){var u=s.getImageState();u==Wc||u==Kc?s.unlistenImageChange(i):(u==Vc&&s.load(),u=s.getImageState(),s.listenImageChange(i),a=!0)}return function(t,e,n,r,i){var o=n.getGeometryFunction()(e);if(!o)return;var a=o.simplifyTransformed(r,i);if(n.getRenderer())sl(t,a,n,e);else{(0,nl[a.getType()])(t,a,n,e)}}(t,e,n,r,o),a}function sl(t,e,n,r){if(e.getType()!=un)t.getBuilder(n.getZIndex(),Zc).drawCustom(e,r,n.getRenderer());else for(var i=e.getGeometries(),o=0,a=i.length;o<a;++o)sl(t,i[o],n,r)}var ul=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function cl(t,e){fc.expire()}var ll=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n.declutterTree_=null,n}return ul(e,t),e.prototype.dispatchRenderEvent=function(t,e){Object(dn.b)()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;$i(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Zi(r,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o,a,s){var u,c=e.viewState;function l(t,e,n){return i.call(o,e,t?n:null)}var h=c.projection,p=t,f=[[0,0]];if(h.canWrapX()){var d=h.getExtent(),g=nr(d),v=t[0];if(v<d[0]||v>d[2])p=[v+g*Math.ceil((d[0]-v)/g),t[1]];r&&f.push([-g,0],[g,0])}var y,m=e.layerStatesArray,_=m.length;this.declutterTree_&&(y=this.declutterTree_.all().map((function(t){return t.value})));for(var b=[],x=0;x<f.length;x++)for(var w=_-1;w>=0;--w){var E=m[w],S=E.layer;if(S.hasRenderer()&&qs(E,c)&&a.call(s,S)){var C=S.getRenderer(),T=S.getSource();if(C&&T){var I=T.getWrapX()?p:t,O=l.bind(null,E.managed);b[0]=I[0]+f[x][0],b[1]=I[1]+f[x][1],u=C.forEachFeatureAtCoordinate(b,e,n,O,y)}if(u)return u}}},e.prototype.forEachLayerAtPixel=function(t,e,n,r,i){return Object(dn.b)()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,r,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,r,Qi.b,this,i,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=function(t,e){e&&e.clear();for(var n=t.declutterItems,r=n.length-1;r>=0;--r)for(var i=n[r],o=i.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],i.opacity,e);return n.length=0,e}(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){fc.canExpireCache()&&t.postRenderFunctions.push(cl)},e}(Cu.a),hl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pl=function(t){function e(e){var n=t.call(this,e)||this;n.labelCacheKey_=Object(Ni.a)(Pc,Di.a.CLEAR,e.redrawText.bind(e)),n.element_=document.createElement("div");var r=n.element_.style;r.position="absolute",r.width="100%",r.height="100%",r.zIndex="0",n.element_.className="ol-unselectable ol-layers";var i=e.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return hl(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var r=new rc(t,void 0,e);n.dispatchEvent(r)}},e.prototype.disposeInternal=function(){Object(Ni.c)(this.labelCacheKey_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(Ra,e);var n=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),r=e.viewState;this.children_.length=0;for(var i=null,o=0,a=n.length;o<a;++o){var s=n[o];if(e.layerIndex=o,qs(s,r)&&(s.sourceState==Os||s.sourceState==Is)){var u=s.layer.render(e,i);u&&u!==i&&(this.children_.push(u),i=u)}}t.prototype.renderFrame.call(this,e),Object(gs.d)(this.element_,this.children_),this.dispatchRenderEvent(Aa,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,r,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var u=a[s],c=u.layer;if(c.hasRenderer()&&qs(u,o)&&i(c)){var l=c.getRenderer().getDataAtPixel(t,e,n);if(l){var h=r(c,l);if(h)return h}}}},e}(ll),fl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dl=function(t){function e(e){return(e=Object(Sr.a)({},e)).controls||(e.controls=function(t){var e=t||{},n=new ca;return(void 0===e.zoom||e.zoom)&&n.push(new Qs(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new Zs(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new Ws(e.attributionOptions)),n}()),e.interactions||(e.interactions=ec()),t.call(this,e)||this}return fl(e,t),e.prototype.createRenderer=function(){return new pl(this)},e}(Fs);ds.prototype.getDecimalZoom=function(){var t=this.getResolution(),e=Math.log(this.maxResolution_/t)/Math.log(2);return void 0!==e?this.minZoom_+e:e};var gl=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getAnchor=function(){return Object(dn.b)()},t.prototype.getImage=function(t){return Object(dn.b)()},t.prototype.getHitDetectionImage=function(t){return Object(dn.b)()},t.prototype.getImageState=function(){return Object(dn.b)()},t.prototype.getImageSize=function(){return Object(dn.b)()},t.prototype.getHitDetectionImageSize=function(){return Object(dn.b)()},t.prototype.getOrigin=function(){return Object(dn.b)()},t.prototype.getSize=function(){return Object(dn.b)()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){Object(dn.b)()},t.prototype.load=function(){Object(dn.b)()},t.prototype.unlistenImageChange=function(t){Object(dn.b)()},t}(),vl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yl=function(t){function e(e){var n=this,r=void 0!==e.rotateWithView&&e.rotateWithView;return(n=t.call(this,{opacity:1,rotateWithView:r,rotation:void 0!==e.rotation?e.rotation:0,scale:1})||this).canvas_=null,n.hitDetectionCanvas_=null,n.fill_=void 0!==e.fill?e.fill:null,n.origin_=[0,0],n.points_=e.points,n.radius_=void 0!==e.radius?e.radius:e.radius1,n.radius2_=e.radius2,n.angle_=void 0!==e.angle?e.angle:0,n.stroke_=void 0!==e.stroke?e.stroke:null,n.anchor_=null,n.size_=null,n.imageSize_=null,n.hitDetectionImageSize_=null,n.render(),n}return vl(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return Wc},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.render=function(){var t,e=Ec,n=Cc,r=0,i=null,o=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t=Tc),t=dc(t),void 0===(a=this.stroke_.getWidth())&&(a=1),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(n=this.stroke_.getLineJoin())&&(n=Cc),void 0===(e=this.stroke_.getLineCap())&&(e=Ec),void 0===(r=this.stroke_.getMiterLimit())&&(r=10));var s=2*(this.radius_+a)+1,u={strokeStyle:t,strokeWidth:a,size:s,lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:n,miterLimit:r},c=Object(gs.a)(s,s);this.canvas_=c.canvas;var l=s=this.canvas_.width;this.draw_(u,c,0,0),this.createHitDetectionCanvas_(u),this.anchor_=[s/2,s/2],this.size_=[s,s],this.imageSize_=[l,l]},e.prototype.draw_=function(t,e,n,r){var i,o,a;e.setTransform(1,0,0,1,0,0),e.translate(n,r),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(s*=2),i=0;i<=s;i++)o=2*i*Math.PI/s-Math.PI/2+this.angle_,a=i%2==0?this.radius_:u,e.lineTo(t.size/2+a*Math.cos(o),t.size/2+a*Math.sin(o))}if(this.fill_){var c=this.fill_.getColor();null===c&&(c=wc),e.fillStyle=dc(c),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var e=this.fill_.getColor(),n=0;if("string"==typeof e&&(e=uc(e)),null===e?n=1:Array.isArray(e)&&(n=4===e.length?e[3]:1),0===n){var r=Object(gs.a)(t.size,t.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(t,r,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,n,r){e.setTransform(1,0,0,1,0,0),e.translate(n,r),e.beginPath();var i=this.points_;if(i===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(i*=2);var a=void 0,s=void 0,u=void 0;for(a=0;a<=i;a++)u=2*a*Math.PI/i-Math.PI/2+this.angle_,s=a%2==0?this.radius_:o,e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}e.fillStyle=wc,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(gl),ml=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_l=function(t){function e(e){var n=e||{};return t.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke})||this}return ml(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(yl),bl=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),xl=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),wl=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Cl,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==typeof e&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Cl,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}();var El=null;function Sl(t,e){if(!El){var n=new bl({color:"rgba(255,255,255,0.4)"}),r=new xl({color:"#3399CC",width:1.25});El=[new wl({image:new _l({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return El}function Cl(t){return t.getGeometry()}var Tl=wl,Il=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ol="renderOrder",Ml=function(t){function e(e){var n=this,r=e||{},i=Object(Sr.a)({},r);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(n=t.call(this,i)||this).declutter_=void 0!==r.declutter&&r.declutter,n.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(r.style),n.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,n.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,n}return Il(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Ol)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(Ol,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:Sl,this.styleFunction_=null===t?void 0:function(t){var e;if("function"==typeof t)e=t;else{var n;Array.isArray(t)?n=t:(yn("function"==typeof t.getZIndex,41),n=[t]),e=function(){return n}}return e}(this.style_),this.changed()},e}(Ys),Pl={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ll=[Pl.FILL],Rl=[Pl.STROKE],Al=[Pl.BEGIN_PATH],kl=[Pl.CLOSE_PATH],Nl=Pl,Dl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fl=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=n,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=r,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return Dl(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,n,r,i,o){var a=this.coordinates.length,s=this.getBufferedMaxExtent();o&&(e+=r);var u,c,l,h=t[e],p=t[e+1],f=this.tmpCoordinate_,d=!0;for(u=e+r;u<n;u+=r)f[0]=t[u],f[1]=t[u+1],(l=Nn(s,f))!==c?(d&&(this.coordinates[a++]=h,this.coordinates[a++]=p),this.coordinates[a++]=f[0],this.coordinates[a++]=f[1],d=!1):l===En?(this.coordinates[a++]=f[0],this.coordinates[a++]=f[1],d=!1):d=!0,h=f[0],p=f[1],c=l;return(i&&d||u===e+r)&&(this.coordinates[a++]=h,this.coordinates[a++]=p),a},e.prototype.drawCustomCoordinates_=function(t,e,n,r,i){for(var o=0,a=n.length;o<a;++o){var s=n[o],u=this.appendFlatCoordinates(t,e,s,r,!1,!1);i.push(u),e=s}return e},e.prototype.drawCustom=function(t,e,n){this.beginGeometry(t,e);var r,i,o,a,s,u=t.getType(),c=t.getStride(),l=this.coordinates.length;if(u==sn){r=(t=t).getOrientedFlatCoordinates(),a=[];var h=t.getEndss();s=0;for(var p=0,f=h.length;p<f;++p){var d=[];s=this.drawCustomCoordinates_(r,s,h[p],c,d),a.push(d)}this.instructions.push([Nl.CUSTOM,l,a,t,n,_o])}else u==rn||u==an?(o=[],r=u==rn?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(r,0,t.getEnds(),c,o),this.instructions.push([Nl.CUSTOM,l,o,t,n,mo])):u==en||u==on?(r=t.getFlatCoordinates(),i=this.appendFlatCoordinates(r,0,r.length,c,!1,!1),this.instructions.push([Nl.CUSTOM,l,i,t,n,yo])):u==tn&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),i=this.coordinates.length,this.instructions.push([Nl.CUSTOM,l,i,t,n]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var n=t.getExtent();this.beginGeometryInstruction1_=[Nl.BEGIN_GEOMETRY,e,0,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Nl.BEGIN_GEOMETRY,e,0,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var n,r,i=e.length,o=-1;for(t=0;t<i;++t)(r=(n=e[t])[0])==Nl.END_GEOMETRY?o=t:r==Nl.BEGIN_GEOMETRY&&(n[2]=t,Object(Bi.g)(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var n=this.state;if(t){var r=t.getColor();n.fillStyle=dc(r||wc)}else n.fillStyle=void 0;if(e){var i=e.getColor();n.strokeStyle=dc(i||Tc);var o=e.getLineCap();n.lineCap=void 0!==o?o:Ec;var a=e.getLineDash();n.lineDash=a?a.slice():Sc;var s=e.getLineDashOffset();n.lineDashOffset=s||0;var u=e.getLineJoin();n.lineJoin=void 0!==u?u:Cc;var c=e.getWidth();n.lineWidth=void 0!==c?c:1;var l=e.getMiterLimit();n.miterLimit=void 0!==l?l:10,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,n=[Nl.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(!0),n},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[Nl.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)},e.prototype.updateStrokeStyle=function(t,e){var n=t.strokeStyle,r=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||i!=t.currentLineDash&&!Object(Bi.b)(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=u)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[Nl.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Pn(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Mn(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(vc),jl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zl=function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return jl(e,t),e.prototype.drawCoordinates_=function(t,e,n,r){return this.appendFlatCoordinates(t,e,n,r,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,r);this.instructions.push([Nl.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Nl.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var n=t.getFlatCoordinates(),r=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(n,0,n.length,r);this.instructions.push([Nl.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Nl.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var n=t.getAnchor(),r=t.getSize(),i=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=n[0],this.anchorY_=n[1],this.declutterGroups_=e,this.hitDetectionImage_=i,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=r[0]},e}(Fl),Bl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gl=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return Bl(e,t),e.prototype.drawFlatCoordinates_=function(t,e,n,r){var i=this.coordinates.length,o=this.appendFlatCoordinates(t,e,n,r,!1,!1),a=[Nl.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n},e.prototype.drawLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Nl.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],Al);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Rl),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var n=this.state,r=n.strokeStyle,i=n.lineWidth;if(void 0!==r&&void 0!==i){this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Nl.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset],Al);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),u=0,c=0,l=o.length;c<l;++c)u=this.drawFlatCoordinates_(a,u,o[c],s);this.hitDetectionInstructions.push(Rl),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Rl),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Rl),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Al)},e}(Fl),Xl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ul=function(t){function e(e,n,r,i){return t.call(this,e,n,r,i)||this}return Xl(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,n,r){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=n.length;this.instructions.push(Al),this.hitDetectionInstructions.push(Al);for(var u=0;u<s;++u){var c=n[u],l=this.coordinates.length,h=this.appendFlatCoordinates(t,e,c,r,!0,!a),p=[Nl.MOVE_TO_LINE_TO,l,h];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(kl),this.hitDetectionInstructions.push(kl)),e=c}return o&&(this.instructions.push(Ll),this.hitDetectionInstructions.push(Ll)),a&&(this.instructions.push(Rl),this.hitDetectionInstructions.push(Rl)),e},e.prototype.drawCircle=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([Nl.SET_FILL_STYLE,wc]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Nl.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,a,!1,!1);var u=[Nl.CIRCLE,s];this.instructions.push(Al,u),this.hitDetectionInstructions.push(Al,u),void 0!==n.fillStyle&&(this.instructions.push(Ll),this.hitDetectionInstructions.push(Ll)),void 0!==n.strokeStyle&&(this.instructions.push(Rl),this.hitDetectionInstructions.push(Rl)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([Nl.SET_FILL_STYLE,wc]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Nl.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var n=this.state,r=n.fillStyle,i=n.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([Nl.SET_FILL_STYLE,wc]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([Nl.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),u=0,c=0,l=o.length;c<l;++c)u=this.drawFlatCoordinatess_(a,u,o[c],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var n=this.coordinates,r=0,i=n.length;r<i;++r)n[r]=xo(n[r],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(Fl);function ql(t,e,n,r,i){var o,a,s,u,c,l,h,p,f,d=n,g=n,v=0,y=0,m=n;for(o=n;o<r;o+=i){var _=e[o],b=e[o+1];void 0!==u&&(p=_-u,f=b-c,s=Math.sqrt(p*p+f*f),void 0!==l&&(y+=a,Math.acos((l*p+h*f)/(a*s))>t&&(y>v&&(v=y,d=m,g=o),y=0,m=o-i)),a=s,l=p,h=f),u=_,c=b}return(y+=s)>v?[m,o]:[d,g]}var Yl="line",Vl=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hl={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Wl={Circle:Ul,Default:Fl,Image:zl,LineString:Gl,Polygon:Ul,Text:function(t){function e(e,n,r,i){var o=t.call(this,e,n,r,i)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",Pc.prune(),o}return Vl(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var n=this.textFillState_,r=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(n||r)){var o,a,s=this.coordinates.length,u=t.getType(),c=null,l=2,h=2;if(i.placement===Yl){if(!rr(this.getBufferedMaxExtent(),t.getExtent()))return;var p=void 0;if(c=t.getFlatCoordinates(),h=t.getStride(),u==en)p=[c.length];else if(u==an)p=t.getEnds();else if(u==rn)p=t.getEnds().slice(0,1);else if(u==sn){var f=t.getEndss();for(p=[],o=0,a=f.length;o<a;++o)p.push(f[o][0])}this.beginGeometry(t,e);for(var d=i.textAlign,g=0,v=void 0,y=0,m=p.length;y<m;++y){if(null==d){var _=ql(i.maxAngle,c,g,p[y],h);g=_[0],v=_[1]}else v=p[y];for(o=g;o<v;o+=h)this.coordinates.push(c[o],c[o+1]);l=this.coordinates.length,g=p[y];var b=this.declutterGroups_?0===y?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(s,l,b),s=l}this.endGeometry(e)}else{var x=null;switch(i.overflow||(x=[]),u){case tn:case on:l=(c=t.getFlatCoordinates()).length;break;case en:c=t.getFlatMidpoint();break;case cn:c=t.getCenter();break;case an:l=(c=t.getFlatMidpoints()).length;break;case rn:c=t.getFlatInteriorPoint(),i.overflow||x.push(c[2]/this.resolution),h=3;break;case sn:var w=t.getFlatInteriorPoints();for(c=[],o=0,a=w.length;o<a;o+=3)i.overflow||x.push(w[o+2]/this.resolution),c.push(w[o],w[o+1]);if(0==(l=c.length))return}l=this.appendFlatCoordinates(c,0,l,h,!1,!1),this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var E=this.pixelRatio;this.instructions.push([Nl.DRAW_IMAGE,s,l,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,i.padding==Mc?Mc:i.padding.map((function(t){return t*E})),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]),this.hitDetectionInstructions.push([Nl.DRAW_IMAGE,s,l,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,i.padding,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,x]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||Ic,textBaseline:e.textBaseline||Oc,scale:e.scale});var o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))},e.prototype.drawChars_=function(t,e,n){var r=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,c=Hl[i.textBaseline],l=this.textOffsetY_*u,h=this.text_,p=i.scale,f=r?r.lineWidth*p/2:0;this.instructions.push([Nl.DRAW_CHARS,t,e,c,n,i.overflow,s,i.maxAngle,u,l,o,f*u,h,a,1]),this.hitDetectionInstructions.push([Nl.DRAW_CHARS,t,e,c,n,i.overflow,s,i.maxAngle,1,l,o,f,h,a,1/u])},e.prototype.setTextStyle=function(t,e){var n,r,i;if(t){this.declutterGroups_=e;var o=t.getFill();o?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=dc(o.getColor()||wc)):(r=null,this.textFillState_=r);var a=t.getStroke();if(a){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var s=a.getLineDash(),u=a.getLineDashOffset(),c=a.getWidth(),l=a.getMiterLimit();i.lineCap=a.getLineCap()||Ec,i.lineDash=s?s.slice():Sc,i.lineDashOffset=void 0===u?0:u,i.lineJoin=a.getLineJoin()||Cc,i.lineWidth=void 0===c?1:c,i.miterLimit=void 0===l?10:l,i.strokeStyle=dc(a.getColor()||Tc)}else i=null,this.textStrokeState_=i;n=this.textState_;var h=t.getFont()||xc;kc(h);var p=t.getScale();n.overflow=t.getOverflow(),n.font=h,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.textBaseline=t.getTextBaseline()||Oc,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||Mc,n.scale=void 0===p?1:p;var f=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),v=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===v?0:v,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:Object(dn.c)(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+Object(dn.c)(r.fillStyle):""}else this.text_=""},e}(Fl)},Kl=function(){function t(t,e,n,r,i){this.declutter_=i,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(e=[[1/0,1/0,-1/0,-1/0]],this.declutterGroups_=e,e[0].push(1))),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var n=this.buildersByZIndex_[e];for(var r in n){var i=n[r].finish();t[e][r]=i}}return t},t.prototype.getBuilder=function(t,e){var n=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[n];void 0===r&&(r={},this.buildersByZIndex_[n]=r);var i=r[e];void 0===i&&(i=new(0,Wl[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=i);return i},t}();function $l(t,e,n,r){for(var i=t[e],o=t[e+1],a=0,s=e+r;s<n;s+=r){var u=t[s],c=t[s+1];a+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return a}function Zl(t,e,n,r,i,o,a,s,u,c,l){for(var h,p,f=[],d=t[e]>t[n-r],g=i.length,v=t[e],y=t[e+1],m=t[e+=r],_=t[e+1],b=0,x=Math.sqrt(Math.pow(m-v,2)+Math.pow(_-y,2)),w=!1,E=0;E<g;++E){for(var S=i[h=d?g-E-1:E],C=s*u(c,S,l),T=o+C/2;e<n-r&&b+x<T;)v=m,y=_,m=t[e+=r],_=t[e+1],b+=x,x=Math.sqrt(Math.pow(m-v,2)+Math.pow(_-y,2));var I=T-b,O=Math.atan2(_-y,m-v);if(d&&(O+=O>0?-Math.PI:Math.PI),void 0!==p){var M=O-p;if(w=w||0!==M,M+=M>Math.PI?-2*Math.PI:M<-Math.PI?2*Math.PI:0,Math.abs(M)>a)return null}p=O;var P=I/x,L=Qe(v,m,P),R=Qe(y,_,P);f[h]=[L,R,C/2,O,S],o+=C}return w?f:[[f[0][0],f[0][1],f[0][2],f[0][3],i]]}var Jl=n(110),Ql=n.n(Jl),th=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),eh=[1/0,1/0,-1/0,-1/0],nh=[1,0,0,1,0,0],rh=[],ih=[],oh=[],ah=[],sh=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.overlaps=r,o.pixelRatio=n,o.resolution=e,o.alignFill_,o.declutterItems=[],o.instructions=i.instructions,o.coordinates=i.coordinates,o.coordinateCache_={},o.renderedTransform_=[1,0,0,1,0,0],o.hitDetectionInstructions=i.hitDetectionInstructions,o.pixelCoordinates_=null,o.viewRotation_=0,o.fillStates=i.fillStates||{},o.strokeStates=i.strokeStates||{},o.textStates=i.textStates||{},o.widths_={},o}return th(e,t),e.prototype.disposeInternal=function(){Pc.release(this),t.prototype.disposeInternal.call(this)},e.prototype.getTextImage=function(t,e,n,r){var i,o=r+e+t+n+this.pixelRatio;if(!Pc.containsKey(o)){var a=r?this.strokeStates[r]:null,s=n?this.fillStates[n]:null,u=this.textStates[e],c=this.pixelRatio,l=u.scale*c,h=Hl[u.textAlign||Ic],p=r&&a.lineWidth?a.lineWidth:0,f=t.split("\n"),d=f.length,g=[],v=function(t,e,n){for(var r=e.length,i=0,o=0;o<r;++o){var a=zc(t,e[o]);i=Math.max(i,a),n.push(a)}return i}(u.font,f,g),y=jc(u.font),m=y*d,_=v+p,b=Object(gs.a)(Math.ceil((_+2)*l),Math.ceil((m+p)*l));i=b.canvas,Pc.set(o,i),1!=l&&b.scale(l,l),b.font=u.font,r&&(b.strokeStyle=a.strokeStyle,b.lineWidth=p,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,b.setLineDash&&a.lineDash.length&&(b.setLineDash(a.lineDash),b.lineDashOffset=a.lineDashOffset)),n&&(b.fillStyle=s.fillStyle),b.textBaseline="middle",b.textAlign="center";var x=.5-h,w=h*_+x*p,E=void 0;if(r)for(E=0;E<d;++E)b.strokeText(f[E],w+x*g[E],.5*(p+y)+E*y);if(n)for(E=0;E<d;++E)b.fillText(f[E],w+x*g[E],.5*(p+y)+E*y)}return Pc.get(o,this)},e.prototype.replayTextBackground_=function(t,e,n,r,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},e.prototype.replayImage_=function(t,e,n,r,i,o,a,s,u,c,l,h,p,f,d,g,v,y){var m=v||y;e-=i*=p,n-=o*=p;var _=d+c>r.width?r.width-c:d,b=s+l>r.height?r.height-l:s,x=g[3]+_*p+g[1],w=g[0]+b*p+g[2],E=e-g[3],S=n-g[0];(m||0!==h)&&(rh[0]=E,ah[0]=E,rh[1]=S,ih[1]=S,ih[0]=E+x,oh[0]=ih[0],oh[1]=S+w,ah[1]=oh[1]);var C=null;if(0!==h){var T=e+i,I=n+o;C=$i(nh,T,I,1,1,h,-T,-I),Ki(nh,rh),Ki(nh,ih),Ki(nh,oh),Ki(nh,ah),Fn(Math.min(rh[0],ih[0],oh[0],ah[0]),Math.min(rh[1],ih[1],oh[1],ah[1]),Math.max(rh[0],ih[0],oh[0],ah[0]),Math.max(rh[1],ih[1],oh[1],ah[1]),eh)}else Fn(E,S,E+x,S+w,eh);var O=t.canvas,M=y?y[2]*p/2:0,P=eh[0]-M<=O.width&&eh[2]+M>=0&&eh[1]-M<=O.height&&eh[3]+M>=0;if(f&&(e=Math.round(e),n=Math.round(n)),a){if(!P&&1==a[4])return;Bn(a,eh);var L=P?[t,C?C.slice(0):null,u,r,c,l,_,b,e,n,p]:null;L&&(m&&L.push(v,y,rh,ih,oh,ah),a.push(L))}else P&&(m&&this.replayTextBackground_(t,rh,ih,oh,ah,v,y),Uc(t,C,u,r,c,l,_,b,e,n,p))},e.prototype.fill_=function(t){if(this.alignFill_){var e=Ki(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(e[0]%n,e[1]%n),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter=function(t,e,n,r){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(r||(r=new Ql.a(9)),!r.collides(o)){r.insert(o);for(var a=5,s=t.length;a<s;++a){var u=t[a],c=u[0],l=c.globalAlpha;l!==n&&(c.globalAlpha=n),u.length>11&&this.replayTextBackground_(u[0],u[13],u[14],u[15],u[16],u[11],u[12]),Uc.apply(void 0,u),l!==n&&(c.globalAlpha=l)}}t.length=5,jn(t)}}return r},e.prototype.drawTextImageWithPointPlacement_=function(t,e,n,r){var i=this.textStates[e],o=this.getTextImage(t,e,r,n),a=this.strokeStates[n],s=this.pixelRatio,u=Hl[i.textAlign||Ic],c=Hl[i.textBaseline||Oc],l=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:u*(o.width/s-2*i.scale)+2*(.5-u)*l,anchorY:c*o.height/s+2*(.5-c)*l}},e.prototype.execute_=function(t,e,n,r,i,o){var a,s,u;this.declutterItems.length=0,this.pixelCoordinates_&&Object(Bi.b)(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=Yi(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),s=this.renderedTransform_,u=e,s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5]);for(var c,l,h,p,f,d,g,v,y,m,_,b,x,w,E,S,C,T=0,I=n.length,O=0,M=0,P=0,L=null,R=null,A=this.coordinateCache_,k=this.viewRotation_,N=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,D={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},F=this.instructions!=n||this.overlaps?0:200;T<I;){var j=n[T];switch(j[0]){case Nl.BEGIN_GEOMETRY:(E=j[1]).getGeometry()?void 0===o||rr(o,j[3])?++T:T=j[2]+1:T=j[2];break;case Nl.BEGIN_PATH:M>F&&(this.fill_(t),M=0),P>F&&(t.stroke(),P=0),M||P||(t.beginPath(),p=NaN,f=NaN),++T;break;case Nl.CIRCLE:var z=a[O=j[1]],B=a[O+1],G=a[O+2]-z,X=a[O+3]-B,U=Math.sqrt(G*G+X*X);t.moveTo(z+U,B),t.arc(z,B,U,0,2*Math.PI,!0),++T;break;case Nl.CLOSE_PATH:t.closePath(),++T;break;case Nl.CUSTOM:O=j[1],c=j[2];var q=j[3],Y=j[4],V=6==j.length?j[5]:void 0;D.geometry=q,D.feature=E,T in A||(A[T]=[]);var H=A[T];V?V(a,O,c,2,H):(H[0]=a[O],H[1]=a[O+1],H.length=2),Y(H,D),++T;break;case Nl.DRAW_IMAGE:O=j[1],c=j[2],m=j[3],l=j[4],h=j[5],y=i?null:j[6];var W=j[7],K=j[8],$=j[9],Z=j[10],J=j[11],Q=j[12],tt=j[13],et=j[14];if(!m&&j.length>=19){_=j[18],b=j[19],x=j[20],w=j[21];var nt=this.drawTextImageWithPointPlacement_(_,b,x,w);m=nt.label,j[3]=m;var rt=j[22];l=(nt.anchorX-rt)*this.pixelRatio,j[4]=l;var it=j[23];h=(nt.anchorY-it)*this.pixelRatio,j[5]=h,W=m.height,j[7]=W,et=m.width,j[14]=et}var ot=void 0;j.length>24&&(ot=j[24]);var at=void 0,st=void 0,ut=void 0;j.length>16?(at=j[15],st=j[16],ut=j[17]):(at=Mc,st=!1,ut=!1),J&&N?Q+=k:J||N||(Q-=k);for(var ct=0,lt=0;O<c;O+=2)if(!(ot&&ot[ct++]<et/this.pixelRatio)){if(y){var ht=Math.floor(lt);y.length<ht+1&&((v=[1/0,1/0,-1/0,-1/0]).push(y[0][4]),y.push(v)),v=y[ht]}this.replayImage_(t,a[O],a[O+1],m,l,h,v,W,K,$,Z,Q,tt,r,et,at,st?L:null,ut?R:null),v&&(lt===Math.floor(lt)&&this.declutterItems.push(this,v,E),lt+=1/v[4])}++T;break;case Nl.DRAW_CHARS:var pt=j[1],ft=j[2],dt=j[3];v=i?null:j[4];var gt=j[5];w=j[6];var vt=j[7],yt=j[8],mt=j[9];x=j[10];var _t=j[11];_=j[12],b=j[13];var bt=j[14],xt=this.textStates[b],wt=xt.font,Et=xt.scale*yt,St=void 0;wt in this.widths_?St=this.widths_[wt]:(St={},this.widths_[wt]=St);var Ct=$l(a,pt,ft,2),Tt=Et*Bc(wt,_,St);if(gt||Tt<=Ct){var It=this.textStates[b].textAlign,Ot=Zl(a,pt,ft,2,_,(Ct-Tt)*Hl[It],vt,Et,Bc,wt,St);if(Ot){var Mt=void 0,Pt=void 0,Lt=void 0,Rt=void 0,At=void 0;if(x)for(Mt=0,Pt=Ot.length;Mt<Pt;++Mt)Lt=(At=Ot[Mt])[4],Rt=this.getTextImage(Lt,b,"",x),l=At[2]+_t,h=dt*Rt.height+2*(.5-dt)*_t-mt,this.replayImage_(t,At[0],At[1],Rt,l,h,v,Rt.height,1,0,0,At[3],bt,!1,Rt.width,Mc,null,null);if(w)for(Mt=0,Pt=Ot.length;Mt<Pt;++Mt)Lt=(At=Ot[Mt])[4],Rt=this.getTextImage(Lt,b,w,""),l=At[2],h=dt*Rt.height-mt,this.replayImage_(t,At[0],At[1],Rt,l,h,v,Rt.height,1,0,0,At[3],bt,!1,Rt.width,Mc,null,null)}}this.declutterItems.push(this,v,E),++T;break;case Nl.END_GEOMETRY:if(void 0!==i){var kt=i(E=j[1]);if(kt)return kt}++T;break;case Nl.FILL:F?M++:this.fill_(t),++T;break;case Nl.MOVE_TO_LINE_TO:for(O=j[1],c=j[2],S=a[O],g=(C=a[O+1])+.5|0,(d=S+.5|0)===p&&g===f||(t.moveTo(S,C),p=d,f=g),O+=2;O<c;O+=2)d=(S=a[O])+.5|0,g=(C=a[O+1])+.5|0,O!=c-2&&d===p&&g===f||(t.lineTo(S,C),p=d,f=g);++T;break;case Nl.SET_FILL_STYLE:L=j,this.alignFill_=j[2],M&&(this.fill_(t),M=0,P&&(t.stroke(),P=0)),t.fillStyle=j[1],++T;break;case Nl.SET_STROKE_STYLE:R=j,P&&(t.stroke(),P=0),this.setStrokeStyle_(t,j),++T;break;case Nl.STROKE:F?P++:t.stroke(),++T;break;default:++T}}M&&this.fill_(t),P&&t.stroke()},e.prototype.execute=function(t,e,n,r){this.viewRotation_=n,this.execute_(t,e,this.instructions,r,void 0,void 0)},e.prototype.executeHitDetection=function(t,e,n,r,i){return this.viewRotation_=n,this.execute_(t,e,this.hitDetectionInstructions,!0,r,i)},e}(Cu.a),uh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ch=[tl,$c,Qc,Jc,el,Zc],lh=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.maxExtent_=e,s.overlaps_=i,s.pixelRatio_=r,s.resolution_=n,s.renderBuffer_=a,s.executorsByZIndex_={},s.hitDetectionContext_=null,s.hitDetectionTransform_=[1,0,0,1,0,0],s.createExecutors_(o),s}return uh(e,t),e.prototype.clip=function(t,e){var n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()},e.prototype.createExecutors_=function(t){for(var e in t){var n=this.executorsByZIndex_[e];void 0===n&&(n={},this.executorsByZIndex_[e]=n);var r=t[e];for(var i in r){var o=r[i];n[i]=new sh(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},e.prototype.disposeInternal=function(){for(var e in this.executorsByZIndex_){var n=this.executorsByZIndex_[e];for(var r in n)n[r].disposeInternal()}if(this.hitDetectionContext_){var i=this.hitDetectionContext_.canvas;i.width=0,i.height=0}t.prototype.disposeInternal.call(this)},e.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[e],r=0,i=t.length;r<i;++r)if(t[r]in n)return!0;return!1},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i,o){var a=2*(r=Math.round(r))+1,s=$i(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-n,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Object(gs.a)(a,a));var u,c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):c.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(Gn(u=[1/0,1/0,-1/0,-1/0],t),Mn(u,e*(this.renderBuffer_+r),u));var l,h=function(t){if(void 0!==hh[t])return hh[t];for(var e=2*t+1,n=new Array(e),r=0;r<e;r++)n[r]=new Array(e);var i=t,o=0,a=0;for(;i>=o;)ph(n,t+i,t+o),ph(n,t+o,t+i),ph(n,t-o,t+i),ph(n,t-i,t+o),ph(n,t-i,t-o),ph(n,t-o,t-i),ph(n,t+o,t-i),ph(n,t+i,t-o),2*((a+=1+2*++o)-i)+1>0&&(a+=1-2*(i-=1));return hh[t]=n,n}(r);function p(t){for(var e=c.getImageData(0,0,a,a).data,n=0;n<a;n++)for(var r=0;r<a;r++)if(h[n][r]&&e[4*(r*a+n)+3]>0){var s=void 0;return(!o||l!=Jc&&l!=el||-1!==o.indexOf(t))&&(s=i(t)),s||void c.clearRect(0,0,a,a)}}var f,d,g,v,y,m=Object.keys(this.executorsByZIndex_).map(Number);for(m.sort(Bi.f),f=m.length-1;f>=0;--f){var _=m[f].toString();for(g=this.executorsByZIndex_[_],d=ch.length-1;d>=0;--d)if(void 0!==(v=g[l=ch[d]])&&(y=v.executeHitDetection(c,s,n,p,u)))return y}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var n=e[0],r=e[1],i=e[2],o=e[3],a=[n,r,n,o,i,o,i,r];return Yi(a,0,8,2,t,a),a},e.prototype.isEmpty=function(){return Object(Sr.d)(this.executorsByZIndex_)},e.prototype.execute=function(t,e,n,r,i,o){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(Bi.f),this.maxExtent_&&(t.save(),this.clip(t,e));var s,u,c,l,h,p,f=i||ch;for(s=0,u=a.length;s<u;++s){var d=a[s].toString();for(h=this.executorsByZIndex_[d],c=0,l=f.length;c<l;++c){var g=f[c];if(void 0!==(p=h[g]))if(!o||g!=Jc&&g!=el)p.execute(t,e,n,r);else{var v=o[d];v?v.push(p,e.slice(0)):o[d]=[p,e.slice(0)]}}}this.maxExtent_&&t.restore()},e}(Cu.a),hh={0:[[!0]]};function ph(t,e,n){var r,i=Math.floor(t.length/2);if(e>=i)for(r=i;r<e;r++)t[r][n]=!0;else if(e<i)for(r=e+1;r<i;r++)t[r][n]=!0}var fh=lh,dh=n(109),gh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vh=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n}return gh(e,t),e.prototype.getFeatures=function(t){return Object(dn.b)()},e.prototype.prepareFrame=function(t){return Object(dn.b)()},e.prototype.renderFrame=function(t,e){return Object(dn.b)()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(r,i){var o=this.loadedTileCallback.bind(this,n,r);return t.forEachLoadedTile(e,r,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){},e.prototype.getDataAtPixel=function(t,e,n){return Object(dn.b)()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===Wc&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=Wc&&e!=Kc&&t.addEventListener(Di.a.CHANGE,this.boundHandleImageChange_),e==Vc&&(t.load(),e=t.getState()),e==Wc},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==Os&&t.changed()},e}(dh.a),yh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),mh=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform_=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n.createTransformStringCanvas_=Object(gs.a)(1,1).canvas,n}return yh(e,t),e.prototype.useContainer=function(t,e,n){var r,i,o=this.getLayer().getClassName();t&&""===t.style.opacity&&t.className===o&&((s=t.firstElementChild)instanceof HTMLCanvasElement&&(i=s.getContext("2d")));if(i&&i.canvas.style.transform===e?(this.container=t,this.context=i,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(r=document.createElement("div")).className=o;var a=r.style;a.position="absolute",a.width="100%",a.height="100%";var s=(i=Object(gs.a)()).canvas;r.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=i}},e.prototype.clip=function(t,e,n){var r=e.pixelRatio,i=e.size[0]*r/2,o=e.size[1]*r/2,a=e.viewState.rotation,s=tr(n),u=er(n),c=Wn(n),l=Hn(n);Ki(e.coordinateToPixelTransform,s),Ki(e.coordinateToPixelTransform,u),Ki(e.coordinateToPixelTransform,c),Ki(e.coordinateToPixelTransform,l),t.save(),Gc(t,-a,i,o),t.beginPath(),t.moveTo(s[0]*r,s[1]*r),t.lineTo(u[0]*r,u[1]*r),t.lineTo(c[0]*r,c[1]*r),t.lineTo(l[0]*r,l[1]*r),t.clip(),Gc(t,a,i,o)},e.prototype.clipUnrotated=function(t,e,n){var r=tr(n),i=er(n),o=Wn(n),a=Hn(n);Ki(e.coordinateToPixelTransform,r),Ki(e.coordinateToPixelTransform,i),Ki(e.coordinateToPixelTransform,o),Ki(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;Ki(s,r),Ki(s,i),Ki(s,o),Ki(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var r=this.getLayer();if(r.hasListener(t)){var i=new rc(t,this.inversePixelTransform,n,e);r.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(Pa,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(La,t,e)},e.prototype.getRenderTransform=function(t,e,n,r,i,o,a){var s=i/2,u=o/2,c=r/e,l=-c,h=-t[0]+a,p=-t[1];return $i(this.tempTransform_,s,u,c,l,-n,h,p)},e.prototype.getDataAtPixel=function(t,e,n){var r,i=Ki(this.inversePixelTransform,t.slice()),o=this.context;try{r=o.getImageData(Math.round(i[0]),Math.round(i[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:r}return 0===r[3]?null:r},e.prototype.createTransformString=function(t){return this.createTransformStringCanvas_.style.transform=Ji(t),this.createTransformStringCanvas_.style.transform},e}(vh),_h="fraction",bh="pixels",xh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wh=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=r,o.resolution=n,o.state=i,o}return xh(e,t),e.prototype.changed=function(){this.dispatchEvent(Di.a.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Object(dn.b)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Object(dn.b)()},e}(kt.a),Eh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Sh(t,e,n){var r=t;if(r.src&&ya){var i=r.decode(),o=!0;return i.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())})),function(){o=!1}}var a=[Object(Ni.b)(r,Di.a.LOAD,e),Object(Ni.b)(r,Di.a.ERROR,n)];return function(){a.forEach(Ni.c)}}!function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,r,Vc)||this;return s.src_=i,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=Vc,s.imageLoadFunction_=a,s}Eh(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=Kc,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Jn(this.extent)/this.image_.height),this.state=Wc,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=Vc&&this.state!=Kc||(this.state=Hc,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Sh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(wh);var Ch=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Th=function(t){function e(e,n,r,i,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==i&&(s.image_.crossOrigin=i),s.canvas_=a?document.createElement("canvas"):null,s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=r,s.src_=n,s.tainted_,s}return Ch(e,t),e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===Wc){this.tainted_=!1;var t=Object(gs.a)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Di.a.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=Kc,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=Wc,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],n=this.size_[1],r=Object(gs.a)(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==Vc){this.imageState_=Hc;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Sh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),n=e.data,r=this.color_[0]/255,i=this.color_[1]/255,o=this.color_[2]/255,a=0,s=n.length;a<s;a+=4)n[a]*=r,n[a+1]*=i,n[a+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(kt.a);var Ih="bottom-left",Oh="bottom-right",Mh="top-left",Ph="top-right",Lh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rh=function(t){function e(e){var n=this,r=e||{},i=void 0!==r.opacity?r.opacity:1,o=void 0!==r.rotation?r.rotation:0,a=void 0!==r.scale?r.scale:1,s=void 0!==r.rotateWithView&&r.rotateWithView;(n=t.call(this,{opacity:i,rotation:o,scale:a,rotateWithView:s})||this).anchor_=void 0!==r.anchor?r.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:Mh,n.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:_h,n.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:_h,n.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var u=void 0!==r.img?r.img:null,c=void 0!==r.imgSize?r.imgSize:null,l=r.src;yn(!(void 0!==l&&u),4),yn(!u||u&&c,5),void 0!==l&&0!==l.length||!u||(l=u.src||Object(dn.c)(u)),yn(void 0!==l&&l.length>0,6);var h=void 0!==r.src?Vc:Wc;return n.color_=void 0!==r.color?uc(r.color):null,n.iconImage_=function(t,e,n,r,i,o){var a=fc.get(e,r,o);return a||(a=new Th(t,e,n,r,i,o),fc.set(e,r,o,a)),a}(u,l,c,n.crossOrigin_,h,n.color_),n.offset_=void 0!==r.offset?r.offset:[0,0],n.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:Mh,n.origin_=null,n.size_=void 0!==r.size?r.size:null,n}return Lh(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==_h||this.anchorYUnits_==_h){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==_h&&(t[0]*=e[0]),this.anchorYUnits_==_h&&(t[1]*=e[1])}if(this.anchorOrigin_!=Mh){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Ph&&this.anchorOrigin_!=Oh||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Ih&&this.anchorOrigin_!=Oh||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=Mh){var e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),this.offsetOrigin_!=Ph&&this.offsetOrigin_!=Oh||(t[0]=n[0]-e[0]-t[0]),this.offsetOrigin_!=Ih&&this.offsetOrigin_!=Oh||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Di.a.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Di.a.CHANGE,t)},e}(gl);function Ah(t,e,n){var r=[];if(n){var i=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*n.width),o=n.data[i],a=n.data[i+1],s=n.data[i+2]+256*(a+256*o),u=Math.ceil(16777216/e.length);s%u==0&&r.push(e[s/u])}return r}var kh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nh=function(t){function e(e){var n=t.call(this,e)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.dirty_=!1,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=[1/0,1/0,-1/0,-1/0],n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n}return kh(e,t),e.prototype.useContainer=function(e,n,r){r<1&&(e=null),t.prototype.useContainer.call(this,e,n,r)},e.prototype.renderFrame=function(t,e){var n=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];!function(t,e,n){Wi(t,e,0,0,n,0,0)}(this.pixelTransform,1/n,1/n),Zi(this.inversePixelTransform,this.pixelTransform);var i=Ji(this.pixelTransform);this.useContainer(e,i,r.opacity);var o=this.context,a=o.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&a.width>0&&(a.width=0),this.container;var u=Math.round(t.size[0]*n),c=Math.round(t.size[1]*n);a.width!=u||a.height!=c?(a.width=u,a.height=c,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,u,c),this.preRender(o,t);var l=t.extent,h=t.viewState,p=h.center,f=h.resolution,d=h.projection,g=h.rotation,v=d.getExtent(),y=this.getLayer().getSource(),m=!1;if(r.extent){var _=Zr(r.extent,d);(m=!An(_,t.extent)&&rr(_,t.extent))&&this.clip(o,t,_)}var b=t.viewHints,x=!(b[ts]||b[es]),w=this.getRenderTransform(p,f,g,n,u,c,0),E=this.getLayer().getDeclutter()?{}:null;if(s.execute(o,w,g,x,void 0,E),y.getWrapX()&&d.canWrapX()&&!An(v,l)){for(var S=l[0],C=nr(v),T=0,I=void 0;S<v[0];){I=C*--T;var O=this.getRenderTransform(p,f,g,n,u,c,I);s.execute(o,O,g,x,void 0,E),S+=C}for(T=0,S=l[2];S>v[2];){I=C*++T;var M=this.getRenderTransform(p,f,g,n,u,c,I);s.execute(o,M,g,x,void 0,E),S-=C}}if(E){var P=t.viewHints;!function(t,e,n,r,i,o){for(var a=Object.keys(t).map(Number).sort(Bi.f),s=0,u=a.length;s<u;++s)for(var c=t[a[s].toString()],l=void 0,h=0,p=c.length;h<p;){var f=c[h++];f!==l&&(l=f,o.push({items:f.declutterItems,opacity:r}));var d=c[h++];f.execute(e,d,n,i)}}(E,o,g,1,!(P[ts]||P[es]),t.declutterItems)}m&&o.restore(),this.postRender(o,t);var L=r.opacity,R=this.container;return L!==parseFloat(R.style.opacity)&&(R.style.opacity=1===L?"":L),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,n){this.hitDetectionImageData_||this.animatingOrInteracting_?e(Ah(t,this.renderedFeatures_,this.hitDetectionImageData_)):requestAnimationFrame(function(){var n=[this.context.canvas.width,this.context.canvas.height];Ki(this.pixelTransform,n);var r=this.renderedCenter_,i=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,s=this.renderedExtent_,u=this.getLayer(),c=[],l=n[0]/2,h=n[1]/2;c.push(this.getRenderTransform(r,i,o,.5,l,h,0).slice());var p=u.getSource(),f=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!An(f,s)){for(var d=s[0],g=nr(f),v=0,y=void 0;d<f[0];)y=g*--v,c.push(this.getRenderTransform(r,i,o,.5,l,h,y).slice()),d+=g;for(v=0,d=s[2];d>f[2];)y=g*++v,c.push(this.getRenderTransform(r,i,o,.5,l,h,y).slice()),d-=g}this.hitDetectionImageData_=function(t,e,n,r,i,o,a){var s=t[0]/2,u=t[1]/2,c=Object(gs.a)(s,u);c.imageSmoothingEnabled=!1;for(var l=c.canvas,h=new Yc(c,.5,i,null,a),p=n.length,f=Math.ceil(16777216/p),d={},g=0;g<p;++g){var v=n[g],y=v.getStyleFunction()||r;if(r){var m=y(v,o);Array.isArray(m)||(m=[m]);for(var _="#"+("000000"+(g*f).toString(16)).slice(-6),b=0,x=m.length;b<x;++b){var w=m[b],E=w.clone(),S=E.getFill();S&&S.setColor(_);var C=E.getStroke();C&&C.setColor(_),E.setText(void 0);var T=w.getImage();if(T){var I=T.getImageSize(),O=document.createElement("canvas");O.width=I[0],O.height=I[1];var M=O.getContext("2d",{alpha:!1});M.fillStyle=_;var P=M.canvas;M.fillRect(0,0,P.width,P.height);var L=I?I[0]:P.width,R=I?I[1]:P.height;Object(gs.a)(L,R).drawImage(P,0,0),E.setImage(new Rh({img:P,imgSize:I,anchor:T.getAnchor(),anchorXUnits:bh,anchorYUnits:bh,offset:T.getOrigin(),size:T.getSize(),opacity:T.getOpacity(),scale:T.getScale(),rotation:T.getRotation(),rotateWithView:T.getRotateWithView()}))}var A=Number(E.getZIndex());(F=d[A])||(F={},d[A]=F,F[rn]=[],F[cn]=[],F[en]=[],F[tn]=[]);var k=E.getGeometryFunction()(v);k&&rr(i,k.getExtent())&&F[k.getType().replace("Multi","")].push(k,E)}}}for(var N=Object.keys(d).map(Number).sort(Bi.f),D=(g=0,N.length);g<D;++g){var F=d[N[g]];for(var j in F){var z=F[j];for(b=0,x=z.length;b<x;b+=2){h.setStyle(z[b+1]);for(var B=0,G=e.length;B<G;++B)h.setTransform(e[B]),h.drawGeometry(z[b])}}}return c.getImageData(0,0,l.width,l.height)}(n,c,this.renderedFeatures_,u.getStyleFunction(),s,i,o),e(Ah(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,r,i){if(this.replayGroup_){var o=e.viewState.resolution,a=e.viewState.rotation,s=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,a,n,(function(t){var e=Object(dn.c)(t);if(!(e in u))return u[e]=!0,r(t,s)}),s.getDeclutter()?i:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),n=e.getSource(),r=t.viewHints[ts],i=t.viewHints[es],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&r||!a&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,u=t.viewState,c=u.projection,l=u.resolution,h=t.pixelRatio,p=e.getRevision(),f=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=rl);var g=u.center.slice(),v=Mn(s,f*l),y=u.projection.getExtent();if(n.getWrapX()&&u.projection.canWrapX()&&!An(y,t.extent)){var m=nr(y),_=Math.max(nr(v)/2,m);v[0]=y[0]-_,v[2]=y[2]+_;var b=Math.floor((g[0]-y[0])/m);g[0]-=b*m}if(!this.dirty_&&this.renderedResolution_==l&&this.renderedRevision_==p&&this.renderedRenderOrder_==d&&An(this.renderedExtent_,v))return this.replayGroupChanged=!1,!0;this.replayGroup_&&this.replayGroup_.dispose(),this.replayGroup_=null,this.dirty_=!1;var x,w=new Kl(ol(l,h),v,l,h,e.getDeclutter()),E=Hr();E?(n.loadFeatures($r(v,c),l,E),x=zr(E,c)):n.loadFeatures(v,l,c);var S=il(l,h),C=function(t){var n,r=t.getStyleFunction()||e.getStyleFunction();if(r&&(n=r(t,l)),n){var i=this.renderFeature(t,S,n,w,x);this.dirty_=this.dirty_||i}}.bind(this),T=$r(v,c),I=n.getFeaturesInExtent(T);d&&I.sort(d);for(var O=0,M=I.length;O<M;++O)C(I[O]);this.renderedFeatures_=I;var P=w.finish(),L=new fh(v,l,h,n.getOverlaps(),P,e.getRenderBuffer());return this.renderedResolution_=l,this.renderedRevision_=p,this.renderedRenderOrder_=d,this.renderedExtent_=v,this.renderedRotation_=u.rotation,this.renderedCenter_=g,this.renderedProjection_=c,this.replayGroup_=L,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,n,r,i){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var a=0,s=n.length;a<s;++a)o=al(r,t,n[a],e,this.boundHandleStyleImageChange_,i)||o;else o=al(r,t,n,e,this.boundHandleStyleImageChange_,i);return o},e}(mh),Dh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fh=function(t){function e(e){return t.call(this,e)||this}return Dh(e,t),e.prototype.createRenderer=function(){return new Nh(this)},e}(Ml),jh="preload",zh="useInterimTilesOnError",Bh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gh=function(t){function e(e){var n=this,r=e||{},i=Object(Sr.a)({},r);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).setPreload(void 0!==r.preload?r.preload:0),n.setUseInterimTilesOnError(void 0===r.useInterimTilesOnError||r.useInterimTilesOnError),n}return Bh(e,t),e.prototype.getPreload=function(){return this.get(jh)},e.prototype.setPreload=function(t){this.set(jh,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(zh)},e.prototype.setUseInterimTilesOnError=function(t){this.set(zh,t)},e}(Ys),Xh=function(){function t(t,e,n,r){this.minX=t,this.maxX=e,this.minY=n,this.maxY=r}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function Uh(t,e,n,r,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new Xh(t,e,n,r)}var qh=Xh,Yh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vh=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new qh(0,0,0,0),n}return Yh(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),r=e.getUseInterimTilesOnError();return n==ja||n==Ba||n==za&&!r},e.prototype.getTile=function(t,e,n,r){var i=r.pixelRatio,o=r.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,n,i,o);return s.getState()==za&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(ja)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,n,r){return!!this.isDrawableTile(r)&&t.prototype.loadedTileCallback.call(this,e,n,r)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],r=t.viewState,i=r.projection,o=r.resolution,a=r.center,s=r.rotation,u=t.pixelRatio,c=this.getLayer(),l=c.getSource(),h=l.getRevision(),p=l.getTileGridForProjection(i),f=p.getZForResolution(o,l.zDirection),d=p.getResolution(f),g=t.extent,v=n.extent&&Zr(n.extent,i);v&&(g=Qn(g,Zr(n.extent,i)));var y=l.getTilePixelRatio(u),m=Math.round(t.size[0]*y),_=Math.round(t.size[1]*y);if(s){var b=Math.round(Math.sqrt(m*m+_*_));m=b,_=b}var x=d*m/2/y,w=d*_/2/y,E=[a[0]-x,a[1]-w,a[0]+x,a[1]+w],S=p.getTileRangeForExtentAndZ(g,f),C={};C[f]={};var T=this.createLoadedTileFinder(l,i,C),I=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;for(var M=S.minX;M<=S.maxX;++M)for(var P=S.minY;P<=S.maxY;++P){var L=this.getTile(f,M,P,t);if(this.isDrawableTile(L)){var R=Object(dn.c)(this);if(L.getState()==ja){C[f][L.tileCoord.toString()]=L;var A=L.inTransition(R);this.newTiles_||!A&&-1!==this.renderedTiles.indexOf(L)||(this.newTiles_=!0)}if(1===L.getAlpha(R,t.time))continue}var k=p.getTileCoordChildTileRange(L.tileCoord,O,I),N=!1;k&&(N=T(f+1,k)),N||p.forEachTileCoordParentTileRange(L.tileCoord,T,O,I)}var D=d/o;$i(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/y,1/y,s,-m/2,-_/2);var F=this.createTransformString(this.pixelTransform);this.useContainer(e,F,n.opacity);var j=this.context,z=j.canvas;Zi(this.inversePixelTransform,this.pixelTransform),$i(this.tempTransform_,m/2,_/2,D,D,0,-m/2,-_/2),z.width!=m||z.height!=_?(z.width=m,z.height=_):this.containerReused||j.clearRect(0,0,m,_),v&&this.clipUnrotated(j,t,v),this.preRender(j,t),this.renderedTiles.length=0;var B,G,X,U=Object.keys(C).map(Number);U.sort(Bi.f),1!==n.opacity||this.containerReused&&!l.getOpaque(t.viewState.projection)?(B=[],G=[]):U=U.reverse();for(var q=U.length-1;q>=0;--q){var Y=U[q],V=l.getTilePixelSize(Y,u,i),H=p.getResolution(Y)/d,W=V[0]*H*D,K=V[1]*H*D,$=p.getTileCoordForCoordAndZ(tr(E),Y),Z=p.getTileCoordExtent($),J=Ki(this.tempTransform_,[y*(Z[0]-E[0])/d,y*(E[3]-Z[3])/d]),Q=y*l.getGutterForProjection(i),tt=C[Y];for(var et in tt){var nt=(L=tt[et]).tileCoord,rt=J[0]-($[1]-nt[1])*W,it=Math.round(rt+W),ot=J[1]-($[2]-nt[2])*K,at=Math.round(ot+K),st=it-(M=Math.round(rt)),ut=at-(P=Math.round(ot)),ct=f===Y;if(!(A=ct&&1!==L.getAlpha(Object(dn.c)(this),t.time)))if(B){j.save(),X=[M,P,M+st,P,M+st,P+ut,M,P+ut];for(var lt=0,ht=B.length;lt<ht;++lt)if(f!==Y&&Y<G[lt]){var pt=B[lt];j.beginPath(),j.moveTo(X[0],X[1]),j.lineTo(X[2],X[3]),j.lineTo(X[4],X[5]),j.lineTo(X[6],X[7]),j.moveTo(pt[6],pt[7]),j.lineTo(pt[4],pt[5]),j.lineTo(pt[2],pt[3]),j.lineTo(pt[0],pt[1]),j.clip()}B.push(X),G.push(Y)}else j.clearRect(M,P,st,ut);this.drawTileImage(L,t,M,P,st,ut,Q,ct,n.opacity),B&&!A&&j.restore(),this.renderedTiles.push(L),this.updateUsedTiles(t.usedTiles,l,L)}}return this.renderedRevision=h,this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!zn(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=u,this.renderedProjection=i,this.manageTilePyramid(t,l,p,u,i,g,f,c.getPreload()),this.updateCacheSize_(t,l),this.scheduleExpireCache(t,l),this.postRender(j,t),n.extent&&j.restore(),F!==z.style.transform&&(z.style.transform=F),this.container},e.prototype.drawTileImage=function(t,e,n,r,i,o,a,s,u){var c=this.getTileImage(t);if(c){var l=Object(dn.c)(this),h=s?t.getAlpha(l,e.time):1,p=u*h,f=p!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,r,i,o),f&&this.context.restore(),1!==h?e.animate=!0:s&&t.endTransition(l)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var r=Object(dn.c)(t);r in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var r=Object(dn.c)(e);r in t||(t[r]={}),t[r][n.getKey()]=!0},e.prototype.updateCacheSize_=function(t,e){var n=Object(dn.c)(e),r=0;n in t.usedTiles&&(r+=Object.keys(t.usedTiles[n]).length),n in t.wantedTiles&&(r+=Object.keys(t.wantedTiles[n]).length);var i=e.tileCache;i.highWaterMark<r&&(i.highWaterMark=r)},e.prototype.manageTilePyramid=function(t,e,n,r,i,o,a,s,u){var c=Object(dn.c)(e);c in t.wantedTiles||(t.wantedTiles[c]={});var l,h,p,f,d,g,v=t.wantedTiles[c],y=t.tileQueue;for(g=n.getMinZoom();g<=a;++g)for(h=n.getTileRangeForExtentAndZ(o,g,h),p=n.getResolution(g),f=h.minX;f<=h.maxX;++f)for(d=h.minY;d<=h.maxY;++d)a-g<=s?((l=e.getTile(g,f,d,r,i)).getState()==Da&&(v[l.getKey()]=!0,y.isKeyQueued(l.getKey())||y.enqueue([l,c,n.getTileCoordCenter(l.tileCoord),p])),void 0!==u&&u(l)):e.useTile(g,f,d,i)},e}(mh);Vh.prototype.getLayer;var Hh=Vh,Wh=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kh=function(t){function e(e){return t.call(this,e)||this}return Wh(e,t),e.prototype.createRenderer=function(){return new Hh(this)},e}(Gh),$h="arraybuffer",Zh="json",Jh="text",Qh="xml",tp=!1;function ep(t,e){return function(t,e,n,r){return function(i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(i,o,a):t,!0),e.getType()==$h&&(s.responseType="arraybuffer"),s.withCredentials=tp,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var o=e.getType(),u=void 0;o==Zh||o==Jh?u=s.responseText:o==Qh?(u=s.responseXML)||(u=(new DOMParser).parseFromString(s.responseText,"application/xml")):o==$h&&(u=s.response),u?n.call(this,e.readFeatures(u,{extent:i,featureProjection:a}),e.readProjection(u)):r.call(this)}else r.call(this)}.bind(this),s.onerror=function(){r.call(this)}.bind(this),s.send()}}(t,e,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),Qi.c)}function np(t,e){return[[-1/0,-1/0,1/0,1/0]]}var rp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function ip(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var op=function(t){function e(e){var n=t.call(this)||this;return n.projection_=Lr(e.projection),n.attributions_=ip(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:Os,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n}return rp(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return Object(dn.b)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=ip(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Fi.a),ap="addfeature",sp="changefeature",up="clear",cp="removefeature",lp=function(){function t(t){this.rbush_=new Ql.a(t),this.items_={}}return t.prototype.insert=function(t,e){var n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[Object(dn.c)(e)]=n},t.prototype.load=function(t,e){for(var n=new Array(e.length),r=0,i=e.length;r<i;r++){var o=t[r],a=e[r],s={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=s,this.items_[Object(dn.c)(a)]=s}this.rbush_.load(n)},t.prototype.remove=function(t){var e=Object(dn.c)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)},t.prototype.update=function(t,e){var n=this.items_[Object(dn.c)(e)];zn([n.minX,n.minY,n.maxX,n.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var n,r=0,i=t.length;r<i;r++)if(n=e(t[r]))return n;return n},t.prototype.isEmpty=function(){return Object(Sr.d)(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Fn(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),hp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pp=function(t){function e(e,n){var r=t.call(this,e)||this;return r.feature=n,r}return hp(e,t),e}(Ne.a),fp=function(t){function e(e){var n=this,r=e||{};(n=t.call(this,{attributions:r.attributions,projection:void 0,state:Os,wrapX:void 0===r.wrapX||r.wrapX})||this).loader_=Qi.c,n.format_=r.format,n.overlaps_=null==r.overlaps||r.overlaps,n.url_=r.url,void 0!==r.loader?n.loader_=r.loader:void 0!==n.url_&&(yn(n.format_,7),n.loader_=ep(n.url_,n.format_)),n.strategy_=void 0!==r.strategy?r.strategy:np;var i,o,a=void 0===r.useSpatialIndex||r.useSpatialIndex;return n.featuresRtree_=a?new lp:null,n.loadedExtentsRtree_=new lp,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null,Array.isArray(r.features)?o=r.features:r.features&&(o=(i=r.features).getArray()),a||void 0!==i||(i=new ca(o)),void 0!==o&&n.addFeaturesInternal(o),void 0!==i&&n.bindFeaturesCollection_(i),n}return hp(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(dn.c)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var n=t.getGeometry();if(n){var r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new pp(ap,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(Ni.a)(e,Di.a.CHANGE,this.handleFeatureChange_,this),Object(Ni.a)(e,Na.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var n=!0,r=e.getId();return void 0!==r&&(r.toString()in this.idIndex_?n=!1:this.idIndex_[r.toString()]=e),n&&(yn(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),n},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],n=[],r=[],i=0,o=t.length;i<o;i++){var a=t[i],s=Object(dn.c)(a);this.addToIndex_(s,a)&&n.push(a)}i=0;for(var u=n.length;i<u;i++){a=n[i],s=Object(dn.c)(a);this.setupChangeEvents_(s,a);var c=a.getGeometry();if(c){var l=c.getExtent();e.push(l),r.push(a)}else this.nullGeometryFeatures_[s]=a}this.featuresRtree_&&this.featuresRtree_.load(e,r);i=0;for(var h=n.length;i<h;i++)this.dispatchEvent(new pp(ap,n[i]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(ap,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(cp,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(ia,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(oa,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_){this.featureChangeKeys_[e].forEach(Ni.c)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var n in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var r=new pp(up);this.dispatchEvent(r),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){return n.getGeometry().intersectsCoordinate(t)?e(n):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(n){if(n.getGeometry().intersectsExtent(t)){var r=e(n);if(r)return r}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(Sr.d)(this.nullGeometryFeatures_)||Object(Bi.c)(t,Object(Sr.c)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var n=t[0],r=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],u=e||Qi.b;return this.featuresRtree_.forEachInExtent(s,(function(t){if(u(t)){var e=t.getGeometry(),c=a;if((a=e.closestPointXY(n,r,o,a))<c){i=t;var l=Math.sqrt(a);s[0]=n-l,s[1]=r-l,s[2]=n+l,s[3]=r+l}}})),i},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,n=Object(dn.c)(e),r=e.getGeometry();if(r){var i=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);var o=e.getId();if(void 0!==o){var a=o.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new pp(sp,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(dn.c)(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(Sr.d)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,n){var r=this.loadedExtentsRtree_,i=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var s=i[t];r.forEachInExtent(s,(function(t){return An(t.extent,s)}))||(a.loader_.call(a,s,e,n),r.insert(s,{extent:s.slice()}),a.loading=a.loader_!==Qi.c)},a=this,s=0,u=i.length;s<u;++s)o(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,n=this.loadedExtentsRtree_;n.forEachInExtent(t,(function(n){if(zn(n.extent,t))return e=n,!0})),e&&n.remove(e)},e.prototype.removeFeature=function(t){var e=Object(dn.c)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(dn.c)(t);this.featureChangeKeys_[e].forEach(Ni.c),delete this.featureChangeKeys_[e];var n=t.getId();void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new pp(cp,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var n in this.idIndex_)if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){yn(this.format_,7),this.setLoader(ep(t,this.format_))},e}(op),dp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gp=function(t){function e(e,n,r){var i=t.call(this)||this;if(void 0!==r&&void 0===n)i.setFlatCoordinates(r,e);else{var o=n||0;i.setCenterAndRadius(e,o,r)}return i}return dp(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,n,r){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<r){if(0===s)for(var u=0;u<this.stride;++u)n[u]=i[u];else{var c=this.getRadius()/Math.sqrt(s);n[0]=i[0]+c*o,n[1]=i[1]+c*a;for(u=2;u<this.stride;++u)n[u]=i[u]}return n.length=this.stride,s}return r},e.prototype.containsXY=function(t,e){var n=this.flatCoordinates,r=t-n[0],i=e-n[1];return r*r+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,n=e[this.stride]-e[0];return Fn(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return cn},e.prototype.intersectsExtent=function(t){if(rr(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||Yn(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+n;for(var i=1;i<e;++i)r[e+i]=t[i];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,i=fo(r,0,t,this.stride);r[i++]=r[0]+e;for(var o=1,a=this.stride;o<a;++o)r[i++]=r[o];r.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var n=this.getCenter(),r=this.getStride();this.setCenter(Vi(n,0,n.length,r,t,e,n)),this.changed()},e.prototype.translate=function(t,e){var n=this.getCenter(),r=this.getStride();this.setCenter(Hi(n,0,n.length,r,t,e,n)),this.changed()},e}(oo);gp.prototype.transform;var vp=gp;function yp(t,e,n,r,i,o){if(n==e)return null;var a;if(i<t[e+r-1])return o?((a=t.slice(e,e+r))[r-1]=i,a):null;if(t[n-1]<i)return o?((a=t.slice(n-r,n))[r-1]=i,a):null;if(i==t[e+r-1])return t.slice(e,e+r);for(var s=e/r,u=n/r;s<u;){var c=s+u>>1;i<t[(c+1)*r-1]?u=c:s=c+1}var l=t[s*r-1];if(i==l)return t.slice((s-1)*r,(s-1)*r+r);var h=(i-l)/(t[(s+1)*r-1]-l);a=[];for(var p=0;p<r-1;++p)a.push(Qe(t[(s-1)*r+p],t[s*r+p],h));return a.push(i),a}var mp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_p=function(t){function e(e,n){var r=t.call(this)||this;return r.flatMidpoint_=null,r.flatMidpointRevision_=-1,r.maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?r.setCoordinates(e,n):r.setFlatCoordinates(n,e),r}return mp(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(Bi.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,r){return r<Ln(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(co(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ho(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,r))},e.prototype.forEachSegment=function(t){return Ro(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=Ui&&this.layout!=qi)return null;var n=void 0!==e&&e;return yp(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)},e.prototype.getCoordinates=function(){return yo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return function(t,e,n,r,i,o){var a=NaN,s=NaN,u=(n-e)/r;if(1===u)a=t[e],s=t[e+1];else if(2==u)a=(1-i)*t[e]+i*t[e+r],s=(1-i)*t[e+1]+i*t[e+r+1];else if(0!==u){for(var c=t[e],l=t[e+1],h=0,p=[0],f=e+r;f<n;f+=r){var d=t[f],g=t[f+1];h+=Math.sqrt((d-c)*(d-c)+(g-l)*(g-l)),p.push(h),c=d,l=g}var v=i*h,y=Object(Bi.a)(p,v);if(y<0){var m=(v-p[-y-2])/(p[-y-1]-p[-y-2]),_=e+(-y-2)*r;a=Qe(t[_],t[_+r],m),s=Qe(t[_+1],t[_+r+1],m)}else a=t[e+y*r],s=t[e+y*r+1]}return o?(o[0]=a,o[1]=s,o):[a,s]}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return $l(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=bo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Gi)},e.prototype.getType=function(){return en},e.prototype.intersectsExtent=function(t){return Ao(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=go(this.flatCoordinates,0,t,this.stride),this.changed()},e}(oo),bp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xp=function(t){function e(e,n,r){var i=t.call(this)||this,o=r||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.hifi=!0,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i}return bp(e,t),e.prototype.changed=function(){this.dispatchEvent(Di.a.CHANGE)},e.prototype.disposeInternal=function(){this.setState(Ga)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==ja)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==ja){t.interimTile=null;break}t.getState()==Fa?e=t:t.getState()==Da?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==za&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){Object(dn.b)()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var r=e-n+1e3/60;return r>=this.transition_?1:ss(r/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(kt.a),wp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Ep(){var t=Object(gs.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Sp=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n,a)||this;return s.crossOrigin_=i,s.src_=r,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}return wp(e,t),e.prototype.disposeInternal=function(){this.state==Fa&&(this.unlistenImage_(),this.image_=Ep()),this.interimTile&&this.interimTile.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=za,this.unlistenImage_(),this.image_=Ep(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=ja:this.state=Ba,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==za&&(this.state=Da,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Da&&(this.state=Fa,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Sh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(xp);function Cp(t,e,n,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function Tp(t,e,n){return t+"/"+e+"/"+n}function Ip(t){return Tp(t[0],t[1],t[2])}var Op=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mp=function(t){function e(e){return t.call(this,e)||this}return Op(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split("/").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Ip(e.tileCoord)),e.dispose())}.bind(this))}},e}(mc);function Pp(t,e,n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);return[Math.round(n+i/a),Math.round(r+o/a)]}function Lp(t,e,n,r,i,o,a,s,u,c,l){var h=Object(gs.a)(Math.round(n*t),Math.round(n*e));if(0===u.length)return h.canvas;h.scale(n,n);var p=[1/0,1/0,-1/0,-1/0];u.forEach((function(t,e,n){Bn(p,t.extent)}));var f=nr(p),d=Jn(p),g=Object(gs.a)(Math.round(n*f/r),Math.round(n*d/r)),v=n/r;u.forEach((function(t,e,n){var r=t.extent[0]-p[0],i=-(t.extent[3]-p[3]),o=nr(t.extent),a=Jn(t.extent);g.drawImage(t.image,c,c,t.image.width-2*c,t.image.height-2*c,r*v,i*v,o*v,a*v)}));var y=tr(a);return s.getTriangles().forEach((function(t,e,i){var a=t.source,s=t.target,u=a[0][0],c=a[0][1],l=a[1][0],f=a[1][1],d=a[2][0],v=a[2][1],m=(s[0][0]-y[0])/o,_=-(s[0][1]-y[1])/o,b=(s[1][0]-y[0])/o,x=-(s[1][1]-y[1])/o,w=(s[2][0]-y[0])/o,E=-(s[2][1]-y[1])/o,S=u,C=c;u=0,c=0;var T=function(t){for(var e=t.length,n=0;n<e;n++){for(var r=n,i=Math.abs(t[n][n]),o=n+1;o<e;o++){var a=Math.abs(t[o][n]);a>i&&(i=a,r=o)}if(0===i)return null;var s=t[r];t[r]=t[n],t[n]=s;for(var u=n+1;u<e;u++)for(var c=-t[u][n]/t[n][n],l=n;l<e+1;l++)n==l?t[u][l]=0:t[u][l]+=c*t[n][l]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*h[p]}return h}([[l-=S,f-=C,0,0,b-m],[d-=S,v-=C,0,0,w-m],[0,0,l,f,x-_],[0,0,d,v,E-_]]);if(T){h.save(),h.beginPath();var I=(m+b+w)/3,O=(_+x+E)/3,M=Pp(I,O,m,_),P=Pp(I,O,b,x),L=Pp(I,O,w,E);h.moveTo(P[0],P[1]),h.lineTo(M[0],M[1]),h.lineTo(L[0],L[1]),h.clip(),h.transform(T[0],T[2],T[1],T[3],m,_),h.translate(p[0]-S,p[3]-C),h.scale(r/n,-r/n),h.drawImage(g.canvas,0,0),h.restore()}})),l&&(h.save(),h.strokeStyle="black",h.lineWidth=1,s.getTriangles().forEach((function(t,e,n){var r=t.target,i=(r[0][0]-y[0])/o,a=-(r[0][1]-y[1])/o,s=(r[1][0]-y[0])/o,u=-(r[1][1]-y[1])/o,c=(r[2][0]-y[0])/o,l=-(r[2][1]-y[1])/o;h.beginPath(),h.moveTo(s,u),h.lineTo(i,a),h.lineTo(c,l),h.closePath(),h.stroke()})),h.restore()),h.canvas}var Rp=function(){function t(t,e,n,r,i){this.sourceProj_=t,this.targetProj_=e;var o={},a=Br(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=a(t)),o[e]},this.maxSourceExtent_=r,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&nr(r)==nr(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?nr(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?nr(this.targetProj_.getExtent()):null;var s=tr(n),u=er(n),c=Wn(n),l=Hn(n),h=this.transformInv_(s),p=this.transformInv_(u),f=this.transformInv_(c),d=this.transformInv_(l);if(this.addQuad_(s,u,c,l,h,p,f,d,10),this.wrapsXInSource_){var g=1/0;this.triangles_.forEach((function(t,e,n){g=Math.min(g,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-g>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-g>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-g>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-g>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}}return t.prototype.addTriangle_=function(t,e,n,r,i,o){this.triangles_.push({source:[r,i,o],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,r,i,o,a,s,u){var c=On([i,o,a,s]),l=this.sourceWorldWidth_?nr(c)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&l>.5&&l<1,f=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)f=nr(On([t,e,n,r]))/this.targetWorldWidth_>.25||f;!p&&this.sourceProj_.isGlobal()&&l&&(f=l>.25||f)}if(f||!this.maxSourceExtent_||rr(c,this.maxSourceExtent_)){if(!(f||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(u>0))return;f=!0}if(u>0){if(!f){var d=[(t[0]+n[0])/2,(t[1]+n[1])/2],g=this.transformInv_(d),v=void 0;if(p)v=(Je(i[0],h)+Je(a[0],h))/2-Je(g[0],h);else v=(i[0]+a[0])/2-g[0];var y=(i[1]+a[1])/2-g[1];f=v*v+y*y>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var m=[(e[0]+n[0])/2,(e[1]+n[1])/2],_=this.transformInv_(m),b=[(r[0]+t[0])/2,(r[1]+t[1])/2],x=this.transformInv_(b);this.addQuad_(t,e,m,b,i,o,_,x,u-1),this.addQuad_(b,m,n,r,x,_,a,s,u-1)}else{var w=[(t[0]+e[0])/2,(t[1]+e[1])/2],E=this.transformInv_(w),S=[(n[0]+r[0])/2,(n[1]+r[1])/2],C=this.transformInv_(S);this.addQuad_(t,w,S,r,i,E,C,s,u-1),this.addQuad_(w,e,n,S,E,o,a,C,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,r,i,a,s),this.addTriangle_(t,e,n,i,o,a)}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,r){var i=e.source;Gn(t,i[0]),Gn(t,i[1]),Gn(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),Ap=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kp=function(t){function e(e,n,r,i,o,a,s,u,c,l,h){var p=t.call(this,o,Da)||this;p.renderEdges_=void 0!==h&&h,p.pixelRatio_=s,p.gutter_=u,p.canvas_=null,p.sourceTileGrid_=n,p.targetTileGrid_=i,p.wrappedTileCoord_=a||o,p.sourceTiles_=[],p.sourcesListenerKeys_=null,p.sourceZ_=0;var f=i.getTileCoordExtent(p.wrappedTileCoord_),d=p.targetTileGrid_.getExtent(),g=p.sourceTileGrid_.getExtent(),v=d?Qn(f,d):f;if(0===Vn(v))return p.state=Ba,p;var y=e.getExtent();y&&(g=g?Qn(g,y):y);var m=i.getResolution(p.wrappedTileCoord_[0]),_=function(t,e,n,r){var i=Gr(n,e,t),o=Rr(e,r,n),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var u=t.getExtent();if(!u||Rn(u,i)){var c=Rr(t,o,i)/o;isFinite(c)&&c>0&&(o/=c)}return o}(e,r,Kn(v),m);if(!isFinite(_)||_<=0)return p.state=Ba,p;var b=void 0!==l?l:.5;if(p.triangulation_=new Rp(e,r,v,g,_*b),0===p.triangulation_.getTriangles().length)return p.state=Ba,p;p.sourceZ_=n.getZForResolution(_);var x=p.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(x[1]=Ve(x[1],g[1],g[3]),x[3]=Ve(x[3],g[1],g[3])):x=Qn(x,g)),Vn(x)){for(var w=n.getTileRangeForExtentAndZ(x,p.sourceZ_),E=w.minX;E<=w.maxX;E++)for(var S=w.minY;S<=w.maxY;S++){var C=c(p.sourceZ_,E,S,s);C&&p.sourceTiles_.push(C)}0===p.sourceTiles_.length&&(p.state=Ba)}else p.state=Ba;return p}return Ap(e,t),e.prototype.disposeInternal=function(){this.state==Fa&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,r){e&&e.getState()==ja&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=za;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),r="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Lp(r,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=ja}this.changed()},e.prototype.load=function(){if(this.state==Da){this.state=Fa,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,r){var i=e.getState();if(i==Da||i==Fa){t++;var o=Object(Ni.a)(e,Di.a.CHANGE,(function(n){var r=e.getState();r!=ja&&r!=za&&r!=Ba||(Object(Ni.c)(o),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,n){t.getState()==Da&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Ni.c),this.sourcesListenerKeys_=null},e}(xp);function Np(t,e){var n=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,u){return a?t.replace(n,a[0].toString()).replace(r,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],n=e.getFullTileRange(t);return yn(n,55),(n.getHeight()-a[2]-1).toString()})):void 0}}function Dp(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=Np(t[i],e);return function(t){if(1===t.length)return t[0];return function(e,n,r){if(e){var i=Je(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[i](e,n,r)}}}(r)}function Fp(t,e,n){}function jp(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r=n[1].charCodeAt(0),i=n[2].charCodeAt(0),o=void 0;for(o=r;o<=i;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}var zp=[0,0,0],Bp=function(){function t(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,yn(Object(Bi.d)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(var n=0,r=this.resolutions_.length-1;n<r;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,yn(this.origins_.length==this.resolutions_.length,20));var i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=tr(i)),yn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,yn(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:Va,yn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new qh(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):i&&this.calculateTileRanges_(i)}return t.prototype.forEachTileCoord=function(t,e,n){for(var r=this.getTileRangeForExtentAndZ(t,e),i=r.minX,o=r.maxX;i<=o;++i)for(var a=r.minY,s=r.maxY;a<=s;++a)n([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,r){var i,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(i=t[1],o=t[2]):a=this.getTileCoordExtent(t,r);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?Uh(i=Math.floor(i/2),i,o=Math.floor(o/2),o,n):this.getTileRangeForExtentAndZ(a,s,n)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],i=2*t[2];return Uh(r,r+1,i,i+1,e)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,n){var r=this.getOrigin(t),i=this.getResolution(t),o=Rs(this.getTileSize(t),this.tmpSize_),a=r[0]+e.minX*o[0]*i,s=r[0]+(e.maxX+1)*o[0]*i;return Fn(a,r[1]+e.minY*o[1]*i,s,r[1]+(e.maxY+1)*o[1]*i,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var r=zp;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,r);var i=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,r),Uh(i,r[1],o,r[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Rs(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*n,e[1]-(t[2]+.5)*r[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),r=this.getResolution(t[0]),i=Rs(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*i[0]*r,a=n[1]-(t[2]+1)*i[1]*r;return Fn(o,a,o+i[0]*r,a+i[1]*r,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,r,i){var o=this.getZForResolution(n),a=n/this.getResolution(o),s=this.getOrigin(o),u=Rs(this.getTileSize(o),this.tmpSize_),c=r?.5:0,l=r?.5:0,h=Math.floor((t-s[0])/n+c),p=Math.floor((s[1]-e)/n+l),f=a*h/u[0],d=a*p/u[1];return r?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),Cp(o,f,d,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,r,i){var o=this.getOrigin(n),a=this.getResolution(n),s=Rs(this.getTileSize(n),this.tmpSize_),u=r?.5:0,c=r?.5:0,l=Math.floor((t-o[0])/a+u),h=Math.floor((o[1]-e)/a+c),p=l/s[0],f=h/s[1];return r?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),Cp(n,p,f,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return Ve(Object(Bi.e)(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),r=this.minZoom;r<e;++r)n[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=n},t}();function Gp(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,r){return function(t,e,n,r){var i=void 0!==r?r:bn,o=Xp(t,e,n);return new Bp({extent:t,origin:$n(t,i),resolutions:o,tileSize:n})}(Up(t),e,n,r)}(t),t.setDefaultTileGrid(e)),e}function Xp(t,e,n){for(var r=void 0!==e?e:42,i=Jn(t),o=nr(t),a=Rs(void 0!==n?n:Va),s=Math.max(o/a[0],i/a[1]),u=r+1,c=new Array(u),l=0;l<u;++l)c[l]=s/Math.pow(2,l);return c}function Up(t){var e=(t=Lr(t)).getExtent();if(!e){var n=180*sr[ur.DEGREES]/t.getMetersPerUnit();e=Fn(-n,-n,n,n)}return e}var qp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yp=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var r=e.cacheSize;if(void 0===r){var i=[256,256],o=e.tileGrid;o&&Rs(o.getTileSize(o.getMinZoom()),i);var a="undefined"!=typeof screen,s=a?screen.availWidth||screen.width:1920,u=a?screen.availHeight||screen.height:1080;r=4*Math.ceil(s/i[0])*Math.ceil(u/i[1])}return n.tileCache=new Mp(r),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return qp(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,r){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,s,u=!0,c=n.minX;c<=n.maxX;++c)for(var l=n.minY;l<=n.maxY;++l)a=Tp(e,c,l),s=!1,i.containsKey(a)&&(s=(o=i.get(a)).getState()===ja)&&(s=!1!==r(o)),s||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,r,i){return Object(dn.b)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Gp(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!jr(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var r,i,o,a=this.getTileGridForProjection(n),s=this.getTilePixelRatio(e),u=Rs(a.getTileSize(t),this.tmpSize);return 1==s?u:(r=u,i=s,void 0===(o=this.tmpSize)&&(o=[0,0]),o[0]=r[0]*i+.5|0,o[1]=r[1]*i+.5|0,o)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var r=e[0],i=t.getTileCoordCenter(e),o=Up(n);if(Rn(o,i))return e;var a=nr(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,r)}(r,t,n)),function(t,e){var n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,n):e.getFullTileRange(n))||o.containsXY(r,i)}(t,r)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,n,r){},e}(op),Vp=function(t){function e(e,n){var r=t.call(this,e)||this;return r.tile=n,r}return qp(e,t),e}(Ne.a),Hp=Yp,Wp="tileloadstart",Kp="tileloadend",$p="tileloaderror",Zp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jp=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.generateTileUrlFunction_=!e.tileUrlFunction,n.tileLoadFunction=e.tileLoadFunction,n.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(n):Fp,n.urls=null,e.urls?n.setUrls(e.urls):e.url&&n.setUrl(e.url),n.tileLoadingKeys_={},n}return Zp(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,r=Object(dn.c)(n),i=n.getState();i==Fa?(this.tileLoadingKeys_[r]=!0,e=Wp):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],e=i==za?$p:i==ja||i==Ga?Kp:void 0),null!=e&&this.dispatchEvent(new Vp(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=jp(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Dp(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,n){var r=Tp(t,e,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(Hp),Qp=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function tf(t,e){t.getImage().src=e}var ef=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:tf,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:Sp,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return Qp(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==n?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!jr(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!jr(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!jr(e,t)){var n=Object(dn.c)(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Gp(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||jr(e,t))return this.tileCache;var n=Object(dn.c)(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Mp(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,r,i,o){var a=[t,e,n],s=this.getTileCoordForTileUrlFunction(a,i),u=s?this.tileUrlFunction(s,r,i):void 0,c=new this.tileClass(a,void 0!==u?Da:Ba,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(Di.a.CHANGE,this.handleTileChange.bind(this)),c},e.prototype.getTile=function(t,e,n,r,i){var o=this.getProjection();if(o&&i&&!jr(o,i)){var a=this.getTileCacheForProjection(i),s=[t,e,n],u=void 0,c=Ip(s);a.containsKey(c)&&(u=a.get(c));var l=this.getKey();if(u&&u.key==l)return u;var h=this.getTileGridForProjection(o),p=this.getTileGridForProjection(i),f=this.getTileCoordForTileUrlFunction(s,i),d=new kp(o,h,i,p,s,f,this.getTilePixelRatio(r),this.getGutter(),function(t,e,n,r){return this.getTileInternal(t,e,n,r,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=l,u?(d.interimTile=u,d.refreshInterimChain(),a.replace(c,d)):a.set(c,d),d}return this.getTileInternal(t,e,n,r,o||i)},e.prototype.getTileInternal=function(t,e,n,r,i){var o=null,a=Tp(t,e,n),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var u=o;o=this.createTile_(t,e,n,r,i,s),u.getState()==Da?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,n,r,i,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=Lr(t);if(n){var r=Object(dn.c)(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=e)}},e}(Jp),nf=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rf=function(t){function e(e){var n=e||{},r=void 0!==n.projection?n.projection:"EPSG:3857",i=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||Lr("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Xp(n,e.maxZoom,e.tileSize)};return new Bp(r)}({extent:Up(r),maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:n.opaque,projection:r,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return nf(e,t),e}(ef),of=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),af=function(t){function e(e){var n,r=e||{};n=void 0!==r.attributions?r.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'];var i=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",o=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:n,cacheSize:r.cacheSize,crossOrigin:i,opaque:void 0===r.opaque||r.opaque,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,url:o,wrapX:r.wrapX,attributionsCollapsible:!1})||this}return of(e,t),e}(rf);function sf(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return uf(e),e;throw new Error("No valid coordinates")}function uf(t){if(t.length>1&&Object(gi.c)(t[0])&&Object(gi.c)(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return uf(t[0]);throw new Error("coordinates must only contain numbers")}function cf(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function lf(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+c*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!=c>t[1]&&t[0]<(u-a)*(t[1]-s)/(c-s)+a&&(r=!r)}return r}var hf=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=function(t){if(!t)throw new Error("obj is required");var e=sf(t);if(e.length>1&&Object(gi.c)(e[0])&&Object(gi.c)(e[1]))return e;throw new Error("Coordinate is not a valid Point")}(t),o=sf(e),a=e.geometry?e.geometry.type:e.type,s=e.bbox;if(s&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(i,s))return!1;"Polygon"===a&&(o=[o]);for(var u=0,c=!1;u<o.length&&!c;u++)if(lf(i,o[u][0],r)){for(var l=!1,h=1;h<o[u].length&&!l;)lf(i,o[u][h],!r)&&(l=!0),h++;l||(c=!0)}return c};function pf(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}var ff=n(74);var df=function(t){if(!t)throw new Error("geojson is required");var e=[];return Object(ff.flattenEach)(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=pf(r);break;case"LineString":n=[pf(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i,o,a,s,u,c,l=Object(fi.lineString)([t,r],e);return l.bbox=(o=r,a=(i=t)[0],s=i[1],u=o[0],c=o[1],[a<u?a:u,s<c?s:c,a>u?a:u,s>c?s:c]),n.push(l),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),Object(fi.featureCollection)(e)},gf=n(178),vf=n.n(gf);function yf(t,e){var n=pf(t),r=pf(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],u=r[0][0],c=r[0][1],l=r[1][0],h=r[1][1],p=(h-c)*(a-i)-(l-u)*(s-o),f=(l-u)*(o-c)-(h-c)*(i-u),d=(a-i)*(o-c)-(s-o)*(i-u);if(0===p)return null;var g=f/p,v=d/p;if(g>=0&&g<=1&&v>=0&&v<=1){var y=i+g*(a-i),m=o+g*(s-o);return Object(fi.point)([y,m])}return null}var mf=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=Object(fi.feature)(t)),"LineString"===e.type&&(e=Object(fi.feature)(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=yf(t,e);return i&&r.push(i),Object(fi.featureCollection)(r)}var o=vf()();return o.load(df(e)),Object(ff.featureEach)(df(t),(function(t){Object(ff.featureEach)(o.search(t),(function(e){var i=yf(t,e);if(i){var o=pf(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),Object(fi.featureCollection)(r)};function _f(t){return(_f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bf(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function xf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ef(t,e){return(Ef=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=If(t);if(e){var i=If(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cf(this,n)}}function Cf(t,e){return!e||"object"!==_f(e)&&"function"!=typeof e?Tf(t):e}function Tf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function If(t){return(If=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Of=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ef(t,e)}(s,t);var e,n,r,i,o,a=Sf(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return xf(this,s),t=a.call(this,((e=ki(e)).imageExtension||(e.imageExtension="jpg"),!e.mapID||e.url||e.urls||(e.url=e.tms?"tiles/".concat(e.mapID,"/{z}/{x}/{-y}.").concat(e.imageExtension):"tiles/".concat(e.mapID,"/{z}/{x}/{y}.").concat(e.imageExtension)),e=e)),e.mapID&&(t.mapID=e.mapID),Mi(Tf(t),e),Pi(Tf(t)),t}return e=s,n=[{key:"xy2MercAsync",value:function(t){return new Promise((function(e,n){e(t)}))}},{key:"merc2XyAsync",value:function(t){return new Promise((function(e,n){e(t)}))}},{key:"insideCheckXy",value:function(t){if(!this.envelope)return!0;var e=Object(fi.point)(t);return hf(e,this.envelope)}},{key:"insideCheckHistMapCoords",value:function(t){return this.insideCheckXy(t)}},{key:"modulateXyInside",value:function(t){if(!this.centroid)return t;var e=Object(fi.lineString)([t,this.centroid]),n=mf(this.envelope,e);return n.features.length>0&&n.features[0].geometry?n.features[0].geometry.coordinates:t}},{key:"modulateHistMapCoordsInside",value:function(t){return this.modulateXyInside(t)}}],r=[{key:"createAsync",value:(i=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new s(e));case 1:case"end":return t.stop()}}),t)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){bf(o,n,r,a,s,"next",t)}function s(t){bf(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}],n&&wf(e.prototype,n),r&&wf(e,r),s}(Ti(af));function Mf(t){return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pf(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Lf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Af(t,e){return(Af=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function kf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Df(t);if(e){var i=Df(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Nf(this,n)}}function Nf(t,e){return!e||"object"!==Mf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Df(t){return(Df=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ff=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Af(t,e)}(s,t);var e,n,r,i,o,a=kf(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Lf(this,s),(t=a.call(this,e)).style="",t.accessToken="",t.style=e.style,t.mapboxMap=e.mapboxMap,t}return e=s,n=null,r=[{key:"createAsync",value:(i=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new s(e));case 1:case"end":return t.stop()}}),t)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Pf(o,n,r,a,s,"next",t)}function s(t){Pf(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}],n&&Rf(e.prototype,n),r&&Rf(e,r),s}(Of);function jf(t,e){return t+(Math.random()-.5)*e}function zf(t,e){if(t instanceof Array)return t.map((function(t){return zf(t,e)}));var n=Math.pow(10,e);return Math.round(t*n)/n}function Bf(t){return t*Math.PI/180}function Gf(t){return(Gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xf(t,e){return(Xf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Uf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yf(t);if(e){var i=Yf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qf(this,n)}}function qf(t,e){return!e||"object"!==Gf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yf(t){return(Yf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xf(t,e)}(n,t);var e=Uf(n);function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);return e.call(this,{render:function(t){var e=this.getSource(),n=e.mapboxMap;n.setStyle(e.style);var r=n.getCanvas(),i=t.viewState,o=this.getVisible();r.style.display=o?"block":"none";var a=this.getOpacity();r.style.opacity=a;var s=-180*i.rotation/Math.PI,u=Fr(i.center),c=i.zoom-1,l=n.getBearing(),h=n.getCenter().toArray(),p=n.getZoom();return s==l&&u[0]==h[0]&&u[1]==h[1]&&c==p||(s!=l&&n.rotateTo(s,{animate:!1}),u[0]==h[0]&&u[1]==h[1]&&c==p||n.jumpTo({center:u,zoom:c,animate:!1}),n._frame&&(n._frame.cancel(),n._frame=null),n._render()),r},source:t.source})}return n}(Ys),Hf="assets/images/9ac6d81f417d6a5626b7c8d5a087c32b.png";function Wf(t){return(Wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $f(t,e){return($f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qf(t);if(e){var i=Qf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jf(this,n)}}function Jf(t,e){return!e||"object"!==Wf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qf(t){return(Qf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var td=new Tl({image:new Rh({anchor:[.5,.5],anchorXUnits:_h,anchorYUnits:_h,src:"assets/images/6e1f2f2f6fed3c5cddeb925e7ae75aba.png"})}),ed=new Tl({image:new Rh({anchor:[.5,.5],anchorXUnits:_h,anchorYUnits:_h,src:"assets/images/6c5dba7f7d76e74c3a8c7c5b1c3fc544.png"})}),nd=new Tl({image:new Rh({anchor:[.5,.5],anchorXUnits:_h,anchorYUnits:_h,src:"assets/images/0beac2cb41dfab43ddfd9df80b32b85d.png"})}),rd=new Tl({fill:new bl({color:[128,128,256,.2]}),stroke:new xl({color:[128,128,256,1],width:3})}),id=new Tl({image:new Rh({anchor:[.5,1],anchorXUnits:_h,anchorYUnits:_h,src:Hf})}),od=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$f(t,e)}(o,t);var e,n,r,i=Zf(o);function o(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),t=ki(t||{});var n=new Fh({source:new fp({wrapX:!1})});n.set("name","gps");var r=new Fh({source:new fp({wrapX:!1})});r.set("name","marker");var a=new Fh({source:new fp({wrapX:!1})});a.set("name","feature");var s=new Fh({source:new fp({wrapX:!1})});s.set("name","envelope");var u=o.spawnLayer(null,t.source,t.target),c=new Ls;c.set("name","overlay");var l={controls:t.controls?t.controls:[],layers:[u,c,s,a,n,r],target:t.div,view:new ds({center:t.defaultCenter||[0,0],zoom:t.defaultZoom||2,rotation:t.defaultRotation||0,multiWorld:!0})};t.interactions&&(l.interactions=t.interactions),(e=i.call(this,l))._overlay_group=c,e.fakeGps=t.fakeGps,e.fakeRadius=t.fakeRadius,e.homePosition=t.homePosition;var h=e.getView();e.__AvoidFirstMoveStart=!0;var p=function t(){e.__AvoidFirstMoveStart||e.dispatchEvent("movestart"),e.__AvoidFirstMoveStart=!1,h.un("propertychange",t)};return h.on("propertychange",p),e.on("moveend",(function(){h.on("propertychange",p)})),e}return e=o,r=[{key:"spawnLayer",value:function(t,e,n){return e instanceof Ff||!(t instanceof Kh)?(t=e instanceof Ff?new Vf({style:e.style,accessToken:e.accessToken,container:n,source:e}):new Kh({source:e})).set("name","base"):t.setSource(e),t}}],(n=[{key:"getLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"base",e=function e(n){var r=n.getArray().map((function(n){return n.get("name")==t?n:n.getLayers?e(n.getLayers()):void 0})).filter((function(t){return t}));if(0!=r.length)return r[0]};return e(this.getLayers())}},{key:"getSource",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"base",e=this.getLayer(t);if(e)return e.getSource()}},{key:"setFeature",value:function(t,e,n){var r=this.getSource(n),i=new zi(t);return e&&i.setStyle(e),r.addFeature(i),i}},{key:"removeFeature",value:function(t,e){this.getSource(e).removeFeature(t)}},{key:"resetFeature",value:function(t){this.getSource(t).clear()}},{key:"setGPSPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n="sub"==e?nd:"hide"==e?ed:td;"sub"!=e&&this.resetFeature("gps"),t&&(this.setFeature({geometry:new Io(t.xy)},n,"gps"),e||this.setFeature({geometry:new vp(t.xy,t.rad)},rd,"gps"))}},{key:"setMarker",value:function(t,e,n,r){return r||(r="marker"),e.geometry=new Io(t),n?"string"==typeof n?n=new Tl({image:new Rh({anchor:[.5,1],anchorXUnits:_h,anchorYUnits:_h,src:n})}):n instanceof Tl||(n=new Tl({image:new Rh(n)})):n=id,this.setFeature(e,n,r)}},{key:"resetMarker",value:function(t){t||(t="marker"),this.resetFeature(t)}},{key:"setLine",value:function(t,e,n){return this.setVector(t,"Line",e?{stroke:e}:null,n)}},{key:"setVector",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Line",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;r||(r="feature");var i={};null!=n.stroke&&(i.stroke=new xl(n.stroke)),null!=n.fill&&(i.fill=new bl(n.fill));var o=new Tl(i),a="Line"===e?new _p(t):new Go(t);return this.setFeature({geometry:a,name:e},o,r)}},{key:"resetLine",value:function(t){this.resetVector(t)}},{key:"resetVector",value:function(t){t||(t="feature"),this.resetFeature(t)}},{key:"setEnvelope",value:function(t,e,n){return n||(n="envelope"),this.setLine(t,e,n)}},{key:"removeEnvelope",value:function(t,e){e||(e="envelope"),this.removeFeature(t,e)}},{key:"resetEnvelope",value:function(t){t||(t="envelope"),this.resetFeature(t)}},{key:"setFillEnvelope",value:function(t,e,n,r){r||(r="envelope");var i=null;if(null!=e||null!=n){var o={};null!=e&&(o.stroke=new xl(e)),null!=n&&(o.fill=new bl(n)),i=new Tl(o)}return this.setFeature({geometry:new Go([t])},i,r)}},{key:"exchangeSource",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this.getLayers(),n=e.item(0),r=o.spawnLayer(n,t,this.getTarget());r!=n&&e.setAt(0,r),t&&(t._map=this)}},{key:"setLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this.getLayer("overlay").getLayers();if(e.clear(),t){var n=new Kh({source:t});e.push(n)}}},{key:"setTransparency",value:function(t){var e=(100-t)/100;this.getSource()instanceof Of?(this.getLayers().item(0).setOpacity(1),this.getLayers().item(1).setOpacity(e)):this.getLayers().item(0).setOpacity(e)}},{key:"setGPSMarker",value:function(t,e){this.getLayers().item(0).getSource().setGPSMarker(t,e)}},{key:"handleGPS",value:function(t,e){var n=this;if(t)if(this.dispatchEvent("gps_request"),this._first_gps_request=!0,this.geolocation)this.geolocation.setTracking(!0);else{var r=this.geolocation=new ea({tracking:!0});r.on("change",(function(t){var e,i,o=n.getLayer("overlay").getLayers().item(0),a=o?o.getSource():n.getLayers().item(0).getSource(),s=r.getPosition(),u=r.getAccuracy();n.fakeGps&&(e=n.homePosition,i=s,6378.14*Math.acos(Math.cos(Bf(e[1]))*Math.cos(Bf(i[1]))*Math.cos(Bf(i[0])-Bf(e[0]))+Math.sin(Bf(e[1]))*Math.sin(Bf(i[1])))>n.fakeGps)&&(s=[jf(n.homePosition[0],.001),jf(n.homePosition[1],.001)],u=jf(15,10));var c={lnglat:s,acc:u};a.setGPSMarkerAsync(c,!n._first_gps_request).then((function(t){t||(c={error:"gps_out"}),n._first_gps_request=!1,n.dispatchEvent(new ra("gps_result",n,c))}))})),r.on("error",(function(t){var e=n.getLayers().item(0).getSource(),r=null;if(n.fakeGps){var i=[jf(n.homePosition[0],.001),jf(n.homePosition[1],.001)],o=jf(15,10);r={lnglat:i,acc:o}}e.setGPSMarkerAsync(r,!n._first_gps_request).then((function(t){t||(r={error:"gps_out"}),n._first_gps_request=!1,n.dispatchEvent(new ra("gps_result",n,r))}))}))}else this.geolocation&&this.geolocation.setTracking(!1),this.getLayers().item(0).getSource().setGPSMarker(),e||this.dispatchEvent(new ra("gps_result",this,{error:"gps_off"}))}}])&&Kf(e.prototype,n),r&&Kf(e,r),o}(dl),ad=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sd=function(t){function e(e){var n=this,r=e||{};return(n=t.call(this,r)||this).condition_=r.condition?r.condition:du,n.lastAngle_=void 0,n.lastMagnitude_=void 0,n.lastScaleDelta_=0,n.duration_=void 0!==r.duration?r.duration:400,n}return ad(e,t),e.prototype.handleDragEvent=function(t){if(vu(t)){var e=t.map,n=e.getSize(),r=t.pixel,i=r[0]-n[0]/2,o=n[1]/2-r[1],a=Math.atan2(o,i),s=Math.sqrt(i*i+o*o),u=e.getView();if(void 0!==this.lastAngle_){var c=this.lastAngle_-a;u.adjustRotationInternal(c)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&u.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){if(!vu(t))return!0;var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!vu(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},e}(_u);n(232);function ud(t){return(ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ld(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hd(t,e){return(hd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function pd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gd(t);if(e){var i=gd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fd(this,n)}}function fd(t,e){return!e||"object"!==ud(e)&&"function"!=typeof e?dd(t):e}function dd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gd(t){return(gd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}for(var vd=0;vd<9;vd++){!function(t,e){var n=new cr({code:t,extent:[0,0,e,e],units:"m"});Pr(n),Dr("EPSG:3857",n,(function(t){return[(t[0]+Jr)*e/(2*Jr),(-t[1]+Jr)*e/(2*Jr)]}),(function(t){return[t[0]*(2*Jr)/e-Jr,-1*(t[1]*(2*Jr)/e-Jr)]}))}("ZOOM:".concat(vd),256*Math.pow(2,vd))}var yd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hd(t,e)}(o,t);var e,n,r,i=pd(o);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return cd(this,o),t=i.call(this,e=function(){(e=ki(e)).wrapX=!1,e.imageExtension||(e.imageExtension="jpg"),!e.mapID||e.url||e.urls||(e.url="tiles/".concat(e.mapID,"/{z}/{x}/{y}.").concat(e.imageExtension));var t=Math.log2(e.width/ei),n=Math.log2(e.height/ei);return e.maxZoom=Math.ceil(Math.max(t,n)),e.tileUrlFunction=e.tileUrlFunction||function(t){var e=t[0],n=t[1],r=t[2];return n*ei*Math.pow(2,this.maxZoom-e)>=this.width||r*ei*Math.pow(2,this.maxZoom-e)>=this.height||n<0||r<0?ti:this._tileUrlFunction(t)},e}()),e.mapID&&(t.mapID=e.mapID),e.urls?t._tileUrlFunction=Dp(e.urls):e.url&&(t._tileUrlFunction=Dp(jp(e.url))),t.width=e.width,t.height=e.height,t.maxZoom=e.maxZoom,t._maxxy=Math.pow(2,t.maxZoom)*ei,Mi(dd(t),e),Pi(dd(t)),t}return e=o,(n=[{key:"histMapCoords2Xy",value:function(t){return[(t[0]+Jr)*this._maxxy/(2*Jr),(-t[1]+Jr)*this._maxxy/(2*Jr)]}},{key:"xy2HistMapCoords",value:function(t){return[t[0]*(2*Jr)/this._maxxy-Jr,-1*(t[1]*(2*Jr)/this._maxxy-Jr)]}},{key:"insideCheckXy",value:function(t){return!(t[0]<0||t[0]>this.width||t[1]<0||t[1]>this.height)}},{key:"insideCheckHistMapCoords",value:function(t){return this.insideCheckXy(this.histMapCoords2Xy(t))}},{key:"modulateXyInside",value:function(t){var e=t[0]/(this.width/2)-1,n=t[1]/(this.height/2)-1,r=Math.max(Math.abs(e),Math.abs(n));return[(e/r+1)*this.width/2,(n/r+1)*this.height/2]}},{key:"modulateHistMapCoordsInside",value:function(t){var e=this.histMapCoords2Xy(t),n=this.modulateXyInside(e);return this.xy2HistMapCoords(n)}}])&&ld(e.prototype,n),r&&ld(e,r),o}(Ti(rf));function md(t){return(md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _d(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function bd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wd(t,e){return(wd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ed(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Cd(t);if(e){var i=Cd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Sd(this,n)}}function Sd(t,e){return!e||"object"!==md(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Cd(t){return(Cd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Td=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wd(t,e)}(s,t);var e,n,r,i,o,a=Ed(s);function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return bd(this,s),a.call(this,Object.assign(t,{opaque:!1}))}return e=s,n=null,r=[{key:"createAsync",value:(i=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new s(e));case 1:case"end":return t.stop()}}),t)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){_d(o,n,r,a,s,"next",t)}function s(t){_d(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}],n&&xd(e.prototype,n),r&&xd(e,r),s}(Of);n(164),n(165);function Id(t){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Od(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Md(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Od(o,r,i,a,s,"next",t)}function s(t){Od(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Pd(t,e){return(Pd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ld(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kd(t);if(e){var i=kd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rd(this,n)}}function Rd(t,e){return!e||"object"!==Id(e)&&"function"!=typeof e?Ad(t):e}function Ad(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kd(t){return(kd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fd(t,e,n){return e&&Dd(t.prototype,e),n&&Dd(t,n),t}var jd,zd,Bd="https://weiwudi.example.com/api/";!function(){if("function"==typeof window.CustomEvent)return!1;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}();var Gd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pd(t,e)}(p,t);var e,n,r,i,o,a,s,u,c,l,h=Ld(p);function p(t,e){var n;if(Nd(this,p),n=h.call(this),!t)throw"MapID is necessary.";return n.mapID=t,e&&Object.assign(Ad(n),e),n.url="".concat(Bd,"cache/").concat(t,"/{z}/{x}/{y}"),n.listener=function(e){e.data.mapID===t&&n.dispatchEvent(new CustomEvent(e.data.type,{detail:e.data}))},navigator.serviceWorker.addEventListener("message",n.listener),n}return Fd(p,null,[{key:"registerSW",value:(o=Md(regeneratorRuntime.mark((function t(e,n){var r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("serviceWorker"in navigator)){t.next=19;break}return t.prev=1,t.next=4,navigator.serviceWorker.register(e,n);case 4:return r=t.sent,i=r.installing,o=r.waiting,i&&("activated"!==i.state||o||window.location.reload(),i.addEventListener("statechange",(function(t){"activated"!==i.state||o||window.location.reload()}))),r.onupdatefound=function(){r.update()},t.next=11,p.swCheck();case 11:return t.abrupt("return",r);case 14:throw t.prev=14,t.t0=t.catch(1),"Error: Service worker registration failed with ".concat(t.t0);case 17:t.next=20;break;case 19:throw"Error: Service worker is not supported";case 20:case"end":return t.stop()}}),t,null,[[1,14]])}))),function(t,e){return o.apply(this,arguments)})},{key:"swCheck",value:(i=Md(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===zd){t.next=2;break}return t.abrupt("return",zd);case 2:return void 0===jd&&(jd=new Promise(function(){var t=Md(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(Bd,"ping"));case 3:zd=!!(zd=t.sent),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),zd=!1;case 10:e(zd);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}())),t.abrupt("return",jd);case 4:case"end":return t.stop()}}),t)}))),function(){return i.apply(this,arguments)})},{key:"registerMap",value:(r=Md(regeneratorRuntime.mark((function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.swCheck();case 2:if(t.sent){t.next=5;break}throw"Weiwudi service worker is not implemented.";case 5:return t.prev=5,(i=["type","url","width","height","tileSize","minZoom","maxZoom","maxLng","maxLat","minLng","minLat"].reduce((function(t,e){return void 0!==n[e]&&(n[e]instanceof Array?n[e].map((function(n){t.append(e,n)})):t.append(e,n[e])),t}),new URLSearchParams)).append("mapID",e),(o=new URL("".concat(Bd,"add"))).search=i,t.next=12,fetch(o.href);case 12:return a=t.sent,t.next=15,a.text();case 15:r=t.sent,t.next=21;break;case 18:throw t.prev=18,t.t0=t.catch(5),t.t0;case 21:if(!r.match(/^Error: /)){t.next=23;break}throw r;case 23:return t.abrupt("return",new p(e,JSON.parse(r)));case 24:case"end":return t.stop()}}),t,null,[[5,18]])}))),function(t,e){return r.apply(this,arguments)})},{key:"retrieveMap",value:(n=Md(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.swCheck();case 2:if(t.sent){t.next=5;break}throw"Weiwudi service worker is not implemented.";case 5:return t.prev=5,t.next=8,fetch("".concat(Bd,"info?mapID=").concat(e));case 8:return r=t.sent,t.next=11,r.text();case 11:n=t.sent,t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(5),t.t0;case 17:if(!n.match(/^Error: /)){t.next=19;break}throw n;case 19:return console.log(n),t.abrupt("return",new p(e,JSON.parse(n)));case 21:case"end":return t.stop()}}),t,null,[[5,14]])}))),function(t){return n.apply(this,arguments)})},{key:"removeMap",value:(e=Md(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.swCheck();case 2:if(t.sent){t.next=5;break}throw"Weiwudi service worker is not implemented.";case 5:return t.prev=5,t.next=8,fetch("".concat(Bd,"delete?mapID=").concat(e));case 8:return r=t.sent,t.next=11,r.text();case 11:n=t.sent,t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(5),t.t0;case 17:if(!n.match(/^Error: /)){t.next=19;break}throw n;case 19:case"end":return t.stop()}}),t,null,[[5,14]])}))),function(t){return e.apply(this,arguments)})}]),Fd(p,[{key:"release",value:function(){navigator.serviceWorker.removeEventListener("message",this.listener),delete this.mapID}},{key:"checkAspect",value:function(){if(!this.mapID)throw"This instance is already released."}},{key:"stats",value:(l=Md(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.checkAspect(),t.prev=1,t.next=4,fetch("".concat(Bd,"stats?mapID=").concat(this.mapID));case 4:return n=t.sent,t.next=7,n.text();case 7:e=t.sent,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(1),t.t0;case 13:if("string"!=typeof e||!e.match(/^Error: /)){t.next=15;break}throw e;case 15:return t.abrupt("return",JSON.parse(e));case 16:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(){return l.apply(this,arguments)})},{key:"clean",value:(c=Md(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.checkAspect(),t.prev=1,t.next=4,fetch("".concat(Bd,"clean?mapID=").concat(this.mapID));case 4:return n=t.sent,t.next=7,n.text();case 7:e=t.sent,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(1),t.t0;case 13:if(!e.match(/^Error: /)){t.next=15;break}throw e;case 15:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(){return c.apply(this,arguments)})},{key:"fetchAll",value:(u=Md(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.checkAspect(),t.prev=1,t.next=4,fetch("".concat(Bd,"fetchAll?mapID=").concat(this.mapID));case 4:return n=t.sent,t.next=7,n.text();case 7:e=t.sent,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(1),t.t0;case 13:if(!e.match(/^Error: /)){t.next=15;break}throw e;case 15:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(){return u.apply(this,arguments)})},{key:"remove",value:(s=Md(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.checkAspect(),t.next=3,p.removeMap(this.mapID);case 3:this.release();case 4:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"cancel",value:(a=Md(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.checkAspect(),t.prev=1,t.next=4,fetch("".concat(Bd,"cancel?mapID=").concat(this.mapID));case 4:return n=t.sent,t.next=7,n.text();case 7:e=t.sent,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(1),t.t0;case 13:if(!e.match(/^Error: /)){t.next=15;break}throw e;case 15:case"end":return t.stop()}}),t,this,[[1,10]])}))),function(){return a.apply(this,arguments)})}]),p}(function(){function t(){Nd(this,t),this.listeners={}}return Fd(t,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],r=0,i=n.length;r<i;r++)if(n[r]===e)return void n.splice(r,1)}},{key:"dispatchEvent",value:function(t){if(!(t.type in this.listeners))return!0;for(var e=this.listeners[t.type].slice(),n=0,r=e.length;n<r;n++)e[n].call(this,t);return!t.defaultPrevented}}]),t}());function Xd(t,e,n){var r="string"==typeof t?t:t.getCode(),i="string"==typeof e?e:e.getCode(),o=Br(t,e);if(o==Mr&&r!=i){var a=Br(t,"EPSG:3857"),s=Br("EPSG:3857",e);if(a==Mr&&"EPSG:3857"!=r)throw"Transform of Source projection is not defined.";if(s==Mr&&"EPSG:3857"!=i)throw"Transform of Distination projection is not defined.";Dr(t,e,o=function(n){return Gr(Gr(n,t,"EPSG:3857"),"EPSG:3857",e)},(function(n){return Gr(Gr(n,e,"EPSG:3857"),"EPSG:3857",t)}))}if(n)return o(n)}n(233);var Ud=n(179),qd=n.n(Ud);var Yd=function(t,e){if(e=e||{},!Object(gi.d)(e))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(Object(di.a)(t,(function(t){r.push([t[0],t[1]])})),!r.length)return null;var i=qd()(r,n);return i.length>3?Object(gi.g)([i]):null},Vd=n(41);var Hd=6378137;function Wd(t){var e,n=0;switch(t.type){case"Polygon":return Kd(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=Kd(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=Wd(t.geometries[e]);return n}}function Kd(t){var e=0;if(t&&t.length>0){e+=Math.abs($d(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs($d(t[n]))}return e}function $d(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(Zd(t[o][0])-Zd(e[0]))*Math.sin(Zd(n[1]));s=s*Hd*Hd/2}return s}function Zd(t){return t*Math.PI/180}var Jd=function(t){return Object(di.d)(t,(function(t,e){return t+Wd(e)}),0)};function Qd(t){switch(t.type){case"Polygon":return Jd(t)>1?t:null;case"MultiPolygon":var e=[];if(Object(di.c)(t,(function(t){Jd(t)>1&&e.push(t.geometry.coordinates)})),e.length)return{type:"MultiPolygon",coordinates:e}}}var tg=function(t,e){var n=cf(t),r=cf(e),i=t.properties||{};if(n=Qd(n),r=Qd(r),!n)return null;if(!r)return Object(gi.a)(n,i);var o=new Vd.GeoJSONReader,a=o.read(n),s=o.read(r),u=Vd.OverlayOp.difference(a,s);if(u.isEmpty())return null;var c=(new Vd.GeoJSONWriter).write(u);return Object(gi.a)(c,i)};function eg(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function ng(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ag(t[0])||!ag(t[1]))throw new Error("coordinates must contain numbers");return eg({type:"Point",coordinates:t},e,n)}function rg(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return eg({type:"Polygon",coordinates:t},e,n)}function ig(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return eg({type:"LineString",coordinates:t},e,n)}function og(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function ag(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}var sg=function(t,e){if(e=e||{},!Object(gi.d)(e))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return Object(di.a)(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t};function ug(t){var e,n,r,i,o,a=sf(t);if(2===a.length&&(e=a[0],n=a[1],e[0]!==n[0]||e[1]!==n[1]))return a;var s=[],u=a.length-1;s.push(a[0]);for(var c=1;c<u;c++)r=a[c-1],i=a[c],cg(r,o=a[c+1],i)||s.push(i);return s.push(o),s}function cg(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],c=s-o,l=u-a;return 0===(r-o)*l-(i-a)*c&&(Math.abs(c)>=Math.abs(l)?c>0?o<=r&&r<=s:s<=r&&r<=o:l>0?a<=i&&i<=u:u<=i&&i<=a)}var lg=function(t,e){var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=function(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}(t),i=[];switch(r){case"LineString":i=ug(t);break;case"MultiLineString":case"Polygon":sf(t).forEach((function(t){i.push(ug(t))}));break;case"MultiPolygon":sf(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(ug(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var o={};sf(t).forEach((function(t){var e=t.join("-");o.hasOwnProperty(e)||(i.push(t),o[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):Object(gi.a)({type:r,coordinates:i},t.properties,t.bbox,t.id)};var hg=function(t,e){var n=cf(t),r=cf(e);if(lg(sg(r,{precision:4})).coordinates[0].length<4)return null;if(lg(sg(n,{precision:4})).coordinates[0].length<4)return null;var i=new Vd.GeoJSONReader,o=i.read(sg(n)),a=i.read(sg(r)),s=Vd.OverlayOp.intersection(o,a);if(s.isEmpty())return null;var u=(new Vd.GeoJSONWriter).write(s);return Object(gi.a)(u)};function pg(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function fg(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=e-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);fg(t,e,Math.max(n,Math.floor(e-a*u/o+c)),Math.min(r,Math.floor(e+(o-a)*u/o+c)),i)}var l=t[e],h=n,p=r;for(dg(t,n,e),i(t[r],l)>0&&dg(t,n,r);h<p;){for(dg(t,h,p),h++,p--;i(t[h],l)<0;)h++;for(;i(t[p],l)>0;)p--}0===i(t[n],l)?dg(t,n,p):dg(t,++p,r),p<=e&&(n=p+1),e<=p&&(r=p-1)}}function dg(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function gg(t,e){return t<e?-1:t>e?1:0}var vg=function(t,e,n,r,i){fg(t,e,n||0,r||t.length-1,i||gg)};function yg(t,e){if(!(this instanceof yg))return new yg(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function mg(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function _g(t,e){bg(t,0,t.children.length,e,t)}function bg(t,e,n,r,i){i||(i=Og(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],xg(i,t.leaf?r(o):o);return i}function xg(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function wg(t,e){return t.minX-e.minX}function Eg(t,e){return t.minY-e.minY}function Sg(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Cg(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Tg(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Ig(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Og(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Mg(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,vg(t,o,e,n,i),a.push(e,o,o,n))}yg.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!Ig(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],Ig(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):Tg(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!Ig(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],Ig(t,a=e.leaf?n(o):o)){if(e.leaf||Tg(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Og([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=mg(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!Tg(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:wg,compareMinY:Eg,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return _g(i=Og(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Og([])).leaf=!1,i.height=r;var s,u,c,l,h=Math.ceil(o/a),p=h*Math.ceil(Math.sqrt(a));for(Mg(t,e,n,p,this.compareMinX),s=e;s<=n;s+=p)for(Mg(t,s,c=Math.min(s+p-1,n),h,this.compareMinY),u=s;u<=c;u+=h)l=Math.min(u+h-1,c),i.children.push(this._build(t,u,l,r-1));return _g(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,h,p,f;r.push(e),!e.leaf&&r.length-1!==n;){for(l=h=1/0,i=0,o=e.children.length;i<o;i++)u=Sg(a=e.children[i]),p=t,f=a,(c=(Math.max(f.maxX,p.maxX)-Math.min(f.minX,p.minX))*(Math.max(f.maxY,p.maxY)-Math.min(f.minY,p.minY))-u)<h?(h=c,l=u<l?u:l,s=a):c===h&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),xg(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Og(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,_g(n,this.toBBox),_g(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Og([t,e]),this.data.height=t.height+1,this.data.leaf=!1,_g(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,c,l,h,p,f,d,g,v;for(u=c=1/0,r=e;r<=n-e;r++)i=bg(t,0,r,this.toBBox),o=bg(t,r,n,this.toBBox),h=i,p=o,f=void 0,d=void 0,g=void 0,v=void 0,f=Math.max(h.minX,p.minX),d=Math.max(h.minY,p.minY),g=Math.min(h.maxX,p.maxX),v=Math.min(h.maxY,p.maxY),a=Math.max(0,g-f)*Math.max(0,v-d),s=Sg(i)+Sg(o),a<u?(u=a,l=r,c=s<c?s:c):a===u&&s<c&&(c=s,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:wg,i=t.leaf?this.compareMinY:Eg;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=bg(t,0,e,a),u=bg(t,n-e,n,a),c=Cg(s)+Cg(u);for(i=e;i<n-e;i++)o=t.children[i],xg(s,t.leaf?a(o):o),c+=Cg(s);for(i=n-e-1;i>=e;i--)o=t.children[i],xg(u,t.leaf?a(o):o),c+=Cg(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)xg(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():_g(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Pg=yg;function Lg(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],r,n,e]]}}}function Rg(t){var e=[1/0,1/0,-1/0,-1/0];return Object(di.a)(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}var Ag=function(t){var e=Pg(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=Lg(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Rg(t);return Pg.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var n=Lg(t);n.bbox=t,e.push(n)})):Object(di.b)(t,(function(t){t.bbox=t.bbox?t.bbox:Rg(t),e.push(t)})),Pg.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=Lg(e)).bbox=e}return Pg.prototype.remove.call(this,t)},e.clear=function(){return Pg.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Pg.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Pg.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Pg.prototype.all.call(this)}},e.toJSON=function(){return Pg.prototype.toJSON.call(this)},e.fromJSON=function(t){return Pg.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Rg(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e};var kg=function(t){if(!t)throw new Error("geojson is required");var e=[];return Object(di.c)(t,(function(t){!function(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=sf(r);break;case"LineString":n=[sf(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i,o,a,s,u,c,l=Object(gi.e)([t,r],e);return l.bbox=(o=r,a=(i=t)[0],s=i[1],u=o[0],c=o[1],[a<u?a:u,s<c?s:c,a>u?a:u,s>c?s:c]),n.push(l),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),Object(gi.b)(e)};function Ng(t,e){var n=sf(t),r=sf(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],u=r[0][0],c=r[0][1],l=r[1][0],h=r[1][1],p=(h-c)*(a-i)-(l-u)*(s-o),f=(l-u)*(o-c)-(h-c)*(i-u),d=(a-i)*(o-c)-(s-o)*(i-u);if(0===p)return null;var g=f/p,v=d/p;if(g>=0&&g<=1&&v>=0&&v<=1){var y=i+g*(a-i),m=o+g*(s-o);return Object(gi.f)([y,m])}return null}var Dg=function(t,e){var n={},r=[];if("LineString"===t.type&&(t=Object(gi.a)(t)),"LineString"===e.type&&(e=Object(gi.a)(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=Ng(t,e);return i&&r.push(i),Object(gi.b)(r)}var o=Ag();return o.load(kg(e)),Object(di.b)(kg(t),(function(t){Object(di.b)(o.search(t),(function(e){var i=Ng(t,e);if(i){var o=sf(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),Object(gi.b)(r)};var Fg=function(){for(var t=new Vd.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=Vd.UnionOp.union(e,t.read(JSON.stringify(arguments[n].geometry)));var r=new Vd.GeoJSONWriter;return{type:"Feature",geometry:e=r.write(e),properties:arguments[0].properties}};n(241),n(243),n(247),n(248),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272);function jg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bg(t,e,n){return e&&zg(t.prototype,e),n&&zg(t,n),t}var Gg=function(){function t(e){jg(this,t),this._zlimit=0,this.initArcs(e)}return Bg(t,[{key:"initArcs",value:function(t){var e=[],n=[],r=t.map((function(t){for(var r=t?t.length:0,i=0;i<r;i++)e.push(t[i][0]),n.push(t[i][1]);return r}));this.initXYData(r,e,n)}},{key:"initXYData",value:function(t,e,n){var r=t.length;this._xx=new Float64Array(e),this._yy=new Float64Array(n),this._nn=new Uint32Array(t),this._zz=null,this._zlimit=0,this._filteredArcIter=null,this._ii=new Uint32Array(r);for(var i=0,o=0;o<r;o++)this._ii[o]=i,i+=t[o];i==this._xx.length&&this._xx.length==this._yy.length||Xg("ArcCollection#initXYData() Counting error"),this.initBounds(),this._arcIter=new ov(this._xx,this._yy)}},{key:"initBounds",value:function(){var t=this.calcArcBounds_(this._xx,this._yy,this._nn);this._bb=t.bb,this._allBounds=t.bounds}},{key:"calcArcBounds_",value:function(t,e,n){for(var r,i,o,a=n.length,s=new Float64Array(4*a),u=new sv,c=0,l=0;l<a;l++)(r=n[l])>0&&(i=4*l,o=av(t,e,c,r),s[i++]=o[0],s[i++]=o[1],s[i++]=o[2],s[i]=o[3],c+=r,u.mergeBounds(o));return{bb:s,bounds:u}}},{key:"getBounds",value:function(){return this._allBounds.clone()}},{key:"forEachSegment",value:function(t){for(var e=0,n=0,r=this.size();n<r;n++)e+=this.forEachArcSegment(n,t);return e}},{key:"size",value:function(){return this._ii&&this._ii.length||0}},{key:"forEachArcSegment",value:function(t,e){for(var n=t>=0,r=n?t:~t,i=this.getRetainedInterval(),o=this._nn[r],a=n?1:-1,s=n?this._ii[r]:this._ii[r]+o-1,u=s,c=0,l=1;l<o;l++)u+=a,(0===i||this._zz[u]>=i)&&(e(s,u,this._xx,this._yy),s=u,c++);return c}},{key:"getRetainedInterval",value:function(){return this._zlimit}},{key:"getVertexData",value:function(){return{xx:this._xx,yy:this._yy,zz:this._zz,bb:this._bb,nn:this._nn,ii:this._ii}}},{key:"getUint32Array",value:function(t){var e=4*t;return(!this.buf||this.buf.byteLength<e)&&(this.buf=new ArrayBuffer(e)),new Uint32Array(this.buf,0,t)}},{key:"getAvgSegment2",value:function(){var t=0,e=0,n=this.forEachSegment((function(n,r,i,o){t+=Math.abs(i[n]-i[r]),e+=Math.abs(o[n]-o[r])}));return[t/n||0,e/n||0]}},{key:"calcSegmentIntersectionStripeCount",value:function(){var t=this.getBounds().height(),e=this.getAvgSegment2()[1],n=1;return e>0&&t>0&&(n=Math.ceil(t/e/20)),n||1}},{key:"findSegmentIntersections",value:function(){var t,e,n=this.getBounds(),r=n.ymin,i=n.ymax-r,o=this.calcSegmentIntersectionStripeCount(),a=new Uint32Array(o),s=o>1?function(t){return Math.floor((o-1)*(t-r)/i)}:function(){return 0};this.forEachSegment((function(t,e,n,r){for(var i=s(r[t]),o=s(r[e]);a[i]=a[i]+2,i!=o;)i+=o>i?1:-1}));var u=this.getUint32Array(function(t,e){Ug(t)||Xg("utils.sum() expects an array, received:",t);for(var n,r=0,i=0,o=0,a=t.length;o<a;o++)(n=t[o])?r+=n:isNaN(n)&&i++;e&&(e.nan=i);return r}(a)),c=0,l=[];!function(t,e,n){if(!Ug(t))throw new Error("#forEach() takes an array-like argument. ".concat(t));for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r)}(a,(function(t){var e=c;c+=t,l.push(u.subarray(e,c))})),function(t,e){for(var n=0,r=t.length;n<r;n++)t[n]=e}(a,0),this.forEachSegment((function(t,e,n,r){for(var i,o,u=s(r[t]),c=s(r[e]);i=a[u],a[u]=i+2,(o=l[u])[i]=t,o[i+1]=e,u!=c;)u+=c>u?1:-1}));var h,p=this.getVertexData(),f=[];for(t=0;t<o;t++)for(h=qg(l[t],p.xx,p.yy),e=0;e<h.length;e++)f.push(h[e]);return iv(f)}}]),t}();function Xg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.join(" ");throw new Error(r)}function Ug(t){return!!t&&(!!function(t){return Array.isArray(t)}(t)||!function(t){return null!=t&&t.toString===String.prototype.toString}(t)&&(0===t.length||t.length>0))}function qg(t,e,n){var r,i,o,a,s,u,c,l,h,p,f,d,g,v,y,m,_,b=t.length-2,x=[];for(!function(t,e){(function(t,e){for(var n=0,r=e.length;n<r;n+=2)t[e[n]]>t[e[n+1]]&&Qg(e,n,n+1)})(t,e),tv(t,e,0,e.length-2)}(e,t),m=0;m<b;){for(r=t[m],i=t[m+1],s=e[r],u=e[i],h=n[r],p=n[i],_=m;_<b&&!(u<(c=e[o=t[_+=2]]));){if(f=n[o],l=e[a=t[_+1]],d=n[a],h>=f){if(h>d&&p>f&&p>d)continue}else if(h<d&&p<f&&p<d)continue;r!=o&&r!=a&&i!=o&&i!=a&&(g=Yg(s,h,u,p,c,f,l,d))&&(v=[r,i],y=[o,a],x.push(nv(g,v,y,e,n)),4==g.length&&x.push(nv(g.slice(2),v,y,e,n)))}m+=2}return x}function Yg(t,e,n,r,i,o,a,s){var u=null;return function(t,e,n,r,i,o,a,s){return Vg(t,e,n,r,i,o)*Vg(t,e,n,r,a,s)<=0&&Vg(i,o,a,s,t,e)*Vg(i,o,a,s,n,r)<=0}(t,e,n,r,i,o,a,s)&&((u=function(t,e,n,r,i,o,a,s){var u,c=Wg(t,e,n,r,i,o,a,s);c&&(1==(u=function(t,e){for(var n,r=-1,i=1/0,o=0,a=0,s=arguments.length<=2?0:arguments.length-2;a<s;o++,a+=2)(n=$g(t,e,a+2<2||arguments.length<=a+2?void 0:arguments[a+2],a+1+2<2||arguments.length<=a+1+2?void 0:arguments[a+1+2]))<i&&(i=n,r=o);return r}(c[0],c[1],t,e,n,r,i,o,a,s))?c=Wg(n,r,t,e,i,o,a,s):2==u?c=Wg(i,o,a,s,t,e,n,r):3==u&&(c=Wg(a,s,i,o,t,e,n,r)));c&&function(t,e,n,r,i,o,a,s,u){var c=t[0],l=t[1];c=Zg(c,e,r),c=Zg(c,o,s),l=Zg(l,n,i),l=Zg(l,a,u),t[0]=c,t[1]=l}(c,t,e,n,r,i,o,a,s);return c}(t,e,n,r,i,o,a,s))?function(t,e,n,r,i,o,a,s){return t==i&&e==o||t==a&&e==s||n==i&&r==o||n==a&&r==s}(t,e,n,r,i,o,a,s)&&(u=null):u=function(t,e,n,r,i,o,a,s){var u=Math.min(t,n,i,a),c=Math.max(t,n,i,a),l=Math.min(e,r,o,s),h=Math.max(e,r,o,s),p=h-l>c-u,f=[];(p?Jg(e,l,h):Jg(t,u,c))&&f.push(t,e);(p?Jg(r,l,h):Jg(n,u,c))&&f.push(n,r);(p?Jg(o,l,h):Jg(i,u,c))&&f.push(i,o);(p?Jg(s,l,h):Jg(a,u,c))&&f.push(a,s);(2!=f.length&&4!=f.length||4==f.length&&f[0]==f[2]&&f[1]==f[3])&&(f=null);return f}(t,e,n,r,i,o,a,s)),u}function Vg(t,e,n,r,i,o){return Hg(t-i,e-o,n-i,r-o)}function Hg(t,e,n,r){return t*r-e*n}function Wg(t,e,n,r,i,o,a,s){var u=Hg(n-t,r-e,a-i,s-o);if(0===u)return null;var c=Vg(i,o,a,s,t,e)/u;return u<=1e-18&&u>=-1e-18?function(t,e,n,r,i,o,a,s){var u=null;Kg(t,i,a)||Kg(e,o,s)?Kg(n,i,a)||Kg(r,o,s)?Kg(i,t,n)||Kg(o,e,r)?Kg(a,t,n)||Kg(s,e,r)||(u=[a,s]):u=[i,o]:u=[n,r]:u=[t,e];return u}(t,e,n,r,i,o,a,s):[t+c*(n-t),e+c*(r-e)]}function Kg(t,e,n){return e<n?t<e||t>n:e>n?t>e||t<n:t!=e}function $g(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function Zg(t,e,n){var r;return Kg(t,e,n)&&(r=Math.abs(t-e)<Math.abs(t-n)?e:n,Math.abs(t-r),t=r),t}function Jg(t,e,n){return t>e&&t<n}function Qg(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function tv(t,e,n,r){for(var i,o,a=n,s=r;a<r;){for(i=t[e[n+r>>2<<1]];a<=s;){for(;t[e[a]]<i;)a+=2;for(;t[e[s]]>i;)s-=2;a<=s&&(o=e[a],e[a]=e[s],e[s]=o,o=e[a+1],e[a+1]=e[s+1],e[s+1]=o,a+=2,s-=2)}if(s-n<40?ev(t,e,n,s):tv(t,e,n,s),r-a<40)return void ev(t,e,a,r);n=a,s=r}}function ev(t,e,n,r){for(var i,o,a=n+2;a<=r;a+=2){i=e[a],o=e[a+1];var s=void 0;for(s=a-2;s>=n&&t[i]<t[e[s]];s-=2)e[s+2]=e[s],e[s+3]=e[s+1];e[s+2]=i,e[s+3]=o}}function nv(t,e,n,r,i){var o=t[0],a=t[1];e=rv(o,a,e[0],e[1],r,i),n=rv(o,a,n[0],n[1],r,i);var s=e[0]<n[0]?e:n;return{x:o,y:a,a:s,b:s==e?n:e}}function rv(t,e,n,r,i,o){var a=n<r?n:r,s=a===n?r:n;return i[a]==t&&o[a]==e?s=a:i[s]==t&&o[s]==e&&(a=s),[a,s]}function iv(t){var e={};return t.filter((function(t){var n=function(t){return"".concat(t.a.join(","),";").concat(t.b.join(","))}(t);return!(n in e)&&(e[n]=!0,!0)}))}var ov=function t(e,n){jg(this,t),this._i=0,this._n=0,this._inc=1,this.i=0,this.x=0,this.y=0,this._xx=e,this._yy=n};function av(t,e,n,r){var i,o,a,s,u,c,l=0|n,h=isNaN(r)?t.length-l:r+l;if(!(h>0))return[void 0,void 0,void 0,void 0];for(a=u=t[l],s=c=e[l],l++;l<h;l++)(i=t[l])<a&&(a=i),i>u&&(u=i),(o=e[l])<s&&(s=o),o>c&&(c=o);return[a,s,u,c]}var sv=function(){function t(){jg(this,t);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.length>0&&this.setBounds(n)}return Bg(t,[{key:"cloneBounds",value:function(){return this.clone()}},{key:"clone",value:function(){return new t(this.xmin,this.ymin,this.xmax,this.ymax)}},{key:"width",value:function(){return this.xmax-this.xmin||0}},{key:"height",value:function(){return this.ymax-this.ymin||0}},{key:"setBounds",value:function(t,e,n,r){return 1==arguments.length&&(Ug(t)?(e=t[1],n=t[2],r=t[3],t=t[0]):(e=t.ymin,n=t.xmax,r=t.ymax,t=t.xmin)),this.xmin=t,this.ymin=e,this.xmax=n,this.ymax=r,(t>n||e>r)&&this.update(),this}},{key:"update",value:function(){var t;this.xmin>this.xmax&&(t=this.xmin,this.xmin=this.xmax,this.xmax=t),this.ymin>this.ymax&&(t=this.ymin,this.ymin=this.ymax,this.ymax=t)}},{key:"mergeBounds",value:function(e){var n,r,i,o;return e instanceof t?(n=e.xmin,r=e.ymin,i=e.xmax,o=e.ymax):3==(arguments.length<=1?0:arguments.length-1)?(n=e,r=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2],o=arguments.length<=3?void 0:arguments[3]):4==e.length?(n=e[0],r=e[1],i=e[2],o=e[3]):Xg("Bounds#mergeBounds() invalid argument:",e),void 0===this.xmin?this.setBounds(n,r,i,o):(n<this.xmin&&(this.xmin=n),r<this.ymin&&(this.ymin=r),i>this.xmax&&(this.xmax=i),o>this.ymax&&(this.ymax=o)),this}}]),t}();n(176),n(274);function uv(t){return(uv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var lv=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n,r;return e=t,(n=[{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"sub",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"scale",value:function(e){return new t(this.x*e,this.y*e)}},{key:"sqDistanceTo",value:function(t){return(this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y)}},{key:"toStr",value:function(){return"(".concat(this.x.toFixed(3),", ").concat(this.y.toFixed(3),")")}},{key:"copyFrom",value:function(t){this.x=t.x,this.y=t.y}}])&&cv(e.prototype,n),r&&cv(e,r),t}();function hv(t,e){return t.x*e.y-t.y*e.x}function pv(t,e){return hv(t[1].sub(t[0]),e.sub(t[0]))}var fv=new lv(0,0);function dv(t,e){return t.bin==e.bin?0:t.bin<e.bin?-1:1}function gv(t,e,n,r){return vv([t,n],[e,r])}function vv(t,e){var n=t[1].sub(t[0]),r=e[0].sub(t[0]),i=e[1].sub(t[0]),o=hv(n,r),a=hv(n,i);if(o>0&&a>0||o<0&&a<0)return!1;var s=e[1].sub(e[0]),u=t[0].sub(e[0]),c=t[1].sub(e[0]),l=hv(s,u),h=hv(s,c);if(l>0&&h>0||l<0&&h<0)return!1;if(Math.abs(o)<1e-14&&Math.abs(a)<1e-14){if(Math.max(e[0].x,e[1].x)<Math.min(t[0].x,t[1].x)||Math.min(e[0].x,e[1].x)>Math.max(t[0].x,t[1].x))return!1;if(Math.max(e[0].y,e[1].y)<Math.min(t[0].y,t[1].y)||Math.min(e[0].y,e[1].y)>Math.max(t[0].y,t[1].y))return!1}return!0}function yv(t){!function(t){for(var e=t.vert.length,n=Math.round(Math.pow(e,.25)),r=[],i=[],o=0;o<e;o++){var a=(t.vert[o].x-fv.x)/1,s=(t.vert[o].y-fv.y)/1;r.push(new lv(a,s));var u=Math.round((n-1)*a),c=Math.round((n-1)*s),l=void 0;l=c%2==0?c*n+u:(c+1)*n-u-1,i.push({ind:o,bin:l})}var h=1e3;r.push(new lv(.5-h,-h/Math.sqrt(3)+.5)),r.push(new lv(h+.5,-h/Math.sqrt(3)+.5)),r.push(new lv(.5,2*h/Math.sqrt(3)+.5));for(var p=e;p<e+3;p++)t.vert.push(new lv(1*r[p].x+fv.x,1*r[p].y+fv.y));i.sort(dv),t.scaled_vert=r,t.bin=i,t.tri=[[e,e+1,e+2]],t.adj=[[-1,-1,-1]],t.vert_to_tri=[]}(t);for(var e=t.scaled_vert,n=t.bin,r=t.tri,i=t.adj,o=e.length-3,a=0,s=0;s<o;s++){var u=n[s].ind;if(-1===(a=mv(e[u],t,a)[0]))throw"Could not find a triangle containing the new vertex!";var c=r[a],l=[c[0],c[1],u],h=[u,c[1],c[2]],p=[c[0],u,c[2]];r[a]=l;var f=r.length,d=i[a];i[a]=[f,f+1,d[2]],r.push(h),r.push(p),i.push([d[0],f+1,a]),i.push([f,d[1],a]);var g=[];if(d[2]>=0){var v=i[d[2]].indexOf(a);g.push([d[2],v])}if(d[0]>=0){var y=i[d[0]].indexOf(a);i[d[0]][y]=f,g.push([d[0],y])}if(d[1]>=0){var m=i[d[1]].indexOf(a);i[d[1]][m]=f+1,g.push([d[1],m])}_v(u,t,g)}!function(t){for(var e=t.scaled_vert,n=t.tri,r=t.adj,i=e.length-3,o=0,a=[],s=0;s<n.length;s++){for(var u=o,c=s;c<n.length;c++){if(n[c][0]<i&&n[c][1]<i&&n[c][2]<i){a[s+o]=s;break}a[s+o]=-1,o++}var l=o-u;l>0&&(n.splice(s,l),r.splice(s,l))}for(var h=0;h<r.length;h++)for(var p=0;p<3;p++)r[h][p]=a[r[h][p]];t.scaled_vert.splice(-3,3),t.vert.splice(-3,3)}(t)}function mv(t,e,n){for(var r=e.scaled_vert,i=e.tri,o=e.adj,a=Math.max(10,o.length),s=0,u=[];s<a;){if(-1===n)return[n,s];var c=i[n],l=[pv([r[c[1]],r[c[2]]],t),pv([r[c[2]],r[c[0]]],t),pv([r[c[0]],r[c[1]]],t)];if(l[0]>=0&&l[1]>=0&&l[2]>=0)return[n,s];for(var h=-1,p=0;p<3;p++)if(l[p]>=0){h=p;break}var f=(h+1)%3,d=(h+2)%3;if(l[f]>=0&&l[d]<0)n=o[n][d],u[s]=r[c[h]].add(r[c[f]]).scale(.5);else if(l[f]<0&&l[d]>=0)n=o[n][f],u[s]=r[c[d]].add(r[c[h]]).scale(.5);else{var g=r[c[f]].sub(r[c[h]]),v=t.sub(r[c[h]]);g.dot(v)>0?(n=o[n][d],u[s]=r[c[h]].add(r[c[f]]).scale(.5)):(n=o[n][f],u[s]=r[c[d]].add(r[c[h]]).scale(.5))}s++}throw"Could not locate the triangle that encloses (".concat(t.x,", ").concat(t.y,")!")}function _v(t,e,n){for(var r=e.scaled_vert,i=e.tri,o=e.adj,a=r[t];n.length>0;){for(var s=n.pop(),u=s[0],c=i[u],l=[],h=0;h<3;h++)l[h]=r[c[h]];if(!xv(l,a)){var p=s[1],f=o[u][p];if(f<0)throw"negative index";bv(e,u,f);var d=i[u].indexOf(t),g=o[u][d];if(g>=0){var v=o[g].indexOf(u);n.push([g,v])}var y=i[f].indexOf(t),m=o[f][y];if(m>=0){var _=o[m].indexOf(f);n.push([m,_])}}}}function bv(t,e,n){var r=t.tri,i=t.adj,o=t.vert_to_tri,a=i[e].indexOf(n),s=i[n].indexOf(e),u=(a+1)%3,c=(a+2)%3,l=(s+1)%3,h=(s+2)%3;r[e][c]=r[n][s],r[n][h]=r[e][a],i[e][a]=i[n][l],i[n][s]=i[e][u];var p=i[e][u];if(p>=0){var f=i[p].indexOf(e);i[p][f]=n}var d=i[n][l];if(d>=0){var g=i[d].indexOf(n);i[d][g]=e}if(i[e][u]=n,i[n][l]=e,o.length>0){o[r[e][a]].push(n),o[r[n][s]].push(e);var v=o[r[e][u]].indexOf(n);o[r[e][u]].splice(v,1),v=o[r[n][l]].indexOf(e),o[r[n][l]].splice(v,1)}}function xv(t,e){var n=t[0].sub(e),r=t[1].sub(e),i=t[2].sub(e),o=n.x*n.x+n.y*n.y,a=r.x*r.x+r.y*r.y,s=i.x*i.x+i.y*i.y;return n.x*(r.y*s-a*i.y)-n.y*(r.x*s-a*i.x)+o*(r.x*i.y-r.y*i.x)<=0}function wv(t){if(0!=t.con_edge.length){!function(t){var e=t.tri;t.vert_to_tri=[];for(var n=t.vert_to_tri,r=0;r<e.length;r++)for(var i=0;i<3;i++)null==n[e[r][i]]?n[e[r][i]]=[r]:n[e[r][i]].push(r)}(t);for(var e,n,r=t.con_edge,i=t.tri,o=t.scaled_vert,a=t.adj,s=t.vert_to_tri,u=[],c=0;c<r.length;c++){for(var l=Ev(t,c),h=0,p=Math.max(l.length,1);l.length>0&&h<p;)Sv(t,l,c,u),l=Ev(t,c),h++;if(l.length>0)throw"Could not add edge ".concat(c," to triangulation after ").concat(p," iterations!")}for(;;){for(var f=0,d=0;d<u.length;d++){for(var g=u[d],v=!1,y=0;y<r.length;y++)if(e=g,n=r[y],e[0]==n[0]&&e[1]==n[1]||e[1]==n[0]&&e[0]==n[1]){v=!0;break}if(!v){for(var m=s[g[0]],_=0,b=[-1,-1],x=0;x<m.length;x++){var w=i[m[x]];if((w[0]==g[1]||w[1]==g[1]||w[2]==g[1])&&(b[_]=m[x],2==++_))break}if(-1!=b[0]){var E=[o[i[b[0]][0]],o[i[b[0]][1]],o[i[b[0]][2]]],S=a[b[1]].indexOf(b[0]);if(!xv(E,o[i[b[1]][S]])){var C=a[b[0]].indexOf(b[1]);bv(t,b[0],b[1]),f++,u[d]=[i[b[0]][C],i[b[1]][S]]}}}}if(0==f)break}}}function Ev(t,e){for(var n=t.tri,r=t.scaled_vert,i=t.adj,o=t.con_edge,a=t.vert_to_tri,s=o[e][0],u=o[e][1],c=[r[s],r[u]],l=a[s],h=!1,p=[],f=0;f<l.length;f++){var d=n[l[f]],g=d.indexOf(s),v=(g+1)%3,y=(g+2)%3;if(u==d[v]){h=!0;break}if(u==d[y]){h=!0;break}if(vv(c,[r[d[v]],r[d[y]]])){p.push([l[f],g]);break}}if(!h){if(0==p.length)throw"Cannot have no intersections!";for(;;){var m=p[p.length-1],_=i[m[0]][m[1]];if(n[_][0]==u||n[_][1]==u||n[_][2]==u)break;var b=i[_].indexOf(m[0]);if(-1==b)throw"Could not find edge!";for(var x=n[_],w=1;w<3;w++){var E=(b+w+2)%3;if(vv(c,[r[x[(b+w+1)%3]],r[x[E]]])){p.push([_,(b+w)%3]);break}}}}return p}function Sv(t,e,n,r){for(var i=t.tri,o=t.scaled_vert,a=t.adj,s=t.con_edge[n],u=[o[s[0]],o[s[1]]],c=e.length,l=0;l<c;l++){var h=e[c-1-l][0],p=e[c-1-l][1],f=a[h][p],d=a[f].indexOf(h),g=o[i[h][p]],v=o[i[h][(p+1)%3]],y=o[i[f][d]];if(gv(g,v,y,o[i[h][(p+2)%3]])){bv(t,h,f);var m=[i[h][p],i[f][d]],_=[g,y];!(m[0]==s[0]||m[0]==s[1]||m[1]==s[0]||m[1]==s[1])&&vv(u,_)||r.push([m[0],m[1]])}}}function Cv(t,e,n){for(var r=[n[t[0]],n[t[1]]],i=0;i<e.length;i++){if(e[i][0]==t[0]&&e[i][1]==t[1]||e[i][0]==t[1]&&e[i][1]==t[0])return!1;var o=e[i][0]==t[0]||e[i][0]==t[1]||e[i][1]==t[0]||e[i][1]==t[1],a=[n[e[i][0]],n[e[i][1]]];if(!o&&vv(a,r))return!1}return!0}var Tv=function(t,e,n){if(e||(e=[]),"object"!==uv(t)||"FeatureCollection"!==t.type)throw"Argument points must be FeatureCollection";if(!Array.isArray(e))throw"Argument points must be Array of Array";var r=!1,i=t.features.reduce((function(t,e){var i=e.geometry.coordinates;return t[0].push(i[0]),t[1].push(i[1]),n?t[2].push(e.properties[n]):3===i.length&&(r=!0,t[2].push(e.geometry.coordinates[2])),t}),[[],[],[]]),o=Math.max.apply(null,i[0]),a=Math.min.apply(null,i[0]),s=Math.max.apply(null,i[1]),u=Math.min.apply(null,i[1]),c=o-a,l=(o+a)/2,h=s-u,p=(s+u)/2,f=1.1*Math.max(c,h),d={vert:t.features.map((function(t){var e=t.geometry.coordinates,n=[(e[0]-l)/f+.5,(e[1]-p)/f+.5];return new lv(n[0],n[1])}))};!function(t,e){var n=t.vert.length;t.con_edge=[];for(var r=0;r<e.length;r++){var i=e[r];if(i[0]<0||i[0]>=n||i[1]<0||i[1]>=n)throw"Vertex indices of edge ".concat(r," need to be non-negative and less than the number of input vertices.");if(i[0]===i[1])throw"Edge ".concat(r," is degenerate!");if(!Cv(i,t.con_edge,t.vert))throw"Edge ".concat(r," already exists or intersects with an existing edge!");t.con_edge.push([i[0],i[1]])}}(d,e),yv(d),wv(d);var g=["a","b","c"];return og(d.tri.map((function(t){var e={},n=t.map((function(t,n){var o=[i[0][t],i[1][t]];return void 0!==i[2][t]&&(r?o[2]=i[2][t]:e[g[n]]=i[2][t]),o}));return n[3]=n[0],rg([n],e)})))};function Iv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ov(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mv=2.00703,Pv=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Iv(this,t),this.points=[],e.bounds?this.setBounds(e.bounds):(this.setWh(e.wh),this.vertexMode=e.vertexMode||t.VERTEX_PLAIN),this.strictMode=e.strictMode||t.MODE_AUTO,this.yaxisMode=e.yaxisMode||t.YAXIS_INVERT,this.importance=e.importance||0,this.priority=e.priority||0,this.stateFull=e.stateFull||!1,e.points&&this.setPoints(e.points),e.edges&&this.setEdges(e.edges)}var e,n,r;return e=t,(n=[{key:"getFormatVersion",value:function(){return Mv}},{key:"setPoints",value:function(e){this.yaxisMode==t.YAXIS_FOLLOW&&(e=e.map((function(t){return[t[0],[t[1][0],-1*t[1][1]]]}))),this.points=e,this.tins=void 0,this.indexedTins=void 0}},{key:"setEdges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.edges=Yv(t),this.edgeNodes=void 0,this.tins=void 0,this.indexedTins=void 0}},{key:"setBounds",value:function(e){this.bounds=e;for(var n=e[0][0],r=n,i=e[0][1],o=i,a=[e[0]],s=1;s<e.length;s++){var u=e[s];u[0]<n&&(n=u[0]),u[0]>r&&(r=u[0]),u[1]<i&&(i=u[1]),u[1]>o&&(o=u[1]),a.push(u)}a.push(e[0]),this.boundsPolygon=rg([a]),this.xy=[n,i],this.wh=[r-n,o-i],this.vertexMode=t.VERTEX_PLAIN,this.tins=void 0,this.indexedTins=void 0}},{key:"setCompiled",value:function(e){var n=this;if(e.version||!e.tins&&e.points&&e.tins_points){this.points=e.points,this.pointsWeightBuffer=!e.version||e.version<2.00703?["forw","bakw"].reduce((function(t,n){var r=e.weight_buffer[n];return r&&(t[n]=Object.keys(r).reduce((function(t,e){return t[qv(e)]=r[e],t}),{})),t}),{}):e.weight_buffer,e.strict_status?this.strict_status=e.strict_status:e.kinks_points?this.strict_status=t.STATUS_ERROR:2==e.tins_points.length?this.strict_status=t.STATUS_LOOSE:this.strict_status=t.STATUS_STRICT,this.vertices_params={forw:[e.vertices_params[0]],bakw:[e.vertices_params[1]]},this.vertices_params.forw[1]=[0,1,2,3].map((function(t){var n=(t+1)%4;return og([Uv(["c","b".concat(t),"b".concat(n)],e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!1,Mv)])})),this.vertices_params.bakw[1]=[0,1,2,3].map((function(t){var n=(t+1)%4;return og([Uv(["c","b".concat(t),"b".concat(n)],e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!0,Mv)])})),this.centroid={forw:ng(e.centroid_point[0],{target:{geom:e.centroid_point[1],index:"c"}}),bakw:ng(e.centroid_point[1],{target:{geom:e.centroid_point[0],index:"c"}})},this.edges=Yv(e.edges||[]),this.edgeNodes=e.edgeNodes||[];var r=1==e.tins_points.length?0:1;this.tins={forw:og(e.tins_points[0].map((function(t){return Uv(t,e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!1,e.version)}))),bakw:og(e.tins_points[r].map((function(t){return Uv(t,e.points,e.edgeNodes||[],e.centroid_point,e.vertices_points,!0,e.version)})))},this.addIndexedTin(),e.kinks_points&&(this.kinks={bakw:og(e.kinks_points.map((function(t){return ng(t)})))}),e.yaxisMode?this.yaxisMode=e.yaxisMode:this.yaxisMode=t.YAXIS_INVERT,e.vertexMode&&(this.vertexMode=e.vertexMode),e.strictMode&&(this.strictMode=e.strictMode),e.bounds?(this.bounds=e.bounds,this.boundsPolygon=e.boundsPolygon,this.xy=e.xy,this.wh=e.wh):(this.xy=[0,0],e.wh&&(this.wh=e.wh),this.bounds=void 0,this.boundsPolygon=void 0)}else!function(){e=JSON.parse(JSON.stringify(e).replace('"cent"','"c"').replace(/"bbox(\d+)"/g,'"b$1"')),n.tins=e.tins,n.addIndexedTin(),n.strict_status=e.strict_status,n.pointsWeightBuffer=e.weight_buffer,n.vertices_params=e.vertices_params,n.centroid=e.centroid,n.kinks=e.kinks;for(var t=[],r=function(e){var r=n.tins.forw.features[e];["a","b","c"].map((function(e,n){var i=r.geometry.coordinates[0][n],o=r.properties[e].geom,a=r.properties[e].index;t[a]=[i,o]}))},i=0;i<n.tins.forw.features.length;i++)r(i);n.points=t}();return{tins:this.tins,strict_status:this.strict_status,weight_buffer:this.pointsWeightBuffer,vertices_params:this.vertices_params,centroid:this.centroid,kinks:this.kinks}}},{key:"getCompiled",value:function(){var e={};e.version=Mv,e.points=this.points,e.weight_buffer=this.pointsWeightBuffer,e.centroid_point=[this.centroid.forw.geometry.coordinates,this.centroid.forw.properties.target.geom],e.vertices_params=[this.vertices_params.forw[0],this.vertices_params.bakw[0]],e.vertices_points=[];var n=this.vertices_params.forw[1];return[0,1,2,3].map((function(t){var r=n[t].features[0],i=r.geometry.coordinates[0][1],o=r.properties.b.geom;e.vertices_points[t]=[i,o]})),e.strict_status=this.strict_status,e.tins_points=[[]],this.tins.forw.features.map((function(t){e.tins_points[0].push(["a","b","c"].map((function(e){return t.properties[e].index})))})),this.strict_status==t.STATUS_LOOSE?(e.tins_points[1]=[],this.tins.bakw.features.map((function(t){e.tins_points[1].push(["a","b","c"].map((function(e){return t.properties[e].index})))}))):this.strict_status==t.STATUS_ERROR&&(e.kinks_points=this.kinks.bakw.features.map((function(t){return t.geometry.coordinates}))),e.yaxisMode=this.yaxisMode,e.vertexMode=this.vertexMode,e.strictMode=this.strictMode,this.bounds?(e.bounds=this.bounds,e.boundsPolygon=this.boundsPolygon,e.xy=this.xy,e.wh=this.wh):e.wh=this.wh,e.edges=this.edges,e.edgeNodes=this.edgeNodes,e}},{key:"addIndexedTin",value:function(){var t=this.tins,e=t.forw,n=t.bakw,r=Math.ceil(Math.sqrt(e.features.length));if(r<3)this.indexedTins=void 0;else{var i=[],o=[],a=e.features.map((function(t){var e=[];return pg(t)[0].map((function(t){0===i.length?i=[Array.from(t),Array.from(t)]:(t[0]<i[0][0]&&(i[0][0]=t[0]),t[0]>i[1][0]&&(i[1][0]=t[0]),t[1]<i[0][1]&&(i[0][1]=t[1]),t[1]>i[1][1]&&(i[1][1]=t[1])),0===e.length?e=[Array.from(t),Array.from(t)]:(t[0]<e[0][0]&&(e[0][0]=t[0]),t[0]>e[1][0]&&(e[1][0]=t[0]),t[1]<e[0][1]&&(e[0][1]=t[1]),t[1]>e[1][1]&&(e[1][1]=t[1]))})),e})),s=(i[1][0]-i[0][0])/r,u=(i[1][1]-i[0][1])/r,c=a.reduce((function(t,e,n){for(var o=zv(e[0][0],i[0][0],s,r),a=zv(e[1][0],i[0][0],s,r),c=zv(e[0][1],i[0][1],u,r),l=zv(e[1][1],i[0][1],u,r),h=o;h<=a;h++){t[h]||(t[h]=[]);for(var p=c;p<=l;p++)t[h][p]||(t[h][p]=[]),t[h][p].push(n)}return t}),[]),l=n.features.map((function(t){var e=[];return pg(t)[0].map((function(t){0===o.length?o=[Array.from(t),Array.from(t)]:(t[0]<o[0][0]&&(o[0][0]=t[0]),t[0]>o[1][0]&&(o[1][0]=t[0]),t[1]<o[0][1]&&(o[0][1]=t[1]),t[1]>o[1][1]&&(o[1][1]=t[1])),0===e.length?e=[Array.from(t),Array.from(t)]:(t[0]<e[0][0]&&(e[0][0]=t[0]),t[0]>e[1][0]&&(e[1][0]=t[0]),t[1]<e[0][1]&&(e[0][1]=t[1]),t[1]>e[1][1]&&(e[1][1]=t[1]))})),e})),h=(o[1][0]-o[0][0])/r,p=(o[1][1]-o[0][1])/r,f=l.reduce((function(t,e,n){for(var i=zv(e[0][0],o[0][0],h,r),a=zv(e[1][0],o[0][0],h,r),s=zv(e[0][1],o[0][1],p,r),u=zv(e[1][1],o[0][1],p,r),c=i;c<=a;c++){t[c]||(t[c]=[]);for(var l=s;l<=u;l++)t[c][l]||(t[c][l]=[]),t[c][l].push(n)}return t}),[]);this.indexedTins={forw:{gridNum:r,xOrigin:i[0][0],yOrigin:i[0][1],xUnit:s,yUnit:u,gridCache:c},bakw:{gridNum:r,xOrigin:o[0][0],yOrigin:o[0][1],xUnit:h,yUnit:p,gridCache:f}}}}},{key:"setWh",value:function(t){this.wh=t,this.xy=[0,0],this.bounds=void 0,this.boundsPolygon=void 0,this.tins=void 0,this.indexedTins=void 0}},{key:"setVertexMode",value:function(t){this.vertexMode=t,this.tins=void 0,this.indexedTins=void 0}},{key:"setStrictMode",value:function(t){this.strictMode=t,this.tins=void 0,this.indexedTins=void 0}},{key:"calcurateStrictTinAsync",value:function(){var e=this,n=this.pointsSet.edges;return Promise.all(this.tins.forw.features.map((function(t){return Promise.resolve(Gv(t))}))).then((function(t){e.tins.bakw=og(t)})).then((function(){var t={};return Promise.all(e.tins.forw.features.map((function(n,r){var i=e.tins.bakw.features[r];return Promise.resolve(Hv(t,{forw:n,bakw:i}))}))).then((function(){return Promise.all([Vv(t),Promise.resolve(t)])})).catch((function(t){throw t}))})).then((function(r){var i=r[0],o=r[1];return i.bakw&&Object.keys(i.bakw).map((function(t){if("Not include case"!=i.bakw[t]){var r=o[t],a=Fg(r[0].forw,r[1].forw),s=Yd(og([r[0].forw,r[1].forw]));if(!tg(s,a)){var u=t.split("-");if(u[0].match(/^[0-9]+$/)&&u[1].match(/^[0-9]+$/))for(var c=u.map((function(t){return parseInt(t)})).sort((function(t,e){return t<e?-1:1})),l=0;l<n.length-1;l++)if(c[0]==n[l][0]&&c[1]==n[l][1])return;var h=u.map((function(t){return["a","b","c"].map((function(t,e){var n=r[0].bakw.properties[t];return{geom:r[0].bakw.geometry.coordinates[0][e],prop:n}})).filter((function(e){return e.prop.index==t}))[0]})),p=r.map((function(t){return["a","b","c"].map((function(e,n){var r=t.bakw.properties[e];return{geom:t.bakw.geometry.coordinates[0][n],prop:r}})).filter((function(t){return t.prop.index!=h[0].prop.index&&t.prop.index!=h[1].prop.index}))[0]}));Wv(o,r[0],e.tins),Wv(o,r[1],e.tins),h.map((function(t){var n=rg([[t.geom,p[0].geom,p[1].geom,t.geom]],{a:t.prop,b:p[0].prop,c:p[1].prop}),r=Gv(n);Hv(o,{forw:r,bakw:n},e.tins)}))}}})),Promise.all(["forw","bakw"].map((function(t){return new Promise((function(n){n(function(t){return iv(new Gg(t).findSegmentIntersections()).reduce((function(t,e,n,r){return t||(t={}),t["".concat(e.x,":").concat(e.y)]=e,n!=r.length-1?t:Object.keys(t).map((function(e){return ng([t[e].x,t[e].y])}))}),[])}(e.tins[t].features.map((function(t){return t.geometry.coordinates[0]}))))})).catch((function(t){throw t}))}))).then((function(n){0==n[0].length&&0==n[1].length?(e.strict_status=t.STATUS_STRICT,delete e.kinks):(e.strict_status=t.STATUS_ERROR,e.kinks={},n[0].length>0&&(e.kinks.forw=og(n[0])),n[1].length>0&&(e.kinks.bakw=og(n[1])))})).catch((function(t){throw t}))})).catch((function(t){throw t}))}},{key:"generatePointsSet",value:function(){for(var t=this,e={forw:[],bakw:[]},n=0;n<this.points.length;n++){var r=kv(this.points[n][0],this.points[n][1],n);e.forw.push(r),e.bakw.push(Nv(r))}var i=[],o=0;this.edgeNodes=[],this.edges||(this.edges=[]);for(var a=function(n){var r=t.edges[n][2],a=Object.assign([],t.edges[n][0]),s=Object.assign([],t.edges[n][1]);if(0===a.length&&0===s.length)return i.push(r),"continue";a.unshift(t.points[r[0]][0]),a.push(t.points[r[1]][0]),s.unshift(t.points[r[0]][1]),s.push(t.points[r[1]][1]);var u=[a,s].map((function(t){var e=t.map((function(t,e,n){if(0===e)return 0;var r=n[e-1];return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))})),n=e.reduce((function(t,e,n){return 0===n?[0]:(t.push(t[n-1]+e),t)}),[]);return n.map((function(r,i,o){var a=r/o[o.length-1];return[t[i],e[i],n[i],a]}))}));u.map((function(t,e){var n=u[e?0:1];return t.filter((function(e,n){return!(0===n||n===t.length-1||"handled"===e[4])})).map((function(t){var r=t[0],i=t[3],o=n.reduce((function(t,e,n,r){if(t)return t;var o=r[n+1];return e[3]===i?(e[4]="handled",[e]):e[3]<i&&o[3]>i?[e,o]:void 0}),void 0);if(1===o.length)return 0===e?[r,o[0][0],i]:[o[0][0],r,i];var a=o[0],s=o[1],u=(i-a[3])/(s[3]-a[3]),c=[(s[0][0]-a[0][0])*u+a[0][0],(s[0][1]-a[0][1])*u+a[0][1]];return 0===e?[r,c,i]:[c,r,i]}))})).reduce((function(t,e){return t.concat(e)}),[]).sort((function(t,e){return t[2]<e[2]?-1:1})).map((function(n,a,s){t.edgeNodes[o]=[n[0],n[1]];var u=kv(n[0],n[1],"e".concat(o));o++,e.forw.push(u),e.bakw.push(Nv(u)),0===a?i.push([r[0],e.forw.length-1]):i.push([e.forw.length-2,e.forw.length-1]),a===s.length-1&&i.push([e.forw.length-1,r[1]])}))},s=0;s<this.edges.length;s++)a(s);return{forw:og(e.forw),bakw:og(e.bakw),edges:i}}},{key:"updateTinAsync",value:function(){var e=this,n=this.strictMode,r=this.xy[0]-.05*this.wh[0],i=this.xy[0]+1.05*this.wh[0],o=this.xy[1]-.05*this.wh[1],a=this.xy[1]+1.05*this.wh[1],s=this.bounds?function(t){return hf(t,e.boundsPolygon)}:function(t){return t[0]>=e.xy[0]&&t[0]<=e.xy[0]+e.wh[0]&&t[1]>=e.xy[1]&&t[1]<=e.xy[1]+e.wh[1]};return this.points.reduce((function(t,e){return t&&s(e[0])}),!0)?new Promise((function(s){n!=t.MODE_STRICT&&n!=t.MODE_LOOSE&&(n=t.MODE_AUTO);var u=[];e.wh&&(u=[[r,o],[i,o],[r,a],[i,a]]),s([e.generatePointsSet(),u])})).then((function(t){var e=t[0];return Promise.all([new Promise((function(t){t(Tv(e.forw,e.edges,"target"))})),new Promise((function(t){t(Tv(e.bakw,e.edges,"target"))})),new Promise((function(t){t(vi(e.forw))})),Promise.resolve(t)]).catch((function(t){throw t}))})).then((function(t){var n=t[0],r=t[1],i=t[2],o=t[3],a=o[0];if(0==n.features.length||0==r.features.length)throw"TOO LINEAR1";var s={forw:i.geometry.coordinates,bakw:Bv(i,n)},u=kv(s.forw,s.bakw,"c");e.centroid={forw:u,bakw:Nv(u)};var c={};return Promise.all([new Promise((function(t){var e,r=Yd(a.forw).geometry.coordinates[0];try{e=r.map((function(t){return{forw:t,bakw:Bv(ng(t),n)}}))}catch(t){throw"TOO LINEAR2"}e.map((function(t){c["".concat(t.forw[0],":").concat(t.forw[1])]=t})),t(void 0)})),new Promise((function(t){var e,n=Yd(a.bakw).geometry.coordinates[0];try{e=n.map((function(t){return{bakw:t,forw:Bv(ng(t),r)}}))}catch(t){throw"TOO LINEAR2"}e.map((function(t){c["".concat(t.forw[0],":").concat(t.forw[1])]=t})),t(void 0)}))]).then((function(){return[s,c,o]})).catch((function(t){throw t}))})).then((function(n){var s=n[0],u=n[1],c=n[2],l=Object.keys(u).reduce((function(t,e,n,c){var l=u[e].forw,h=u[e].bakw,p={forw:[l[0]-s.forw[0],l[1]-s.forw[1]]};p.bakw=[h[0]-s.bakw[0],h[1]-s.bakw[1]];var f=0==p.forw[0]?1/0:((p.forw[0]<0?r:i)-s.forw[0])/p.forw[0],d=0==p.forw[1]?1/0:((p.forw[1]<0?o:a)-s.forw[1])/p.forw[1];if(Math.abs(f)/Math.abs(d)<1.1){var g={forw:[p.forw[0]*f+s.forw[0],p.forw[1]*f+s.forw[1]],bakw:[p.bakw[0]*f+s.bakw[0],p.bakw[1]*f+s.bakw[1]]};p.forw[0]<0?t[3].push(g):t[1].push(g)}if(Math.abs(d)/Math.abs(f)<1.1){var v={forw:[p.forw[0]*d+s.forw[0],p.forw[1]*d+s.forw[1]],bakw:[p.bakw[0]*d+s.bakw[0],p.bakw[1]*d+s.bakw[1]]};p.forw[1]<0?t[0].push(v):t[2].push(v)}return t}),[[],[],[],[]]),h=Object.keys(u).reduce((function(n,r,i,o){var a=u[r].forw,c=u[r].bakw,l={forw:[a[0]-s.forw[0],a[1]-s.forw[1]]};if(l.bakw=[c[0]-s.bakw[0],s.bakw[1]-c[1]],0==l.forw[0]||0==l.forw[1])return n;var h=0;return l.forw[0]>0&&(h+=1),l.forw[1]>0&&(h+=2),n[h].push([l.forw,l.bakw]),i==o.length-1?n.length==n.filter((function(t){return t.length>0})).length&&e.vertexMode==t.VERTEX_BIRDEYE?n:n.reduce((function(t,e){return[t[0].concat(e)]}),[[]]):n}),[[],[],[],[]]).map((function(t){return t.reduce((function(t,e,n,r){t||(t=[1/0,0,0]);var i=Math.sqrt(Math.pow(e[0][0],2)+Math.pow(e[0][1],2))/Math.sqrt(Math.pow(e[1][0],2)+Math.pow(e[1][1],2));i=i<t[0]?i:t[0];var o=Math.atan2(e[0][0],e[0][1])-Math.atan2(e[1][0],e[1][1]),a=t[1]+Math.cos(o),s=t[2]+Math.sin(o);return n==r.length-1?[i,Math.atan2(s,a)]:[i,a,s]}),null)}));return 1==h.length&&(h=[h[0],h[0],h[0],h[0]]),[h,s,l,c]})).then((function(t){var e=t[0],n=t[1],r=t[2],i=t[3][0],o=t[3][1],a=e.map((function(t,e){var r=o[e],i=[r[0]-n.forw[0],r[1]-n.forw[1]],a=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2))/t[0],s=Math.atan2(i[0],i[1])-t[1];return{forw:r,bakw:[n.bakw[0]+a*Math.sin(s),n.bakw[1]-a*Math.cos(s)]}})),s=a[2];a[2]=a[3],a[3]=s;for(var u=[1,1,1,1],c=function(t){var e=(t+1)%4,i=ig([a[t].bakw,a[e].bakw]);r[t].map((function(r){var o=ig([n.bakw,r.bakw]),a=Dg(i,o);if(a.features.length>0&&a.features[0].geometry){var s=a.features[0],c=Math.sqrt(Math.pow(r.bakw[0]-n.bakw[0],2)+Math.pow(r.bakw[1]-n.bakw[1],2))/Math.sqrt(Math.pow(s.geometry.coordinates[0]-n.bakw[0],2)+Math.pow(s.geometry.coordinates[1]-n.bakw[1],2));c>u[t]&&(u[t]=c),c>u[e]&&(u[e]=c)}}))},l=0;l<4;l++)c(l);return[a=a.map((function(t,e){var r=u[e],i=[(t.bakw[0]-n.bakw[0])*r+n.bakw[0],(t.bakw[1]-n.bakw[1])*r+n.bakw[1]];return{forw:t.forw,bakw:i}})),i]})).then((function(r){for(var i=r[0],o=r[1],a={forw:[],bakw:[]},s=0;s<i.length;s++){var u=kv(i[s].forw,i[s].bakw,"b".concat(s)),c=Nv(u);o.forw.features.push(u),o.bakw.features.push(c),a.forw.push(u),a.bakw.push(c)}return e.pointsSet=o,e.tins={forw:Lv(Tv(o.forw,o.edges,"target"))},(n==t.MODE_STRICT||n==t.MODE_AUTO?e.calcurateStrictTinAsync():Promise.resolve()).then((function(){return(n==t.MODE_LOOSE||n==t.MODE_AUTO&&e.strict_status==t.STATUS_ERROR)&&(e.tins.bakw=Lv(Tv(o.bakw,o.edges,"target")),delete e.kinks,e.strict_status=t.STATUS_LOOSE),e.vertices_params={forw:Rv(a.forw,e.centroid.forw),bakw:Rv(a.bakw,e.centroid.bakw)},e.addIndexedTin(),e.calculatePointsWeightAsync()})).catch((function(t){throw t}))})).catch((function(t){throw t})):new Promise((function(t,e){e("SOME POINTS OUTSIDE")}))}},{key:"transform",value:function(e,n,r){var i=this;if(n&&this.strict_status==t.STATUS_ERROR)throw'Backward transform is not allowed if strict_status == "strict_error"';this.yaxisMode==t.YAXIS_FOLLOW&&n&&(e=[e[0],-1*e[1]]);var o=ng(e);if(this.bounds&&!n&&!r&&!hf(o,this.boundsPolygon))return!1;var a=n?this.tins.bakw:this.tins.forw,s=n?this.indexedTins.bakw:this.indexedTins.forw,u=n?this.vertices_params.bakw:this.vertices_params.forw,c=n?this.centroid.bakw:this.centroid.forw,l=n?this.pointsWeightBuffer.bakw:this.pointsWeightBuffer.forw,h=void 0,p=void 0;this.stateFull&&(this.stateBackward==n?h=this.stateTriangle:(this.stateBackward=n,this.stateTriangle=void 0),p=function(t){i.stateTriangle=t});var f=Bv(o,a,s,u,c,l,h,p);if(this.bounds&&n&&!r){var d=ng(f);if(!hf(d,this.boundsPolygon))return!1}else this.yaxisMode!=t.YAXIS_FOLLOW||n||(f=[f[0],-1*f[1]]);return f}},{key:"calculatePointsWeightAsync",value:function(){var e=this,n=["forw"];this.strict_status==t.STATUS_LOOSE&&n.push("bakw");var r={};return Promise.all(n.map((function(t){r[t]={};var n={},i=e.tins[t];return Promise.all(i.features.map((function(e){var i=["a","b","c"];return new Promise((function(o){for(var a=0;a<3;a++){var s=(a+1)%3,u=i[a],c=i[s],l=e.properties[u].index,h=e.properties[c].index,p=[l,h].sort().join("-");if(!n[p]){var f=e.geometry.coordinates[0][a],d=e.geometry.coordinates[0][s],g=e.properties[u].geom,v=e.properties[c].geom;n[p]=1;var y=Math.sqrt(Math.pow(g[0]-v[0],2)+Math.pow(g[1]-v[1],2))/Math.sqrt(Math.pow(f[0]-d[0],2)+Math.pow(f[1]-d[1],2));r[t][l]||(r[t][l]={}),r[t][h]||(r[t][h]={}),r[t][l][p]=y,r[t][h][p]=y}}o(void 0)}))}))).catch((function(t){throw t}))}))).then((function(){var i={};n.map((function(n){i[n]={},e.strict_status==t.STATUS_STRICT&&(i.bakw={}),Object.keys(r[n]).map((function(o){i[n][o]=Object.keys(r[n][o]).reduce((function(t,e,i,a){return t+=r[n][o][e],i==a.length-1?t/a.length:t}),0),e.strict_status==t.STATUS_STRICT&&(i.bakw[o]=1/i[n][o])})),i[n].c=[0,1,2,3].reduce((function(t,e){var r="b".concat(e);return t+=i[n][r],3==e?t/4:t}),0),e.strict_status==t.STATUS_STRICT&&(i.bakw.c=1/i[n].c)})),e.pointsWeightBuffer=i})).catch((function(t){throw t}))}}])&&Ov(e.prototype,n),r&&Ov(e,r),t}();function Lv(t){for(var e=t.features,n=0;n<e.length;n++){var r=e[n];"b"==="".concat(r.properties.a.index).substring(0,1)&&"b"==="".concat(r.properties.b.index).substring(0,1)?e[n]={geometry:{type:"Polygon",coordinates:[[r.geometry.coordinates[0][2],r.geometry.coordinates[0][0],r.geometry.coordinates[0][1],r.geometry.coordinates[0][2]]]},properties:{a:{geom:r.properties.c.geom,index:r.properties.c.index},b:{geom:r.properties.a.geom,index:r.properties.a.index},c:{geom:r.properties.b.geom,index:r.properties.b.index}},type:"Feature"}:"b"==="".concat(r.properties.c.index).substring(0,1)&&"b"==="".concat(r.properties.a.index).substring(0,1)&&(e[n]={geometry:{type:"Polygon",coordinates:[[r.geometry.coordinates[0][1],r.geometry.coordinates[0][2],r.geometry.coordinates[0][0],r.geometry.coordinates[0][1]]]},properties:{a:{geom:r.properties.b.geom,index:r.properties.b.index},b:{geom:r.properties.c.geom,index:r.properties.c.index},c:{geom:r.properties.a.geom,index:r.properties.a.index}},type:"Feature"})}return t}function Rv(t,e){var n=e.geometry.coordinates;return[0,1,2,3].map((function(r){var i=(r+1)%4,o=t[r],a=t[i],s=o.geometry.coordinates;return[Math.atan2(s[0]-n[0],s[1]-n[1]),og([rg([[e,o,a,e].map((function(t){return t.geometry.coordinates}))],{a:{geom:e.properties.target.geom,index:e.properties.target.index},b:{geom:o.properties.target.geom,index:o.properties.target.index},c:{geom:a.properties.target.geom,index:a.properties.target.index}})])]})).reduce((function(t,e){return t[0].push(e[0]),t[1].push(e[1]),t}),[[],[]])}function Av(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?function(t){return!(t>=0&&t<2*Math.PI)}:function(t){return!(t>-1*Math.PI&&t<=Math.PI)};n(t);)t+=2*Math.PI*(t>0?-1:1);return t}function kv(t,e,n){return ng(t,{target:{geom:e,index:n}})}function Nv(t){return ng(t.properties.target.geom,{target:{geom:t.geometry.coordinates,index:t.properties.target.index}})}function Dv(t,e,n){var r=e.geometry.coordinates[0][0],i=e.geometry.coordinates[0][1],o=e.geometry.coordinates[0][2],a=t.geometry.coordinates,s=e.properties.a.geom,u=e.properties.b.geom,c=e.properties.c.geom,l=[i[0]-r[0],i[1]-r[1]],h=[o[0]-r[0],o[1]-r[1]],p=[a[0]-r[0],a[1]-r[1]],f=[u[0]-s[0],u[1]-s[1]],d=[c[0]-s[0],c[1]-s[1]],g=(h[1]*p[0]-h[0]*p[1])/(l[0]*h[1]-l[1]*h[0]),v=(l[0]*p[1]-l[1]*p[0])/(l[0]*h[1]-l[1]*h[0]);if(n){var y,m=n[e.properties.a.index],_=n[e.properties.b.index],b=n[e.properties.c.index];if(g<0||v<0||1-g-v<0){var x=g/(g+v),w=v/(g+v);y=g/_/(x/_+w/b),v=v/b/(x/_+w/b)}else y=g/_/(g/_+v/b+(1-g-v)/m),v=v/b/(g/_+v/b+(1-g-v)/m);g=y}return[g*f[0]+v*d[0]+s[0],g*f[1]+v*d[1]+s[1]]}function Fv(t,e,n,r){var i=t.geometry.coordinates,o=n.geometry.coordinates,a=function(t,e){for(var n,r=Av(t-e[0]),i=2*Math.PI,o=0;o<e.length;o++){var a=Av(t-e[(o+1)%e.length]),s=Math.min(Math.abs(r),Math.abs(a));r*a<=0&&s<i&&(i=s,n=o),r=a}return n}(Math.atan2(i[0]-o[0],i[1]-o[1]),e[0]);return Dv(t,e[1][a].features[0],r)}function jv(t,e){for(var n=0;n<e.features.length;n++){if(hf(t,e.features[n]))return e.features[n]}}function zv(t,e,n,r){var i=Math.floor((t-e)/n);return i>=r&&(i=r-1),i}function Bv(t,e,n,r,i,o,a,s){var u;if(a&&(u=jv(t,og([a]))),!u){if(n){var c=t.geometry.coordinates,l=n.gridNum,h=n.xOrigin,p=n.yOrigin,f=n.xUnit,d=n.yUnit,g=n.gridCache,v=zv(c[0],h,f,l),y=zv(c[1],p,d,l),m=g[v]&&g[v][y]?g[v][y]:[];e=og(m.map((function(t){return e.features[t]})))}u=jv(t,e)}return s&&s(u),u?Dv(t,u,o):Fv(t,r,i,o)}function Gv(t){var e=["a","b","c","a"].map((function(e){return t.properties[e].geom})),n=t.geometry.coordinates[0],r=t.properties;return rg([e],{a:{geom:n[0],index:r.a.index},b:{geom:n[1],index:r.b.index},c:{geom:n[2],index:r.c.index}})}function Xv(t){return rg([[0,1,2,0].map((function(e){return t[e][0][0]}))],{a:{geom:t[0][0][1],index:t[0][1]},b:{geom:t[1][0][1],index:t[1][1]},c:{geom:t[2][0][1],index:t[2][1]}})}function Uv(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6?arguments[6]:void 0,s=t.map((function(t){(!a||a<2.00703)&&(t=qv(t));var s=isFinite(t)?e[t]:"c"===t?r:"b0"===t?i[0]:"b1"===t?i[1]:"b2"===t?i[2]:"b3"===t?i[3]:function(){var e=t.match(/e(\d+)/);if(e){var r=parseInt(e[1]);return n[r]}throw"Bad index value for indexesToTri"}();return o?[[s[1],s[0]],t]:[[s[0],s[1]],t]}));return Xv(s)}function qv(t){return"number"==typeof t?t:t.replace(/^(c|e|b)(?:ent|dgeNode|box)(\d+)?$/,"$1$2")}function Yv(t,e){return e&&e>=2.00703||Array.isArray(t[0])?t:t.map((function(t){return[t.illstNodes,t.mercNodes,t.startEnd]}))}function Vv(t){var e={forw:{},bakw:{}};return Promise.all(Object.keys(t).map((function(e){return new Promise((function(n){var r=t[e];if(r.length<2)return n(void 0);["forw","bakw"].map((function(t){var e=hg(r[0][t],r[1][t]);if(!e||"Point"==e.geometry.type||"LineString"==e.geometry.type)return n(void 0);n(void 0)}))}))}))).then((function(){return 0==Object.keys(e.forw).length&&delete e.forw,0==Object.keys(e.bakw).length&&delete e.bakw,e})).catch((function(t){throw t}))}function Hv(t,e,n){var r=Kv(e.forw),i=Kv(e.bakw);if(JSON.stringify(r)!=JSON.stringify(i))throw"".concat(JSON.stringify(e,null,2)," ").concat(JSON.stringify(r)," ").concat(JSON.stringify(i));for(var o=0;o<r.length;o++){var a=r[o];t[a]||(t[a]=[]),t[a].push(e)}n&&(n.forw.features.push(e.forw),n.bakw.features.push(e.bakw))}function Wv(t,e,n){var r=Kv(e.forw),i=Kv(e.bakw);if(JSON.stringify(r)!=JSON.stringify(i))throw"".concat(JSON.stringify(e,null,2)," ").concat(JSON.stringify(r)," ").concat(JSON.stringify(i));for(var o=0;o<r.length;o++){var a=r[o],s=t[a].filter((function(t){return t.forw!=e.forw}));0==s.length?delete t[a]:t[a]=s}if(n){var u=n.forw.features.filter((function(t){return t!=e.forw}));n.forw.features=u,u=n.bakw.features.filter((function(t){return t!=e.bakw})),n.bakw.features=u}}function Kv(t){var e=["a","b","c"].map((function(e){return t.properties[e].index}));return[[0,1],[0,2],[1,2],[0,1,2]].map((function(t){return t.map((function(t){return e[t]})).sort().join("-")})).sort()}Pv.VERTEX_PLAIN="plain",Pv.VERTEX_BIRDEYE="birdeye",Pv.MODE_STRICT="strict",Pv.MODE_AUTO="auto",Pv.MODE_LOOSE="loose",Pv.STATUS_STRICT="strict",Pv.STATUS_ERROR="strict_error",Pv.STATUS_LOOSE="loose",Pv.YAXIS_FOLLOW="follow",Pv.YAXIS_INVERT="invert";var $v=Pv;function Zv(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Jv(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Zv(o,r,i,a,s,"next",t)}function s(t){Zv(o,r,i,a,s,"throw",t)}a(void 0)}))}}var Qv=["title","attr","officialTitle","dataAttr","author","createdAt","era","license","dataLicense","contributor","mapper","reference","description","url","lang","imageExtension"];function ty(t){return ey.apply(this,arguments)}function ey(){return(ey=Jv(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",ny(e,!1,!0));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ny(t,e,n){return ry.apply(this,arguments)}function ry(){return(ry=Jv(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,u,c,l,h,p,f,d,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r?e:{},o=[],Qv.forEach((function(t){i[t]=e[t]})),e.imageExtention&&(i.imageExtension=e.imageExtention),!e.compiled){t.next=23;break}a={},e.compiled.wh||(a.wh=[e.width,e.height]),e.compiled.strictMode||(a.strictMode=e.strictMode),e.compiled.vertexMode||(a.vertexMode=e.vertexMode),e.compiled.yaxisMode||(a.yaxisMode=e.yaxisMode),(s=new $v(a)).setCompiled(e.compiled),n&&(s=s.getCompiled()),i.strictMode=s.strictMode,i.vertexMode=s.vertexMode,i.yaxisMode=s.yaxisMode,i.width=s.wh[0],i.height=s.wh[1],i.gcps=s.points,i.edges=s.edges,o.push(s),t.next=35;break;case 23:return i.strictMode=e.strictMode,i.vertexMode=e.vertexMode,i.yaxisMode=e.yaxisMode,i.width=e.width,i.height=e.height,i.gcps=e.gcps,i.edges=e.edges,t.next=32,iy(e.strictMode,e.vertexMode,e.yaxisMode,e.gcps,e.edges,[e.width,e.height]);case 32:u=t.sent,n&&"string"!=typeof u&&(u=u.getCompiled()),o.push(u);case 35:if(!e.sub_maps){t.next=70;break}c=[],l=0;case 38:if(!(l<e.sub_maps.length)){t.next=69;break}if(h=e.sub_maps[l],(p={}).importance=h.importance,p.priority=h.priority,!h.compiled){t.next=57;break}f={},h.compiled.strictMode||(f.strictMode=e.strictMode),h.compiled.vertexMode||(f.vertexMode=e.vertexMode),h.compiled.yaxisMode||(f.yaxisMode=e.yaxisMode),(d=new $v(f)).setCompiled(h.compiled),n&&(d=d.getCompiled()),p.bounds=d.bounds,p.gcps=d.points,p.edges=d.edges,o.push(d),t.next=65;break;case 57:return p.bounds=h.bounds,p.gcps=h.gcps,p.edges=h.edges,t.next=62,iy(e.strictMode,e.vertexMode,e.yaxisMode,h.gcps,h.edges,void 0,h.bounds);case 62:g=t.sent,n&&"string"!=typeof g&&(g=g.getCompiled()),o.push(g);case 65:c.push(p);case 66:l++,t.next=38;break;case 69:i.sub_maps=c;case 70:return t.abrupt("return",[i,o]);case 71:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function iy(t,e,n){return oy.apply(this,arguments)}function oy(){return(oy=Jv(regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,u,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=c.length>3&&void 0!==c[3]?c[3]:[],o=c.length>4&&void 0!==c[4]?c[4]:[],a=c.length>5?c[5]:void 0,s=c.length>6?c[6]:void 0,!(i.length<3)){t.next=6;break}return t.abrupt("return","tooLessGcps");case 6:if(u=new $v({yaxisMode:r}),!a){t.next=11;break}u.setWh(a),t.next=16;break;case 11:if(!s){t.next=15;break}u.setBounds(s),t.next=16;break;case 15:throw"Both wh and bounds are missing";case 16:return u.setStrictMode(e),u.setVertexMode(n),u.setPoints(i),u.setEdges(o),t.prev=20,t.next=23,u.updateTinAsync();case 23:return t.abrupt("return",u);case 26:if(t.prev=26,t.t0=t.catch(20),console.log(t.t0),"SOME POINTS OUTSIDE"!=t.t0){t.next=33;break}return t.abrupt("return","pointsOutside");case 33:if(0!=t.t0.indexOf("TOO LINEAR")){t.next=37;break}return t.abrupt("return","tooLinear");case 37:if(!(t.t0.indexOf("Vertex indices of edge")>-1||t.t0.indexOf("is degenerate!")>-1||t.t0.indexOf("already exists or intersects with an existing edge!")>-1)){t.next=41;break}return t.abrupt("return","edgeError");case 41:throw t.t0;case 42:case"end":return t.stop()}}),t,null,[[20,26]])})))).apply(this,arguments)}function ay(t){return(ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sy(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function uy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ly(t,e){return(ly=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fy(t);if(e){var i=fy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return py(this,n)}}function py(t,e){return!e||"object"!==ay(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fy(t){return(fy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ly(t,e)}(s,t);var e,n,r,i,o,a=hy(s);function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return uy(this,s),(t=a.call(this,e)).tins=[],t}return e=s,n=[{key:"xy2MercAsync_specifyLayer",value:function(t,e){var n="Illst:".concat(this.mapID).concat(e?"#".concat(e):"");return new Promise((function(e,r){e(Xd(n,"EPSG:3857",t))}))}},{key:"merc2XyAsync_specifyLayer",value:function(t,e){var n="Illst:".concat(this.mapID).concat(e?"#".concat(e):"");return new Promise((function(e,r){e(Xd("EPSG:3857",n,t))}))}},{key:"xy2MercAsync_returnLayer",value:function(t){var e=this;return new Promise((function(n,r){for(var i=e.tins.map((function(t,e){return[e,t]})).sort((function(t,e){return t[1].priority<e[1].priority?1:-1})),o=function(o){var a=i[o][0],s=i[o][1];if(0==a||hf(t,s.xyBounds))return e.xy2MercAsync_specifyLayer(t,a).then((function(t){n([a,t])})).catch((function(t){r(t)})),"break"},a=0;a<i.length&&"break"!==o(a);a++);}))}},{key:"merc2XyAsync_returnLayer",value:function(t){var e=this;return Promise.all(this.tins.map((function(n,r){return new Promise((function(i,o){e.merc2XyAsync_specifyLayer(t,r).then((function(t){0===r||hf(t,n.xyBounds)?i([n,r,t]):i([n,r])})).catch((function(t){o(t)}))}))}))).then((function(t){return t.sort((function(t,e){return t[0].priority<e[0].priority?1:-1})).reduce((function(t,e,n,r){var i=e[0],o=e[1],a=e[2];if(!a)return t;for(var s=0;s<n;s++){var u=r[s][0];if(0===r[s][1]||hf(a,u.xyBounds)){if(t.length){var c=!t[0],l=c?t[1][2]:t[0][2];return!c||i.importance<l.importance?t:[void 0,[o,a,i]]}return[void 0,[o,a,i]]}}return t.length&&t[0]?(t.push([o,a,i]),t.sort((function(t,e){return t[2].importance<e[2].importance?1:-1})).filter((function(t,e){return e<2}))):[[o,a,i]]}),[]).map((function(t){if(t)return[t[0],t[1]]}))}))}},{key:"mapSize2MercSize",value:function(t){var e=this,n=[this.width/2,this.height/2];this.xy2MercAsync_returnLayer(n).then((function(r){for(var i=r[0],o=r[1],a=[[n[0]-150,n[1]],[n[0]+150,n[1]],[n[0],n[1]-150],[n[0],n[1]+150]],s=[[0,0],[e.width,0],[e.width,e.height],[0,e.height]],u=[],c=0;c<9;c++){var l=c<4?e.xy2MercAsync_specifyLayer(a[c],i):4==c?Promise.resolve(o):e.xy2MercAsync_specifyLayer(s[c-5],0);u.push(l)}Promise.all(u).then((function(n){var r=(Math.sqrt(Math.pow(n[0][0]-n[1][0],2)+Math.pow(n[0][1]-n[1][1],2))+Math.sqrt(Math.pow(n[2][0]-n[3][0],2)+Math.pow(n[2][1]-n[3][1],2)))/2;e.mercZoom=Math.log(46962910.17841229/r)/Math.log(2)-3,e.homePosition=Fr(n[4]),e.envelope=Object(fi.polygon)([[n[5],n[6],n[7],n[8],n[5]]]),t(e)})).catch((function(t){throw t}))})).catch((function(t){throw t}))}},{key:"size2MercsAsync",value:function(t,e,n){var r=this,i=this.size2Xys(t,e,n).map((function(t,e){return 5==e?t:r.histMapCoords2Xy(t)}));return this.xy2MercAsync_returnLayer(i[0]).then((function(t){var e=t[0],n=t[1],o=i.map((function(t,i){return 5==i?t:0==i?Promise.resolve(n):r.xy2MercAsync_specifyLayer(t,e)}));return Promise.all(o).catch((function(t){throw t}))}))}},{key:"mercs2SizeAsync",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(n?Promise.resolve(t):this.merc2XyAsync_returnLayer(t[0]).then((function(n){var r=n[0]||n[1],i=r[0],o=r[1];return Promise.all(t.map((function(t,n){return 5==n?t:0==n?o:e.merc2XyAsync_specifyLayer(t,i)})))}))).then((function(t){return n||(t=t.map((function(t,n){return 5==n?t:e.xy2HistMapCoords(t)}))),e.xys2Size(t)}))}},{key:"mercs2XysAsync",value:function(t){var e=this;return this.merc2XyAsync_returnLayer(t[0]).then((function(n){var r=!1;return Promise.all(n.map((function(n,i){if(n){var o=n[0],a=n[1];return 0==i||r?Promise.all(t.map((function(t,n){return 5==n?t:0==n?Promise.resolve(a):e.merc2XyAsync_specifyLayer(t,o)}))):Promise.resolve([a])}r=!0})))})).then((function(t){return t.map((function(t){if(t)return t.map((function(t,n){return 5==n?t:e.xy2HistMapCoords(t)}))}))})).catch((function(t){throw t}))}},{key:"xy2MercAsync",value:function(t){var e=this.histMapCoords2Xy(t);return this.xy2MercAsync_returnLayer(e).then((function(t){return t[1]}))}},{key:"merc2XyAsync",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.merc2XyAsync_returnLayer(t).then((function(t){if(!n||t[0]){var r=t[0]?t[0][1]:t[1][1];return e.xy2HistMapCoords(r)}}))}}],r=[{key:"createAsync",value:(i=regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ty(e);case 2:return n=t.sent,e=n[0],(r=new s(e)).tins=n[1],Pr(i=new cr({code:"Illst:".concat(r.mapID),extent:[0,0,r.width,r.height],units:"m"})),Dr(i,"EPSG:3857",(function(t){return r.tins[0].transform(t,!1)}),(function(t){return r.tins[0].transform(t,!0)})),Xd("EPSG:4326",i),e.sub_maps&&e.sub_maps.map((function(t,e){var n=e+1,i="Illst:".concat(r.mapID,"#").concat(n),o=r.tins[n],a=new cr({code:i,extent:[o.xy[0],o.xy[1],o.wh[0],o.wh[1]],units:"m"});Pr(a),Dr(a,"EPSG:3857",(function(t){return o.transform(t,!1,!0)}),(function(t){return o.transform(t,!0,!0)})),Xd("EPSG:4326",a);var s=Object.assign([],t.bounds);s.push(t.bounds[0]);var u=s.map((function(t){return o.transform(t,!1)})),c=Object(fi.polygon)([s]),l=Object(fi.polygon)([u]);o.xyBounds=c,o.mercBounds=l})),t.abrupt("return",r);case 12:case"end":return t.stop()}}),t)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){sy(o,n,r,a,s,"next",t)}function s(t){sy(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}],n&&cy(e.prototype,n),r&&cy(e,r),s}(yd),gy="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==gy&&gy,vy="URLSearchParams"in gy,yy="Symbol"in gy&&"iterator"in Symbol,my="FileReader"in gy&&"Blob"in gy&&function(){try{return new Blob,!0}catch(t){return!1}}(),_y="FormData"in gy,by="ArrayBuffer"in gy;if(by)var xy=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],wy=ArrayBuffer.isView||function(t){return t&&xy.indexOf(Object.prototype.toString.call(t))>-1};function Ey(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function Sy(t){return"string"!=typeof t&&(t=String(t)),t}function Cy(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return yy&&(e[Symbol.iterator]=function(){return e}),e}function Ty(t){this.map={},t instanceof Ty?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function Iy(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function Oy(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function My(t){var e=new FileReader,n=Oy(e);return e.readAsArrayBuffer(t),n}function Py(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function Ly(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:my&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:_y&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:vy&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():by&&my&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=Py(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):by&&(ArrayBuffer.prototype.isPrototypeOf(t)||wy(t))?this._bodyArrayBuffer=Py(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):vy&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},my&&(this.blob=function(){var t=Iy(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=Iy(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(My)}),this.text=function(){var t,e,n,r=Iy(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=Oy(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_y&&(this.formData=function(){return this.text().then(ky)}),this.json=function(){return this.text().then(JSON.parse)},this}Ty.prototype.append=function(t,e){t=Ey(t),e=Sy(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},Ty.prototype.delete=function(t){delete this.map[Ey(t)]},Ty.prototype.get=function(t){return t=Ey(t),this.has(t)?this.map[t]:null},Ty.prototype.has=function(t){return this.map.hasOwnProperty(Ey(t))},Ty.prototype.set=function(t,e){this.map[Ey(t)]=Sy(e)},Ty.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},Ty.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),Cy(t)},Ty.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),Cy(t)},Ty.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),Cy(t)},yy&&(Ty.prototype[Symbol.iterator]=Ty.prototype.entries);var Ry=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Ay(t,e){if(!(this instanceof Ay))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(e=e||{}).body;if(t instanceof Ay){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new Ty(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new Ty(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),Ry.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function ky(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function Ny(t,e){if(!(this instanceof Ny))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new Ty(e.headers),this.url=e.url||"",this._initBody(t)}Ay.prototype.clone=function(){return new Ay(this,{body:this._bodyInit})},Ly.call(Ay.prototype),Ly.call(Ny.prototype),Ny.prototype.clone=function(){return new Ny(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Ty(this.headers),url:this.url})},Ny.error=function(){var t=new Ny(null,{status:0,statusText:""});return t.type="error",t};var Dy=[301,302,303,307,308];Ny.redirect=function(t,e){if(-1===Dy.indexOf(e))throw new RangeError("Invalid status code");return new Ny(null,{status:e,headers:{location:t}})};var Fy=gy.DOMException;try{new Fy}catch(t){(Fy=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),Fy.prototype.constructor=Fy}function jy(t,e){return new Promise((function(n,r){var i=new Ay(t,e);if(i.signal&&i.signal.aborted)return r(new Fy("Aborted","AbortError"));var o=new XMLHttpRequest;function a(){o.abort()}o.onload=function(){var t,e,r={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new Ty,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e)};r.url="responseURL"in o?o.responseURL:r.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;setTimeout((function(){n(new Ny(i,r))}),0)},o.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){r(new Fy("Aborted","AbortError"))}),0)},o.open(i.method,function(t){try{return""===t&&gy.location.href?gy.location.href:t}catch(e){return t}}(i.url),!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&(my?o.responseType="blob":by&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof Ty?i.headers.forEach((function(t,e){o.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){o.setRequestHeader(t,Sy(e.headers[t]))})),i.signal&&(i.signal.addEventListener("abort",a),o.onreadystatechange=function(){4===o.readyState&&i.signal.removeEventListener("abort",a)}),o.send(void 0===i._bodyInit?null:i._bodyInit)}))}jy.polyfill=!0,gy.fetch||(gy.fetch=jy,gy.Headers=Ty,gy.Request=Ay,gy.Response=Ny);function zy(t){return(zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function By(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Gy(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){By(o,r,i,a,s,"next",t)}function s(t){By(o,r,i,a,s,"throw",t)}a(void 0)}))}}var Xy={osm:{mapID:"osm",title:{ja:"オープンストリートマップ",en:"OpenStreetMap"},label:{ja:"OSM(現在)",en:"OSM(Now)"},attr:"©︎ OpenStreetMap contributors",maptype:"base",thumbnail:"assets/images/6345ee67d554fbfbf484ba4035ad19d9.jpg",urls:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png","https://c.tile.openstreetmap.org/{z}/{x}/{y}.png"]},gsi:{mapID:"gsi",title:{ja:"地理院地図",en:"Geospatial Information Authority of Japan Map"},label:{ja:"地理院地図",en:"GSI Map"},attr:{ja:"国土地理院",en:"The Geospatial Information Authority of Japan"},maptype:"base",url:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",maxZoom:18,thumbnail:"assets/images/b9ae27f0a01228380dff76a33b605707.jpg"},gsi_ortho:{mapID:"gsi_ortho",title:{ja:"地理院地図オルソ航空写真",en:"Geospatial Information Authority of Japan Ortho aerial photo"},label:{ja:"地理院オルソ",en:"GSI Ortho"},attr:{ja:"国土地理院",en:"The Geospatial Information Authority of Japan"},maptype:"base",url:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg",maxZoom:18,thumbnail:"assets/images/41b2cf0fa604d3f196ca52337d238219.jpg"}};function Uy(t,e){return qy.apply(this,arguments)}function qy(){return(qy=Gy(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e&&(e=Xy[e]),(e=ki(Object.assign(e,n))).label=e.label||e.year,"base"!==e.maptype&&"overlay"!==e.maptype&&"mapbox"!==e.maptype){t.next=22;break}return r="base"===e.maptype?Of:"overlay"===e.maptype?Td:Ff,e.zoomRestriction&&(e.maxZoom=e.maxZoom||e.mercMaxZoom,e.minZoom=e.minZoom||e.mercMinZoom),e.zoomRestriction=e.mercMaxZoom=e.mercMinZoom=void 0,e.translator&&(e.url=e.translator(e.url)),e.imageExtension||(e.imageExtension="jpg"),!e.mapID||e.url||e.urls||(e.url=e.tms?"tiles/".concat(e.mapID,"/{z}/{x}/{-y}.").concat(e.imageExtension):"tiles/".concat(e.mapID,"/{z}/{x}/{y}.").concat(e.imageExtension)),t.next=12,Yy(e);case 12:return e.weiwudi=t.sent,e.weiwudi&&(e.url=e.weiwudi.url,delete e.urls),t.next=16,r.createAsync(e);case 16:return i=t.sent,t.next=19,i.initialWait;case 19:return t.abrupt("return",i);case 22:if(!e.noload){t.next=25;break}return e.mercMaxZoom=e.mercMinZoom=void 0,t.abrupt("return",new dy(e));case 25:return t.abrupt("return",new Promise((function(t,n){var r=e.settingFile||"maps/".concat(e.mapID,".json"),i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType="json",i.onload=function(){var r=Gy(regeneratorRuntime.mark((function r(i){var o,a,s,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(200!==this.status&&0!==this.status){r.next=70;break}if(r.prev=1,"object"!=zy(o=this.response)&&(o=JSON.parse(o)),(e=ki(Object.assign(o,e))).label=e.label||o.year,e.translator&&(e.url=e.translator(e.url)),e.maptype||(e.maptype="maplat"),"base"!==e.maptype&&"overlay"!==e.maptype&&"mapbox"!==e.maptype){r.next=37;break}return a="base"===e.maptype?Of:"overlay"===e.maptype?Td:Ff,e.zoomRestriction&&(e.maxZoom=e.maxZoom||e.mercMaxZoom,e.minZoom=e.minZoom||e.mercMinZoom),e.zoomRestriction=e.mercMaxZoom=e.mercMinZoom=void 0,r.prev=12,e.imageExtension||(e.imageExtension="jpg"),!e.mapID||e.url||e.urls||(e.url=e.tms?"tiles/".concat(e.mapID,"/{z}/{x}/{-y}.").concat(e.imageExtension):"tiles/".concat(e.mapID,"/{z}/{x}/{y}.").concat(e.imageExtension)),r.next=17,Yy(e);case 17:return e.weiwudi=r.sent,e.weiwudi&&(e.url=e.weiwudi.url,delete e.urls),r.next=21,a.createAsync(e);case 21:return s=r.sent,r.prev=22,r.next=25,s.initialWait;case 25:t(s),r.next=31;break;case 28:r.prev=28,r.t0=r.catch(22),t(s);case 31:r.next=36;break;case 33:r.prev=33,r.t1=r.catch(12),n(r.t1);case 36:return r.abrupt("return");case 37:return r.prev=37,e.imageExtension||(e.imageExtension="jpg"),!e.mapID||e.url||e.urls||(e.url="tiles/".concat(e.mapID,"/{z}/{x}/{y}.").concat(e.imageExtension)),e.width=e.width||e.compiled.wh[0],e.height=e.height||e.compiled.wh[1],r.next=44,Yy(e);case 44:return e.weiwudi=r.sent,e.weiwudi&&(e.url=e.weiwudi.url,delete e.urls),r.next=48,dy.createAsync(e);case 48:return u=r.sent,r.prev=49,r.next=52,u.initialWait;case 52:u.mapSize2MercSize(t),r.next=58;break;case 55:r.prev=55,r.t2=r.catch(49),u.mapSize2MercSize(t);case 58:r.next=63;break;case 60:r.prev=60,r.t3=r.catch(37),n(r.t3);case 63:r.next=68;break;case 65:r.prev=65,r.t4=r.catch(1),n(r.t4);case 68:r.next=71;break;case 70:n("Fail to load map json");case 71:case"end":return r.stop()}}),r,this,[[1,65],[12,33],[22,28],[37,60],[49,55]])})));return function(t){return r.apply(this,arguments)}}(),i.send()})));case 26:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Yy(t){return Vy.apply(this,arguments)}function Vy(){return(Vy=Gy(regeneratorRuntime.mark((function t(e){var n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={},"mapbox"!==e.maptype&&e.enableCache){t.next=5;break}return t.abrupt("return");case 5:"base"===e.maptype||"overlay"===e.maptype?n.type="wmts":n.type="xyz";case 6:return n.url=e.urls?e.urls:e.url,n.width=e.width,n.height=e.height,n.maxZoom=e.maxZoom,n.minZoom=e.minZoom,(r=e.envelopeLngLats)&&(i=r.reduce((function(t,e){return t[0]=t[0]>e[0]?e[0]:t[0],t[1]=t[1]<e[0]?e[0]:t[1],t[2]=t[2]>e[1]?e[1]:t[2],t[3]=t[3]<e[1]?e[1]:t[3],t}),[1/0,-1/0,1/0,-1/0]),["minLng","maxLng","minLat","maxLat"].map((function(t,e){n[t]=i[e]}))),t.prev=13,t.next=16,Gd.registerMap(e.mapID,n);case 16:o=t.sent,t.next=21;break;case 19:t.prev=19,t.t0=t.catch(13);case 21:return t.abrupt("return",o);case 22:case"end":return t.stop()}}),t,null,[[13,19]])})))).apply(this,arguments)}var Hy={},Wy=n(133),Ky=n.n(Wy);function $y(t){var e=ki(Object.assign({},t));if(e.icon)return e;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=r.reduce((function(t,n){if(t)return t;var r=n.iconTemplate||n.iconTemplate;return r?JSON.parse(Ky()(r)(e)):n.icon?{icon:n.icon,selectedIcon:n.selectedIcon||n.selectedIcon}:void 0}),void 0);return o&&(e.icon=o.icon,e.selectedIcon=o.selectedIcon),e}function Zy(t){if((t=ki(t)).html)return t;for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(e,n){if(e)return e;var r=n.poiTemplate;return r?(t.html=Ky()(r)(t),t.poiStyle=t.poiStyle||n.poiStyle,t):void 0}),void 0)||t}function Jy(t){return(Jy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qy(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function tm(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Qy(o,r,i,a,s,"next",t)}function s(t){Qy(o,r,i,a,s,"throw",t)}a(void 0)}))}}function em(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nm(t,e){return(nm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=om(t);if(e){var i=om(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return im(this,n)}}function im(t,e){return!e||"object"!==Jy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function om(t){return(om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var am=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nm(t,e)}(d,t);var e,n,r,i,o,a,s,u,c,l,h,p,f=rm(d);function d(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(e=f.call(this)).translateUI=!1,e.noRotate=!1,e.initialRestore={},e.mapDiv="map_div",e.restoreSession=!1,e.stateBuffer={},e.overlay=!0,e.appLang="ja",e.timer=void 0,e.startFrom="",e.vectors=[],e.__backMapMoving=!1,e.__init=!0,e.__redrawMarkerBlock=!1,e.__redrawMarkerThrottle=[],t=ki(t),e.appid=t.appid||"sample",t.mapboxgl&&(e.mapboxgl=t.mapboxgl,t.mapboxToken&&(e.mapboxgl.accessToken=t.mapboxToken)),e.mapDiv=t.div||"map_div",e.mapDivDocument=document.querySelector("#".concat(e.mapDiv)),e.mapDivDocument.classList.add("maplat"),e.logger=new Ye(t.debug?qe.ALL:qe.INFO),e.enableCache=t.enableCache||!1,e.icon=t.icon,e.selectedIcon=t.selectedIcon,e.translateUI=t.translateUI;var n=t.setting;if(e.lang=t.lang,e.lang||(e.lang=Xe()),"zh-hk"!=e.lang.toLowerCase()&&"zh-hant"!=e.lang.toLowerCase()||(e.lang="zh-TW"),t.restore)t.restoreSession&&(e.restoreSession=!0),e.initialRestore=t.restore;else if(t.restoreSession){e.restoreSession=!0;var r=parseInt(localStorage.getItem("epoch")||"0"),i=Math.floor((new Date).getTime()/1e3);r&&i-r<3600&&(e.initialRestore.mapID=localStorage.getItem("mapID")||localStorage.getItem("sourceID")||void 0,e.initialRestore.backgroundID=localStorage.getItem("backgroundID")||localStorage.getItem("backID")||void 0,e.initialRestore.position={x:parseFloat(localStorage.getItem("x")||"0"),y:parseFloat(localStorage.getItem("y")||"0"),zoom:parseFloat(localStorage.getItem("zoom")||"0"),rotation:parseFloat(localStorage.getItem("rotation")||"0")},e.initialRestore.transparency=parseFloat(localStorage.getItem("transparency")||"0"),e.initialRestore.hideMarker=parseInt(localStorage.getItem("hideMarker")||"0"),e.initialRestore.hideLayer=localStorage.getItem("hideLayer")||void 0)}for(var o=Li('<img id="center_circle" class="prevent-default" alt="" style="position:absolute;top:50%;left:50%;margin-top:-10px; margin-left:-10px;" src="'.concat("assets/images/7df82bae917b68159f84998182f2fdc6.png",'">')),a=o.length-1;a>=0;a--)e.mapDivDocument.insertBefore(o[a],e.mapDivDocument.firstChild);for(var s=e.mapDivDocument.querySelectorAll(".prevent-default"),u=0;u<s.length;u++){s[u].addEventListener("touchstart",(function(t){t.preventDefault()}))}return e.overlay=!("overlay"in t)||t.overlay,e.overlay&&e.mapDivDocument.classList.add("with-opacity"),e.waitReady=e.settingLoader(n).then((function(n){return e.handleSetting(n,t)})),e}return e=d,(n=[{key:"settingLoader",value:(p=tm(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e||new Promise((function(t,e){var r=new XMLHttpRequest;r.open("GET","apps/".concat(n.appid,".json"),!0),r.responseType="json",r.onload=function(e){var n=this.response;"object"!=Jy(n)&&(n=JSON.parse(n)),t(n)},r.send()})));case 1:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)})},{key:"i18nLoader",value:(h=tm(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=0!=Object.keys(Hy).length;(e.translateUI&&!r?Ce.use(ke):Ce).init({lng:e.lang,fallbackLng:["en"],backend:{loadPath:"assets/locales/{{lng}}/{{ns}}.json"},resources:r?Hy:void 0},(function(e,n){t([n,Ce])}))})));case 1:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"sourcesLoader",value:(l=tm(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=this.appData.sources,r=[],i={homePosition:e.homePos,mercZoom:e.defZoom,zoomRestriction:e.zoomRestriction,mercMinZoom:e.mercMinZoom,mercMaxZoom:e.mercMaxZoom,enableCache:this.enableCache,translator:function(t){return s.translate(t)}},o=0;o<n.length;o++)a=n[o],r.push(Uy(a,i));return t.abrupt("return",Promise.all(r));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"handleSetting",value:function(t,e){var n=this;return this.appData=ki(t),!this.lang&&this.appData.lang&&(this.lang=this.appData.lang),this.i18nLoader().then((function(t){return n.handleI18n(t,e)}))}},{key:"handleI18n",value:function(t,e){var n=this;this.i18n=t[1],this.t=t[0];var r=this.prepareMap(e);return ui(this.appData.pois||[],this).then((function(t){return n.handlePois(t,r)}))}},{key:"prepareMap",value:function(t){t=ki(t),this.mercBuffer=null;var e=this.appData.homePosition,n=this.appData.defaultZoom,r=this.appData.zoomRestriction,i=this.appData.minZoom,o=this.appData.maxZoom;this.appName=this.appData.appName;var a=!!t.fake&&this.appData.fakeGps,s=!!t.fake&&this.appData.fakeRadius;this.appLang=this.appData.lang||"ja",this.noRotate=t.noRotate||this.appData.noRotate||!1,this.poiTemplate=t.poiTemplate||this.appData.poiTemplate||!1,this.poiStyle=t.poiStyle||this.appData.poiStyle||!1,this.iconTemplate=t.iconTemplate||this.appData.iconTemplate||!1,this.currentPosition=null,this.__init=!0,this.dispatchEvent(new Ge("uiPrepare"));var u="".concat(this.mapDiv,"_front"),c=Li('<div id="'.concat(u,'" class="map" style="top:0; left:0; right:0; bottom:0; ')+'position:absolute;"></div>')[0];this.mapDivDocument.insertBefore(c,this.mapDivDocument.firstChild),this.mapObject=new od({div:u,controls:this.appData.controls||[],interactions:this.noRotate?ec({altShiftDragRotate:!1,pinchRotate:!1}):ec().extend([new sd({condition:uu})]),fakeGps:a,fakeRadius:s,homePosition:e});var l=null;if(this.overlay&&(l="".concat(this.mapDiv,"_back"),c=Li('<div id="'.concat(l,'" class="map" style="top:0; left:0; right:0; bottom:0; ')+'position:absolute;"></div>')[0],this.mapDivDocument.insertBefore(c,this.mapDivDocument.firstChild),this.backMap=new od({off_control:!0,div:l})),this.mapboxgl){var h=this.mapboxgl;delete this.mapboxgl;var p="".concat(this.mapDiv,"_mapbox");c=Li('<div id="'.concat(p,'" class="map" style="top:0; left:0; right:0; bottom:0; ')+'position:absolute;visibility:hidden;"></div>')[0],this.mapDivDocument.insertBefore(c,this.mapDivDocument.firstChild),this.mapboxMap=new h.Map({attributionControl:!1,boxZoom:!1,container:p,doubleClickZoom:!1,dragPan:!1,dragRotate:!1,interactive:!1,keyboard:!1,pitchWithRotate:!1,scrollZoom:!1,touchZoomRotate:!1})}return this.startFrom=this.appData.startFrom,{homePos:e,defZoom:n,zoomRestriction:r,mercMinZoom:i,mercMaxZoom:o}}},{key:"handlePois",value:function(t,e){var n=this;return this.pois=t,this.sourcesLoader(e).then((function(t){return n.handleSources(t)}))}},{key:"handleSources",value:function(t){this.mercSrc=t.reduce((function(t,e){return t||(e instanceof Of&&!(e instanceof Td)?e:void 0)}),null);var e=[];this.cacheHash={};for(var n=0;n<t.length;n++){var r=t[n];if(r._map=this.mapObject,r instanceof Ff){if(!this.mapboxMap)throw"To use mapbox gl based base map, you have to make Maplat object with specifying 'mapboxgl' option.";r.mapboxMap=this.mapboxMap}e.push(r),this.cacheHash[r.mapID]=r}this.dispatchEvent(new Ge("sourceLoaded",t)),this.setInitialMap(e),this.setMapClick(),this.setPointerEvents(),this.setMapOnOff(),this.setMouseCursor(),this.setBackMapBehavior(),this.raiseChangeViewPoint()}},{key:"setInitialMap",value:(c=tm(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.initialRestore.mapID||this.startFrom||e[e.length-1].mapID,this.from=e.reduce((function(t,e){return t?t instanceof yd||e.mapID==n?t:e:e.mapID!=n?e:t}),void 0),t.next=4,this.changeMap(n,this.initialRestore);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"setMapClick",value:function(){var t=this;this.mapObject.on("click",(function(e){t.logger.debug(e.pixel),t.lastClickEvent=e;var n=[];if(e.target.forEachFeatureAtPixel(e.pixel,(function(r){t.logger.debug(e.pixel),r.get("datum")&&n.push(r.get("datum"))})),n.length>0)t.dispatchEvent(new Ge("clickMarker",n[0])),t.dispatchEvent(new Ge("clickMarkers",n));else{var r=e.coordinate;t.dispatchEvent(new Ge("clickMapXy",r)),t.from.xy2MercAsync(r).then((function(e){t.dispatchEvent(new Ge("clickMapMerc",e));var n=Gr(e,"EPSG:3857","EPSG:4326");t.dispatchEvent(new Ge("clickMap",{longitude:n[0],latitude:n[1]}))}))}}))}},{key:"setPointerEvents",value:function(){var t,e=this,n=!1,r=!1,i={},o=function r(i){e.dispatchEvent(new Ge("pointerMoveOnMapXy",i)),e.from.xy2MercAsync(i).then((function(i){if(e.dispatchEvent(new Ge("pointerMoveOnMapMerc",i)),t){var o=t;t=!1,r(o)}else n=!1}))};this.mapObject.on("pointermove",(function(e){r||(n?t=e.coordinate:(n=!0,o(e.coordinate)))})),this.mapObject.on("pointerdown",(function(t){t.originalEvent&&null!=t.originalEvent.pointerId&&(i[t.originalEvent.pointerId]=!0),r=!0})),this.mapObject.on("pointerdrag",(function(t){t.originalEvent&&null!=t.originalEvent.pointerId&&(i[t.originalEvent.pointerId]=!0),r=!0})),this.mapObject.on("pointerup",(function(t){t.originalEvent&&null!=t.originalEvent.pointerId?(delete i[t.originalEvent.pointerId],0==Object.keys(i).length&&(r=!1)):t.originalEvent&&t.originalEvent.touches?0==t.originalEvent.touches.length&&(r=!1):r=!1}))}},{key:"setMapOnOff",value:function(){var t,e=this;this.mapObject.on("click",(function(){t&&(clearTimeout(t),t=void 0);for(var n=e.mapDivDocument.querySelectorAll(".ol-control"),r=0;r<n.length;r++)n[r].classList.remove("fade")})),this.mapObject.on("pointerdrag",(function(){t&&(clearTimeout(t),t=void 0);for(var n=e.mapDivDocument.querySelectorAll(".ol-control"),r=0;r<n.length;r++)n[r].classList.add("fade")})),this.mapObject.on("moveend",(function(){t&&(clearTimeout(t),t=void 0),t=setTimeout((function(){t=void 0;for(var n=e.mapDivDocument.querySelectorAll(".ol-control"),r=0;r<n.length;r++)n[r].classList.remove("fade")}),3e3)}))}},{key:"setMouseCursor",value:function(){var t=this;this.mapObject.on("pointermove",(function(e){var n=e.target.getEventPixel(e.originalEvent),r=e.target.hasFeatureAtPixel(n),i=e.target.getTarget();if(r){var o=e.target.forEachFeatureAtPixel(e.pixel,(function(t){if(t.get("datum"))return t}));t.mapDivDocument.querySelector("#".concat(i)).style.cursor=o?"pointer":""}else t.mapDivDocument.querySelector("#".concat(i)).style.cursor=""})),this.mapObject.on("moveend",(function(e){var n=e.frameState.viewState.center,r=t.from;r.insideCheckHistMapCoords(n)||(n=r.modulateHistMapCoordsInside(n),e.target.getView().setCenter(n))}))}},{key:"setBackMapBehavior",value:function(){var t=this;this.mapObject.on("postrender",(function(e){if(t.backMap)if(t.__backMapMoving)t.logger.debug("Backmap moving skipped");else{var n=t.backMap.getSource();n&&(t.__backMapMoving=!0,t.logger.debug("Backmap moving started"),t.convertParametersFromCurrent(n,(function(e){var n=t.backMap.getView();n.setCenter(e[0]),n.setZoom(e[1]),n.setRotation(t.noRotate?0:e[2]),t.logger.debug("Backmap moving ended"),t.__backMapMoving=!1})))}}))}},{key:"raiseChangeViewPoint",value:function(){var t=this;this.mapObject.on("postrender",(function(e){var n=t.mapObject.getView(),r=n.getCenter(),i=n.getDecimalZoom(),o=Ri(180*n.getRotation()/Math.PI);t.from.size2MercsAsync().then((function(e){return t.mercSrc.mercs2SizeAsync(e)})).then((function(e){if(!t.mobileMapMoveBuffer||t.mobileMapMoveBuffer[0][0]!=e[0][0]||t.mobileMapMoveBuffer[0][1]!=e[0][1]||t.mobileMapMoveBuffer[1]!=e[1]||t.mobileMapMoveBuffer[2]!=e[2]){t.mobileMapMoveBuffer=e;var n=Gr(e[0],"EPSG:3857","EPSG:4326"),a=Ri(180*e[2]/Math.PI);t.dispatchEvent(new Ge("changeViewpoint",{x:r[0],y:r[1],longitude:n[0],latitude:n[1],mercator_x:e[0][0],mercator_y:e[0][1],zoom:i,mercZoom:e[1],direction:a,rotation:o})),t.requestUpdateState({position:{x:r[0],y:r[1],zoom:i,rotation:o}})}}))}))}},{key:"currentMapInfo",value:function(){return Ai(this.from)}},{key:"mapInfo",value:function(t){return Ai(this.cacheHash[t])}},{key:"setMarker",value:function(t){var e=this;this.logger.debug(t);var n,r=t.lnglat||[t.lng||t.longitude,t.lat||t.latitude],i=t.x,o=t.y,a=t.coordinates,s=this.from,u=t.icon?this.__selectedMarker==t.namespaceID&&t.selectedIcon?t.selectedIcon:t.icon:this.__selectedMarker==t.namespaceID?"assets/images/f115726e6249018905cca51653e1262c.png":Hf;return(a?s.merc2XyAsync(a,!0):i&&o?new Promise((function(t){t(s.xy2HistMapCoords([i,o]))})):(n=Gr(r,"EPSG:4326","EPSG:3857"),s.merc2XyAsync(n,!0))).then((function(n){n&&s.insideCheckHistMapCoords(n)&&e.mapObject.setMarker(n,{datum:t},u)}))}},{key:"resetMarker",value:function(){this.mapObject.resetMarker()}},{key:"setLine",value:function(t){t.type="Line",!t.style&&t.stroke&&(t.style={stroke:t.stroke}),this.setVector(t)}},{key:"setVector",value:function(t){var e=this;this.logger.debug(t);var n=function t(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Promise.all(n.map((function(n){return Array.isArray(n[0])?t(n,r):(r&&(n=Gr(n,"EPSG:4326","EPSG:3857")),e.from.merc2XyAsync(n))})))};(t.coordinates?n(t.coordinates):n(t.lnglats,!0)).then((function(n){e.mapObject.setVector(n,t.type,t.style)}))}},{key:"resetLine",value:function(){this.resetVector()}},{key:"resetVector",value:function(){this.mapObject.resetVector()}},{key:"redrawMarkers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(e||(e=this.from),this.__redrawMarkerBlock){this.__redrawMarkerThrottle||(this.__redrawMarkerThrottle=[]);var n=this.__redrawMarkerThrottle;if(0==n.length||n[n.length-1]!==e)return void n.push(e)}this.__redrawMarkerBlock=!0;var r=function e(n){var r,i=[];t.resetMarker(),t.stateBuffer.hideMarker||(Object.keys(t.pois).map((function(e){var n=t.pois[e];n.hide||n.pois.map((function(e){var o=$y(e,n,t);Zy(o,n,t),t.__selectedMarker==o.namespaceID?r=o:i.push(t.setMarker(o))}))})),n.pois&&Object.keys(n.pois).map((function(e){var o=n.pois[e];o.hide||o.pois.map((function(e){var a=$y(e,o,n,t);Zy(a,o,n,t),t.__selectedMarker==a.namespaceID?r=a:i.push(t.setMarker(a))}))})));var o=Promise.all(i);r&&(o=o.then((function(){return t.setMarker(r)}))),o.then((function(){t.__redrawMarkerThrottle&&t.__redrawMarkerThrottle.length>0?e(t.__redrawMarkerThrottle.shift()):t.__redrawMarkerBlock=!1}))};r(e)}},{key:"selectMarker",value:function(t){var e=this.getMarker(t);if(e){this.__selectedMarker=t;var n={latitude:e.lnglat?e.lnglat[1]:e.lat?e.lat:e.latitude,longitude:e.lnglat?e.lnglat[0]:e.lng?e.lng:e.longitude};this.setViewpoint(n),this.redrawMarkers()}}},{key:"unselectMarker",value:function(){delete this.__selectedMarker,this.redrawMarkers()}},{key:"getMarker",value:function(t){var e=this;if(t.indexOf("#")<0){var n=void 0;return Object.keys(this.pois).map((function(r){e.pois[r].pois.map((function(i,o){i.id==t&&(n=e.pois[r].pois[o])}))})),n}var r=t.split("#"),i=this.cacheHash[r[0]];if(i)return i.getPoi(r[1])}},{key:"updateMarker",value:function(t,e,n){var r=this.getMarker(t);r&&(e=hi(e||{}),n?(Object.keys(r).map((function(t){"id"!=t&&"namespaceID"!=t&&delete r[t]})),Object.assign(r,e)):Object.keys(e).map((function(t){"id"!=t&&"namespaceID"!=t&&("____delete____"==e[t]?delete r[t]:r[t]=e[t])})),this.redrawMarkers())}},{key:"addMarker",value:function(t,e){if(e||(e="main"),e.indexOf("#")<0){if(this.pois[e])return this.pois[e].pois.push(hi(t)),pi(this.pois,e,{name:this.appName}),this.dispatchPoiNumber(),this.redrawMarkers(),t.namespaceID}else{var n=e.split("#"),r=this.cacheHash[n[0]];if(r){var i=r.addPoi(t,n[1]);return this.dispatchPoiNumber(),this.redrawMarkers(),i}}}},{key:"removeMarker",value:function(t){var e=this;if(t.indexOf("#")<0)Object.keys(this.pois).map((function(n){e.pois[n].pois.map((function(r,i){r.id==t&&(delete e.pois[n].pois[i],e.dispatchPoiNumber(),e.redrawMarkers())}))}));else{var n=t.split("#"),r=this.cacheHash[n[0]];r&&(r.removePoi(n[1]),this.dispatchPoiNumber(),this.redrawMarkers())}}},{key:"clearMarker",value:function(t){var e=this;if(t||(t="main"),t.indexOf("#")<0){if("all"==t)Object.keys(this.pois).map((function(t){e.pois[t].pois=[]}));else{if(!this.pois[t])return;this.pois[t].pois=[]}this.dispatchPoiNumber(),this.redrawMarkers()}else{var n=t.split("#"),r=this.cacheHash[n[0]];r&&(r.clearPoi(n[1]),this.dispatchPoiNumber(),this.redrawMarkers())}}},{key:"showAllMarkers",value:function(){this.requestUpdateState({hideMarker:0}),this.redrawMarkers()}},{key:"hideAllMarkers",value:function(){this.requestUpdateState({hideMarker:1}),this.redrawMarkers()}},{key:"dispatchPoiNumber",value:function(){this.dispatchEvent(new Ge("poi_number",this.listPoiLayers(!1,!0).reduce((function(t,e){return t+e.pois.length}),0)))}},{key:"listPoiLayers",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object.keys(this.pois).sort((function(t,e){return"main"==t?-1:"main"==e?1:t<e?-1:t>e?1:0})).map((function(e){return t.pois[e]})).filter((function(t){return n?e?t.pois.length&&t.hide:t.pois.length:!e||t.hide})),i=this.from.listPoiLayers(e,n);return r.concat(i)}},{key:"showPoiLayer",value:function(t){var e=this.getPoiLayer(t);e&&(delete e.hide,this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map((function(t){return t.namespaceID})).join(",")}),this.redrawMarkers())}},{key:"hidePoiLayer",value:function(t){var e=this.getPoiLayer(t);e&&(e.hide=!0,this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map((function(t){return t.namespaceID})).join(",")}),this.redrawMarkers())}},{key:"getPoiLayer",value:function(t){if(t.indexOf("#")<0)return this.pois[t];var e=t.split("#"),n=this.cacheHash[e[0]];return n?n.getPoiLayer(e[1]):void 0}},{key:"addPoiLayer",value:function(t,e){if("main"!=t&&!this.pois[t])if(t.indexOf("#")<0)this.pois[t]=li(e||[],t,{name:this.appName}),this.redrawMarkers();else{var n=t.split("#"),r=this.cacheHash[n[0]];r&&(r.addPoiLayer(n[1],e),this.redrawMarkers())}}},{key:"removePoiLayer",value:function(t){if("main"!=t&&this.pois[t])if(t.indexOf("#")<0)delete this.pois[t],this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map((function(t){return t.namespaceID})).join(",")}),this.dispatchPoiNumber(),this.redrawMarkers();else{var e=t.split("#"),n=this.cacheHash[e[0]];n&&(n.removePoiLayer(e[1]),this.requestUpdateState({hideLayer:this.listPoiLayers(!0).map((function(t){return t.namespaceID})).join(",")}),this.dispatchPoiNumber(),this.redrawMarkers())}}},{key:"addLine",value:function(t){this.vectors.push(t),this.setLine(t)}},{key:"addVector",value:function(t){this.vectors.push(t),this.setVector(t)}},{key:"clearLine",value:function(){this.vectors=[],this.resetLine()}},{key:"clearVector",value:function(){this.vectors=[],this.resetVector()}},{key:"setGPSMarker",value:function(t){this.currentPosition=t,this.from.setGPSMarker(t,!0)}},{key:"changeMap",value:function(t,e){var n=this;void 0===e&&(e={});var r=this.mercSrc,i=this.cacheHash[t];return this.changeMapSeq||(this.changeMapSeq=Promise.resolve()),this.changeMapSeq=this.changeMapSeq.then((function(){return new Promise((function(t,o){n.convertParametersFromCurrent(i,(function(o){var a=null,s=null,u=e.backgroundID?n.cacheHash[e.backgroundID]:void 0;if(n.backMap&&(a=n.backMap.getSource(),i instanceof Of?n.backMap.exchangeSource():(u?(s=u,n.backMap.exchangeSource(s)):a?s=a:(s=r,n.from instanceof Of&&(s=n.from instanceof Td?n.mapObject.getSource():n.from),n.backMap.exchangeSource(s)),n.requestUpdateState({backgroundID:s.mapID}))),i instanceof Td){if(n.mapObject.setLayer(i),u)n.mapObject.exchangeSource(u);else if(!(n.from instanceof Of)){var c=a||r;n.mapObject.exchangeSource(c)}n.requestUpdateState({backgroundID:n.mapObject.getSource().mapID})}else n.mapObject.setLayer(),n.mapObject.exchangeSource(i);var l={mapID:i.mapID};i instanceof Of&&!(i instanceof Td)&&(l.backgroundID="____delete____"),n.requestUpdateState(l),n.from=i,n.dispatchPoiNumber();var h,p=n.mapObject.getView();n.appData.zoomRestriction&&(p.setMaxZoom(i.maxZoom),p.setMinZoom(i.minZoom||0)),i.insideCheckHistMapCoords(o[0])?(p.setCenter(o[0]),p.setZoom(o[1]),p.setRotation(n.noRotate?0:o[2])):n.__init||(n.dispatchEvent(new Ge("outOfMap",{})),i.goHome()),i.setGPSMarker(n.currentPosition,!0),e.hideLayer&&(e.hideLayer.split(",").map((function(t){var e=n.getPoiLayer(t);e&&(e.hide=!0)})),n.requestUpdateState({hideLayer:e.hideLayer})),e.hideMarker?n.hideAllMarkers():n.redrawMarkers(),n.resetVector();for(var f=0;f<n.vectors.length;f++)h=n.vectors[f],n.setVector(h);n.dispatchEvent(new Ge("mapChanged",n.getMapMeta(i.mapID))),n.mapObject.updateSize(),n.mapObject.renderSync(),e.position&&(n.__init=!1,i.setViewpoint(e.position)),e.transparency&&n.setTransparency(e.transparency),n.__init?(n.__init=!1,i.goHome()):n.backMap&&s&&n.convertParametersFromCurrent(s,(function(t){var e=n.backMap.getView();e.setCenter(t[0]),e.setZoom(t[1]),e.setRotation(n.noRotate?0:t[2]),n.backMap.updateSize(),n.backMap.renderSync()})),t(void 0)}))}))}))}},{key:"requestUpdateState",value:function(t){var e=this;if(this.stateBuffer=Object.assign(this.stateBuffer,t),"____delete____"==this.stateBuffer.backgroundID&&delete this.stateBuffer.backgroundID,this.restoreSession){var n=Math.floor((new Date).getTime()/1e3);localStorage.setItem("epoch","".concat(n)),function t(e){Object.keys(e).map((function(n){"position"==n?t(e[n]):"backgroundID"==n&&"____delete____"==e[n]?localStorage.removeItem(n):localStorage.setItem(n,e[n])}))}(t)}this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.timer=void 0,e.dispatchEvent(new Ge("updateState",e.stateBuffer))}),50)}},{key:"setTransparency",value:function(t){this.__transparency=t,this.mapObject.setTransparency(t),this.requestUpdateState({transparency:t})}},{key:"getTransparency",value:function(){return null==this.__transparency?0:this.__transparency}},{key:"setViewpoint",value:function(t){this.from.setViewpoint(t)}},{key:"getMapMeta",value:function(t){var e;if(e=t?this.cacheHash[t]:this.from)return Ii.reduce((function(t,n){return t[n]=e[n],t}),{mapID:e.mapID,label:e.label})}},{key:"getMapCacheEnable",value:function(t){var e;return!!(e=t?this.cacheHash[t]:this.from)&&e.getCacheEnable()}},{key:"getMapTileCacheStatsAsync",value:(u=tm(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e?this.cacheHash[e]:this.from){t.next=3;break}return t.abrupt("return",{});case 3:return t.next=5,n.getTileCacheStatsAsync();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"getMapTileCacheSizeAsync",value:(s=tm(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMapTileCacheStatsAsync(e);case 2:return n=t.sent,t.abrupt("return",n.size||0);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"clearMapTileCacheAsync",value:(a=tm(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e?this.cacheHash[e]:this.from){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.clearTileCacheAsync();case 5:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"fetchAllMapTileCacheAsync",value:(o=tm(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e?this.cacheHash[e]:this.from){t.next=4;break}return n("stop",{}),t.abrupt("return");case 4:return t.next=6,r.fetchAllTileCacheAsync(n);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"cancelMapTileCacheAsync",value:(i=tm(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e?this.cacheHash[e]:this.from){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n.cancelTileCacheAsync();case 5:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"convertParametersFromCurrent",value:function(t,e){var n=this,r=this.mapObject.getView(),i=this.from.size2MercsAsync(),o=zf([r.getCenter(),r.getZoom(),r.getRotation()],10);if(this.mercBuffer&&this.mercBuffer.mercs&&this.mercBuffer.buffer[this.from.mapID]){var a=this.mercBuffer.buffer[this.from.mapID];a[0][0]==o[0][0]&&a[0][1]==o[0][1]&&a[1]==o[1]&&a[2]==o[2]?(this.logger.debug(a),this.logger.debug(o),this.logger.debug("From: Use buffer"),i=new Promise((function(t,e){t(n.mercBuffer.mercs)}))):(this.mercBuffer={buffer:{}},this.mercBuffer.buffer[this.from.mapID]=o)}else this.mercBuffer={buffer:{}},this.mercBuffer.buffer[this.from.mapID]=o;this.logger.debug("From: Center: ".concat(o[0]," Zoom: ").concat(o[1]," Rotation: ").concat(o[2])),this.logger.debug("From: ".concat(this.from.mapID)),i.then((function(r){n.mercBuffer.mercs=r,n.logger.debug("Mercs: ".concat(r));var i=t.mercs2SizeAsync(r),o=t.mapID;n.mercBuffer.buffer[o]&&(n.logger.debug("To: Use buffer"),i=new Promise((function(t,e){t(n.mercBuffer.buffer[o])}))),i.then((function(r){n.logger.debug("To: Center: ".concat(r[0]," Zoom: ").concat(r[1]," Rotation: ").concat(r[2])),n.logger.debug("To: ".concat(t.mapID)),n.mercBuffer.buffer[t.mapID]=zf(r,10),e(r)})).catch((function(t){throw t}))})).catch((function(t){throw t}))}},{key:"translate",value:function(t){var e=this;if(!t||"string"==typeof t)return t;var n=Object.keys(t),r=n.reduce((function(n,r,i,o){return r==e.appLang?n=[t[r],!0]:n&&("en"!=r||n[1])||(n=[t[r],!1]),i==o.length-1?n[0]:n}),void 0);if(r="string"==typeof r?r:"".concat(r),this.i18n.exists(r,{ns:"translation",nsSeparator:"__X__yX__X__"}))return this.t(r,{ns:"translation",nsSeparator:"__X__yX__X__"});for(var i=0;i<n.length;i++){var o=n[i];this.i18n.addResource(o,"translation",r,t[o])}return this.t(r,{ns:"translation",nsSeparator:"__X__yX__X__"})}},{key:"remove",value:function(){this.mapboxMap&&this.mapboxMap.remove(),this.mapDivDocument.innerHTML="",this.mapDivDocument.classList.remove("maplat")}}])&&em(e.prototype,n),r&&em(e,r),d}(kt.a),sm=n(180);function um(t){return(um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cm(t,e){return(cm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pm(t);if(e){var i=pm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return hm(this,n)}}function hm(t,e){return!e||"object"!==um(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pm(t){return(pm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fm,dm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cm(t,e)}(n,t);var e=lm(n);function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(r=e.call(this,t)).Internal.setItemListener=function(t,e){var n,r=this;t&&"function"==typeof this.items[e].callback&&(n=this.items[e].callback,t.addEventListener("pointerdown",(function(t){t.stopPropagation()})),t.addEventListener("click",(function(t){t.preventDefault();var i={coordinate:r.getCoordinateClicked(),data:r.items[e].data||null};n(i,r.map)||r.closeMenu()}),!1))},r}return n}(n.n(sm).a),gm=n(181);(function(){function t(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var i=[],o=this.data.charCodeAt(e);o>65536?(i[0]=240|(1835008&o)>>>18,i[1]=128|(258048&o)>>>12,i[2]=128|(4032&o)>>>6,i[3]=128|63&o):o>2048?(i[0]=224|(61440&o)>>>12,i[1]=128|(4032&o)>>>6,i[2]=128|63&o):o>128?(i[0]=192|(1984&o)>>>6,i[1]=128|63&o):i[0]=o,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(this.modules[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=p.getLostPoint(this);(0==n||t>r)&&(t=r,e=n)}return e},createMovieClip:function(t,e,n){var r=t.createEmptyMovieClip(e,n);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,a=0;a<this.modules[i].length;a++){var s=1*a;this.modules[i][a]&&(r.beginFill(0,100),r.moveTo(s,o),r.lineTo(s+1,o),r.lineTo(s+1,o+1),r.lineTo(s,o+1),r.endFill())}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=p.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(null==this.modules[r][i])for(var o=-2;o<=2;o++)for(var a=-2;a<=2;a++)this.modules[r+o][i+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},setupTypeNumber:function(t){for(var e=p.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=p.getBCHTypeInfo(n),i=0;i<15;i++){var o=!t&&1==(r>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(i=0;i<15;i++){o=!t&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;s<2;s++)if(null==this.modules[r][a-s]){var u=!1;o<t.length&&(u=1==(t[o]>>>i&1)),p.getMask(e,r,a-s)&&(u=!u),this.modules[r][a-s]=u,-1==--i&&(o++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,r){for(var i=v.getRSBlocks(t,n),o=new y,a=0;a<r.length;a++){var s=r[a];o.put(s.mode,4),o.put(s.getLength(),p.getLengthInBits(s.mode,t)),s.write(o)}var u=0;for(a=0;a<i.length;a++)u+=i[a].dataCount;if(o.getLengthInBits()>8*u)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*u+")");for(o.getLengthInBits()+4<=8*u&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*u||(o.put(e.PAD0,8),o.getLengthInBits()>=8*u));)o.put(e.PAD1,8);return e.createBytes(o,i)},e.createBytes=function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s++){var u=e[s].dataCount,c=e[s].totalCount-u;r=Math.max(r,u),i=Math.max(i,c),o[s]=new Array(u);for(var l=0;l<o[s].length;l++)o[s][l]=255&t.buffer[l+n];n+=u;var h=p.getErrorCorrectPolynomial(c),f=new g(o[s],h.getLength()-1).mod(h);a[s]=new Array(h.getLength()-1);for(l=0;l<a[s].length;l++){var d=l+f.getLength()-a[s].length;a[s][l]=d>=0?f.get(d):0}}var v=0;for(l=0;l<e.length;l++)v+=e[l].totalCount;var y=new Array(v),m=0;for(l=0;l<r;l++)for(s=0;s<e.length;s++)l<o[s].length&&(y[m++]=o[s][l]);for(l=0;l<i;l++)for(s=0;s<e.length;s++)l<a[s].length&&(y[m++]=a[s][l]);return y};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},i=0,o=1,a=2,s=3,u=4,c=5,l=6,h=7,p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;p.getBCHDigit(e)-p.getBCHDigit(p.G15)>=0;)e^=p.G15<<p.getBCHDigit(e)-p.getBCHDigit(p.G15);return(t<<10|e)^p.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;p.getBCHDigit(e)-p.getBCHDigit(p.G18)>=0;)e^=p.G18<<p.getBCHDigit(e)-p.getBCHDigit(p.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return p.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case i:return(e+n)%2==0;case o:return e%2==0;case a:return n%3==0;case s:return(e+n)%3==0;case u:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case c:return e*n%2+e*n%3==0;case l:return(e*n%2+e*n%3)%2==0;case h:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new g([1],0),n=0;n<t;n++)e=e.multiply(new g([1,f.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var o=0,a=t.isDark(r,i),s=-1;s<=1;s++)if(!(r+s<0||e<=r+s))for(var u=-1;u<=1;u++)i+u<0||e<=i+u||0==s&&0==u||a==t.isDark(r+s,i+u)&&o++;o>5&&(n+=3+o-5)}for(r=0;r<e-1;r++)for(i=0;i<e-1;i++){var c=0;t.isDark(r,i)&&c++,t.isDark(r+1,i)&&c++,t.isDark(r,i+1)&&c++,t.isDark(r+1,i+1)&&c++,0!=c&&4!=c||(n+=3)}for(r=0;r<e;r++)for(i=0;i<e-6;i++)t.isDark(r,i)&&!t.isDark(r,i+1)&&t.isDark(r,i+2)&&t.isDark(r,i+3)&&t.isDark(r,i+4)&&!t.isDark(r,i+5)&&t.isDark(r,i+6)&&(n+=40);for(i=0;i<e;i++)for(r=0;r<e-6;r++)t.isDark(r,i)&&!t.isDark(r+1,i)&&t.isDark(r+2,i)&&t.isDark(r+3,i)&&t.isDark(r+4,i)&&!t.isDark(r+5,i)&&t.isDark(r+6,i)&&(n+=40);var l=0;for(i=0;i<e;i++)for(r=0;r<e;r++)t.isDark(r,i)&&l++;return n+=10*(Math.abs(100*l/e/e-50)/5)}},f={glog:function(t){if(t<1)throw new Error("glog("+t+")");return f.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return f.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},d=0;d<8;d++)f.EXP_TABLE[d]=1<<d;for(d=8;d<256;d++)f.EXP_TABLE[d]=f.EXP_TABLE[d-4]^f.EXP_TABLE[d-5]^f.EXP_TABLE[d-6]^f.EXP_TABLE[d-8];for(d=0;d<255;d++)f.LOG_TABLE[f.EXP_TABLE[d]]=d;function g(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}function v(t,e){this.totalCount=t,this.dataCount=e}function y(){this.buffer=[],this.length=0}g.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=f.gexp(f.glog(this.get(n))+f.glog(t.get(r)));return new g(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=f.glog(this.get(0))-f.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<t.getLength();r++)n[r]^=f.gexp(f.glog(t.get(r))+e);return new g(n,0).mod(t)}},v.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],v.getRSBlocks=function(t,e){var n=v.getRsBlockTable(t,e);if(null==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=[],o=0;o<r;o++)for(var a=n[3*o+0],s=n[3*o+1],u=n[3*o+2],c=0;c<a;c++)i.push(new v(s,u));return i},v.getRsBlockTable=function(t,e){switch(e){case r.L:return v.RS_BLOCK_TABLE[4*(t-1)+0];case r.M:return v.RS_BLOCK_TABLE[4*(t-1)+1];case r.Q:return v.RS_BLOCK_TABLE[4*(t-1)+2];case r.H:return v.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},y.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9]\.[0-9])/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}var b=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,n=this._el,r=t.getModuleCount();Math.floor(e.width/r),Math.floor(e.height/r);function i(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);for(var r in e)e.hasOwnProperty(r)&&n.setAttribute(r,e[r]);return n}this.clear();var o=i("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:e.colorLight});o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),n.appendChild(o),o.appendChild(i("rect",{fill:e.colorLight,width:"100%",height:"100%"})),o.appendChild(i("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;a<r;a++)for(var s=0;s<r;s++)if(t.isDark(a,s)){var u=i("use",{x:String(s),y:String(a)});u.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),o.appendChild(u)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}.apply(window),x="svg"===document.documentElement.tagName.toLowerCase()?b:"undefined"==typeof CanvasRenderingContext2D?function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,n=this._el,r=t.getModuleCount(),i=Math.floor(e.width/r),o=Math.floor(e.height/r),a=['<table style="border:0;border-collapse:collapse;">'],s=0;s<r;s++){a.push("<tr>");for(var u=0;u<r;u++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+o+"px;background-color:"+(t.isDark(s,u)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),n.innerHTML=a.join("");var c=n.childNodes[0],l=(e.width-c.offsetWidth)/2,h=(e.height-c.offsetHeight)/2;l>0&&h>0&&(c.style.margin=h+"px "+l+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}.apply(window):function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,r,i,o,a,s,u,c,l){if("nodeName"in t&&/img/i.test(t.nodeName))for(var h=arguments.length-1;h>=1;h--)arguments[h]=arguments[h]*e;else void 0===c&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);n.apply(this,arguments)}}function r(t,e){var n=this;if(n._fFail=e,n._fSuccess=t,null===n._bSupportDataURI){var r=document.createElement("img"),i=function(){n._bSupportDataURI=!1,n._fFail&&n._fFail.call(n)};return r.onabort=i,r.onerror=i,r.onload=function(){n._bSupportDataURI=!0,n._fSuccess&&n._fSuccess.call(n)},void(r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===n._bSupportDataURI&&n._fSuccess?n._fSuccess.call(n):!1===n._bSupportDataURI&&n._fFail&&n._fFail.call(n)}var i=function(t,e){this._bIsPainted=!1,this._android=_(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return i.prototype.draw=function(t){var e=this._elImage,n=this._oContext,r=this._htOption,i=t.getModuleCount(),o=r.width/i,a=r.height/i,s=Math.round(o),u=Math.round(a);e.style.display="none",this.clear();for(var c=0;c<i;c++)for(var l=0;l<i;l++){var h=t.isDark(c,l),p=l*o,f=c*a;n.strokeStyle=h?r.colorDark:r.colorLight,n.lineWidth=1,n.fillStyle=h?r.colorDark:r.colorLight,n.fillRect(p,f,o,a),n.strokeRect(Math.floor(p)+.5,Math.floor(f)+.5,s,u),n.strokeRect(Math.ceil(p)-.5,Math.ceil(f)-.5,s,u)}this._bIsPainted=!0},i.prototype.makeImage=function(){this._bIsPainted&&r.call(this,t)},i.prototype.isPainted=function(){return this._bIsPainted},i.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},i.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},i}.apply(window);function w(t,e){for(var n=1,i=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),o=0,a=m.length;o<=a;o++){var s=0;switch(e){case r.L:s=m[o][0];break;case r.M:s=m[o][1];break;case r.Q:s=m[o][2];break;case r.H:s=m[o][3]}if(i<=s)break;n++}if(n>m.length)throw new Error("Too long data");return n}(fm=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:r.H},"string"==typeof e&&(e={text:e}),e)for(var n in e)this._htOption[n]=e[n];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(x=b),this._android=_(),this._el=t,this._oQRCode=null,this._oDrawing=new x(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new e(w(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},fm.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},fm.prototype.clear=function(){this._oDrawing.clear()},fm.CorrectLevel=r}).apply(window);var vm=fm,ym=n(182);n(161);function mm(){}var _m="postrender",bm=n(76),xm="propertychange",wm="function"==typeof Object.assign?Object.assign:function(t,e){var n=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),i=1,o=arguments.length;i<o;++i){var a=n[i];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])}return r};function Em(t){for(var e in t)delete t[e]}function Sm(t,e,n,r){for(var i,o=0,a=t.length;o<a;++o)if((i=t[o]).listener===e&&i.bindTo===n)return r&&(i.deleteIndex=o),i}function Cm(t,e){var n=Tm(t);return n?n[e]:void 0}function Tm(t,e){var n=t.ol_lm;return!n&&e&&(n=t.ol_lm={}),n}function Im(t,e){var n=Cm(t,e);if(n){for(var r=0,i=n.length;r<i;++r)t.removeEventListener(e,n[r].boundListener),Em(n[r]);n.length=0;var o=Tm(t);o&&(delete o[e],0===Object.keys(o).length&&function(t){delete t.ol_lm}(t))}}function Om(t,e,n,r,i){var o=Tm(t,!0),a=o[e];a||(a=o[e]=[]);var s=Sm(a,n,r,!1);return s?i||(s.callOnce=!1):(s={bindTo:r,callOnce:!!i,listener:n,target:t,type:e},t.addEventListener(e,function(t){var e=function(e){var n=t.listener,r=t.bindTo||t.target;return t.callOnce&&Lm(t),n.call(r,e)};return t.boundListener=e,e}(s)),a.push(s)),s}function Mm(t,e,n,r){return Om(t,e,n,r,!0)}function Pm(t,e,n,r){var i=Cm(t,e);if(i){var o=Sm(i,n,r,!0);o&&Lm(o)}}function Lm(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=Cm(t.target,t.type);if(e){var n="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==n&&e.splice(n,1),0===e.length&&Im(t.target,t.type)}Em(t)}}var Rm=function(){this.disposed_=!1};Rm.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},Rm.prototype.disposeInternal=function(){};var Am=Rm,km=function(t){this.propagationStopped,this.type=t,this.target=null};function Nm(t){t.stopPropagation()}km.prototype.preventDefault=function(){this.propagationStopped=!0},km.prototype.stopPropagation=function(){this.propagationStopped=!0};var Dm=km,Fm=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var n=this.listeners_[t];n||(n=this.listeners_[t]=[]),-1===n.indexOf(e)&&n.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new Dm(t):t,n=e.type;e.target=this;var r,i=this.listeners_[n];if(i){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var o=0,a=i.length;o<a;++o)if(!1===i[o].call(this,e)||e.propagationStopped){r=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var s=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];s--;)this.removeEventListener(n,mm);delete this.dispatching_[n]}return r}},e.prototype.disposeInternal=function(){!function(t){var e=Tm(t);if(e)for(var n in e)Im(t,n)}(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var r=n.indexOf(e);t in this.pendingRemovals_?(n[r]=mm,++this.pendingRemovals_[t]):(n.splice(r,1),0===n.length&&delete this.listeners_[t])}},e}(Am),jm="change",zm="click";var Bm=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(jm)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=Om(this,t[i],e);return r}return Om(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,r=new Array(n),i=0;i<n;++i)r[i]=Mm(this,t[i],e);return r}return Mm(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)Pm(this,t[n],e);else Pm(this,t,e)},e}(Fm),Gm=function(t){function e(e,n,r){t.call(this,e),this.key=n,this.oldValue=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Dm),Xm=function(t){function e(e){t.call(this),Object(bm.b)(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return wm({},this.values_)},e.prototype.notify=function(t,e){var n;n=function(t){return Um.hasOwnProperty(t)?Um[t]:Um[t]="change:"+t}(t),this.dispatchEvent(new Gm(n,t,e)),n=xm,this.dispatchEvent(new Gm(n,t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var r=this.values_[t];this.values_[t]=e,r!==e&&this.notify(t,r)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(Bm),Um={};function qm(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var Ym=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:mm,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){qm(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&qm(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)Lm(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==mm&&this.listenerKeys.push(Om(t,_m,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(Xm),Vm="ol-hidden",Hm="ol-unselectable",Wm="ol-control";!function(){var t,e={}}();function Km(t){return 1-function(t){return Math.pow(t,3)}(1-t)}function $m(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var r="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(Vm);i||0!==n?i&&0!==n&&this.element.classList.remove(Vm):this.element.classList.add(Vm)}this.label_.style.msTransform=r,this.label_.style.webkitTransform=r,this.label_.style.transform=r}this.rotation_=n}}var Zm=function(t){function e(e){var n=e||{};t.call(this,{element:document.createElement("div"),render:n.render||$m,target:n.target});var r=void 0!==n.className?n.className:"ol-rotate",i=void 0!==n.label?n.label:"⇧";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=i):(this.label_=i,this.label_.classList.add("ol-compass"));var o=n.tipLabel?n.tipLabel:"Reset rotation",a=document.createElement("button");a.className=r+"-reset",a.setAttribute("type","button"),a.title=o,a.appendChild(this.label_),Om(a,zm,this.handleClick_,this);var s=r+" "+"ol-unselectable "+Wm,u=this.element;u.className=s,u.appendChild(a),this.callResetNorth_=n.resetNorth?n.resetNorth:void 0,this.duration_=void 0!==n.duration?n.duration:250,this.autoHide_=void 0===n.autoHide||n.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Vm)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:Km}):t.setRotation(0))},e}(Ym),Jm="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",Qm=(Jm.indexOf("firefox"),-1!==Jm.indexOf("safari")&&Jm.indexOf("chrom"),-1!==Jm.indexOf("webkit")&&Jm.indexOf("edge"),Jm.indexOf("macintosh"),window.devicePixelRatio,function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}}(),navigator,"ontouchstart"in window),t_="PointerEvent"in window,e_=!!navigator.msPointerEnabled,n_={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},r_=function(t,e){this.dispatcher=t,this.mapping_=e};r_.prototype.getEvents=function(){return Object.keys(this.mapping_)},r_.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var i_=r_;function o_(t){if(!this.isEventSimulatedFromTouch_(t)){1..toString()in this.pointerMap&&this.cancel(t);var e=l_(t,this.dispatcher);this.pointerMap[1..toString()]=t,this.dispatcher.down(e,t)}}function a_(t){if(!this.isEventSimulatedFromTouch_(t)){var e=l_(t,this.dispatcher);this.dispatcher.move(e,t)}}function s_(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[1..toString()];if(e&&e.button===t.button){var n=l_(t,this.dispatcher);this.dispatcher.up(n,t),this.cleanupMouse()}}}function u_(t){if(!this.isEventSimulatedFromTouch_(t)){var e=l_(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function c_(t){if(!this.isEventSimulatedFromTouch_(t)){var e=l_(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}function l_(t,e){var n=e.cloneEvent(t,t),r=n.preventDefault;return n.preventDefault=function(){t.preventDefault(),r()},n.pointerId=1,n.isPrimary=!0,n.pointerType="mouse",n}var h_=function(t){function e(e){var n={mousedown:o_,mousemove:a_,mouseup:s_,mouseover:u_,mouseout:c_};t.call(this,e,n),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,n=t.clientX,r=t.clientY,i=0,o=e.length,a=void 0;i<o&&(a=e[i]);i++){var s=Math.abs(n-a[0]),u=Math.abs(r-a[1]);if(s<=25&&u<=25)return!0}return!1},e.prototype.cancel=function(t){var e=l_(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[1..toString()]},e}(i_),p_=["","unavailable","touch","pen","mouse"];function f_(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function d_(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function g_(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function v_(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function y_(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function m_(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function __(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function b_(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var x_=function(t){function e(e){var n={MSPointerDown:f_,MSPointerMove:d_,MSPointerUp:g_,MSPointerOut:v_,MSPointerOver:y_,MSPointerCancel:m_,MSGotPointerCapture:b_,MSLostPointerCapture:__};t.call(this,e,n),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=p_[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(i_);function w_(t){this.dispatcher.fireNativeEvent(t)}function E_(t){this.dispatcher.fireNativeEvent(t)}function S_(t){this.dispatcher.fireNativeEvent(t)}function C_(t){this.dispatcher.fireNativeEvent(t)}function T_(t){this.dispatcher.fireNativeEvent(t)}function I_(t){this.dispatcher.fireNativeEvent(t)}function O_(t){this.dispatcher.fireNativeEvent(t)}function M_(t){this.dispatcher.fireNativeEvent(t)}var P_=function(t){function e(e){var n={pointerdown:w_,pointermove:E_,pointerup:S_,pointerout:C_,pointerover:T_,pointercancel:I_,gotpointercapture:M_,lostpointercapture:O_};t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i_),L_=!1,R_=function(t){function e(e,n,r){t.call(this,e),this.originalEvent=n;var i=r||{};this.buttons=function(t){var e;if(t.buttons||L_)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(i),this.pressure=function(t,e){var n=0;n=t.pressure?t.pressure:e?.5:0;return n}(i,this.buttons),this.bubbles="bubbles"in i&&i.bubbles,this.cancelable="cancelable"in i&&i.cancelable,this.view="view"in i?i.view:null,this.detail="detail"in i?i.detail:null,this.screenX="screenX"in i?i.screenX:0,this.screenY="screenY"in i?i.screenY:0,this.clientX="clientX"in i?i.clientX:0,this.clientY="clientY"in i?i.clientY:0,this.ctrlKey="ctrlKey"in i&&i.ctrlKey,this.altKey="altKey"in i&&i.altKey,this.shiftKey="shiftKey"in i&&i.shiftKey,this.metaKey="metaKey"in i&&i.metaKey,this.button="button"in i?i.button:0,this.relatedTarget="relatedTarget"in i?i.relatedTarget:null,this.pointerId="pointerId"in i?i.pointerId:0,this.width="width"in i?i.width:0,this.height="height"in i?i.height:0,this.tiltX="tiltX"in i?i.tiltX:0,this.tiltY="tiltY"in i?i.tiltY:0,this.pointerType="pointerType"in i?i.pointerType:"",this.hwTimestamp="hwTimestamp"in i?i.hwTimestamp:0,this.isPrimary="isPrimary"in i&&i.isPrimary,n.preventDefault&&(this.preventDefault=function(){n.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Dm);!function(){try{var t=new MouseEvent("click",{buttons:1});L_=1===t.buttons}catch(t){}}();var A_=R_;function k_(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function N_(t){this.processTouches_(t,this.moveOverOut_)}function D_(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function F_(t){this.processTouches_(t,this.cancelOut_)}var j_,z_=function(t){function e(e,n){var r={touchstart:k_,touchmove:N_,touchend:D_,touchcancel:F_};t.call(this,e,r),this.pointerMap=e.pointerMap,this.mouseSource=n,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&1..toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var n=this.dispatcher.cloneEvent(t,e);return n.pointerId=e.identifier+2,n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount_,n.button=0,n.buttons=1,n.width=e.radiusX||0,n.height=e.radiusY||0,n.pressure=e.force||.5,n.isPrimary=this.isPrimaryTouch_(e),n.pointerType="touch",n.clientX=e.clientX,n.clientY=e.clientY,n.screenX=e.screenX,n.screenY=e.screenY,n},e.prototype.processTouches_=function(t,e){var n=Array.prototype.slice.call(t.changedTouches),r=n.length;function i(){t.preventDefault()}for(var o=0;o<r;++o){var a=this.touchToPointer_(t,n[o]);a.preventDefault=i,e.call(this,t,a)}},e.prototype.findTouch_=function(t,e){for(var n=t.length,r=0;r<n;r++){if(t[r].identifier===e)return!0}return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,n=Object.keys(this.pointerMap),r=n.length;if(r>=e.length){for(var i=[],o=0;o<r;++o){var a=Number(n[o]),s=this.pointerMap[a];1==a||this.findTouch_(e,a-2)||i.push(s.out)}for(var u=0;u<i.length;++u)this.cancelOut_(t,i[u])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var n=e,r=this.pointerMap[n.pointerId];if(r){var i=r.out,o=r.outTarget;this.dispatcher.move(n,t),i&&o!==n.target&&(i.relatedTarget=n.target,n.relatedTarget=o,i.target=o,n.target?(this.dispatcher.leaveOut(i,t),this.dispatcher.enterOver(n,t)):(n.target=o,n.relatedTarget=null,this.cancelOut_(t,n))),r.out=n,r.outTarget=n.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,n=t.changedTouches[0];if(this.isPrimaryTouch_(n)){var r=[n.clientX,n.clientY];e.push(r),setTimeout((function(){var t,n,i;n=r,i=(t=e).indexOf(n),i>-1&&t.splice(i,1)}),this.dedupTimeout_)}},e}(i_),B_=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],G_=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(t_)this.registerSource("native",new P_(this));else if(e_)this.registerSource("ms",new x_(this));else{var t=new h_(this);this.registerSource("mouse",t),Qm&&this.registerSource("touch",new z_(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var n=e,r=n.getEvents();r&&(r.forEach(function(t){var e=n.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(n))}.bind(this)),this.eventSourceList_.push(n))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var n=this.eventSourceList_[e];this.addEvents_(n.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var n=this.eventSourceList_[e];this.removeEvents_(n.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,n=this.eventMap_[e];n&&n(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){Om(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){Pm(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var n={},r=0,i=B_.length;r<i;r++){var o=B_[r][0];n[o]=t[o]||e[o]||B_[r][1]}return n},e.prototype.down=function(t,e){this.fireEvent(n_.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(n_.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(n_.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(n_.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(n_.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(n_.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(n_.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(n_.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,n){return new A_(t,n,e)},e.prototype.fireEvent=function(t,e,n){var r=this.makeEvent(t,e,n);this.dispatchEvent(r)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,l_(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(Fm),X_=1,U_=n(183),q_=function(t){function e(e,n,r){t.call(this,e),this.map=n,this.frameState=void 0!==r?r:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Dm);!function(){var t,e,n=document.attachEvent,r=!1;if(!n){var i=(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(t){return e(t)}),o=(t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)}),a=function(t){var e=t.__resizeTriggers__,n=e.firstElementChild,r=e.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},s=function(t){var e=this;a(this),this.__resizeRAF__&&o(this.__resizeRAF__),this.__resizeRAF__=i((function(){(function(t){return t.offsetWidth!=t.__resizeLast__.width||t.offsetHeight!=t.__resizeLast__.height})(e)&&(e.__resizeLast__.width=e.offsetWidth,e.__resizeLast__.height=e.offsetHeight,e.__resizeListeners__.forEach((function(n){n.call(e,t)})))}))},u=!1,c="",l="animationstart",h="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),f="",d=document.createElement("fakeelement");if(void 0!==d.style.animationName&&(u=!0),!1===u)for(var g=0;g<h.length;g++)if(void 0!==d.style[h[g]+"AnimationName"]){(f=h[g])+"Animation",c="-"+f.toLowerCase()+"-",l=p[g],u=!0;break}var v="resizeanim",y="@"+c+"keyframes "+v+" { from { opacity: 0; } to { opacity: 0; } } ",m=c+"animation: 1ms "+v+"; "}j_=function(t,e){n?t.attachEvent("onresize",e):(t.__resizeTriggers__||("static"==getComputedStyle(t).position&&(t.style.position="relative"),function(){if(!r){var t=(y||"")+".resize-triggers { "+(m||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; } .contract-trigger:before { width: 200%; height: 200%; }',e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n),r=!0}}(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),a(t),t.addEventListener("scroll",s,!0),l&&t.__resizeTriggers__.addEventListener(l,(function(e){e.animationName==v&&a(t)}))),t.__resizeListeners__.push(e))},function(t,e){n?t.detachEvent("onresize",e):(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",s),t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__)))}}();var Y_={"Maplat.png":"assets/images/558bc7e8b9b6c5f41a7141cddb8cdb5e.png","all_right_reserved.png":"assets/images/f101a0974972eeab41189185a5c5b225.png","attr.png":"assets/images/acc6eab0ba9c470ae20fb4b74135e865.png","basemap.png":"assets/images/7bef6f357e921c43f4f800cfcb757872.png","blue_marker.png":"assets/images/927c34e7b9b2f95c82ba477993117eaf.png","bluedot.png":"assets/images/6e1f2f2f6fed3c5cddeb925e7ae75aba.png","bluedot_small.png":"assets/images/0beac2cb41dfab43ddfd9df80b32b85d.png","bluedot_transparent.png":"assets/images/6c5dba7f7d76e74c3a8c7c5b1c3fc544.png","border.png":"assets/images/90c32e751366be22777f3fe40a53fe06.png","cc0.png":"assets/images/7d9d643a903df6f57b8b7386316021e5.png","cc_by-nc-nd.png":"assets/images/ffea4dd10bf2506aa1e0cd4c61426b42.png","cc_by-nc-sa.png":"assets/images/95e9ca8285131f8ccb6da5052093173c.png","cc_by-nc.png":"assets/images/ca6b77b234b18e7bb9b1ccda774da286.png","cc_by-nd.png":"assets/images/1354b4f40dd58bb0f2a4871cb4ff81d8.png","cc_by-sa.png":"assets/images/649fce122b354de2ac725ba5f2661955.png","cc_by.png":"assets/images/2a61e310e46b50b5f8ddd5e905ba9db9.png","compass.png":"assets/images/cd213169df16398b0017450e31788d73.png","defaultpin.png":"assets/images/9ac6d81f417d6a5626b7c8d5a087c32b.png","defaultpin_selected.png":"assets/images/f115726e6249018905cca51653e1262c.png","favicon.png":"assets/images/3131423d782cd3ea89a81247065e7f9d.png","fullscreen.png":"assets/images/9247459937b9c882303962e42bd8d989.png","gps.png":"assets/images/ba48b220f61a6e1028f1854326f43acd.png","gsi.jpg":"assets/images/b9ae27f0a01228380dff76a33b605707.jpg","gsi_ortho.jpg":"assets/images/41b2cf0fa604d3f196ca52337d238219.jpg","help.png":"assets/images/c49f2344772e33256ba24d64b59b20d1.png","hide_marker.png":"assets/images/9a243e0cb0fc43e2a016d5d3aaa330d5.png","home.png":"assets/images/09c3ce5a86d600e24f8e85de3a019853.png","loading.png":"assets/images/8e5d0335f6598b8d874ba23ea9fb295f.png","loading_image.png":"assets/images/5ba349e3596aca094c41c56966b45dc7.png","minus.png":"assets/images/f7acb820d978ab2dd69e8bf695c574d1.png","no_image.png":"assets/images/56f7003805ed02f8a21199947651db2e.png","osm.jpg":"assets/images/6345ee67d554fbfbf484ba4035ad19d9.jpg","overlay.png":"assets/images/799a0177b0dc540682fa4a2e349a8f4f.png","pd.png":"assets/images/bf67cc860289b85c0402a4d4f890a3bd.png","plus.png":"assets/images/6111b8076a2cf81c73f0e46f41a3af60.png","red_marker.png":"assets/images/6a580287dea82c2fb9b214321a375145.png","redcircle.png":"assets/images/7df82bae917b68159f84998182f2fdc6.png","share.png":"assets/images/9d3a01c866095b8b3e8e63f9cf11dd51.png","slider.png":"assets/images/9df733bcb29a746cb16b47eedea9fc3a.png"};function V_(t){return(V_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K_(t,e,n){return(K_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $_(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z_(t,e)}function Z_(t,e){return(Z_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=eb(t);if(e){var i=eb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Q_(this,n)}}function Q_(t,e){return!e||"object"!==V_(e)&&"function"!=typeof e?tb(t):e}function tb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eb(t){return(eb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nb={},rb={compass:"compass.png",border:"border.png",attr:"attr.png",gps:"gps.png",zoom_plus:"plus.png",zoom_minus:"minus.png",help:"help.png",home:"home.png",hide_marker:"hide_marker.png",share:"share.png",slider_in_help:"slider.png",favicon:"favicon.png"};function ib(t){var e={};return t.match(/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i)?(e.red=parseInt(RegExp.$1,16),e.green=parseInt(RegExp.$2,16),e.blue=parseInt(RegExp.$3,16)):t.match(/^#?([0-9A-F])([0-9A-F])([0-9A-F])$/i)&&(e.red=parseInt("".concat(RegExp.$1).concat(RegExp.$1),16),e.green=parseInt("".concat(RegExp.$2).concat(RegExp.$2),16),e.blue=parseInt("".concat(RegExp.$3).concat(RegExp.$3),16)),e}var ob=function(t){$_(o,t);var e,n,r,i=J_(o);function o(t){var e;H_(this,o);var n=t||{},r=document.createElement("div"),a=n.render?n.render:o.render;(e=i.call(this,{element:r,render:a})).direction_=o.Direction_.VERTICAL,e.dragging_=void 0,e.value_=void 0,e.previousX_=void 0,e.previousY_=void 0,e.thumbSize_=null,e.sliderInitialized_=!1,e.duration_=void 0!==n.duration?n.duration:200,e.reverse_=void 0!==n.reverse&&n.reverse,e.initialValue=n.initialValue;var s=void 0!==n.className?n.className:"ol-slidercommon",u=document.createElement("button");if(u.setAttribute("type","button"),u.className="".concat(s,"-thumb").concat(Hm),r.title=n.tipLabel,r.className="".concat(s," ").concat(Hm," ").concat(Wm),r.appendChild(u),e.dragger_=new G_(r),Om(e.dragger_,n_.POINTERDOWN,e.handleDraggerStart_,tb(e)),Om(e.dragger_,n_.POINTERMOVE,e.handleDraggerDrag_,tb(e)),Om(e.dragger_,n_.POINTERUP,e.handleDraggerEnd_,tb(e)),Om(u,n_.CLICK,Nm),Om(e.element,n_.MOUSEOUT,e.handleDraggerEnd_,tb(e)),nb.slider_color){var c=ib(nb.slider_color),l=e.element.querySelector("button");l.addEventListener("mouseover",(function(){l.style.backgroundColor="rgba(".concat(c.red,",").concat(c.green,",").concat(c.blue,",.7)")})),l.addEventListener("mouseout",(function(){var t=e.element.classList.contains("disable");l.style.backgroundColor="rgba(".concat(c.red,",").concat(c.green,",").concat(c.blue,",").concat(t?.2:.5,")")}))}return e}return e=o,r=[{key:"render",value:function(t){t.frameState&&(this.sliderInitialized_||this.initSlider_())}},{key:"Direction_",get:function(){return{VERTICAL:0,HORIZONTAL:1}}}],(n=[{key:"disposeInternal",value:function(){this.dragger_.dispose(),K_(eb(o.prototype),"disposeInternal",this).call(this)}},{key:"setMap",value:function(t){K_(eb(o.prototype),"setMap",this).call(this,t),t&&t.render()}},{key:"initSlider_",value:function(){var t=this.element,e=t.offsetWidth,n=t.offsetHeight,r=t.firstElementChild,i=getComputedStyle(r),a=r.offsetWidth+parseFloat(i.marginRight)+parseFloat(i.marginLeft),s=r.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);this.thumbSize_=[a,s],this.direction_=e>n?o.Direction_.HORIZONTAL:o.Direction_.VERTICAL,this.setValue(this.initialValue||0);var u=this;j_(t,(function(){u.setValue(u.value_)})),this.sliderInitialized_=!0}},{key:"widthLimit_",value:function(t){return this.element.offsetWidth-this.thumbSize_[0]}},{key:"heightLimit_",value:function(t){return this.element.offsetHeight-this.thumbSize_[1]}},{key:"handleContainerClick_",value:function(t){var e=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2);this.setThumbPosition_(e)}},{key:"handleDraggerStart_",value:function(t){this.dragging_||t.originalEvent.target!==this.element.firstElementChild||this.element.classList.contains("disable")||(this.getMap().getView().setHint(X_,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0)}},{key:"handleDraggerDrag_",value:function(t){if(this.dragging_){var e=this.element.firstElementChild,n=t.clientX-this.previousX_+(parseFloat(e.style.left,10)||0),r=t.clientY-this.previousY_+(parseFloat(e.style.top,10)||0),i=this.getRelativePosition_(n,r);this.setThumbPosition_(i),this.previousX_=t.clientX,this.previousY_=t.clientY}}},{key:"handleDraggerEnd_",value:function(t){this.dragging_&&(this.getMap().getView().setHint(X_,-1),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0)}},{key:"setThumbPosition_",value:function(t){var e=this.element.firstElementChild;this.direction_==o.Direction_.HORIZONTAL?e.style.left="".concat(this.widthLimit_()*t,"px"):e.style.top="".concat(this.heightLimit_()*t,"px"),this.value_=this.reverse_?1-t:t,this.set("slidervalue",this.value_)}},{key:"getRelativePosition_",value:function(t,e){var n;return n=this.direction_===o.Direction_.HORIZONTAL?t/this.widthLimit_():e/this.heightLimit_(),Object(U_.a)(n,0,1)}},{key:"setValue",value:function(t){t=this.reverse_?1-t:t,this.setThumbPosition_(t)}},{key:"setEnable",value:function(t){var e=this.element;if(t?e.classList.remove("disable"):e.classList.add("disable"),nb.slider_color){var n=ib(nb.slider_color);e.querySelector("button").style.backgroundColor="rgba(".concat(n.red,",").concat(n.green,",").concat(n.blue,",").concat(t?.5:.2,")")}}}])&&W_(e.prototype,n),r&&W_(e,r),o}(Ym),ab=function(t){$_(n,t);var e=J_(n);function n(t){var r;H_(this,n);var i=t||{},o=document.createElement("div");r=e.call(this,{element:o,target:i.target,render:i.render});var a=document.createElement("button");a.setAttribute("type","button"),a.title=i.tipLabel;var s,u,c=document.createElement("span");c.innerHTML=i.character,a.appendChild(c);var l=tb(r);return a.addEventListener("click",(function(t){t.stopPropagation()})),a.addEventListener("mouseup",(function(t){u||s&&(i.long_callback&&clearTimeout(s),s=null,i.callback.apply(l)),t.stopPropagation()}),!1),a.addEventListener("mousemove",(function(t){t.stopPropagation()}),!1),a.addEventListener("mousedown",(function(t){u||(s=!i.long_callback||setTimeout((function(){s=null,i.long_callback.apply(l)}),1500)),t.stopPropagation()}),!1),a.addEventListener("touchstart",(function(t){u=!0,s=!i.long_callback||setTimeout((function(){s=null,i.long_callback.apply(l)}),1500),t.stopPropagation()}),!1),a.addEventListener("touchend",(function(t){s&&(i.long_callback&&clearTimeout(s),s=null,i.callback.apply(l)),t.stopPropagation()}),!1),a.addEventListener("mouseout",(function(t){i.long_callback&&clearTimeout(s),s=null,t.stopPropagation()}),!1),a.addEventListener("dblclick",(function(t){t.preventDefault()}),!1),o.className="".concat(i.cls," ol-unselectable ol-control"),o.appendChild(a),r}return n}(Ym),sb=function(t){$_(n,t);var e=J_(n);function n(t){var r;H_(this,n);var i=t||{};(i.character=nb.home?'<img src="'.concat(nb.home,'">'):'<i class="fa fa-home fa-lg"></i>',i.cls="home",i.callback=function(){this.getMap().getLayers().item(0).getSource().goHome()},r=e.call(this,i),nb.home)&&(r.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return r}return n}(ab),ub=function(t){$_(n,t);var e=J_(n);function n(t){var r;H_(this,n);var i=t||{};(i.character=nb.gps?'<img src="'.concat(nb.gps,'">'):'<i class="fa fa-crosshairs fa-lg"></i>',i.cls="gps",i.render=function(t){if(t.frameState){var e=this.getMap();if(e.geolocation){var n=e.geolocation.getTracking(),r=this.element.classList.contains("disable");r&&!n?this.element.classList.remove("disable"):!r&&n&&this.element.classList.add("disable")}}},i.callback=function(){var t=this.element.classList.contains("disable");this.getMap().handleGPS(!t),t?this.element.classList.remove("disable"):this.element.classList.add("disable")},r=e.call(this,i),nb.gps)&&(r.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return r}return n}(ab),cb=function(t){$_(n,t);var e=J_(n);function n(t){var r;H_(this,n);var i=t||{};i.autoHide=!1;var o=document.createElement("span");(o.innerHTML=nb.compass?'<img src="'.concat(nb.compass,'">'):'<i class="fa fa-compass fa-lg ol-compass-fa"></i>',i.label=o,i.render=function(t){var e=t.frameState;if(e){var n=this.getMap().getView(),r=e.viewState.rotation,i=n.getCenter(),o=n.getDecimalZoom();if(r!=this.rotation_||i[0]!=this.center_[0]||i[1]!=this.center_[1]||o!=this.zoom_){var a=this.element.classList.contains("disable");a||0!==r?a&&0!==r&&this.element.classList.remove("disable"):this.element.classList.add("disable");var s=this,u=this.getMap().getLayers().item(0),c=u.getSource?u.getSource():u.getLayers().item(0).getSource();if(!c){var l="rotate(0rad)";return s.label_.style.msTransform=l,s.label_.style.webkitTransform=l,void(s.label_.style.transform=l)}c.size2MercsAsync().then((function(t){var e=c.mercs2MercRotation(t),n="rotate(".concat(e,"rad)");s.label_.style.msTransform=n,s.label_.style.webkitTransform=n,s.label_.style.transform=n}))}this.rotation_=r,this.center_=i,this.zoom_=o}},r=e.call(this,i),nb.compass)&&(r.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return r.center_=[],r.zoom_=void 0,r}return n}(Zm),lb=function(t){$_(n,t);var e=J_(n);function n(t){var r;H_(this,n);var i=t||{};(i.character=nb.share?'<img src="'.concat(nb.share,'">'):'<i class="fa fa-share-alt-square fa-lg"></i>',i.cls="ol-share",i.callback=function(){var t=this.getMap();t.dispatchEvent(new q_("click_control",t,{control:"share"}))},r=e.call(this,i),nb.share)&&(r.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return r}return n}(ab),hb=function(t){$_(n,t);var e=J_(n);function n(t){var r;H_(this,n);var i=t||{};(i.character=nb.border?'<img src="'.concat(nb.border,'">'):'<i class="fa fa-clone fa-lg"></i>',i.cls="ol-border",i.callback=function(){var t=this.getMap();t.dispatchEvent(new q_("click_control",t,{control:"border"}))},r=e.call(this,i),nb.border)&&(r.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return r}return n}(ab),pb=function(t){$_(n,t);var e=J_(n);function n(t){var r;H_(this,n);var i=t||{};(i.character=nb.help?'<img src="'.concat(nb.help,'">'):'<i class="fa fa-question-circle fa-lg"></i>',i.cls="ol-maplat",i.callback=function(){var t=this.getMap();t.dispatchEvent(new q_("click_control",t,{control:"help"}))},r=e.call(this,i),nb.help)&&(r.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return r}return n}(ab),fb=function(t){$_(n,t);var e=J_(n);function n(t){var r;H_(this,n);var i=t||{};(i.character=nb.attr?'<img src="'.concat(nb.attr,'">'):'<i class="fa fa-info-circle fa-lg"></i>',i.cls="ol-copyright",i.callback=function(){var t=this.getMap();t.dispatchEvent(new q_("click_control",t,{control:"copyright"}))},r=e.call(this,i),nb.attr)&&(r.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return r}return n}(ab),db=function(t){$_(n,t);var e=J_(n);function n(t){var r;H_(this,n);var i=t||{};(i.character=nb.hide_marker?'<img src="'.concat(nb.hide_marker,'">'):'<i class="fa fa-map-marker fa-lg"></i>',i.cls="ol-hide-marker",i.callback=function(){var t=this.getMap();t.dispatchEvent(new q_("click_control",t,{control:"hideMarker"}))},i.long_callback=function(){var t=this.getMap();t.dispatchEvent(new q_("click_control",t,{control:"hideLayer"}))},r=e.call(this,i),nb.hide_marker)&&(r.element.querySelector("button").style.backgroundColor="rgba(0,0,0,0)");return r}return n}(ab),gb=function(t){$_(n,t);var e=J_(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(H_(this,n),nb.zoom_plus&&(r.zoomInLabel=Li('<img src="'.concat(nb.zoom_plus,'">'))[0]),nb.zoom_minus&&(r.zoomOutLabel=Li('<img src="'.concat(nb.zoom_minus,'">'))[0]),t=e.call(this,r),nb.compass){var i=t.element.querySelectorAll("button");i.forEach((function(t){t.style.backgroundColor="rgba(0,0,0,0)"}))}return t}return n}(Qs);function vb(t){return function(t){if(Array.isArray(t))return yb(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return yb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yb(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance. In order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mb(t){return(mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _b(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function bb(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){_b(o,r,i,a,s,"next",t)}function s(t){_b(o,r,i,a,s,"throw",t)}a(void 0)}))}}function xb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wb(t,e){return(wb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Eb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Tb(t);if(e){var i=Tb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Sb(this,n)}}function Sb(t,e){return!e||"object"!==mb(e)&&"function"!=typeof e?Cb(t):e}function Cb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tb(t){return(Tb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ib=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wb(t,e)}(u,t);var e,n,i,o,a,s=Eb(u);function u(t){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e=s.call(this),r={state_url:"stateUrl",restore_session:"restoreSession",enable_share:"enableShare",mobile_if:"mobileIF",pwa_manifest:"pwaManifest",pwa_worker:"pwaWorker",pwa_scope:"pwaScope"},n=ki(n=t),(t=Object.keys(r).reduce((function(t,e){return t[e]&&(t[r[e]]=t[e],delete t[e]),t}),n)).control&&function(t){nb=t,Object.keys(nb).forEach((function(t){rb[t]&&(Y_[rb[t]]=nb[t])}))}(t.control);var i=Cb(e);return i.html_id_seed="".concat(Math.floor(9e3*Math.random())+1e3),t.stateUrl?(Object(Nt.a)((function(e,n){var r=e.canonicalPath.split("#!"),o=r.length>1?r[1]:r[0];if(r=o.split("?"),(o=r[0])!==i.pathThatSet){var a={transparency:0,position:{rotation:0}};o.split("/").map((function(t){var e=t.split(":");switch(e[0]){case"s":a.mapID=e[1];break;case"b":a.backgroundID=e[1];break;case"t":a.transparency=parseFloat(e[1]);break;case"r":a.position.rotation=parseFloat(e[1]);break;case"z":a.position.zoom=parseFloat(e[1]);break;case"x":case"y":a.position[e[0]]=parseFloat(e[1]);break;case"sb":a.showBorder=!!parseInt(e[1]);break;case"hm":a.hideMarker=!!parseInt(e[1]);break;case"hl":a.hideLayer=e[1];break;case"c":if(i.core){var n=i.core.mapDivDocument.querySelector(".modalBase");new Dt.a.Modal(n,{root:i.core.mapDivDocument}).hide()}}})),i.core?a.mapID&&i.core.waitReady.then((function(){i.core.changeMap(a.mapID,a)})):(a.mapID&&(t.restore=a),i.initializer(t))}else delete i.pathThatSet})),Object(Nt.a)({hashbang:!0}),Object(Nt.a)(),i.waitReady=new Promise((function(t,e){i.waitReadyBridge=t}))):i.initializer(t),e}return e=u,(n=[{key:"initializer",value:(a=bb(regeneratorRuntime.mark((function t(e){var n,i,o,a,s,u,c,l,h,p,f,d,g,v,y,m,_,b,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x=function(t){n.contextMenu.clear();var e=[];t.forEach((function(t){n.contextMenu.push(t),t.mouseOnTask&&e.push([t.mouseOnTask,t.mouseOutTask])}));var r=n.core.lastClickEvent.coordinate,i=n.core.lastClickEvent.pixel;n.contextMenu.disabled||(n.contextMenu.on("open",(function t(){if(n.contextMenu.removeEventListener("open",t),e.length>0){var r=vb(n.core.mapDivDocument.querySelectorAll(".ol-ctx-menu-container ul li")).map((function(t,n){var r=e[n];return t.addEventListener("mouseover",r[0]),t.addEventListener("mouseout",r[1]),[t,r[0],r[1]]}));n.contextMenu.on("close",(function t(){n.contextMenu.removeEventListener("close",t),r.forEach((function(t){t[0].removeEventListener("mouseover",t[1]),t[0].removeEventListener("mouseout",t[2])}))}))}})),n.contextMenu.Internal.openMenu(i,r),n.core.mapObject.getViewport().addEventListener("pointerdown",{handleEvent:function(t){n.contextMenu.Internal.opened&&(n.contextMenu.Internal.closeMenu(),t.stopPropagation(),n.core.mapObject.getViewport().removeEventListener(t.type,this,!1))}},!1))},n=this,e.translateUI=!0,n.core=new am(e),e.icon&&(Y_["defaultpin.png"]=e.icon),e.restore?(n.setShowBorder(e.restore.showBorder||!1),e.restore.hideMarker&&n.core.mapDivDocument.classList.add("hide-marker")):e.restoreSession?(i=parseInt(localStorage.getItem("epoch")||0),o=Math.floor((new Date).getTime()/1e3),i&&o-i<3600&&n.setShowBorder(!!parseInt(localStorage.getItem("showBorder")||"0")),n.core.initialRestore.hideMarker&&n.core.mapDivDocument.classList.add("hide-marker")):n.setShowBorder(!1),a=!n.core.initialRestore.mapID,s=n.core.initialRestore.transparency,u=!e.presentation_mode,e.enableShare&&(n.core.mapDivDocument.classList.add("enable_share"),n.enableShare=!0),e.enableHideMarker&&(n.core.mapDivDocument.classList.add("enable_hide_marker"),n.enableHideMarker=!0),e.enableBorder&&(n.core.mapDivDocument.classList.add("enable_border"),n.enableBorder=!0),e.disableNoimage&&(n.disableNoimage=!0),e.stateUrl&&n.core.mapDivDocument.classList.add("state_url"),n.core.enableCache&&n.core.mapDivDocument.classList.add("enable_cache"),"ontouchstart"in window&&(n.core.mapDivDocument.classList.add("ol-touch"),n.isTouch=!0),e.mobileIF&&(e.debug=!0),e.appEnvelope&&(n.appEnvelope=!0),c=e.pwaManifest,l=e.pwaWorker,h=e.pwaScope,p=Li('<d c="ol-control map-title"><s></s></d> <d c="swiper-container ol-control base-swiper prevent-default-ui"> <d c="swiper-wrapper"></d> <d c="swiper-button-next base-next swiper-button-white"></d> <d c="swiper-button-prev base-prev swiper-button-white"></d> </d> <d c="swiper-container ol-control overlay-swiper prevent-default-ui"> <d c="swiper-wrapper"></d> <d c="swiper-button-next overlay-next swiper-button-white"></d> <d c="swiper-button-prev overlay-prev swiper-button-white"></d> </d> ');for(f=p.length-1;f>=0;f--)n.core.mapDivDocument.insertBefore(p[f],n.core.mapDivDocument.firstChild);for(d=n.core.mapDivDocument.querySelectorAll(".prevent-default-ui"),g=0;g<d.length;g++)d[g].addEventListener("touchstart",(function(t){t.preventDefault()}));for(p=Li('<d c="modal modalBase" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-show="true" data-keyboard="false" data-backdrop="static"> <d c="modal-dialog"> <d c="modal-content"> <d c="modal-header"> <button type="button" c="close" data-dismiss="modal"> <s aria-hidden="true">&#215;</s><s c="sr-only" din="html.close"></s> </button> <h4 c="modal-title"> <s c="modal_title"></s> <s c="modal_load_title"></s> <s c="modal_gpsW_title" din="html.acquiring_gps"></s> <s c="modal_help_title" din="html.help_title"></s> <s c="modal_share_title" din="html.share_title"></s> <s c="modal_hide_marker_title" din="html.hide_marker_title"></s> </h4> </d> <d c="modal-body"> <d c="modal_help_content"> <d c="help_content"> <s dinh="html.help_using_maplat"></s> <p c="col-xs-12 help_img"><img src="'.concat(Y_["fullscreen.png"],'"></p> <h4 din="html.help_operation_title"></h4> <p dinh="html.help_operation_content" c="recipient"></p> <h4 din="html.help_selection_title"></h4> <p dinh="html.help_selection_content" c="recipient"></p> <h4 din="html.help_gps_title"></h4> <p dinh="html.help_gps_content" c="recipient"></p> <h4 din="html.help_poi_title"></h4> <p dinh="html.help_poi_content" c="recipient"></p> <h4 din="html.help_etc_title"></h4> <ul> <li dinh="html.help_etc_attr" c="recipient"></li> <li dinh="html.help_etc_help" c="recipient"></li> <s c="share_help"><li dinh="html.help_share_help" c="recipient"></li></s> <s c="border_help"><li dinh="html.help_etc_border" c="recipient"></li></s> <s c="hide_marker_help"><li dinh="html.help_etc_hide_marker" c="recipient"></li></s> <li dinh="html.help_etc_slider" c="recipient"></li> </ul> <p><a href="https://github.com/code4history/Maplat/wiki" target="_blank">Maplat</a> © 2015- Kohei Otsuka, Code for History</p> </d> </d> <d c="modal_poi_content"> <d c="poi_web embed-responsive embed-responsive-60vh"> <iframe c="poi_iframe iframe_poi" frameborder="0" src=""></iframe> </d> <d c="poi_data hide"> <d c="col-xs-12 swiper-container poi_img_swiper"> <d c="swiper-wrapper"></d> <d c="swiper-button-next poi-img-next"></d> <d c="swiper-button-prev poi-img-prev"></d> </d> <p c="recipient poi_address"></p> <p c="recipient poi_desc"></p> </d> </d> <d c="modal_share_content"> <h4 din="html.share_app_title"></h4> <d id="___maplat_app_toast_').concat(n.html_id_seed,'"></d> <d c="recipient row"> <d c="form-group col-xs-4 text-center"><button title="Copy to clipboard" c="share btn btn-light" data="cp_app"><i c="fa fa-clipboard"></i>&nbsp;<small din="html.share_copy"></small></button></d> <d c="form-group col-xs-4 text-center"><button title="Twitter" c="share btn btn-light" data="tw_app"><i c="fa fa-twitter"></i>&nbsp;<small>Twitter</small></button></d> <d c="form-group col-xs-4 text-center"><button title="Facebook" c="share btn btn-light" data="fb_app"><i c="fa fa-facebook"></i>&nbsp;<small>Facebook</small></button></d> </d> <d c="qr_app center-block" style="width:128px;"></d> <d c="modal_share_state"> <h4 din="html.share_state_title"></h4> <d id="___maplat_view_toast_').concat(n.html_id_seed,'"></d> <d c="recipient row"> <d c="form-group col-xs-4 text-center"><button title="Copy to clipboard" c="share btn btn-light" data="cp_view"><i c="fa fa-clipboard"></i>&nbsp;<small din="html.share_copy"></small></button></d> <d c="form-group col-xs-4 text-center"><button title="Twitter" c="share btn btn-light" data="tw_view"><i c="fa fa-twitter"></i>&nbsp;<small>Twitter</small></button></d> <d c="form-group col-xs-4 text-center"><button title="Facebook" c="share btn btn-light" data="fb_view"><i c="fa fa-facebook"></i>&nbsp;<small>Facebook</small></button></d> </d> <d c="qr_view center-block" style="width:128px;"></d> </d> <p><img src="" height="0px" width="0px"></p> </d> <d c="modal_map_content"> ').concat(Ii.map((function(t){return"title"==t||"officialTitle"==t?"":'<d c="recipients '.concat(t,'_div"><dl c="dl-horizontal"> <dt din="html.').concat(t,'"></dt> <dd c="').concat(t,'_dd"></dd> </dl></d> ')})).join(""),' <d c="recipients modal_cache_content"><dl c="dl-horizontal"> <dt din="html.cache_handle"></dt> <dd><s c="cache_size"></s></dd> <dt></dt> <dd><s c="pull-right"><button c="cache_fetch btn btn-default" href="#" din="html.cache_fetch"></button> <button c="cache_delete btn btn-default" href="#" din="html.cache_delete"></button></s></dd> </dl></d> </d> <d c="modal_load_content"> <p c="recipient"><img src="').concat(Y_["loading.png"],'"><s din="html.app_loading_body"></s></p> <d c="splash_div hide row"><p c="col-xs-12 poi_img"><img c="splash_img" src=""></p></d> <p><img src="" height="0px" width="0px"></p> </d> <d c="modal_hide_marker_content"> <ul c="list-group"></ul> </d> <p c="modal_gpsD_content" c="recipient"></p> <p c="modal_gpsW_content" c="recipient"></p> </d> </d> </d> </d> ')),v=p.length-1;v>=0;v--)n.core.mapDivDocument.insertBefore(p[v],n.core.mapDivDocument.firstChild);for(y=n.core.mapDivDocument.querySelectorAll(".btn.share"),m=0;m<y.length;m++)y[m].addEventListener("click",(function(t){var e=t.target;e.classList.contains("share")||(e=e.parentElement);var r=e.getAttribute("data").split("_"),i=t.target.baseURI;i||(i=window.location.href);var o=i.split("#!"),a=o.length>1?o[1].split("?")[0]:"",s=o[0].split("?"),u=s[0],c=s.length>1?s[1].split("&").filter((function(t){return"pwa"!==t})).join("&"):"";if(c&&(u="".concat(u,"?").concat(c)),"view"===r[1]&&a&&(u="".concat(u,"#!").concat(a)),"cp"===r[0]){var l=document.createElement("textarea");l.textContent=u;var h=document.querySelector("body");if(h.appendChild(l),/iP(hone|[oa]d)/.test(navigator.userAgent)){var p=document.createRange();p.selectNode(l),window.getSelection().addRange(p)}else l.select();document.execCommand("copy"),h.removeChild(l);var f="#___maplat_".concat(r[1],"_toast_").concat(n.html_id_seed);gm.a.show({message:n.core.t("app.copy_toast",{ns:"translation"}),close:!1,pauseOnHover:!1,timeout:1e3,progressBar:!1,target:f})}else if("tw"===r[0]){var d="https://twitter.com/share?url=".concat(encodeURIComponent(u),"&hashtags=Maplat");window.open(d,"_blank","width=650,height=450,menubar=no,toolbar=no,scrollbars=yes")}else if("fb"===r[0]){var g="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(u),"&display=popup&ref=plugin&src=like&kid_directed_site=0");window.open(g,"_blank","width=650,height=450,menubar=no,toolbar=no,scrollbars=yes")}}));if(c){!0===c&&(c="./pwa/".concat(n.core.appid,"_manifest.json")),l||(l="./service-worker.js"),h||(h="./"),(_=document.querySelector("head")).querySelector('link[rel="manifest"]')||_.appendChild(Li('<link rel="manifest" href="'.concat(c,'">'))[0]);try{Gd.registerSW(l,{scope:h})}catch(t){}_.querySelector('link[rel="apple-touch-icon"]')||((b=new XMLHttpRequest).open("GET",c,!0),b.responseType="json",b.onload=function(t){var e=this.response;if(e&&("object"!=mb(e)&&(e=JSON.parse(e)),e.icons))for(var n=0;n<e.icons.length;n++){var i=r(c,e.icons[n].src),o=e.icons[n].sizes,a='<link rel="apple-touch-icon" sizes="'.concat(o,'" href="').concat(i,'">');_.appendChild(Li(a)[0])}},b.send())}n.core.addEventListener("uiPrepare",(function(t){for(var e=function(t){for(var e,n=/\$\{([a-zA-Z0-9_\.\/\-]+)\}/g,r=t;null!=(e=n.exec(t));)r=r.replace(e[0],Y_[e[1]]);return r},r=n.core.mapDivDocument.querySelectorAll("[data-i18n]"),i=0;i<r.length;i++){var o=r[i],u=o.getAttribute("data-i18n");o.innerText=e(n.core.t(u))}r=n.core.mapDivDocument.querySelectorAll("[data-i18n-html]");for(var c=0;c<r.length;c++){var l=r[c],h=l.getAttribute("data-i18n-html");l.innerHTML=e(n.core.t(h))}var p={reverse:!0,tipLabel:n.core.t("control.trans",{ns:"translation"})};if(s&&(p.initialValue=s/100),n.sliderCommon=new ob(p),n.core.appData.controls=[new fb({tipLabel:n.core.t("control.info",{ns:"translation"})}),new cb({tipLabel:n.core.t("control.compass",{ns:"translation"})}),new gb({tipLabel:n.core.t("control.zoom",{ns:"translation"})}),new ub({tipLabel:n.core.t("control.gps",{ns:"translation"})}),new sb({tipLabel:n.core.t("control.home",{ns:"translation"})}),n.sliderCommon,new pb({tipLabel:n.core.t("control.help",{ns:"translation"})})],n.enableShare&&n.core.appData.controls.push(new lb({tipLabel:n.core.t("control.share",{ns:"translation"})})),n.enableBorder&&n.core.appData.controls.push(new hb({tipLabel:n.core.t("control.border",{ns:"translation"})})),n.enableHideMarker&&n.core.appData.controls.push(new db({tipLabel:n.core.t("control.hide_marker",{ns:"translation"})})),n.contextMenu=new dm({eventType:"__dummy__",width:170,defaultItems:!1,items:[]}),n.core.appData.controls.push(n.contextMenu),n.core.mapObject&&n.core.appData.controls.map((function(t){n.core.mapObject.addControl(t)})),n.sliderCommon.on("propertychange",(function(t){"slidervalue"===t.key&&n.core.setTransparency(100*n.sliderCommon.get(t.key))})),a){var f=!1;n.core.appData.splash&&(f=!0);var d=n.core.mapDivDocument.querySelector(".modalBase"),g=new Dt.a.Modal(d,{root:n.core.mapDivDocument});n.core.mapDivDocument.querySelector(".modal_load_title").innerText=n.core.translate(n.core.appData.appName),f&&(n.core.mapDivDocument.querySelector(".splash_img").setAttribute("src","img/".concat(n.core.appData.splash)),n.core.mapDivDocument.querySelector(".splash_div").classList.remove("hide")),n.modalSetting("load"),g.show();var v=f?1e3:200;n.splashPromise=new Promise((function(t){setTimeout((function(){t()}),v)}))}document.querySelector("title").innerHTML=n.core.translate(n.core.appName)})),n.core.addEventListener("sourceLoaded",(function(t){for(var e=t.detail,r=["maroon","deeppink","indigo","olive","royalblue","red","hotpink","green","yellow","navy","saddlebrown","fuchsia","darkslategray","yellowgreen","blue","mediumvioletred","purple","lime","darkorange","teal","crimson","darkviolet","darkolivegreen","steelblue","aqua"],i=[],o=0,a=0;a<e.length;a++){var s=e[a];if(s.envelope){n.appEnvelope&&s.envelope.geometry.coordinates[0].map((function(t){0===i.length?(i[0]=i[2]=t[0],i[1]=i[3]=t[1]):(t[0]<i[0]&&(i[0]=t[0]),t[0]>i[2]&&(i[2]=t[0]),t[1]<i[1]&&(i[1]=t[1]),t[1]>i[3]&&(i[3]=t[1]))})),s.envelopeColor=r[o],(o+=1)===r.length&&(o=0);var u=s.envelope.geometry.coordinates[0];s.envelopeAreaIndex=n.areaIndex(u)}}n.appEnvelope&&console.log("This app's envelope is: ".concat(i)),n.splashPromise&&n.splashPromise.then((function(){var t=n.core.mapDivDocument.querySelector(".modalBase"),e=new Dt.a.Modal(t,{root:n.core.mapDivDocument});n.modalSetting("load"),e.hide()}));for(var c=[],l=[],h=0;h<e.length;h++){var p=e[h];p instanceof Of&&!(p instanceof Td)?c.push(p):l.push(p)}var f=n.baseSwiper=new At(".base-swiper",{slidesPerView:2,spaceBetween:15,breakpoints:{480:{slidesPerView:1.4,spaceBetween:10}},centeredSlides:!0,threshold:2,loop:c.length>=2,navigation:{nextEl:".base-next",prevEl:".base-prev"}});f.on("click",(function(t){if(t.preventDefault(),f.clickedSlide){var e=f.clickedSlide;n.core.changeMap(e.getAttribute("data")),delete n._selectCandidateSources,f.setSlideIndexAsSelected(e.getAttribute("data-swiper-slide-index"))}})),c.length<2&&n.core.mapDivDocument.querySelector(".base-swiper").classList.add("single-map");var d=n.overlaySwiper=new At(".overlay-swiper",{slidesPerView:2,spaceBetween:15,breakpoints:{480:{slidesPerView:1.4,spaceBetween:10}},centeredSlides:!0,threshold:2,loop:l.length>=2,navigation:{nextEl:".overlay-next",prevEl:".overlay-prev"}});d.on("click",(function(t){if(t.preventDefault(),d.clickedSlide){var e=d.clickedSlide;n.core.changeMap(e.getAttribute("data")),delete n._selectCandidateSources,d.setSlideIndexAsSelected(e.getAttribute("data-swiper-slide-index"))}})),l.length<2&&n.core.mapDivDocument.querySelector(".overlay-swiper").classList.add("single-map");for(var g=0;g<c.length;g++){var v=c[g];f.appendSlide('<div class="swiper-slide" data="'.concat(v.mapID,'">')+'<img crossorigin="anonymous" src="'.concat(v.thumbnail,'"><div> ').concat(n.core.translate(v.label),"</div> </div> "))}for(var y=0;y<l.length;y++){var m=l[y],_=m.envelope?" ".concat(m.envelopeColor):"";d.appendSlide('<div class="swiper-slide'.concat(_,'" data="').concat(m.mapID,'">')+'<img crossorigin="anonymous" src="'.concat(m.thumbnail,'"><div> ').concat(n.core.translate(m.label),"</div> </div> "))}f.on,d.on,f.slideToLoop(0),d.slideToLoop(0),n.ellips()})),n.core.addEventListener("mapChanged",(function(t){var e=t.detail;n.baseSwiper.setSlideMapID(e.mapID),n.overlaySwiper.setSlideMapID(e.mapID);var r=e.officialTitle||e.title||e.label;n.core.mapDivDocument.querySelector(".map-title span").innerText=n.core.translate(r),n.checkOverlayID(e.mapID)?n.sliderCommon.setEnable(!0):n.sliderCommon.setEnable(!1);var i=100*n.sliderCommon.get("slidervalue");n.core.mapObject.setTransparency(i),n.updateEnvelope()})),n.core.addEventListener("poi_number",(function(t){t.detail?n.core.mapDivDocument.classList.remove("no_poi"):n.core.mapDivDocument.classList.add("no_poi")})),n.core.addEventListener("outOfMap",(function(t){if(u){n.core.mapDivDocument.querySelector(".modal_title").innerText=n.core.t("app.out_of_map"),n.core.mapDivDocument.querySelector(".modal_gpsD_content").innerText=n.core.t("app.out_of_map_area");var e=n.core.mapDivDocument.querySelector(".modalBase"),r=new Dt.a.Modal(e,{root:n.core.mapDivDocument});n.modalSetting("gpsD"),r.show()}})),n.core.mapDivDocument.addEventListener("mouseout",(function(t){n._selectCandidateSources&&(Object.keys(n._selectCandidateSources).forEach((function(t){return n.core.mapObject.removeEnvelope(n._selectCandidateSources[t])})),delete n._selectCandidateSources)})),n.core.addEventListener("pointerMoveOnMapXy",function(){var t=bb(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.core.stateBuffer.showBorder){t.next=3;break}return n._selectCandidateSources&&(Object.keys(n._selectCandidateSources).forEach((function(t){return n.core.mapObject.removeEnvelope(n._selectCandidateSources[t])})),delete n._selectCandidateSources),t.abrupt("return");case 3:return t.next=5,n.xyToMapIDs(e.detail);case 5:r=t.sent,n.showFillEnvelope(r);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.core.addEventListener("clickMapXy",function(){var t=bb(regeneratorRuntime.mark((function t(e){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.core.stateBuffer.showBorder){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,n.xyToMapIDs(e.detail);case 4:(r=t.sent).length>0&&(x(r.map((function(t){var e=n.core.cacheHash[t],o=e.envelopeColor,a='<?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="10px" height="10px" viewBox="0 0 10 10" enable-background="new 0 0 10 10" xml:space="preserve"> <polygon x="0" y="0" points="2,2 2,8 8,8 8,2 2,2" stroke="'.concat(o,'" fill="').concat(o,'" stroke-width="2" style="fill-opacity: .25;"></polygon></svg>');return{icon:a="data:image/svg+xml,".concat(encodeURIComponent(a)),text:n.core.translate(e.title),callback:function(){var e=vb(n.core.mapDivDocument.querySelectorAll(".ol-ctx-menu-container ul li"));if(e.forEach((function(t){return t.classList.remove("selected")})),!i||i!==t){i=t,n.showFillEnvelope([t]),n.overlaySwiper.slideToMapID(t);var o=r.indexOf(t);return o>-1&&e[o].classList.add("selected"),!0}delete n._selectCandidateSources,n.core.changeMap(t)},mouseOnTask:function(e){n.isTouch||(i=t,n.showFillEnvelope([t]),n.overlaySwiper.slideToMapID(t))},mouseOutTask:function(t){n.isTouch||(i=void 0,n.showFillEnvelope([]))}}}))),n.showFillEnvelope(r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.core.addEventListener("clickMarkers",(function(t){var e=t.detail;1===e.length?n.handleMarkerAction(e[0]):x(e.map((function(t){return{icon:t.icon||Y_["defaultpin.png"],text:n.core.translate(t.name),callback:function(){n.handleMarkerAction(t)}}})))})),e.stateUrl&&n.core.addEventListener("updateState",(function(t){var e=t.detail;if(e.position&&e.mapID){var r="s:".concat(e.mapID);e.backgroundID&&(r="".concat(r,"/b:").concat(e.backgroundID)),e.transparency&&(r="".concat(r,"/t:").concat(e.transparency)),r="".concat(r,"/x:").concat(e.position.x,"/y:").concat(e.position.y),r="".concat(r,"/z:").concat(e.position.zoom),e.position.rotation&&(r="".concat(r,"/r:").concat(e.position.rotation)),e.showBorder&&(r="".concat(r,"/sb:").concat(e.showBorder)),e.hideMarker&&(r="".concat(r,"/hm:").concat(e.hideMarker)),e.hideLayer&&(r="".concat(r,"/hl:").concat(e.hideLayer)),n.pathThatSet=r,Object(Nt.a)(r)}})),n.waitReady=n.core.waitReady.then((function(){var t,r,i=!!e.fake&&n.core.appData.fake_gps,o=!!e.fake&&n.core.appData.fake_center,a=!!e.fake&&n.core.appData.fake_radius,s=!1,u=null;function c(t){if(t&&t.error){if(n.core.currentPosition=null,"gps_out"===t.error&&s){s=!1;var e=n.core.mapDivDocument.querySelector(".modalBase"),r=new Dt.a.Modal(e,{root:n.core.mapDivDocument});n.core.mapDivDocument.querySelector(".modal_title").innerText=n.core.t("app.out_of_map"),n.core.mapDivDocument.querySelector(".modal_gpsD_content").innerText=n.core.t("app.out_of_map_desc"),n.modalSetting("gpsD"),r.show()}}else n.core.currentPosition=t;if(s){s=!1;var i=n.core.mapDivDocument.querySelector(".modalBase");new Dt.a.Modal(i,{root:n.core.mapDivDocument}).hide()}}if(n.core.mapObject.on("gps_request",(function(){u="gps_request";var t=[new Promise((function(t){"gps_request"!==u?t(u):u=t}))];s=!0;var e=n.core.mapDivDocument.querySelector(".modalBase"),r=new Dt.a.Modal(e,{root:n.core.mapDivDocument});n.modalSetting("gpsW"),r.show(),t.push(new Promise((function(t){setTimeout(t,200)}))),Promise.all(t).then((function(t){c(t[0])}))})),n.core.mapObject.on("gps_result",(function(t){"gps_request"===u?u=t.frameState:u?(u(t.frameState),u=null):s||c(t.frameState)})),n.core.mapObject.on("click_control",function(){var e=bb(regeneratorRuntime.mark((function e(i){var o,a,s,u,c,l,h,p,f,d,g,v,y,m,_,b,x,w,E,S,C,T,I,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.frameState.control,a=n.core.mapDivDocument.querySelector(".modalBase"),s=new Dt.a.Modal(a,{root:n.core.mapDivDocument}),"copyright"!==o){e.next=34;break}if(u=n.core.getMapMeta(),Ii.reduce((function(t,e){return"title"===e?t:u[e]||t}),!1)){e.next=7;break}return e.abrupt("return");case 7:if(n.core.mapDivDocument.querySelector(".modal_title").innerText=n.core.translate(u.officialTitle||u.title),Ii.map((function(t){"title"!==t&&"officialTitle"!==t&&(u[t]&&""!==u[t]?(n.core.mapDivDocument.querySelector(".".concat(t,"_div")).classList.remove("hide"),n.core.mapDivDocument.querySelector(".".concat(t,"_dd")).innerHTML="license"===t||"dataLicense"===t?'<img src="'.concat(Y_["".concat(u[t].toLowerCase().replace(/ /g,"_"),".png")],'">'):n.core.translate(u[t])):n.core.mapDivDocument.querySelector(".".concat(t,"_div")).classList.add("hide"))})),c=n.core.mapDivDocument.querySelector(".cache_delete"),l=n.core.mapDivDocument.querySelector(".cache_fetch"),h=function(t){var e=t.size||0,r="Bytes";-1!==e&&(e>1024&&(e=Math.round(10*e/1024)/10,r="KBytes"),e>1024&&(e=Math.round(10*e/1024)/10,r="MBytes"),e>1024&&(e=Math.round(10*e/1024)/10,r="GBytes"));var i=-1===e?n.core.t("html.cache_processing"):"".concat(e," ").concat(r);i=t.total?"".concat(i," (").concat(t.count," / ").concat(t.total," tiles [").concat(t.percent,"%])"):"".concat(i," (").concat(t.count," tiles)"),n.core.mapDivDocument.querySelector(".cache_size").innerHTML=i,0!=t.count?c.removeAttribute("disabled"):c.setAttribute("disabled",!0),t.total?(l.classList.remove("hide"),t.total===t.count?l.setAttribute("disabled",!0):l.removeAttribute("disabled")):l.classList.add("hide")},n.modalSetting("map"),p=n.core.mapDivDocument.querySelector(".modal_cache_content"),!n.core.getMapCacheEnable(u.mapID)){e.next=30;break}return p.classList.remove("hide"),f=function(){var t=bb(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=n.core.getMapMeta(),t.next=4,n.core.clearMapTileCacheAsync(r.mapID);case 4:return t.t0=h,t.next=7,n.core.getMapTileCacheStatsAsync(r.mapID);case 7:t.t1=t.sent,(0,t.t0)(t.t1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=bb(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&e.preventDefault(),r=n.core.getMapMeta(),t.next=4,n.core.cancelMapTileCacheAsync(r.mapID);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=bb(regeneratorRuntime.mark((function t(e){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.core.mapDivDocument.querySelector(".close"),e.preventDefault(),l.innerHTML=n.core.t("html.cache_cancel"),l.removeEventListener("click",g),l.addEventListener("click",d),r.classList.add("temp_no_close"),i=n.core.getMapMeta(),t.next=9,n.core.fetchAllMapTileCacheAsync(i.mapID,function(){var t=bb(regeneratorRuntime.mark((function t(e,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next="proceed"===t.t0?3:"canceled"===t.t0||"stop"===t.t0||"finish"===t.t0?5:14;break;case 3:return h({count:o.processed,total:o.total,percent:o.percent,size:-1}),t.abrupt("return");case 5:return l.innerHTML=n.core.t("html.cache_fetch"),l.removeEventListener("click",d),l.addEventListener("click",g),r.classList.remove("temp_no_close"),t.t1=h,t.next=12,n.core.getMapTileCacheStatsAsync(i.mapID);case 12:t.t2=t.sent,(0,t.t1)(t.t2);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function t(e){c.removeEventListener("click",f,!1),l.removeEventListener("click",g,!1),l.removeEventListener("click",d,!1),a.removeEventListener("hide.bs.modal",t,!1)},a.addEventListener("hide.bs.modal",v,!1),e.t0=h,e.next=25,n.core.getMapTileCacheStatsAsync(u.mapID);case 25:e.t1=e.sent,(0,e.t0)(e.t1),setTimeout((function(){c.addEventListener("click",f,!1),l.addEventListener("click",g,!1),l.innerHTML=n.core.t("html.cache_fetch")}),200),e.next=31;break;case 30:p.classList.add("hide");case 31:s.show(),e.next=35;break;case 34:"help"===o?(n.modalSetting("help"),s.show()):"share"===o?(n.modalSetting("share"),y=location.href,m=y.split("#!"),_=m.length>1?m[1].split("?")[0]:"",b=m[0].split("?"),x=b[0],(w=b.length>1?b[1].split("&").filter((function(t){return"pwa"!==t})).join("&"):"")&&(x="".concat(x,"?").concat(w)),E=x,_&&(E="".concat(E,"#!").concat(_)),t?t.makeCode(x):t=new vm(n.core.mapDivDocument.querySelector(".qr_app"),{text:x,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:vm.CorrectLevel.H}),r?r.makeCode(E):r=new vm(n.core.mapDivDocument.querySelector(".qr_view"),{text:E,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:vm.CorrectLevel.H}),s.show()):"border"===o?(S=!n.core.stateBuffer.showBorder,n.setShowBorder(S)):"hideMarker"===o?(C=!n.core.stateBuffer.hideMarker,n.setHideMarker(C)):"hideLayer"===o&&(n.modalSetting("hide_marker"),T=n.core.listPoiLayers(!1,!0),I=n.core.mapDivDocument.querySelector("ul.list-group"),O=n.core.mapDivDocument.querySelector(".modalBase"),I.innerHTML="",T.map((function(t,e){for(var r=t.icon||Y_["defaultpin.png"],i=n.core.translate(t.name),o=!t.hide,a=t.namespaceID,s=Li('<li c="list-group-item"> <d c="row"> <d c="col-sm-1"><img c="markerlist" src="'.concat(r,'"></d> <d c="col-sm-9">').concat(i,'</d> <d c="col-sm-2"> <input type="checkbox" c="markerlist" data="').concat(a,'" id="___maplat_marker_').concat(e,"_").concat(n.html_id_seed,'"').concat(o?" checked":"",'/> <label c="check" for="___maplat_marker_').concat(e,"_").concat(n.html_id_seed,'"><d> </d> </label> </d> </d> </li>')),u=0;u<s.length;u++)I.appendChild(s[u]);var c=n.core.mapDivDocument.querySelector("#___maplat_marker_".concat(e,"_").concat(n.html_id_seed)),l=function(t){var e=t.target.getAttribute("data");t.target.checked?n.core.showPoiLayer(e):n.core.hidePoiLayer(e)};O.addEventListener("hide.bs.modal",(function t(e){O.removeEventListener("hide.bs.modal",t,!1),c.removeEventListener("change",l,!1)}),!1),c.addEventListener("change",l,!1)})),s.show());case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i){var l=Li(Object(ym.a)(n.core.t("app.fake_explanation"),n.core.translate(o),a))[0];n.core.mapDivDocument.querySelector(".modal_gpsW_content").appendChild(l)}else{var h=Li(n.core.t("app.acquiring_gps_desc"))[0];n.core.mapDivDocument.querySelector(".modal_gpsW_content").appendChild(h)}n.waitReadyBridge&&(n.waitReadyBridge(),delete n.waitReadyBridge)}));case 41:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"modalSetting",value:function(t){var e=this.core.mapDivDocument.querySelector(".modalBase");["poi","map","load","gpsW","gpsD","help","share","hide_marker"].map((function(n){var r="modal_".concat(n);t===n?e.classList.add(r):e.classList.remove(r)}))}},{key:"handleMarkerAction",value:function(t){var e=this;if(t.directgo){var n=!1,r="";return"string"==typeof t.directgo?r=t.directgo:(r=t.directgo.href,n=t.directgo.blank||!1),void(n?window.open(r,"_blank"):window.location.href=r)}this.core.mapDivDocument.querySelector(".modal_title").innerText=this.core.translate(t.name);var i=this.core.mapDivDocument.querySelector(".modalBase");if(t.url||t.html){this.core.mapDivDocument.querySelector(".poi_web").classList.remove("hide"),this.core.mapDivDocument.querySelector(".poi_data").classList.add("hide");var o=this.core.mapDivDocument.querySelector(".poi_iframe");t.html?(o.addEventListener("load",(function t(e){e.currentTarget.removeEventListener(e.type,t);var n=Li('<style type="text/css">html, body { height: 100vh; } img { width: 100vw; }</style>');console.log(n),o.contentDocument.head.appendChild(n[0])})),o.removeAttribute("src"),o.setAttribute("srcdoc",this.core.translate(t.html))):(o.removeAttribute("srcdoc"),o.setAttribute("src",this.core.translate(t.url)))}else{this.core.mapDivDocument.querySelector(".poi_data").classList.remove("hide"),this.core.mapDivDocument.querySelector(".poi_web").classList.add("hide");var a=[];t.image&&""!==t.image?(Array.isArray(t.image)?t.image:[t.image]).forEach((function(t){"string"==typeof t&&(t={src:t});var n=e.resolveRelativeLink(t.src,"img"),r='<a target="_blank" href="'.concat(n,'"><img src="').concat(n,'"></a>');t.desc&&(r="".concat(r,"<div>").concat(t.desc,"</div>")),a.push('<div class="swiper-slide">'.concat(r,"</div>"))})):this.disableNoimage||a.push('<div class="swiper-slide"><img src="'.concat(Y_["no_image.png"],'"></div>')),i.addEventListener("shown.bs.modal",(function t(n){i.removeEventListener("shown.bs.modal",t,!1);var r=e.core.mapDivDocument.querySelector(".swiper-container.poi_img_swiper");0===a.length?r.classList.add("hide"):(r.classList.remove("hide"),e.poiSwiper||(e.poiSwiper=new At(".swiper-container.poi_img_swiper",{lazy:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".poi-img-next",prevEl:".poi-img-prev"}})),a.forEach((function(t){return e.poiSwiper.appendSlide(t)})))}),!1),this.core.mapDivDocument.querySelector(".poi_address").innerText=this.core.translate(t.address),this.core.mapDivDocument.querySelector(".poi_desc").innerHTML=this.core.translate(t.desc).replace(/\n/g,"<br>")}var s=new Dt.a.Modal(i,{root:this.core.mapDivDocument});this.core.selectMarker(t.namespaceID),i.addEventListener("hide.bs.modal",(function t(n){i.removeEventListener("hide.bs.modal",t,!1),e.core.unselectMarker()}),!1),i.addEventListener("hidden.bs.modal",(function t(n){i.removeEventListener("hidden.bs.modal",t,!1),e.poiSwiper&&(e.poiSwiper.removeAllSlides(),e.poiSwiper=void 0)}),!1),this.modalSetting("poi"),s.show()}},{key:"showFillEnvelope",value:function(t){var e=this;t.length>0?(e._selectCandidateSources||(e._selectCandidateSources={}),Object.keys(e._selectCandidateSources).forEach((function(n){var r=t.indexOf(n);r<0?(e.core.mapObject.removeEnvelope(e._selectCandidateSources[n]),delete e._selectCandidateSources[n]):t.splice(r,1)})),t.forEach((function(t){if(t!==e.core.from.mapID){var n=e.core.cacheHash[t],r=n.envelope.geometry.coordinates[0].map((function(t){return e.core.from.merc2XyAsync(t)})),i=uc(n.envelopeColor);(i=i.slice())[3]=.2,Promise.all(r).then((function(n){e._selectCandidateSources[t]=e.core.mapObject.setFillEnvelope(n,null,{color:i})}))}}))):e._selectCandidateSources&&(Object.keys(e._selectCandidateSources).forEach((function(t){return e.core.mapObject.removeEnvelope(e._selectCandidateSources[t])})),delete e._selectCandidateSources)}},{key:"xyToMapIDs",value:(o=bb(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,u,c,l,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:10,r=this,i=Object(gi.f)(e),o=r.core.mapObject,a=o.getSize(),s=[[0,0],[a[0],0],a,[0,a[1]],[0,0]],u=s.map((function(t){return o.getCoordinateFromPixel(t)})),t.next=9,r.core.from instanceof Of?Promise.resolve(u):Promise.all(u.map((function(t){return r.core.from.xy2MercAsync(t)})));case 9:return c=t.sent,l=r.areaIndex(c),t.abrupt("return",Promise.all(Object.keys(r.core.cacheHash).filter((function(t){return r.core.cacheHash[t].envelope})).map((function(t){var e=r.core.cacheHash[t];return Promise.all([Promise.resolve(e),Promise.all(e.envelope.geometry.coordinates[0].map((function(t){return r.core.from.merc2XyAsync(t)})))])}))).then((function(t){var e=t.reduce((function(t,e){var n=e[0],o=e[1];if(n.mapID!==r.core.from.mapID){var a=Object(gi.g)([o]);hf(i,a)&&t.push(n)}return t}),[]).filter((function(t){return t.envelopeAreaIndex/l<n})).sort((function(t,e){return t.envelopeAreaIndex-e.envelopeAreaIndex})).map((function(t){return t.mapID}));return console.log(e),e})));case 12:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"setShowBorder",value:function(t){if(this.core.requestUpdateState({showBorder:t?1:0}),this.updateEnvelope(),t?this.core.mapDivDocument.classList.add("show-border"):this.core.mapDivDocument.classList.remove("show-border"),this.core.restoreSession){var e=Math.floor((new Date).getTime()/1e3);localStorage.setItem("epoch",e),localStorage.setItem("showBorder",t?1:0)}}},{key:"setHideMarker",value:function(t){t?(this.core.hideAllMarkers(),this.core.mapDivDocument.classList.add("hide-marker")):(this.core.showAllMarkers(),this.core.mapDivDocument.classList.remove("hide-marker"))}},{key:"updateEnvelope",value:function(){var t=this;t.core.mapObject&&(t.core.mapObject.resetEnvelope(),delete t._selectCandidateSources,t.core.stateBuffer.showBorder&&Object.keys(t.core.cacheHash).filter((function(e){return t.core.cacheHash[e].envelope})).map((function(e){var n=t.core.cacheHash[e],r=e===t.core.from.mapID&&n instanceof yd?[[0,0],[n.width,0],[n.width,n.height],[0,n.height],[0,0]].map((function(t){return Promise.resolve(n.xy2HistMapCoords(t))})):n.envelope.geometry.coordinates[0].map((function(e){return t.core.from.merc2XyAsync(e)}));Promise.all(r).then((function(e){t.core.mapObject.setEnvelope(e,{color:n.envelopeColor,width:2,lineDash:[6,6]})}))})))}},{key:"resolveRelativeLink",value:function(t,e){return e||(e="."),t.match(/\//)?t:"".concat(e,"/").concat(t)}},{key:"checkOverlayID",value:function(t){for(var e=this.overlaySwiper.$el[0].querySelectorAll(".swiper-slide"),n=0;n<e.length;n++)if(e[n].getAttribute("data")===t)return!0;return!1}},{key:"areaIndex",value:function(t){return.5*Math.abs([0,1,2,3].reduce((function(e,n,r){var i=t[r],o=t[r+1];return e+(i[0]-o[0])*(i[1]+o[1])}),0))}},{key:"ellips",value:function(){for(var t=function(t){for(var e=t.innerText.split(""),n="",r=0;r<e.length;r++)n+="<span>".concat(e[r],"</span>");n+='<span class="omit-mark">'.concat("…","</span>"),t.innerHTML=n},e=function(t){var e,n=t.querySelectorAll("span"),r=t.querySelector(".omit-mark"),i=0;n[0].style.display="";for(var o=1;o<n.length;o++)n[o].style.display="none";r.style.display="";for(var a=t.offsetHeight,s=!1,u=1;u<n.length-1;u++){if(n[u].style.display="",t.offsetHeight>a&&(s?(a=t.offsetHeight,i++):(s=!0,t.classList.add("minimize"))),i>=2){e=u-2;break}if(u>=n.length-2)return void(r.style.display="none")}for(var c=e;c<n.length-1;c++)n[c].style.display="none"},n=this.core.mapDivDocument.querySelectorAll(".swiper-slide div"),r=0;r<n.length;r++){var i=n[r];t(i),e(i)}}},{key:"remove",value:function(){this.core.remove(),delete this.core}}])&&xb(e.prototype,n),i&&xb(e,i),u}(kt.a);(window.Maplat={}).createObject=function(t){return new Promise((function(e){var n=new Ib(t);n.waitReady.then((function(){e(n)}))}))}}]);
//# sourceMappingURL=maplat.js.map