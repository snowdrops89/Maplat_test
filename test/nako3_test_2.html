<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Maplat なでしこプラグインのテスト</title>

  <!-- Maplatを使うために必要なCSS -->
  <link rel="stylesheet" href="https://unpkg.com/@maplat/ui@0.9.0/dist/assets/maplat.css">
</head>
<body>
<!-- なでしこのプログラム -->
<script type="なでしこ">
#-----------------------------------------------------------------------
＃----- 設定 --------------------
＃＃--- HTML作成 -----
DOM親要素にMaplatHTML&「<div id="ボタン"></div>」をHTML設定。

＃＃--- ボタン作成 -----
「#ボタン」にDOM親要素設定。
「レイヤー切替:」のラベル作成。
「全レイヤー表示」のボタン作成し、全レイヤー表示ボタンに代入。
「観光レイヤー」のボタン作成し、観光ボタンに代入。
「史跡レイヤー」のボタン作成し、史跡ボタンに代入。
「全レイヤー非表示」のボタン作成し、全レイヤー非表示ボタンに代入。
「描画:」のラベル作成。
「線引く」のボタン作成し、線引ボタンに代入。
「面塗る」のボタン作成し、面塗ボタンに代入。
「線消す」のボタン作成し、線消ボタンに代入。
「透過度:」のラベル作成。
「フェードイン」のボタン作成し、透過ボタンに代入。
改行作成。
「マーカー関連:」のラベル作成。
「全マーカー表示」のボタン作成し、全マーカー表示ボタンに代入。
「全マーカー非表示」のボタン作成し、全マーカー非表示ボタンに代入。
「マーカー選択」のボタン作成し、選択ボタンに代入。
「マーカー選択解除」のボタン作成し、選択解除ボタンに代入。
「マーカークリア(史跡)」のボタン作成し、クリアボタンに代入。
「マーカー削除(タワー)」のボタン作成し、削除ボタンに代入。
「マーカー追加(タワー)」のボタン作成し、マーカー追加ボタンに代入。
「レイヤー追加(五稜郭ノ図千分ノ一へ)」のボタン作成し、レイヤー追加ボタンに代入。
「マーカー更新(移動＆マーカー画像変更)」のボタン作成し、更新ボタンに代入。
「ビューポイント:」のラベル作成。
「地図経緯度移動」のボタン作成し、経緯度移動ボタンに代入。
「古地図ズーム」のボタン作成し、古地図ズームボタンに代入。
「地図ズーム」のボタン作成し、地図ズームボタンに代入。
「古地図回転」のボタン作成し、古地図回転ボタンに代入。
「地図回転」のボタン作成し、地図回転ボタンに代入。

#---CSS設定 -----
「#mainview」に{
  "position": "absolute",
  "top": "0%",
  "bottom": "15%",
  "左": "0%",
  "右": "0%"
}をDOMスタイル一括設定。

「#ボタン」に{
  "position": "absolute",
  "top": "85%",
  "bottom": "0%",
  "左": "0%",
  "右": "0%"
}をDOMスタイル一括設定。

「#ボタン span」に{
  "マージン": "10px"
}をDOMスタイル一括設定。

「#ボタン button」に{
  "マージン": "1px 2px"
}をDOMスタイル一括設定。

＃＃--- マーカー設定 -----
マーカー青＝「pois/img/blue_marker.png」
マーカー赤＝「pois/img/red_marker.png」

＃----- メイン -------------------
＃＃--- UIボタンの追加 ------
Maplatマーカー非表示ボタンはオン。
Maplat地図境界表示ボタンはオン。
Maplat共有ボタンはオン。

＃＃--- Maplat作成 ------
「nako3_test」のMaplat作成した時には、
　３で古地図ズーム。
　20で地図透過度設定。

＃＃＃--- イベント ------
　マーカークリックした時には、
//　　対象のマーカー選択。
　　対象詳細をJSONエンコードして言う。
　ここまで
　地図クリックした時には、
//　　マーカー選択解除。
　　対象を言う。
//　　対象詳細をJSONエンコードして言う。
　ここまで

＃＃＃--- レイヤー ------
＃●レイヤー表示（showPoiLayer）
＃●レイヤー隠す（hidePoiLayer）
// 表示するマーカーをレイヤー毎に切り替え
　史跡ボタンをクリックした時には、
　　「史跡」のレイヤー表示。「観光」のレイヤー隠す。
　ここまで。
　観光ボタンをクリックした時には、
　　「観光」のレイヤー表示。「史跡」のレイヤー隠す。
　ここまで。
　全レイヤー表示ボタンをクリックした時には、
　　「史跡」のレイヤー表示。「観光」のレイヤー表示。
　ここまで。
　全レイヤー非表示ボタンをクリックした時には、
　　「史跡」のレイヤー隠す。「観光」のレイヤー隠す。
　ここまで。

＃＃＃--- マーカー関連 ------
＃●全マーカー表示（showAllMarkers）
　全マーカー表示ボタンをクリックした時には、
　　全マーカー表示。
　ここまで。
＃●全マーカー非表示（hideAllMarkers）
　全マーカー非表示ボタンをクリックした時には、
　　全マーカー隠す。
　ここまで。

＃●マーカー選択（selectMarker）
　選択ボタンをクリックした時には、
　　「タワー」のマーカー選択。
　ここまで。
＃●マーカー選択解除（unselectMarker）
　選択解除ボタンをクリックした時には、
　　「タワー」のマーカー選択解除。
　ここまで。

＃●マーカークリア（clearMarker）
　クリアボタンをクリックした時には、
　　「史跡」のマーカークリア。
　ここまで。
＃●マーカー削除（removeMarker）
　削除ボタンをクリックした時には、
　　「タワー」のマーカー削除。
　ここまで。

＃●マーカー追加（addMarker）
　マーカー追加ボタンをクリックした時には、
　　タワーとは変数＝{
        "id": "タワー",
        "lnglat":[140.75395646590007,41.79463859482169],
        "name": "五稜郭タワー",
        "url": "https://www.goryokaku-tower.co.jp/"
　　}
　　タワーを「観光」へマーカー追加。
　ここまで。

＃●レイヤー追加（addPoiLayer）
//iconDataは省略可
　レイヤー追加ボタンをクリックした時には、
　　iconDataとは変数＝{
        "icon": マーカー青,
        "selectedIcon": マーカー赤
    }
　　iconDataで「goryokaku2#新規」をレイヤー追加。
　　二ノ橋とは変数＝{
        "id": "二ノ橋",
        "lnglat":[140.75575537303416,41.79561542967801],
        "name": "二ノ橋",
        "html": "鯉がいっぱいいます！",
        "icon": マーカー赤
　　}
　　二ノ橋を「goryokaku2#新規」へマーカー追加。
　ここまで。

＃●マーカー更新（updateMarker）
//マーカーの移動とマーカー画像変更
　更新ボタンをクリックした時には、
　　移動先とは変数＝{
      "lnglat":[140.75553148088343,41.79538581110293],
      "icon":マーカー赤
　　}
　　「箱館奉行所」を移動先でマーカー更新。
　ここまで

＃＃＃--- 描画 -----
＃●線引く（addVector）
　線引ボタンをクリックした時には、
　　Maplat線色は「hsla(0,100%,50%,0.5)」。Maplat線太さは10。
　　座標とは変数＝[
        [140.75509899875652,41.79486069621012],
        [140.7560612947552,41.79512929859726],
        [140.75563781096838,41.795486705576906],
        [140.75505015022142,41.79561680945611],
        [140.75509899875652,41.79486069621012]
      ]
　　座標で線引く。
　ここまで。
＃●面塗る（addVector）
　面塗ボタンをクリックした時には、
　　Maplat線太さは5。
　　Maplat線色は「rgba(0,0,180,1)」。Maplat塗色は「rgba(0,0,180,.4)」
　　A=[
　　　[140.7572693355842,41.79382830535843],
　　　[140.7528729827382,41.79586236276873],
　　　[140.75477954831223,41.798871056748],
　　　[140.7588366755341,41.799171893966246],
　　　[140.76120937453564,41.79618991489201]
　　]
　　B=[
　　　[140.75813229474633,41.79593817699549],
　　　[140.75555383006022,41.7972689365246],
　　　[140.75842109423178,41.79743187779735]
　　]
　　//　[B,A]でポリゴン描画
　　AとBで面塗る
　ここまで。
＃●線消す
　線消ボタンをクリックした時には、
　　線消す。
　ここまで。

＃＃＃--- 透過度 -----
＃●地図透過度設定（setTransparency）
　透過度は100。
　透過ボタンをクリックした時には、
　　0.01秒タイマー開始した時には(t)
　　　透過度に地図透過度設定。
　　　透過度＝透過度-1。
　　　もし、透過度＜０ならば、
　　　　透過度＝100。tのタイマー停止。
　　　ここまで。
　　ここまで
　ここまで。

＃＃＃--- ビューポイント -----
　経緯度移動ボタンをクリックした時には、
　　[140.757244862515,41.79373373647957]へ地図経緯度移動。
　ここまで。
　古地図ズームボタンをクリックした時には、
　　５で古地図ズーム。
　ここまで。
　地図ズームボタンをクリックした時には、
　　17で地図ズーム。
　ここまで。
　古地図回転ボタンをクリックした時には、
　　90で古地図回転。
　ここまで。
　地図回転ボタンをクリックした時には、
　　90で地図回転。
　ここまで。

＃＃--- Maplatここまで -----
#-----------------------------------------------------------------------
</script>
<!-- Maplatを使うために必要なスクリプト -->
<!--<script src="https://unpkg.com/@maplat/ui@0.9.0/dist/assets/maplat.js"></script> -->
<script src="assets/maplat.js"></script>
<!-- なでしこを使うために必要なスクリプト -->
<script type="text/javascript" src="https://nadesi.com/v3/cdn.php?v=3.1.24&f=release/wnako3.js&run"></script>
<!-- なでしこでMaplatを使うために必要なプラグイン -->
<script type="text/javascript" src="Plugin_Maplat.js"></script>
</body>
</html>